(self.webpackChunkmgx=self.webpackChunkmgx||[]).push([[179],{930:(Js,Nc,hf)=>{"use strict";function Sn(n){return"function"==typeof n}function B(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Vg=B(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ph(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class ls{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Sn(i))try{i()}catch(s){e=s instanceof Vg?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{df(s)}catch(o){e=e??[],o instanceof Vg?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Vg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)df(e);else{if(e instanceof ls){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ph(t,e)}remove(e){const{_finalizers:t}=this;t&&ph(t,e),e instanceof ls&&e._removeParent(this)}}ls.EMPTY=(()=>{const n=new ls;return n.closed=!0,n})();const cs=ls.EMPTY;function tw(n){return n instanceof ls||n&&"closed"in n&&Sn(n.remove)&&Sn(n.add)&&Sn(n.unsubscribe)}function df(n){Sn(n)?n():n.unsubscribe()}const Sl={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},El={setTimeout(n,e,...t){const{delegate:i}=El;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=El;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ea(n){El.setTimeout(()=>{const{onUnhandledError:e}=Sl;if(!e)throw n;e(n)})}function ff(){}const Fc=jr("C",void 0,void 0);function jr(n,e,t){return{kind:n,value:e,error:t}}let us=null;function mh(n){if(Sl.useDeprecatedSynchronousErrorHandling){const e=!us;if(e&&(us={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=us;if(us=null,t)throw i}}else n()}class Fa extends ls{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,tw(e)&&e.add(this)):this.destination=yE}static create(e,t,i){return new na(e,t,i)}next(e){this.isStopped?zg(function pf(n){return jr("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?zg(function kc(n){return jr("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zg(Fc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const To=Function.prototype.bind;function ka(n,e){return To.call(n,e)}class ta{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Uc(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Uc(i)}else Uc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Uc(t)}}}class na extends Fa{constructor(e,t,i){let r;if(super(),Sn(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Sl.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ka(e.next,s),error:e.error&&ka(e.error,s),complete:e.complete&&ka(e.complete,s)}):r=e}this.destination=new ta(r)}}function Uc(n){Sl.useDeprecatedSynchronousErrorHandling?function Mo(n){Sl.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=n)}(n):ea(n)}function zg(n,e){const{onStoppedNotification:t}=Sl;t&&El.setTimeout(()=>t(n,e))}const yE={closed:!0,next:ff,error:function _E(n){throw n},complete:ff},Hg="function"==typeof Symbol&&Symbol.observable||"@@observable";function ia(n){return n}function nw(n){return 0===n.length?ia:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Pn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function mf(n){return n&&n instanceof Fa||function wE(n){return n&&Sn(n.next)&&Sn(n.error)&&Sn(n.complete)}(n)&&tw(n)}(t)?t:new na(t,i,r);return mh(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=ra(i))((r,s)=>{const o=new na({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Hg](){return this}pipe(...t){return nw(t)(this)}toPromise(t){return new(t=ra(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function ra(n){var e;return null!==(e=n??Sl.Promise)&&void 0!==e?e:Promise}const Ao=B(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let hs=(()=>{class n extends Pn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new iw(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Ao}next(t){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){mh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?cs:(this.currentObservers=null,s.push(t),new ls(()=>{this.currentObservers=null,ph(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Pn;return t.source=this,t}}return n.create=(e,t)=>new iw(e,t),n})();class iw extends hs{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:cs}}function rw(n){return Sn(n?.lift)}function Zn(n){return e=>{if(rw(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function oi(n,e,t,i,r){return new bE(n,e,t,i,r)}class bE extends Fa{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ln(n,e){return Zn((t,i)=>{let r=0;t.subscribe(oi(i,s=>{i.next(n.call(e,s,r++))}))})}function Do(n){return this instanceof Do?(this.v=n,this):new Do(n)}function wf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Gg(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const lw=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function cw(n){return Sn(n?.then)}function uw(n){return Sn(n[Hg])}function Zg(n){return Symbol.asyncIterator&&Sn(n?.[Symbol.asyncIterator])}function hw(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const dw=function DE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function bf(n){return Sn(n?.[dw])}function fw(n){return function vf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(f){i[f]&&(r[f]=function(m){return new Promise(function(g,_){s.push([f,m,g,_])>1||a(f,m)})})}function a(f,m){try{!function l(f){f.value instanceof Do?Promise.resolve(f.value.v).then(c,u):d(s[0][2],f)}(i[f](m))}catch(g){d(s[0][3],g)}}function c(f){a("next",f)}function u(f){a("throw",f)}function d(f,m){f(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Do(t.read());if(r)return yield Do(void 0);yield yield Do(i)}}finally{t.releaseLock()}})}function xf(n){return Sn(n?.getReader)}function ds(n){if(n instanceof Pn)return n;if(null!=n){if(uw(n))return function IE(n){return new Pn(e=>{const t=n[Hg]();if(Sn(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(lw(n))return function RE(n){return new Pn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(cw(n))return function PE(n){return new Pn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ea)})}(n);if(Zg(n))return pw(n);if(bf(n))return function OE(n){return new Pn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(xf(n))return function LE(n){return pw(fw(n))}(n)}throw hw(n)}function pw(n){return new Pn(e=>{(function NE(n,e){var t,i,r,s;return function Vc(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=wf(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Io(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function lr(n,e,t=1/0){return Sn(e)?lr((i,r)=>ln((s,o)=>e(i,s,r,o))(ds(n(i,r))),t):("number"==typeof e&&(t=e),Zn((i,r)=>function FE(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,d=!1;const f=()=>{d&&!l.length&&!c&&e.complete()},m=_=>c<i?g(_):l.push(_),g=_=>{s&&e.next(_),c++;let v=!1;ds(t(_,u++)).subscribe(oi(e,y=>{r?.(y),s?m(y):e.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<i;){const y=l.shift();o?Io(e,o,()=>g(y)):g(y)}f()}catch(y){e.error(y)}}))};return n.subscribe(oi(e,m,()=>{d=!0,f()})),()=>{a?.()}}(i,r,n,t)))}function Gc(n=1/0){return lr(ia,n)}const Ro=new Pn(n=>n.complete());function Kg(n){return n[n.length-1]}function _h(n){return Sn(Kg(n))?n.pop():void 0}function yh(n){return function Cf(n){return n&&Sn(n.schedule)}(Kg(n))?n.pop():void 0}function mw(n,e=0){return Zn((t,i)=>{t.subscribe(oi(i,r=>Io(i,n,()=>i.next(r),e),()=>Io(i,n,()=>i.complete(),e),r=>Io(i,n,()=>i.error(r),e)))})}function Jg(n,e=0){return Zn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function yw(n,e){if(!n)throw new Error("Iterable cannot be null");return new Pn(t=>{Io(t,e,()=>{const i=n[Symbol.asyncIterator]();Io(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Di(n,e){return e?function vw(n,e){if(null!=n){if(uw(n))return function gw(n,e){return ds(n).pipe(Jg(e),mw(e))}(n,e);if(lw(n))return function BE(n,e){return new Pn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(cw(n))return function _w(n,e){return ds(n).pipe(Jg(e),mw(e))}(n,e);if(Zg(n))return yw(n,e);if(bf(n))return function VE(n,e){return new Pn(t=>{let i;return Io(t,e,()=>{i=n[dw](),Io(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Sn(i?.return)&&i.return()})}(n,e);if(xf(n))return function zE(n,e){return yw(fw(n),e)}(n,e)}throw hw(n)}(n,e):ds(n)}class $r extends hs{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}function Mt(...n){return Di(n,yh(n))}function Qg(n={}){const{connector:e=(()=>new hs),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1;const f=()=>{a?.unsubscribe(),a=void 0},m=()=>{f(),o=l=void 0,u=d=!1},g=()=>{const _=o;m(),_?.unsubscribe()};return Zn((_,v)=>{c++,!d&&!u&&f();const y=l=l??e();v.add(()=>{c--,0===c&&!d&&!u&&(a=Wc(g,r))}),y.subscribe(v),!o&&c>0&&(o=new na({next:b=>y.next(b),error:b=>{d=!0,f(),a=Wc(m,t,b),y.error(b)},complete:()=>{u=!0,f(),a=Wc(m,i),y.complete()}}),ds(_).subscribe(o))})(s)}}function Wc(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new na({next:()=>{i.unsubscribe(),n()}});return ds(e(...t)).subscribe(i)}function Ls(n,e){return Zn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(oi(i,l=>{r?.unsubscribe();let c=0;const u=s++;ds(n(l,u)).subscribe(r=oi(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function bw(n,e){return n===e}function bn(n){for(let e in n)if(n[e]===bn)return e;throw Error("Could not find renamed property on target object.")}function jc(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Bi(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Bi).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Sf(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const e_=bn({__forward_ref__:bn});function xn(n){return n.__forward_ref__=xn,n.toString=function(){return Bi(this())},n}function vt(n){return Ef(n)?n():n}function Ef(n){return"function"==typeof n&&n.hasOwnProperty(e_)&&n.__forward_ref__===xn}function Mf(n){return n&&!!n.\u0275providers}class le extends Error{constructor(e,t){super(function vh(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Pt(n){return"string"==typeof n?n:null==n?"":String(n)}function n_(n,e){throw new le(-201,!1)}function Ns(n,e){null==n&&function Tt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function st(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ai(n){return{providers:n.providers||[],imports:n.imports||[]}}function Ba(n){return Tf(n,bh)||Tf(n,i_)}function Tf(n,e){return n.hasOwnProperty(e)?n[e]:null}function wh(n){return n&&(n.hasOwnProperty(Af)||n.hasOwnProperty(Ew))?n[Af]:null}const bh=bn({\u0275prov:bn}),Af=bn({\u0275inj:bn}),i_=bn({ngInjectableDef:bn}),Ew=bn({ngInjectorDef:bn});var tn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(tn||{});let Or;function jn(n){const e=Or;return Or=n,e}function Tw(n,e,t){const i=Ba(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&tn.Optional?null:void 0!==e?e:void n_(Bi(n))}const mn=globalThis,Ch={},If="__NG_DI_FLAG__",Sh="ngTempTokenPath",u_=/\n/gm,Iw="__source";let Va;function za(n){const e=Va;return Va=n,e}function Rw(n,e=tn.Default){if(void 0===Va)throw new le(-203,!1);return null===Va?Tw(n,void 0,e):Va.get(n,e&tn.Optional?null:void 0,e)}function Ve(n,e=tn.Default){return(function Mw(){return Or}()||Rw)(vt(n),e)}function qe(n,e=tn.Default){return Ve(n,Eh(e))}function Eh(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Pf(n){const e=[];for(let t=0;t<n.length;t++){const i=vt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new le(900,!1);let r,s=tn.Default;for(let o=0;o<i.length;o++){const a=i[o],l=YE(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(Ve(r,s))}else e.push(Ve(i))}return e}function Mh(n,e){return n[If]=e,n.prototype[If]=e,n}function YE(n){return n[If]}function sa(n){return{toString:n}.toString()}var oa=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(oa||{}),ks=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ks||{});const Oo={},dn=[],Th=bn({\u0275cmp:bn}),Lo=bn({\u0275dir:bn}),$c=bn({\u0275pipe:bn}),Pw=bn({\u0275mod:bn}),aa=bn({\u0275fac:bn}),Ah=bn({__NG_ELEMENT_ID__:bn}),Dl=bn({__NG_ENV_ID__:bn});function Us(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function Of(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];Lw(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function Ow(n){return 3===n||4===n||6===n}function Lw(n){return 64===n.charCodeAt(0)}function Dh(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Nw(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Nw(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}const Fw="ng-template";function Lf(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==Us(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Y(n){return 4===n.type&&n.value!==Fw}function ue(n,e,t){return e===(4!==n.type||t?n.value:Fw)}function oe(n,e,t){let i=4;const r=n.attrs||[],s=function On(n){for(let e=0;e<n.length;e++)if(Ow(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!ue(n,l,t)||""===l&&1===e.length){if(Ge(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!Lf(n.attrs,c,t)){if(Ge(i))return!1;o=!0}continue}const d=Ut(8&i?"class":l,r,Y(n),t);if(-1===d){if(Ge(i))return!1;o=!0;continue}if(""!==c){let f;f=d>s?"":r[d+1].toLowerCase();const m=8&i?f:null;if(m&&-1!==Us(m,c,0)||2&i&&c!==f){if(Ge(i))return!1;o=!0}}}}else{if(!o&&!Ge(i)&&!Ge(l))return!1;if(o&&Ge(l))continue;o=!1,i=l|1&i}}return Ge(i)||o}function Ge(n){return 0==(1&n)}function Ut(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function d_(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function yn(n,e,t=!1){for(let i=0;i<e.length;i++)if(oe(n,e[i],t))return!0;return!1}function JE(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function ps(n,e){return n?":not("+e.trim()+")":e}function Nf(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Ge(o)&&(e+=ps(s,r),r=""),i=o,s=s||!Ge(i);t++}return""!==r&&(e+=ps(s,r)),e}function yi(n){return sa(()=>{const e=f_(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===oa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ks.Emulated,styles:n.styles||dn,_:null,schemas:n.schemas||null,tView:null,id:""};p_(t);const i=n.dependencies;return t.directiveDefs=Rl(i,!1),t.pipeDefs=Rl(i,!0),t.id=function Ih(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function En(n){return sn(n)||Kn(n)}function eM(n){return null!==n}function vi(n){return sa(()=>({type:n.type,bootstrap:n.bootstrap||dn,declarations:n.declarations||dn,imports:n.imports||dn,exports:n.exports||dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kw(n,e){if(null==n)return Oo;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function wt(n){return sa(()=>{const e=f_(n);return p_(e),e})}function qr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function sn(n){return n[Th]||null}function Kn(n){return n[Lo]||null}function Yi(n){return n[$c]||null}function wr(n,e){const t=n[Pw]||null;if(!t&&!0===e)throw new Error(`Type ${Bi(n)} does not have '\u0275mod' property.`);return t}function f_(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Oo,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kw(n.inputs,e),outputs:kw(n.outputs)}}function p_(n){n.features?.forEach(e=>e(n))}function Rl(n,e){if(!n)return null;const t=e?Yi:En;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(eM)}const Dn=0,je=1,Ht=2,Jn=3,to=4,Ha=5,zi=6,Ga=7,Ci=8,la=9,Xc=10,Ft=11,li=12,cr=13,Yc=14,Si=15,Zc=16,Kc=17,Bs=18,ca=19,Uf=20,ms=21,gs=22,ua=23,Wa=24,jt=25,m_=1,Bw=2,No=7,ha=9,Zi=11;function Hi(n){return Array.isArray(n)&&"object"==typeof n[m_]}function Ki(n){return Array.isArray(n)&&!0===n[m_]}function Xr(n){return 0!=(4&n.flags)}function $t(n){return n.componentOffset>-1}function Vf(n){return 1==(1&n.flags)}function no(n){return!!n.template}function g_(n){return 0!=(512&n[Ht])}function Ol(n,e){return n.hasOwnProperty(aa)?n[aa]:null}let ur=null,Rh=!1;function _s(n){const e=ur;return ur=n,e}const zw={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function zf(n){if(!Ph(n)||n.dirty){if(!n.producerMustRecompute(n)&&!ko(n))return void(n.dirty=!1);n.producerRecomputeValue(n),n.dirty=!1}}function Gw(n){n.dirty=!0,function Jc(n){if(void 0===n.liveConsumerNode)return;const e=Rh;Rh=!0;try{for(const t of n.liveConsumerNode)t.dirty||Gw(t)}finally{Rh=e}}(n),n.consumerMarkedDirty?.(n)}function Hf(n){return n&&(n.nextProducerIndex=0),_s(n)}function __(n,e){if(_s(e),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(Ph(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Lr(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ko(n){Ll(n);for(let e=0;e<n.producerNode.length;e++){const t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(zf(t),i!==t.version))return!0}return!1}function Gf(n){if(Ll(n),Ph(n))for(let e=0;e<n.producerNode.length;e++)Lr(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Lr(n,e){if(function y_(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}(n),Ll(n),1===n.liveConsumerNode.length)for(let i=0;i<n.producerNode.length;i++)Lr(n.producerNode[i],n.producerIndexOfThis[i]);const t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){const i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Ll(r),r.producerIndexOfThis[i]=e}}function Ph(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ll(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}let v_=null;const Xf=()=>{},lM=(()=>({...zw,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule(n.ref)},hasRun:!1,cleanupFn:Xf}))();class $w{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Ii(){return qw}function qw(n){return n.type.prototype.ngOnChanges&&(n.setInput=cM),Oh}function Oh(){const n=Zf(this),e=n?.current;if(e){const t=n.previous;if(t===Oo)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function cM(n,e,t,i){const r=this.declaredInputs[t],s=Zf(n)||function Yw(n,e){return n[Xw]=e}(n,{previous:Oo,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new $w(l&&l.currentValue,e,a===Oo),n[i]=e}Ii.ngInherit=!0;const Xw="__ngSimpleChanges__";function Zf(n){return n[Xw]||null}const Uo=function(n,e,t){};function Fn(n){for(;Array.isArray(n);)n=n[Dn];return n}function Nh(n,e){return Fn(e[n])}function Fr(n,e){return Fn(e[n.index])}function Fh(n,e){return n.data[e]}function eu(n,e){return n[e]}function Yr(n,e){const t=e[n];return Hi(t)?t:t[Dn]}function Ka(n,e){return null==e?null:n[e]}function Jf(n){n[Kc]=0}function Qw(n){1024&n[Ht]||(n[Ht]|=1024,eb(n,1))}function Qf(n){1024&n[Ht]&&(n[Ht]&=-1025,eb(n,-1))}function eb(n,e){let t=n[Jn];if(null===t)return;t[Ha]+=e;let i=t;for(t=t[Jn];null!==t&&(1===e&&1===i[Ha]||-1===e&&0===i[Ha]);)t[Ha]+=e,i=t,t=t[Jn]}const At={lFrame:I_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ys(){return At.bindingsEnabled}function tu(){return null!==At.skipHydrationRootTNode}function ge(){return At.lFrame.lView}function an(){return At.lFrame.tView}function mt(n){return At.lFrame.contextLView=n,n[Ci]}function ht(n){return At.lFrame.contextLView=null,n}function Ji(){let n=ip();for(;null!==n&&64===n.type;)n=n.parent;return n}function ip(){return At.lFrame.currentTNode}function Vs(n,e){const t=At.lFrame;t.currentTNode=n,t.isParent=e}function kh(){return At.lFrame.isParent}function Bo(){At.lFrame.isParent=!1}function br(){const n=At.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function iu(){return At.lFrame.bindingIndex++}function pa(n){const e=At.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mM(n,e){const t=At.lFrame;t.bindingIndex=t.bindingRootIndex=n,rp(e)}function rp(n){At.lFrame.currentDirectiveIndex=n}function ro(){return At.lFrame.currentQueryIndex}function A_(n){At.lFrame.currentQueryIndex=n}function gM(n){const e=n[je];return 2===e.type?e.declTNode:1===e.type?n[zi]:null}function Uh(n,e,t){if(t&tn.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&tn.Host||(r=gM(s),null===r||(s=s[Yc],10&r.type))););if(null===r)return!1;e=r,n=s}const i=At.lFrame=D_();return i.currentTNode=e,i.lView=n,!0}function Ja(n){const e=D_(),t=n[je];At.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function D_(){const n=At.lFrame,e=null===n?null:n.child;return null===e?I_(n):e}function I_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function lb(){const n=At.lFrame;return At.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const R_=lb;function Qa(){const n=lb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Cr(){return At.lFrame.selectedIndex}function el(n){At.lFrame.selectedIndex=n}function kn(){const n=At.lFrame;return Fh(n.tView,n.selectedIndex)}function kl(){At.lFrame.currentNamespace="svg"}let O_=!0;function Ul(){return O_}function ma(n){O_=n}function ap(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=u&&(n.destroyHooks??=[]).push(t,u)}}function Vh(n,e,t){N_(n,e,3,t)}function zs(n,e,t,i){(3&n[Ht])===t&&N_(n,e,t,i)}function lp(n,e){let t=n[Ht];(3&t)===e&&(t&=8191,t+=1,n[Ht]=t)}function N_(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[Kc]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[Kc]+=65536),(a<s||-1==s)&&(hb(n,t,e,l),n[Kc]=(4294901760&n[Kc])+l+2),l++}function ub(n,e){Uo(4,n,e);const t=_s(null);try{e.call(n)}finally{_s(t),Uo(5,n,e)}}function hb(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];r?n[Ht]>>13<n[Kc]>>16&&(3&n[Ht])===e&&(n[Ht]+=8192,ub(a,s)):ub(a,s)}const ru=-1;class zh{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Gh(n){return n!==ru}function so(n){return 32767&n}function Bl(n,e){let t=function yM(n){return n>>16}(n),i=e;for(;t>0;)i=i[Yc],t--;return i}let up=!0;function Wi(n){const e=up;return up=n,e}const pb=255,k_=5;let vM=0;const oo={};function hp(n,e){const t=Vo(n,e);if(-1!==t)return t;const i=e[je];i.firstCreatePass&&(n.injectorIndex=e.length,U_(i.data,n),U_(e,null),U_(i.blueprint,null));const r=Qi(n,e),s=n.injectorIndex;if(Gh(r)){const o=so(r),a=Bl(r,e),l=a[je].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function U_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Vo(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Qi(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=z_(r),null===i)return ru;if(t++,r=r[Yc],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return ru}function Wh(n,e,t){!function wM(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ah)&&(i=t[Ah]),null==i&&(i=t[Ah]=vM++);const r=i&pb;e.data[n+(r>>k_)]|=1<<r}(n,e,t)}function dp(n,e,t){if(t&tn.Optional||void 0!==n)return n;n_()}function mb(n,e,t,i){if(t&tn.Optional&&void 0===i&&(i=null),!(t&(tn.Self|tn.Host))){const r=n[la],s=jn(void 0);try{return r?r.get(e,i,t&tn.Optional):Tw(e,i,t&tn.Optional)}finally{jn(s)}}return dp(i,0,t)}function gb(n,e,t,i=tn.Default,r){if(null!==n){if(2048&e[Ht]&&!(i&tn.Self)){const o=function V_(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ht]&&!(512&o[Ht]);){const a=ou(s,o,t,i|tn.Self,oo);if(a!==oo)return a;let l=s.parent;if(!l){const c=o[Uf];if(c){const u=c.get(t,oo,i);if(u!==oo)return u}l=z_(o),o=o[Yc]}s=l}return r}(n,e,t,i,oo);if(o!==oo)return o}const s=ou(n,e,t,i,oo);if(s!==oo)return s}return mb(e,t,i,r)}function ou(n,e,t,i,r){const s=function xM(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ah)?n[Ah]:void 0;return"number"==typeof e?e>=0?e&pb:B_:e}(t);if("function"==typeof s){if(!Uh(e,n,i))return i&tn.Host?dp(r,0,i):mb(e,t,i,r);try{let o;if(o=s(i),null!=o||i&tn.Optional)return o;n_()}finally{R_()}}else if("number"==typeof s){let o=null,a=Vo(n,e),l=ru,c=i&tn.Host?e[Si][zi]:null;for((-1===a||i&tn.SkipSelf)&&(l=-1===a?Qi(n,e):e[a+8],l!==ru&&vb(i,!1)?(o=e[je],a=so(l),e=Bl(l,e)):a=-1);-1!==a;){const u=e[je];if(yb(s,a,u.data)){const d=_b(a,e,t,o,i,c);if(d!==oo)return d}l=e[a+8],l!==ru&&vb(i,e[je].data[a+8]===c)&&yb(s,a,e)?(o=u,a=so(l),e=Bl(l,e)):a=-1}}return r}function _b(n,e,t,i,r,s){const o=e[je],a=o.data[n+8],u=jh(a,o,t,null==i?$t(a)&&up:i!=o&&0!=(3&a.type),r&tn.Host&&s===a);return null!==u?Vl(e,o,u,a):oo}function jh(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,f=r?a+u:n.directiveEnd;for(let m=i?a:a+u;m<f;m++){const g=o[m];if(m<l&&t===g||m>=l&&g.type===t)return m}if(r){const m=o[l];if(m&&no(m)&&m.type===t)return l}return null}function Vl(n,e,t,i){let r=n[t];const s=e.data;if(function ga(n){return n instanceof zh}(r)){const o=r;o.resolving&&function GE(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new le(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Cn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Pt(n)}(s[t]));const a=Wi(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?jn(o.injectImpl):null;Uh(n,i,tn.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function L_(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=qw(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==c&&jn(c),Wi(a),o.resolving=!1,R_()}}return r}function yb(n,e,t){return!!(t[e+(n>>k_)]&1<<n)}function vb(n,e){return!(n&tn.Self||n&tn.Host&&e)}class kr{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return gb(this._tNode,this._lView,e,Eh(i),t)}}function B_(){return new kr(Ji(),ge())}function ci(n){return sa(()=>{const e=n.prototype.constructor,t=e[aa]||zl(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[aa]||zl(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function zl(n){return Ef(n)?()=>{const e=zl(vt(n));return e&&e()}:Ol(n)}function z_(n){const e=n[je],t=e.type;return 2===t?e.declTNode:1===t?n[zi]:null}const Hl="__parameters__";function Gl(n,e,t){return sa(()=>{const i=function H_(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const d=l.hasOwnProperty(Hl)?l[Hl]:Object.defineProperty(l,Hl,{value:[]})[Hl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function uu(n,e){n.forEach(t=>Array.isArray(t)?uu(t,e):e(t))}function G_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function fp(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function qh(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Qn(n,e,t){let i=hu(n,e);return i>=0?n[1|i]=t:(i=~i,function AM(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function W_(n,e){const t=hu(n,e);if(t>=0)return n[1|t]}function hu(n,e){return function j_(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const mp=Mh(Gl("Optional"),8),gp=Mh(Gl("SkipSelf"),4);function xp(n){return 128==(128&n.flags)}var nl=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(nl||{});const qM=/^>|^->|<!--|-->|--!>|<!-$/g,Sp=/(<|>)/g,XM="\u200b$1\u200b";const Q_=new Map;let YM=0;const ty="__ngContext__";function hr(n,e){Hi(e)?(n[ty]=e[ca],function KM(n){Q_.set(n[ca],n)}(e)):n[ty]=e}let ry;function sy(n,e){return ry(n,e)}function mu(n){const e=n[Jn];return Ki(e)?e[Jn]:e}function Bb(n){return zb(n[li])}function Vb(n){return zb(n[to])}function zb(n){for(;null!==n&&!Ki(n);)n=n[to];return n}function gu(n,e,t,i,r){if(null!=i){let s,o=!1;Ki(i)?s=i:Hi(i)&&(o=!0,i=i[Dn]);const a=Fn(i);0===n&&null!==t?null==r?Wb(e,t,a):jl(e,t,a,r||null,!0):1===n&&null!==t?jl(e,t,a,r||null,!0):2===n?function Op(n,e,t){const i=Gs(n,e);i&&function cy(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function Lp(n,e,t,i,r){const s=t[No];s!==Fn(t)&&gu(e,n,i,s,r);for(let a=Zi;a<t.length;a++){const l=t[a];ql(l[je],l,n,e,i,s)}}(e,n,s,t,r)}}function ay(n,e){return n.createComment(function Ob(n){return n.replace(qM,e=>e.replace(Sp,XM))}(e))}function Dp(n,e,t){return n.createElement(e,t)}function Bt(n,e){const t=n[ha],i=t.indexOf(e);Qf(e),t.splice(i,1)}function Ip(n,e){if(n.length<=Zi)return;const t=Zi+e,i=n[t];if(i){const r=i[Zc];null!==r&&r!==n&&Bt(r,i),e>0&&(n[t-1][to]=i[to]);const s=fp(n,Zi+e);!function iT(n,e){ql(n,e,e[Ft],2,null,null),e[Dn]=null,e[zi]=null}(i[je],i);const o=s[Bs];null!==o&&o.detachView(s[je]),i[Jn]=null,i[to]=null,i[Ht]&=-129}return i}function Sr(n,e){if(!(256&e[Ht])){const t=e[Ft];e[ua]&&Gf(e[ua]),e[Wa]&&Gf(e[Wa]),t.destroyNode&&ql(n,e,t,3,null,null),function sT(n){let e=n[li];if(!e)return ui(n[je],n);for(;e;){let t=null;if(Hi(e))t=e[li];else{const i=e[Zi];i&&(t=i)}if(!t){for(;e&&!e[to]&&e!==n;)Hi(e)&&ui(e[je],e),e=e[Jn];null===e&&(e=n),Hi(e)&&ui(e[je],e),t=e&&e[to]}e=t}}(e)}}function ui(n,e){if(!(256&e[Ht])){e[Ht]&=-129,e[Ht]|=256,function il(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof zh)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];Uo(4,a,l);try{l.call(a)}finally{Uo(5,a,l)}}else{Uo(4,r,s);try{s.call(r)}finally{Uo(5,r,s)}}}}}(n,e),function aT(n,e){const t=n.cleanup,i=e[Ga];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else t[s].call(i[t[s+1]]);null!==i&&(e[Ga]=null);const r=e[ms];if(null!==r){e[ms]=null;for(let s=0;s<r.length;s++)(0,r[s])()}}(n,e),1===e[je].type&&e[Ft].destroy();const t=e[Zc];if(null!==t&&Ki(e[Jn])){t!==e[Jn]&&Bt(t,e);const i=e[Bs];null!==i&&i.detachView(n)}!function JM(n){Q_.delete(n[ca])}(e)}}function ly(n,e,t){return function Gb(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Dn];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===ks.None||s===ks.Emulated)return null}return Fr(i,t)}}(n,e.parent,t)}function jl(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Wb(n,e,t){n.appendChild(e,t)}function jb(n,e,t,i,r){null!==i?jl(n,e,t,i,r):Wb(n,e,t)}function Gs(n,e){return n.parentNode(e)}function Zh(n,e,t){return hi(n,e,t)}let Rp,Kr,hi=function ei(n,e,t){return 40&n.type?Fr(n,t):null};function Pp(n,e,t,i){const r=ly(n,i,e),s=e[Ft],a=Zh(i.parent||e[zi],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)jb(s,r,t[l],a,!1);else jb(s,r,t,a,!1);void 0!==Rp&&Rp(s,i,e,t,r)}function Kh(n,e){if(null!==e){const t=e.type;if(3&t)return Fr(e,n);if(4&t)return uy(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Kh(n,i);{const r=n[e.index];return Ki(r)?uy(-1,r):Fn(r)}}if(32&t)return sy(e,n)()||Fn(n[e.index]);{const i=Xb(n,e);return null!==i?Array.isArray(i)?i[0]:Kh(mu(n[Si]),i):Kh(n,e.next)}}return null}function Xb(n,e){return null!==e?n[Si][zi].projection[e.projection]:null}function uy(n,e){const t=Zi+n+1;if(t<e.length){const i=e[t],r=i[je].firstChild;if(null!==r)return Kh(i,r)}return e[No]}function $l(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&hr(Fn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)$l(n,e,t.child,i,r,s,!1),gu(e,n,r,a,s);else if(32&l){const c=sy(t,i);let u;for(;u=c();)gu(e,n,r,u,s);gu(e,n,r,a,s)}else 16&l?dy(n,e,i,t,r,s):gu(e,n,r,a,s);t=o?t.projectionNext:t.next}}function ql(n,e,t,i,r,s){$l(t,i,n.firstChild,e,r,s,!1)}function dy(n,e,t,i,r,s){const o=t[Si],l=o[zi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)gu(e,n,r,l[c],s);else{let c=l;const u=o[Jn];xp(i)&&(c.flags|=128),$l(n,e,c,u,r,s,!0)}}function Yb(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Zb(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Of(n,e,i),null!==r&&Yb(n,e,r),null!==s&&function _u(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}class tx{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function rl(n){return n instanceof tx?n.changingThisBreaksApplicationSecurity:n}class tt{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=st({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const nd=new tt("ENVIRONMENT_INITIALIZER"),ux=new tt("INJECTOR",-1),hx=new tt("INJECTOR_DEF_TYPES");class by{get(e,t=Ch){if(t===Ch){const i=new Error(`NullInjectorError: No provider for ${Bi(e)}!`);throw i.name="NullInjectorError",i}return t}}function IT(...n){return{\u0275providers:dx(0,n),\u0275fromNgModule:!0}}function dx(n,...e){const t=[],i=new Set;let r;const s=o=>{t.push(o)};return uu(e,o=>{const a=o;Up(a,s,[],i)&&(r||=[],r.push(a))}),void 0!==r&&fx(r,s),t}function fx(n,e){for(let t=0;t<n.length;t++){const{ngModule:i,providers:r}=n[t];Cy(r,s=>{e(s,i)})}}function Up(n,e,t,i){if(!(n=vt(n)))return!1;let r=null,s=wh(n);const o=!s&&sn(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=wh(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Up(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{uu(s.imports,u=>{Up(u,e,t,i)&&(c||=[],c.push(u))})}finally{}void 0!==c&&fx(c,e)}if(!a){const c=Ol(r)||(()=>new r);e({provide:r,useFactory:c,deps:dn},r),e({provide:hx,useValue:r,multi:!0},r),e({provide:nd,useValue:()=>Ve(r),multi:!0},r)}const l=s.providers;if(null!=l&&!a){const c=n;Cy(l,u=>{e(u,c)})}}}return r!==n&&void 0!==n.providers}function Cy(n,e){for(let t of n)Mf(t)&&(t=t.\u0275providers),Array.isArray(t)?Cy(t,e):e(t)}const RT=bn({provide:String,useValue:bn});function Sy(n){return null!==n&&"object"==typeof n&&RT in n}function sl(n){return"function"==typeof n}const Ey=new tt("Set Injector scope."),Vp={},PT={};let id;function zp(){return void 0===id&&(id=new by),id}class bs{}class Hp extends bs{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,rd(e,o=>this.processProvider(o)),this.records.set(ux,bu(void 0,this)),r.has("environment")&&this.records.set(bs,bu(void 0,this));const s=this.records.get(Ey);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(hx.multi,dn,tn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=za(this),i=jn(void 0);try{return e()}finally{za(t),jn(i)}}get(e,t=Ch,i=tn.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Dl))return e[Dl](this);i=Eh(i);const s=za(this),o=jn(void 0);try{if(!(i&tn.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function NT(n){return"function"==typeof n||"object"==typeof n&&n instanceof tt}(e)&&Ba(e);l=c&&this.injectableDefInScope(c)?bu(Mr(e),Vp):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(i&tn.Self?zp():this.parent).get(e,t=i&tn.Optional&&t===Ch?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Sh]=a[Sh]||[]).unshift(Bi(e)),s)throw a;return function ZE(n,e,t,i){const r=n[Sh];throw e[Iw]&&r.unshift(e[Iw]),n.message=function KE(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Bi(e);if(Array.isArray(e))r=e.map(Bi).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Bi(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(u_,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Sh]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{jn(o),za(s)}}resolveInjectorInitializers(){const e=za(this),t=jn(void 0);try{const r=this.get(nd.multi,dn,tn.Self);for(const s of r)s()}finally{za(e),jn(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(Bi(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(e){let t=sl(e=vt(e))?e:vt(e&&e.provide);const i=function OT(n){return Sy(n)?bu(void 0,n.useValue):bu(gx(n),Vp)}(e);if(sl(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=bu(void 0,Vp,!0),r.factory=()=>Pf(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===Vp&&(t.value=PT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Ty(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=vt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Mr(n){const e=Ba(n),t=null!==e?e.factory:Ol(n);if(null!==t)return t;if(n instanceof tt)throw new le(204,!1);if(n instanceof Function)return function My(n){const e=n.length;if(e>0)throw qh(e,"?"),new le(204,!1);const t=function Fs(n){return n&&(n[bh]||n[i_])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new le(204,!1)}function gx(n,e,t){let i;if(sl(n)){const r=vt(n);return Ol(r)||Mr(r)}if(Sy(n))i=()=>vt(n.useValue);else if(function Bp(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...Pf(n.deps||[]));else if(function px(n){return!(!n||!n.useExisting)}(n))i=()=>Ve(vt(n.useExisting));else{const r=vt(n&&(n.useClass||n.provide));if(!function LT(n){return!!n.deps}(n))return Ol(r)||Mr(r);i=()=>new r(...Pf(n.deps))}return i}function bu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rd(n,e){for(const t of n)Array.isArray(t)?rd(t,e):t&&Mf(t)?rd(t.\u0275providers,e):e(t)}const Gp=new tt("AppId",{providedIn:"root",factory:()=>FT}),FT="ng",_x=new tt("Platform Initializer"),wa=new tt("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),yx=new tt("AnimationModuleType"),vx=new tt("CSP nonce",{providedIn:"root",factory:()=>function vu(){if(void 0!==Kr)return Kr;if(typeof document<"u")return document;throw new le(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let xx=(n,e,t)=>null;function Ny(n,e,t=!1){return xx(n,e,t)}class xe{}class $e{}class Ct{resolveComponentFactory(e){throw function lt(n){const e=Error(`No component factory found for ${Bi(n)}.`);return e.ngComponent=n,e}(e)}}let Yt=(()=>{class n{static#e=this.NULL=new Ct}return n})();function cn(){return tr(Ji(),ge())}function tr(n,e){return new vn(Fr(n,e))}let vn=(()=>{class n{constructor(t){this.nativeElement=t}static#e=this.__NG_ELEMENT_ID__=cn}return n})();function xs(n){return n instanceof vn?n.nativeElement:n}class $n{}let Ei=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function ba(){const n=ge(),t=Yr(Ji().index,n);return(Hi(t)?t:n)[Ft]}()}return n})(),Cx=(()=>{class n{static#e=this.\u0275prov=st({token:n,providedIn:"root",factory:()=>null})}return n})();class Fy{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const MW=new Fy("16.2.9"),GT={};function SL(n,e=null,t=null,i){const r=EL(n,e,t,i);return r.resolveInjectorInitializers(),r}function EL(n,e=null,t=null,i,r=new Set){const s=[t||dn,IT(n)];return i=i||("object"==typeof n?void 0:Bi(n)),new Hp(s,e||zp(),i||null,r)}let Ws=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Ch;static#t=this.NULL=new by;static create(t,i){if(Array.isArray(t))return SL({name:""},i,t,"");{const r=t.name??"";return SL({name:r},t.parent,t.providers,r)}}static#n=this.\u0275prov=st({token:n,providedIn:"any",factory:()=>Ve(ux)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function jT(n){return n.ngOriginalError}class Yl{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&jT(e);for(;t&&jT(t);)t=jT(t);return t||null}}function qT(n){return e=>{setTimeout(n,void 0,e)}}const Mn=class OW extends hs{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=qT(s),r&&(r=qT(r)),o&&(o=qT(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof ls&&e.add(a),a}};function TL(...n){}class In{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mn(!1),this.onMicrotaskEmpty=new Mn(!1),this.onStable=new Mn(!1),this.onError=new Mn(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function LW(){const n="function"==typeof mn.requestAnimationFrame;let e=mn[n?"requestAnimationFrame":"setTimeout"],t=mn[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function kW(n){const e=()=>{!function FW(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(mn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,YT(n),n.isCheckStableRunning=!0,XT(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),YT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(function BW(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(a))return t.invokeTask(r,s,o,a);try{return AL(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),DL(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return AL(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),DL(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,YT(n),XT(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!In.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(In.isInAngularZone())throw new le(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,NW,TL,TL);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const NW={};function XT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function YT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function AL(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function DL(n){n._nesting--,XT(n)}class UW{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mn,this.onMicrotaskEmpty=new Mn,this.onStable=new Mn,this.onError=new Mn}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const IL=new tt("",{providedIn:"root",factory:RL});function RL(){const n=qe(In);let e=!0;return function ww(...n){const e=yh(n),t=function UE(n,e){return"number"==typeof Kg(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?ds(i[0]):Gc(t)(Di(i,e)):Ro}(new Pn(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),new Pn(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{In.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});const o=n.onUnstable.subscribe(()=>{In.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe(Qg()))}function PL(n){return n.ownerDocument}function Zl(n){return n instanceof Function?n():n}let ZT=(()=>{class n{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static#e=this.\u0275prov=st({token:n,providedIn:"root",factory:()=>new n})}return n})();function ky(n){for(;n;){n[Ht]|=64;const e=mu(n);if(g_(n)&&!e)return n;n=e}return null}const kL=new tt("",{providedIn:"root",factory:()=>!1});let Ex=null;function zL(n,e){return n[e]??WL()}function HL(n,e){const t=WL();t.producerNode?.length&&(n[e]=Ex,t.lView=n,Ex=GL())}const XW={...zw,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{ky(n.lView)},lView:null};function GL(){return Object.create(XW)}function WL(){return Ex??=GL(),Ex}const qt={};function Se(n){jL(an(),ge(),Cr()+n,!1)}function jL(n,e,t,i){if(!i)if(3==(3&e[Ht])){const s=n.preOrderCheckHooks;null!==s&&Vh(e,s,t)}else{const s=n.preOrderHooks;null!==s&&zs(e,s,0,t)}el(t)}function re(n,e=tn.Default){const t=ge();return null===t?Ve(n,e):gb(Ji(),t,vt(n),e)}function Mx(n,e,t,i,r,s,o,a,l,c,u){const d=e.blueprint.slice();return d[Dn]=r,d[Ht]=140|i,(null!==c||n&&2048&n[Ht])&&(d[Ht]|=2048),Jf(d),d[Jn]=d[Yc]=n,d[Ci]=t,d[Xc]=o||n&&n[Xc],d[Ft]=a||n&&n[Ft],d[la]=l||n&&n[la]||null,d[zi]=s,d[ca]=function ZM(){return YM++}(),d[gs]=u,d[Uf]=c,d[Si]=2==e.type?n[Si]:d,d}function Yp(n,e,t,i,r){let s=n.data[e];if(null===s)s=function KT(n,e,t,i,r){const s=ip(),o=kh(),l=n.data[e]=function n6(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return tu()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function ob(){return At.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function nu(){const n=At.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Vs(s,!0),s}function Uy(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function qL(n,e,t,i,r){const s=zL(e,ua),o=Cr(),a=2&i;try{el(-1),a&&e.length>jt&&jL(n,e,jt,!1),Uo(a?2:0,r);const c=a?s:null,u=Hf(c);try{null!==c&&(c.dirty=!1),t(i,r)}finally{__(c,u)}}finally{a&&null===e[ua]&&HL(e,ua),el(o),Uo(a?3:1,r)}}function JT(n,e,t){if(Xr(e)){const i=_s(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{_s(i)}}}function QT(n,e,t){ys()&&(function c6(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;$t(t)&&function g6(n,e,t){const i=Fr(e,n),r=XL(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=Tx(n,Mx(n,r,null,o,i,e,null,n[Xc].rendererFactory.createRenderer(i,t),null,null,null));n[e.index]=a}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||hp(t,e),hr(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=Vl(e,n,a,t);hr(c,e),null!==o&&_6(0,a-r,c,l,0,o),no(l)&&(Yr(t.index,e)[Ci]=Vl(e,n,a,t))}}(n,e,t,Fr(t,e)),64==(64&t.flags)&&QL(n,e,t))}function eA(n,e,t=Fr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function XL(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=tA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function tA(n,e,t,i,r,s,o,a,l,c,u){const d=jt+i,f=d+r,m=function ZW(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:qt);return t}(d,f),g="function"==typeof c?c():c;return m[je]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1,ssrId:u}}let YL=n=>null;function ZL(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?KL(t,e,r,s):i.hasOwnProperty(r)&&KL(t,e,i[r],s)}return t}function KL(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function nA(n,e,t,i){if(ys()){const r=null===i?null:{"":-1},s=function h6(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(yn(e,o.selectors,!1))if(i||(i=[]),no(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),iA(n,e,a.length)}else i.unshift(o),iA(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&JL(n,e,t,o,r,a),r&&function d6(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new le(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=Dh(t.mergedAttrs,t.attrs)}function JL(n,e,t,i,r,s){for(let c=0;c<i.length;c++)Wh(hp(t,e),n,i[c].type);!function p6(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Uy(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=Dh(t.mergedAttrs,u.hostAttrs),m6(n,t,e,l,u),f6(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function i6(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const d=s[u],f=t?t.get(d):null,g=f?f.outputs:null;l=ZL(d.inputs,u,l,f?f.inputs:null),c=ZL(d.outputs,u,c,g);const _=null===l||null===o||Y(e)?null:y6(l,u,o);a.push(_)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function QL(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function ab(){return At.lFrame.currentDirectiveIndex}();try{el(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];rp(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&u6(l,c)}}finally{el(-1),rp(o)}}function u6(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function iA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function f6(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;no(e)&&(t[""]=n)}}function m6(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Ol(r.type)),o=new zh(s,no(r),re);n.blueprint[i]=o,t[i]=o,function a6(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function l6(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,Uy(n,t,r.hostVars,qt),r)}function ol(n,e,t,i,r,s){const o=Fr(n,e);!function rA(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?Pt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Ft],o,s,n.value,t,i,r)}function _6(n,e,t,i,r,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)eN(i,t,o[a++],o[a++],o[a++])}function eN(n,e,t,i,r){const s=_s(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),null!==n.setInput?n.setInput(e,r,t,i):e[i]=r}finally{_s(s)}}function y6(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function tN(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null,null]}function nN(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];A_(t[i]),o.contentQueries(2,e[s],s)}}}function Tx(n,e){return n[li]?n[cr][to]=e:n[li]=e,n[cr]=e,e}function sA(n,e,t){A_(0);const i=_s(null);try{e(n,t)}finally{_s(i)}}function iN(n){return n[Ga]||(n[Ga]=[])}function rN(n){return n.cleanup||(n.cleanup=[])}function oN(n,e){const t=n[la],i=t?t.get(Yl,null):null;i&&i.handleError(e)}function oA(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];eN(n.data[o],e[o],i,a,r)}}function Kl(n,e,t){const i=Nh(e,n);!function Hb(n,e,t){n.setValue(e,t)}(n[Ft],i,t)}function v6(n,e){const t=Yr(e,n),i=t[je];!function w6(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(i,t);const r=t[Dn];null!==r&&null===t[gs]&&(t[gs]=Ny(r,t[la])),aA(i,t,t[Ci])}function aA(n,e,t){Ja(e);try{const i=n.viewQuery;null!==i&&sA(1,i,t);const r=n.template;null!==r&&qL(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&nN(n,e),n.staticViewQueries&&sA(2,n.viewQuery,t);const s=n.components;null!==s&&function b6(n,e){for(let t=0;t<e.length;t++)v6(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Ht]&=-5,Qa()}}let aN=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,i,r){const s=typeof Zone>"u"?null:Zone.current,o=function aM(n,e,t){const i=Object.create(lM);t&&(i.consumerAllowSignalWrites=!0),i.fn=n,i.schedule=e;const r=o=>{i.cleanupFn=o};return i.ref={notify:()=>Gw(i),run:()=>{if(i.dirty=!1,i.hasRun&&!ko(i))return;i.hasRun=!0;const o=Hf(i);try{i.cleanupFn(),i.cleanupFn=Xf,i.fn(r)}finally{__(i,o)}},cleanup:()=>i.cleanupFn()},i.ref}(t,c=>{this.all.has(c)&&this.queue.set(c,s)},r);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=i?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,i]of this.queue)this.queue.delete(t),i?i.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}static#e=this.\u0275prov=st({token:n,providedIn:"root",factory:()=>new n})}return n})();function Ax(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Sf(r,a):2==s&&(i=Sf(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function By(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];null!==s&&i.push(Fn(s)),Ki(s)&&lN(s,i);const o=t.type;if(8&o)By(n,e,t.child,i);else if(32&o){const a=sy(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=Xb(e,t);if(Array.isArray(a))i.push(...a);else{const l=mu(e[Si]);By(l[je],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function lN(n,e){for(let t=Zi;t<n.length;t++){const i=n[t],r=i[je].firstChild;null!==r&&By(i[je],i,r,e)}n[No]!==n[Dn]&&e.push(n[No])}function Dx(n,e,t,i=!0){const r=e[Xc],s=r.rendererFactory,o=r.afterRenderEventManager;s.begin?.(),o?.begin();try{cN(n,e,n.template,t)}catch(l){throw i&&oN(e,l),l}finally{s.end?.(),r.effectManager?.flush(),o?.end()}}function cN(n,e,t,i){const r=e[Ht];if(256!=(256&r)){e[Xc].effectManager?.flush(),Ja(e);try{Jf(e),function sb(n){return At.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&qL(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&Vh(e,c,null)}else{const c=n.preOrderHooks;null!==c&&zs(e,c,0,null),lp(e,0)}if(function S6(n){for(let e=Bb(n);null!==e;e=Vb(e)){if(!e[Bw])continue;const t=e[ha];for(let i=0;i<t.length;i++){Qw(t[i])}}}(e),uN(e,2),null!==n.contentQueries&&nN(n,e),o){const c=n.contentCheckHooks;null!==c&&Vh(e,c)}else{const c=n.contentHooks;null!==c&&zs(e,c,1),lp(e,1)}!function YW(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const i=zL(e,Wa);try{for(let r=0;r<t.length;r++){const s=t[r];if(s<0)el(~s);else{const o=s,a=t[++r],l=t[++r];mM(a,o),i.dirty=!1;const c=Hf(i);try{l(2,e[o])}finally{__(i,c)}}}}finally{null===e[Wa]&&HL(e,Wa),el(-1)}}(n,e);const a=n.components;null!==a&&dN(e,a,0);const l=n.viewQuery;if(null!==l&&sA(2,l,i),o){const c=n.viewCheckHooks;null!==c&&Vh(e,c)}else{const c=n.viewHooks;null!==c&&zs(e,c,2),lp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ht]&=-73,Qf(e)}finally{Qa()}}}function uN(n,e){for(let t=Bb(n);null!==t;t=Vb(t))for(let i=Zi;i<t.length;i++)hN(t[i],e)}function E6(n,e,t){hN(Yr(e,n),t)}function hN(n,e){if(!function hM(n){return 128==(128&n[Ht])}(n))return;const t=n[je],i=n[Ht];if(80&i&&0===e||1024&i||2===e)cN(t,n,t.template,n[Ci]);else if(n[Ha]>0){uN(n,1);const r=t.components;null!==r&&dN(n,r,1)}}function dN(n,e,t){for(let i=0;i<e.length;i++)E6(n,e[i],t)}class Vy{get rootNodes(){const e=this._lView,t=e[je];return By(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ci]}set context(e){this._lView[Ci]=e}get destroyed(){return 256==(256&this._lView[Ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Jn];if(Ki(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Ip(e,i),fp(t,i))}this._attachedToViewContainer=!1}Sr(this._lView[je],this._lView)}onDestroy(e){!function ep(n,e){if(256==(256&n[Ht]))throw new le(911,!1);null===n[ms]&&(n[ms]=[]),n[ms].push(e)}(this._lView,e)}markForCheck(){ky(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ht]&=-129}reattach(){this._lView[Ht]|=128}detectChanges(){Dx(this._lView[je],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ao(n,e){ql(n,e,e[Ft],2,null,null)}(this._lView[je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=e}}class M6 extends Vy{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Dx(e[je],e,e[Ci],!1)}checkNoChanges(){}get context(){return null}}class fN extends Yt{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=sn(e);return new zy(t,this.ngModule)}}function pN(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class A6{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Eh(i);const r=this.injector.get(e,GT,i);return r!==GT||t===GT?r:this.parentInjector.get(e,t,i)}}class zy extends $e{get inputs(){const e=this.componentDef,t=e.inputTransforms,i=pN(e.inputs);if(null!==t)for(const r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return pN(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function QE(n){return n.map(Nf).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof bs?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new A6(e,s):e,a=o.get($n,null);if(null===a)throw new le(407,!1);const d={rendererFactory:a,sanitizer:o.get(Cx,null),effectManager:o.get(aN,null),afterRenderEventManager:o.get(ZT,null)},f=a.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",g=i?function KW(n,e,t,i){const s=i.get(kL,!1)||t===ks.ShadowDom,o=n.selectRootElement(e,s);return function JW(n){YL(n)}(o),o}(f,i,this.componentDef.encapsulation,o):Dp(f,m,function T6(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(m)),y=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let b=null;null!==g&&(b=Ny(g,o,!0));const x=tA(0,null,null,1,0,null,null,null,null,null,null),S=Mx(null,x,null,y,null,null,d,f,o,null,b);let E,A;Ja(S);try{const M=this.componentDef;let N,T=null;M.findHostDirectiveDefs?(N=[],T=new Map,M.findHostDirectiveDefs(M,N,T),N.push(M)):N=[M];const R=function I6(n,e){const t=n[je],i=jt;return n[i]=e,Yp(t,i,2,"#host",null)}(S,g),$=function R6(n,e,t,i,r,s,o){const a=r[je];!function P6(n,e,t,i){for(const r of n)e.mergedAttrs=Dh(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Ax(e,e.mergedAttrs,!0),null!==t&&Zb(i,t,e))}(i,n,e,o);let l=null;null!==e&&(l=Ny(e,r[la]));const c=s.rendererFactory.createRenderer(e,t);let u=16;t.signals?u=4096:t.onPush&&(u=64);const d=Mx(r,XL(t),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&iA(a,n,i.length-1),Tx(r,d),r[n.index]=d}(R,g,M,N,S,d,f);A=Fh(x,jt),g&&function L6(n,e,t,i){if(i)Of(n,t,["ng-version",MW.full]);else{const{attrs:r,classes:s}=function qc(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Ge(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Of(n,t,r),s&&s.length>0&&Yb(n,t,s.join(" "))}}(f,M,g,i),void 0!==t&&function N6(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(A,this.ngContentSelectors,t),E=function O6(n,e,t,i,r,s){const o=Ji(),a=r[je],l=Fr(o,r);JL(a,r,o,t,null,i);for(let u=0;u<t.length;u++)hr(Vl(r,a,o.directiveStart+u,o),r);QL(a,r,o),l&&hr(l,r);const c=Vl(r,a,o.directiveStart+o.componentOffset,o);if(n[Ci]=r[Ci]=c,null!==s)for(const u of s)u(c,e);return JT(a,o,n),c}($,M,N,T,S,[F6]),aA(x,S,null)}finally{Qa()}return new D6(this.componentType,E,tr(A,S),S,A)}}class D6 extends xe{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new M6(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;oA(s[je],s,r,e,t),this.previousInputValues.set(e,t),ky(Yr(this._tNode.index,s))}}get injector(){return new kr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function F6(){const n=Ji();ap(ge()[je],n)}function wn(n){let e=function mN(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(no(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new le(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=Ix(n.inputs),o.inputTransforms=Ix(n.inputTransforms),o.declaredInputs=Ix(n.declaredInputs),o.outputs=Ix(n.outputs);const a=r.hostBindings;a&&V6(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&U6(n,l),c&&B6(n,c),jc(n.inputs,r.inputs),jc(n.declaredInputs,r.declaredInputs),jc(n.outputs,r.outputs),null!==r.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),jc(o.inputTransforms,r.inputTransforms)),no(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===wn&&(t=!1)}}e=Object.getPrototypeOf(e)}!function k6(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Dh(r.hostAttrs,t=Dh(t,r.hostAttrs))}}(i)}function Ix(n){return n===Oo?{}:n===dn?[]:n}function U6(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function B6(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function V6(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function Rx(n){return!!lA(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function lA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function al(n,e,t){return n[e]=t}function Jr(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ad(n,e,t,i){const r=Jr(n,e,t);return Jr(n,e+1,i)||r}function Un(n,e,t,i){const r=ge();return Jr(r,iu(),e)&&(an(),ol(kn(),r,n,e,t,i)),Un}function Jp(n,e,t,i,r,s){const a=ad(n,function io(){return At.lFrame.bindingIndex}(),t,r);return pa(2),a?e+Pt(t)+i+Pt(r)+s:qt}function Qe(n,e,t,i,r,s,o,a){const l=ge(),c=an(),u=n+jt,d=c.firstCreatePass?function hj(n,e,t,i,r,s,o,a,l){const c=e.consts,u=Yp(e,n,4,o||null,Ka(c,a));nA(e,t,u,Ka(c,l)),ap(e,u);const d=u.tView=tA(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];Vs(d,!1);const f=PN(c,l,d,n);Ul()&&Pp(c,l,f,d),hr(f,l),Tx(l,l[u]=tN(f,l,f,d)),Vf(d)&&QT(c,l,d),null!=o&&eA(l,d,a)}let PN=function ON(n,e,t,i){return ma(!0),e[Ft].createComment("")};function $y(n){return eu(function pM(){return At.lFrame.contextLView}(),jt+n)}function we(n,e,t){const i=ge();return Jr(i,iu(),e)&&function lo(n,e,t,i,r,s,o,a){const l=Fr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(oA(n,t,u,i,r),$t(e)&&function s6(n,e){const t=Yr(e,n);16&t[Ht]||(t[Ht]|=64)}(t,e.index)):3&e.type&&(i=function r6(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}(an(),kn(),i,n,e,i[Ft],t,!1),we}function pA(n,e,t,i,r){const o=r?"class":"style";oA(n,t,e.inputs[o],o,i)}function Le(n,e,t,i){const r=ge(),s=an(),o=jt+n,a=r[Ft],l=s.firstCreatePass?function mj(n,e,t,i,r,s){const o=e.consts,l=Yp(e,n,2,i,Ka(o,r));return nA(e,t,l,Ka(o,s)),null!==l.attrs&&Ax(l,l.attrs,!1),null!==l.mergedAttrs&&Ax(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],c=LN(s,r,l,a,e,n);r[o]=c;const u=Vf(l);return Vs(l,!0),Zb(a,c,l),32!=(32&l.flags)&&Ul()&&Pp(s,r,c,l),0===function nb(){return At.lFrame.elementDepthCount}()&&hr(c,r),function dM(){At.lFrame.elementDepthCount++}(),u&&(QT(s,r,l),JT(s,l,r)),null!==i&&eA(r,l),Le}function Ie(){let n=Ji();kh()?Bo():(n=n.parent,Vs(n,!1));const e=n;(function np(n){return At.skipHydrationRootTNode===n})(e)&&function vs(){At.skipHydrationRootTNode=null}(),function fM(){At.lFrame.elementDepthCount--}();const t=an();return t.firstCreatePass&&(ap(t,n),Xr(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function cp(n){return 0!=(8&n.flags)}(e)&&pA(t,e,ge(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function su(n){return 0!=(16&n.flags)}(e)&&pA(t,e,ge(),e.stylesWithoutHost,!1),Ie}function Bn(n,e,t,i){return Le(n,e,t,i),Ie(),Bn}let LN=(n,e,t,i,r,s)=>(ma(!0),Dp(i,r,function cb(){return At.lFrame.currentNamespace}()));function co(n,e,t){const i=ge(),r=an(),s=n+jt,o=r.firstCreatePass?function yj(n,e,t,i,r){const s=e.consts,o=Ka(s,i),a=Yp(e,n,8,"ng-container",o);return null!==o&&Ax(a,o,!0),nA(e,t,a,Ka(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Vs(o,!0);const a=NN(r,i,o,n);return i[s]=a,Ul()&&Pp(r,i,a,o),hr(a,i),Vf(o)&&(QT(r,i,o),JT(r,o,i)),null!=t&&eA(i,o),co}function uo(){let n=Ji();const e=an();return kh()?Bo():(n=n.parent,Vs(n,!1)),e.firstCreatePass&&(ap(e,n),Xr(n)&&e.queries.elementEnd(n)),uo}function sm(n,e,t){return co(n,e,t),uo(),sm}let NN=(n,e,t,i)=>(ma(!0),ay(e[Ft],""));function nr(){return ge()}function qy(n){return!!n&&"function"==typeof n.then}function FN(n){return!!n&&"function"==typeof n.subscribe}function ct(n,e,t,i){const r=ge(),s=an(),o=Ji();return function UN(n,e,t,i,r,s,o){const a=Vf(i),c=n.firstCreatePass&&rN(n),u=e[Ci],d=iN(e);let f=!0;if(3&i.type||o){const _=Fr(i,e),v=o?o(_):_,y=d.length,b=o?S=>o(Fn(S[i.index])):i.index;let x=null;if(!o&&a&&(x=function bj(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[Ga],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=s,x.__ngLastListenerFn__=s,f=!1;else{s=VN(i,e,u,s,!1);const S=t.listen(v,r,s);d.push(s,S),c&&c.push(r,b,y,y+1)}}else s=VN(i,e,u,s,!1);const m=i.outputs;let g;if(f&&null!==m&&(g=m[r])){const _=g.length;if(_)for(let v=0;v<_;v+=2){const E=e[g[v]][g[v+1]].subscribe(s),A=d.length;d.push(s,E),c&&c.push(r,i.index,A,-(A+1))}}}(s,r,r[Ft],o,n,e,i),ct}function BN(n,e,t,i){try{return Uo(6,e,t),!1!==t(i)}catch(r){return oN(n,r),!1}finally{Uo(7,e,t)}}function VN(n,e,t,i,r){return function s(o){if(o===Function)return i;ky(n.componentOffset>-1?Yr(n.index,e):e);let l=BN(e,t,i,o),c=s.__ngNextListenerFn__;for(;c;)l=BN(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&o.preventDefault(),l}}function Te(n=1){return function Bh(n){return(At.lFrame.contextLView=function _M(n,e){for(;n>0;)e=e[Yc],n--;return e}(n,At.lFrame.contextLView))[Ci]}(n)}function xj(n,e){let t=null;const i=function Vi(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?yn(n,s,!0):JE(i,s))return r}else t=r}return t}function mA(n){const e=ge()[Si][zi];if(!e.projection){const i=e.projection=qh(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?xj(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function gA(n,e=0,t){const i=ge(),r=an(),s=Yp(r,jt+n,16,null,t||null);null===s.projection&&(s.projection=e),Bo(),(!i[gs]||tu())&&32!=(32&s.flags)&&function lT(n,e,t){dy(e[Ft],0,e,t,ly(n,t,e),Zh(t.parent||e[zi],t,e))}(r,i,s)}function Fx(n,e){return n<<17|e<<2}function Su(n){return n>>17&32767}function yA(n){return 2|n}function ld(n){return(131068&n)>>2}function vA(n,e){return-131069&n|e<<2}function wA(n){return 1|n}function ZN(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Su(s):ld(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];Aj(n[a],e)&&(l=!0,n[a+1]=i?wA(u):yA(u)),a=i?Su(u):ld(u)}l&&(n[t+1]=i?yA(s):wA(s))}function Aj(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&hu(n,e)>=0}const dr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KN(n){return n.substring(dr.key,dr.keyEnd)}function JN(n,e){const t=dr.textEnd;return t===e?-1:(e=dr.keyEnd=function Pj(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,dr.key=e,t),om(n,e,t))}function om(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function am(n,e,t){return xa(n,e,t,!1),am}function cd(n,e){return xa(n,e,null,!0),cd}function Tr(n){!function Ca(n,e,t,i){const r=an(),s=pa(2);r.firstUpdatePass&&rF(r,null,s,i);const o=ge();if(t!==qt&&Jr(o,s,t)){const a=r.data[Cr()];if(lF(a,i)&&!iF(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Sf(l,t||"")),pA(r,a,o,t,i)}else!function Hj(n,e,t,i,r,s,o,a){r===qt&&(r=dn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;null!==u||null!==d;){const f=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let _,g=null;u===d?(l+=2,c+=2,f!==m&&(g=d,_=m)):null===d||null!==u&&u<d?(l+=2,g=u):(c+=2,g=d,_=m),null!==g&&oF(n,e,t,i,g,_,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}(r,a,o,o[Ft],o[s+1],o[s+1]=function Vj(n,e,t){if(null==t||""===t)return dn;const i=[],r=rl(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(zj,cl,n,!0)}function cl(n,e){for(let t=function Ij(n){return function eF(n){dr.key=0,dr.keyEnd=0,dr.value=0,dr.valueEnd=0,dr.textEnd=n.length}(n),JN(n,om(n,0,dr.textEnd))}(e);t>=0;t=JN(e,t))Qn(n,KN(e),!0)}function xa(n,e,t,i){const r=ge(),s=an(),o=pa(2);s.firstUpdatePass&&rF(s,n,o,i),e!==qt&&Jr(r,o,e)&&oF(s,s.data[Cr()],r,r[Ft],n,r[o+1]=function Gj(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Bi(rl(n)))),n}(e,t),i,o)}function iF(n,e){return e>=n.expandoStartIndex}function rF(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Cr()],o=iF(n,t);lF(s,i)&&null===e&&!o&&(e=!1),e=function Fj(n,e,t,i){const r=function xr(n){const e=At.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Xy(t=bA(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=bA(r,n,e,t,i),null===s){let l=function kj(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==ld(i))return n[Su(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=bA(null,n,e,l[1],i),l=Xy(l,e.attrs,i),function Uj(n,e,t,i){n[Su(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function Bj(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Xy(i,n[s].hostAttrs,t);return Xy(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function Mj(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Su(o),l=ld(o);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||hu(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const f=Su(n[a+1]);n[i+1]=Fx(f,a),0!==f&&(n[f+1]=vA(n[f+1],i)),n[a+1]=function Sj(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Fx(a,0),0!==a&&(n[a+1]=vA(n[a+1],i)),a=i;else n[i+1]=Fx(l,0),0===a?a=i:n[l+1]=vA(n[l+1],i),l=i;c&&(n[i+1]=yA(n[i+1])),ZN(n,u,i,!0),ZN(n,u,i,!1),function Tj(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&hu(s,e)>=0&&(t[i+1]=wA(t[i+1]))}(e,u,n,i,s),o=Fx(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function bA(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Xy(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Xy(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Qn(n,o,!!t||e[++s]))}return void 0===n?null:n}function zj(n,e,t){const i=String(e);""!==i&&!i.includes(" ")&&Qn(n,i,t)}function oF(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function Ej(n){return 1==(1&n)}(c)?aF(l,e,t,r,ld(c),o):void 0;kx(u)||(kx(s)||function Cj(n){return 2==(2&n)}(c)&&(s=aF(l,null,t,r,a,o)),function ws(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:nl.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=nl.Important),n.setStyle(t,i,r,s))}}(i,o,Nh(Cr(),t),r,s))}function aF(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=null===u;let f=t[r+1];f===qt&&(f=d?dn:void 0);let m=d?W_(f,i):u===i?f:void 0;if(c&&!kx(m)&&(m=W_(l,i)),kx(m)&&(a=m,o))return a;const g=n[r+1];r=o?Su(g):ld(g)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=W_(l,i))}return a}function kx(n){return void 0!==n}function lF(n,e){return 0!=(n.flags&(e?8:16))}function Qt(n,e=""){const t=ge(),i=an(),r=n+jt,s=i.firstCreatePass?Yp(i,r,1,e,null):i.data[r],o=cF(i,t,s,e,n);t[r]=o,Ul()&&Pp(i,t,o,s),Vs(s,!1)}let cF=(n,e,t,i,r)=>(ma(!0),function Ap(n,e){return n.createText(e)}(e[Ft],i));function Sa(n){return Eu("",n,""),Sa}function Eu(n,e,t){const i=ge(),r=function Kp(n,e,t,i){return Jr(n,iu(),t)?e+Pt(t)+i:qt}(i,n,e,t);return r!==qt&&Kl(i,Cr(),r),Eu}function xA(n,e,t,i,r){const s=ge(),o=Jp(s,n,e,t,i,r);return o!==qt&&Kl(s,Cr(),o),xA}const cm="en-US";let IF=cm;function EA(n,e,t,i,r){if(n=vt(n),Array.isArray(n))for(let s=0;s<n.length;s++)EA(n[s],e,t,i,r);else{const s=an(),o=ge(),a=Ji();let l=sl(n)?n:vt(n.provide);const c=gx(n),u=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(sl(n)||!n.multi){const m=new zh(c,r,re),g=TA(l,e,r?u:u+f,d);-1===g?(Wh(hp(a,o),s,l),MA(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[g]=m,o[g]=m)}else{const m=TA(l,e,u+f,d),g=TA(l,e,u,u+f),v=g>=0&&t[g];if(r&&!v||!r&&!(m>=0&&t[m])){Wh(hp(a,o),s,l);const y=function u7(n,e,t,i,r){const s=new zh(n,t,re);return s.multi=[],s.index=e,s.componentProviders=0,tk(s,r,i&&!t),s}(r?c7:l7,t.length,r,i,c);!r&&v&&(t[g].providerFactory=y),MA(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else MA(s,n,m>-1?m:g,tk(t[r?g:m],c,!r&&i));!r&&i&&v&&t[g].componentProviders++}}}function MA(n,e,t,i){const r=sl(e),s=function mx(n){return!!n.useClass}(e);if(r||s){const l=(s?vt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function tk(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function TA(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function l7(n,e,t,i){return AA(this.multi,[])}function c7(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Vl(t,t[je],this.providerFactory.index,i);s=a.slice(0,o),AA(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],AA(r,s);return s}function AA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function Vn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function a7(n,e,t){const i=an();if(i.firstCreatePass){const r=no(n);EA(t,i.data,i.blueprint,r,!0),EA(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class hd{}class nk{}class DA extends hd{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fN(this);const r=wr(e);this._bootstrapComponents=Zl(r.bootstrap),this._r3Injector=EL(e,t,[{provide:hd,useValue:this},{provide:Yt,useValue:this.componentFactoryResolver},...i],Bi(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class IA extends nk{constructor(e){super(),this.moduleType=e}create(e){return new DA(this.moduleType,e,[])}}class ik extends hd{constructor(e){super(),this.componentFactoryResolver=new fN(this),this.instance=null;const t=new Hp([...e.providers,{provide:hd,useValue:this},{provide:Yt,useValue:this.componentFactoryResolver}],e.parent||zp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function RA(n,e,t=null){return new ik({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let f7=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const i=dx(0,t.type),r=i.length>0?RA([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=st({token:n,providedIn:"environment",factory:()=>new n(Ve(bs))})}return n})();function Mu(n){n.getStandaloneInjector=e=>e.get(f7).getOrCreateStandaloneInjector(n)}function ev(n,e,t){const i=br()+n,r=ge();return r[i]===qt?al(r,i,t?e.call(t):e()):function Hy(n,e){return n[e]}(r,i)}function tv(n,e,t,i){return hk(ge(),br(),n,e,t,i)}function uk(n,e,t,i,r){return function dk(n,e,t,i,r,s,o){const a=e+t;return ad(n,a,r,s)?al(n,a+2,o?i.call(o,r,s):i(r,s)):iv(n,a+2)}(ge(),br(),n,e,t,i,r)}function nv(n,e,t,i,r,s){return function fk(n,e,t,i,r,s,o,a){const l=e+t;return function Px(n,e,t,i,r){const s=ad(n,e,t,i);return Jr(n,e+2,r)||s}(n,l,r,s,o)?al(n,l+3,a?i.call(a,r,s,o):i(r,s,o)):iv(n,l+3)}(ge(),br(),n,e,t,i,r,s)}function iv(n,e){const t=n[e];return t===qt?void 0:t}function hk(n,e,t,i,r,s){const o=e+t;return Jr(n,o,r)?al(n,o+1,s?i.call(s,r):i(r)):iv(n,o+1)}function OA(n,e){const t=an();let i;const r=n+jt;t.firstCreatePass?(i=function A7(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Ol(i.type)),a=jn(re);try{const l=Wi(!1),c=s();return Wi(l),function pj(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,ge(),r,c),c}finally{jn(a)}}function LA(n,e,t){const i=n+jt,r=ge(),s=eu(r,i);return function rv(n,e){return n[je].data[e].pure}(r,i)?hk(r,br(),e,s.transform,t,s):s.transform(t)}function O7(){return this._results[Symbol.iterator]()}class NA{static#e=Symbol.iterator;get changes(){return this._changes||(this._changes=new Mn)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=NA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=O7)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Hs(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function MM(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function N7(n,e,t,i=!0){const r=e[je];if(function oT(n,e,t,i){const r=Zi+i,s=t.length;i>0&&(t[r-1][to]=e),i<s-Zi?(e[to]=t[r],G_(t,Zi+i,e)):(t.push(e),e[to]=null),e[Jn]=t;const o=e[Zc];null!==o&&t!==o&&function Wl(n,e){const t=n[ha];e[Si]!==e[Jn][Jn][Si]&&(n[Bw]=!0),null===t?n[ha]=[e]:t.push(e)}(o,e);const a=e[Bs];null!==a&&a.insertView(n),e[Ht]|=128}(r,e,n,t),i){const s=uy(t,n),o=e[Ft],a=Gs(o,n[No]);null!==a&&function rT(n,e,t,i,r,s){i[Dn]=r,i[zi]=e,ql(n,i,t,1,r,s)}(r,n[zi],o,e,a,s)}}let ul=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=U7}return n})();const F7=ul,k7=class extends F7{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){const r=function L7(n,e,t,i){const r=e.tView,a=Mx(n,r,t,4096&n[Ht]?4096:16,null,e,null,null,null,i?.injector??null,i?.hydrationInfo??null);a[Zc]=n[e.index];const c=n[Bs];return null!==c&&(a[Bs]=c.createEmbeddedView(r)),aA(r,a,t),a}(this._declarationLView,this._declarationTContainer,e,{injector:t,hydrationInfo:i});return new Vy(r)}};function U7(){return Hx(Ji(),ge())}function Hx(n,e){return 4&n.type?new k7(e,n,tr(n,e)):null}let Ea=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=W7}return n})();function W7(){return xk(Ji(),ge())}const j7=Ea,wk=class extends j7{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return tr(this._hostTNode,this._hostLView)}get injector(){return new kr(this._hostTNode,this._hostLView)}get parentInjector(){const e=Qi(this._hostTNode,this._hostLView);if(Gh(e)){const t=Bl(e,this._hostLView),i=so(e);return new kr(t[je].data[i+8],t)}return new kr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=bk(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Zi}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,r,false),a}createComponent(e,t,i,r,s){const o=e&&!function cu(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const _=t||{};a=_.index,i=_.injector,r=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}const l=o?e:new zy(sn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const v=(o?c:this.parentInjector).get(bs,null);v&&(s=v)}sn(l.componentType??{});const m=l.create(c,r,null,s);return this.insertImpl(m.hostView,a,false),m}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,i){const r=e._lView;if(function Jw(n){return Ki(n[Jn])}(r)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=r[Jn],u=new wk(c,c[zi],c[Jn]);u.detach(u.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;return N7(a,r,o,!i),e.attachToViewContainerRef(),G_(FA(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=bk(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Ip(this._lContainer,t);i&&(fp(FA(this._lContainer),t),Sr(i[je],i))}detach(e){const t=this._adjustIndex(e,-1),i=Ip(this._lContainer,t);return i&&null!=fp(FA(this._lContainer),t)?new Vy(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function bk(n){return n[8]}function FA(n){return n[8]||(n[8]=[])}function xk(n,e){let t;const i=e[n.index];return Ki(i)?t=i:(t=tN(i,e,null,n),e[n.index]=t,Tx(e,t)),Ck(t,e,n,i),new wk(t,n,e)}let Ck=function Sk(n,e,t,i){if(n[No])return;let r;r=8&t.type?Fn(i):function $7(n,e){const t=n[Ft],i=t.createComment(""),r=Fr(e,n);return jl(t,Gs(t,r),i,function $b(n,e){return n.nextSibling(e)}(t,r),!1),i}(e,t),n[No]=r};class kA{constructor(e){this.queryList=e,this.matches=null}clone(){return new kA(this.queryList)}setDirty(){this.queryList.setDirty()}}class UA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new UA(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Dk(e,t).matches&&this.queries[t].setDirty()}}class Ek{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class BA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new BA(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class VA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new VA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,Y7(t,s)),this.matchTNodeWithReadOption(e,t,jh(t,e,s,!1,!1))}else i===ul?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,jh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===vn||r===Ea||r===ul&&4&t.type)this.addMatch(t.index,-2);else{const s=jh(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Y7(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function K7(n,e,t,i){return-1===t?function Z7(n,e){return 11&n.type?tr(n,e):4&n.type?Hx(n,e):null}(e,n):-2===t?function J7(n,e,t){return t===vn?tr(e,n):t===ul?Hx(e,n):t===Ea?xk(e,n):void 0}(n,e,i):Vl(n,n[je],t,e)}function Mk(n,e,t,i){const r=e[Bs].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:K7(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function zA(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=Mk(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let d=Zi;d<u.length;d++){const f=u[d];f[Zc]===f[Jn]&&zA(f[je],f,c,i)}if(null!==u[ha]){const d=u[ha];for(let f=0;f<d.length;f++){const m=d[f];zA(m[je],m,c,i)}}}}}return i}function Tu(n){const e=ge(),t=an(),i=ro();A_(i+1);const r=Dk(t,i);if(n.dirty&&function Kw(n){return 4==(4&n[Ht])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?zA(t,e,i,[]):Mk(t,e,r,i);n.reset(s,xs),n.notifyOnChanges()}return!0}return!1}function Wx(n,e,t){const i=an();i.firstCreatePass&&(Ak(i,new Ek(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),Tk(i,ge(),e)}function sv(n,e,t,i){const r=an();if(r.firstCreatePass){const s=Ji();Ak(r,new Ek(e,t,i),s.index),function e$(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}Tk(r,ge(),t)}function Au(){return function Q7(n,e){return n[Bs].queries[e].queryList}(ge(),ro())}function Tk(n,e,t){const i=new NA(4==(4&t));(function t6(n,e,t,i){const r=iN(e);r.push(t),n.firstCreatePass&&rN(n).push(i,r.length-1)})(n,e,i,i.destroy),null===e[Bs]&&(e[Bs]=new UA),e[Bs].queries.push(new kA(i))}function Ak(n,e,t){null===n.queries&&(n.queries=new BA),n.queries.track(new VA(e,t))}function Dk(n,e){return n.queries.getByIndex(e)}function Ik(n,e){return Hx(n,e)}const qA=new tt("Application Initializer");let XA=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=qe(qA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const r of this.appInits){const s=r();if(qy(s))t.push(s);else if(FN(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qk=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const Jl=new tt("LocaleId",{providedIn:"root",factory:()=>qe(Jl,tn.Optional|tn.SkipSelf)||function b$(){return typeof $localize<"u"&&$localize.locale||cm}()});let $x=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $r(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class S${constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Xk=(()=>{class n{compileModuleSync(t){return new IA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Zl(wr(t).declarations).reduce((o,a)=>{const l=sn(a);return l&&o.push(new zy(l)),o},[]);return new S$(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Jk=new tt(""),Xx=new tt("");let QA,KA=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,QA||(function W$(n){QA=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{In.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(In),Ve(JA),Ve(Xx))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})(),JA=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return QA?.findTestabilityInTree(this,t,i)??null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),Du=null;const Qk=new tt("AllowMultipleToken"),eD=new tt("PlatformDestroyListeners"),tD=new tt("appBootstrapListener");class t3{constructor(e,t){this.name=e,this.token=t}}function i3(n,e,t=[]){const i=`Platform: ${e}`,r=new tt(i);return(s=[])=>{let o=nD();if(!o||o.injector.get(Qk,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function q$(n){if(Du&&!Du.get(Qk,!1))throw new le(400,!1);(function e3(){!function w_(n){v_=n}(()=>{throw new le(600,!1)})})(),Du=n;const e=n.get(s3);(function n3(n){n.get(_x,null)?.forEach(t=>t())})(n)}(function r3(n=[],e){return Ws.create({name:e,providers:[{provide:Ey,useValue:"platform"},{provide:eD,useValue:new Set([()=>Du=null])},...n]})}(a,i))}return function Y$(n){const e=nD();if(!e)throw new le(401,!1);return e}()}}function nD(){return Du?.get(s3)??null}let s3=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function Z$(n="zone.js",e){return"noop"===n?new UW:"zone.js"===n?new In(e):n}(i?.ngZone,function o3(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return r.run(()=>{const s=function d7(n,e,t){return new DA(n,e,t)}(t.moduleType,this.injector,function h3(n){return[{provide:In,useFactory:n},{provide:nd,multi:!0,useFactory:()=>{const e=qe(J$,{optional:!0});return()=>e.initialize()}},{provide:u3,useFactory:K$},{provide:IL,useFactory:RL}]}(()=>r)),o=s.injector.get(Yl,null);return r.runOutsideAngular(()=>{const a=r.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{Yx(this._modules,s),a.unsubscribe()})}),function a3(n,e,t){try{const i=t();return qy(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(o,r,()=>{const a=s.injector.get(XA);return a.runInitializers(),a.donePromise.then(()=>(function RF(n){Ns(n,"Expected localeId to be defined"),"string"==typeof n&&(IF=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(Jl,cm)||cm),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,i=[]){const r=l3({},i);return function j$(n,e,t){const i=new IA(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(dd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new le(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(eD,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ws))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function l3(n,e){return Array.isArray(e)?e.reduce(l3,n):{...n,...e}}let dd=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=qe(u3),this.zoneIsStable=qe(IL),this.componentTypes=[],this.components=[],this.isStable=qe($x).hasPendingTasks.pipe(Ls(t=>t?Mt(!1):this.zoneIsStable),function HE(n,e=ia){return n=n??bw,Zn((t,i)=>{let r,s=!0;t.subscribe(oi(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}(),Qg()),this._injector=qe(bs)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof $e;if(!this._injector.get(XA).done)throw!r&&function Il(n){const e=sn(n)||Kn(n)||Yi(n);return null!==e&&e.standalone}(t),new le(405,!1);let o;o=r?t:this._injector.get(Yt).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function $$(n){return n.isBoundToModule}(o)?void 0:this._injector.get(hd),c=o.create(Ws.NULL,[],i||o.selector,a),u=c.location.nativeElement,d=c.injector.get(Jk,null);return d?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Yx(this.components,c),d?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;Yx(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(tD,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yx(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new le(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Yx(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const u3=new tt("",{providedIn:"root",factory:()=>qe(Yl).handleError.bind(void 0)});function K$(){const n=qe(In),e=qe(Yl);return t=>n.runOutsideAngular(()=>e.handleError(t))}let J$=(()=>{class n{constructor(){this.zone=qe(In),this.applicationRef=qe(dd)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();let Iu=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=eq}return n})();function eq(n){return function tq(n,e,t){if($t(n)&&!t){const i=Yr(n.index,e);return new Vy(i,i)}return 47&n.type?new Vy(e[Si],e):null}(Ji(),ge(),16==(16&n))}class m3{constructor(){}supports(e){return Rx(e)}create(e){return new aq(e)}}const oq=(n,e)=>e;class aq{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||oq}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<_3(i,r,s)?t:i,a=_3(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let f=0;f<c;f++){const m=f<s.length?s[f]:s[f]=0,g=m+f;u<=g&&g<c&&(s[f]=m+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Rx(e))throw new le(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function q6(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new lq(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new g3),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new g3),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class lq{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cq{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class g3{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new cq,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _3(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class y3{constructor(){}supports(e){return e instanceof Map||lA(e)}create(){return new uq}}class uq{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||lA(e)))throw new le(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new hq(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class hq{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function v3(){return new Jx([new m3])}let Jx=(()=>{class n{static#e=this.\u0275prov=st({token:n,providedIn:"root",factory:v3});constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||v3()),deps:[[n,new gp,new mp]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new le(901,!1)}}return n})();function w3(){return new lv([new y3])}let lv=(()=>{class n{static#e=this.\u0275prov=st({token:n,providedIn:"root",factory:w3});constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||w3()),deps:[[n,new gp,new mp]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new le(901,!1)}}return n})();const pq=i3(null,"core",[]);let mq=(()=>{class n{constructor(t){}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(dd))};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({})}return n})();let lD=null;function Ru(){return lD}class Dq{}const Ar=new tt("DocumentToken");let cD=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return qe(Rq)},providedIn:"platform"})}return n})();const Iq=new tt("Location Initialized");let Rq=(()=>{class n extends cD{constructor(){super(),this._doc=qe(Ar),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ru().getBaseHref(this._doc)}onPopState(t){const i=Ru().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Ru().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return new n},providedIn:"platform"})}return n})();function uD(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function D3(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ql(n){return n&&"?"!==n[0]?"?"+n:n}let pd=(()=>{class n{historyGo(t){throw new Error("Not implemented")}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return qe(R3)},providedIn:"root"})}return n})();const I3=new tt("appBaseHref");let R3=(()=>{class n extends pd{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??qe(Ar).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uD(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ql(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Ql(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Ql(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(cD),Ve(I3,8))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pq=(()=>{class n extends pd{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=uD(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Ql(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Ql(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(cD),Ve(I3,8))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})(),hD=(()=>{class n{constructor(t){this._subject=new Mn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function Nq(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(D3(P3(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ql(i))}normalize(t){return n.stripTrailingSlash(function Lq(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,P3(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ql(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ql(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static#e=this.normalizeQueryParams=Ql;static#t=this.joinWithSlash=uD;static#n=this.stripTrailingSlash=D3;static#i=this.\u0275fac=function(i){return new(i||n)(Ve(pd))};static#r=this.\u0275prov=st({token:n,factory:function(){return function Oq(){return new hD(Ve(pd))}()},providedIn:"root"})}return n})();function P3(n){return n.replace(/\/index.html$/,"")}function z3(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const bD=/\s+/,H3=[];let hv=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=H3,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(bD):H3}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(bD):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,!!t[i]);this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(bD).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static#e=this.\u0275fac=function(i){return new(i||n)(re(Jx),re(lv),re(vn),re(Ei))};static#t=this.\u0275dir=wt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}return n})();class wX{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let dv=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new wX(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),W3(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{W3(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ea),re(ul),re(Jx))};static#t=this.\u0275dir=wt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return n})();function W3(n,e){n.context.$implicit=e.item}let Pu=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new bX,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){j3("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){j3("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ea),re(ul))};static#t=this.\u0275dir=wt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return n})();class bX{constructor(){this.$implicit=null,this.ngIf=null}}function j3(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Bi(e)}'.`)}let uC=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:nl.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}static#e=this.\u0275fac=function(i){return new(i||n)(re(vn),re(lv),re(Ei))};static#t=this.\u0275dir=wt({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return n})(),fv=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ea))};static#t=this.\u0275dir=wt({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ii]})}return n})(),q3=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275pipe=qr({name:"json",type:n,pure:!1,standalone:!0})}return n})(),X3=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=Y3}transform(t,i=Y3){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),s=i!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function zX(n,e){return{key:n,value:e}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}static#e=this.\u0275fac=function(i){return new(i||n)(re(lv,16))};static#t=this.\u0275pipe=qr({name:"keyvalue",type:n,pure:!1,standalone:!0})}return n})();function Y3(n,e){const t=n.key,i=e.key;if(t===i)return 0;if(void 0===t)return 1;if(void 0===i)return-1;if(null===t)return 1;if(null===i)return-1;if("string"==typeof t&&"string"==typeof i)return t<i?-1:1;if("number"==typeof t&&"number"==typeof i)return t-i;if("boolean"==typeof t&&"boolean"==typeof i)return t<i?-1:1;const r=String(t),s=String(i);return r==s?0:r<s?-1:1}let nc=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({})}return n})();const Z3="browser";function K3(n){return n===Z3}function J3(n){return"server"===n}let XX=(()=>{class n{static#e=this.\u0275prov=st({token:n,providedIn:"root",factory:()=>new YX(Ve(Ar),window)})}return n})();class YX{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ZX(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Q3{}class vY extends Dq{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class AD extends vY{static makeCurrent(){!function Aq(n){lD||(lD=n)}(new AD)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wY(){return mv=mv||document.querySelector("base"),mv?mv.getAttribute("href"):null}();return null==t?null:function bY(n){fC=fC||document.createElement("a"),fC.setAttribute("href",n);const e=fC.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){mv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return z3(document.cookie,e)}}let fC,mv=null,CY=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const DD=new tt("EventManagerPlugins");let rU=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(s=>s.supports(t)),!i)throw new le(5101,!1);return this._eventNameToPlugin.set(t,i),i}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(DD),Ve(In))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();class sU{constructor(e){this._doc=e}}const ID="ng-app-id";let oU=(()=>{class n{constructor(t,i,r,s={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=J3(s),this.resetHostNodes()}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(const i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${ID}="${this.appId}"]`);if(t?.length){const i=new Map;return t.forEach(r=>{null!=r.textContent&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){const r=this.styleRef;if(r.has(t)){const s=r.get(t);return s.usage+=i,s.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){const r=this.styleNodesInDOM,s=r?.get(i);if(s?.parentNode===t)return r.delete(i),s.removeAttribute(ID),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=i,this.platformIsServer&&o.setAttribute(ID,this.appId),o}}addStyleToHost(t,i){const r=this.getStyleElement(t,i);t.appendChild(r);const s=this.styleRef,o=s.get(i)?.elements;o?o.push(r):s.set(i,{elements:[r],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ar),Ve(Gp),Ve(vx,8),Ve(wa))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const RD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},PD=/%COMP%/g,TY=new tt("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function lU(n,e){return e.map(t=>t.replace(PD,n))}let OD=(()=>{class n{constructor(t,i,r,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=J3(a),this.defaultRenderer=new LD(t,o,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===ks.ShadowDom&&(i={...i,encapsulation:ks.Emulated});const r=this.getOrCreateRenderer(t,i);return r instanceof uU?r.applyToHost(t):r instanceof ND&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case ks.Emulated:s=new uU(l,c,i,this.appId,u,o,a,d);break;case ks.ShadowDom:return new RY(l,c,t,i,o,a,this.nonce,d);default:s=new ND(l,c,i,u,o,a,d)}r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(rU),Ve(oU),Ve(Gp),Ve(TY),Ve(Ar),Ve(wa),Ve(In),Ve(vx))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();class LD{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(RD[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cU(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(cU(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?this.doc.querySelector(e):e;if(!i)throw new le(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=RD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=RD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(nl.DashCase|nl.Important)?e.style.setProperty(t,i,r&nl.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&nl.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){if("string"==typeof e&&!(e=Ru().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function cU(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class RY extends LD{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=lU(r.id,r.styles);for(const u of c){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ND extends LD{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?lU(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class uU extends ND{constructor(e,t,i,r,s,o,a,l){const c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=function AY(n){return"_ngcontent-%COMP%".replace(PD,n)}(c),this.hostAttr=function DY(n){return"_nghost-%COMP%".replace(PD,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let PY=(()=>{class n extends sU{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ar))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const hU=["alt","control","meta","shift"],OY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},LY={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let NY=(()=>{class n extends sU{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ru().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),hU.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=OY[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),hU.forEach(o=>{o!==r&&(0,LY[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ar))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const fU=[{provide:wa,useValue:Z3},{provide:_x,useValue:function FY(){AD.makeCurrent()},multi:!0},{provide:Ar,useFactory:function UY(){return function Qb(n){Kr=n}(document),document},deps:[]}],BY=i3(pq,"browser",fU),VY=new tt(""),pU=[{provide:Xx,useClass:class xY{addToWindow(e){mn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new le(5103,!1);return s},mn.getAllAngularTestabilities=()=>e.getAllTestabilities(),mn.getAllAngularRootElements=()=>e.getAllRootElements(),mn.frameworkStabilizers||(mn.frameworkStabilizers=[]),mn.frameworkStabilizers.push(i=>{const r=mn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Ru().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:Jk,useClass:KA,deps:[In,JA,Xx]},{provide:KA,useClass:KA,deps:[In,JA,Xx]}],mU=[{provide:Ey,useValue:"root"},{provide:Yl,useFactory:function kY(){return new Yl},deps:[]},{provide:DD,useClass:PY,multi:!0,deps:[Ar,In,wa]},{provide:DD,useClass:NY,multi:!0,deps:[Ar]},OD,oU,rU,{provide:$n,useExisting:OD},{provide:Q3,useClass:CY,deps:[]},[]];let gU=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Gp,useValue:t.appId}]}}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(VY,12))};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({providers:[...mU,...pU],imports:[nc,mq]})}return n})(),FD=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ar))};static#t=this.\u0275prov=st({token:n,factory:function(i){let r=null;return r=i?new i:function HY(){return new FD(Ve(Ar))}(),r},providedIn:"root"})}return n})();typeof window<"u"&&window;class wU{}class qY{}const ic="*";function bU(n,e=null){return{type:2,steps:n,options:e}}function xU(n){return{type:6,styles:n,offset:null}}class gv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class CU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function SU(n){return new le(3e3,!1)}function Lu(n){switch(n.length){case 0:return new gv;case 1:return n[0];default:return new CU(n)}}function EU(n,e,t=new Map,i=new Map){const r=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((f,m)=>{let g=m,_=f;if("offset"!==m)switch(g=n.normalizePropertyName(g,r),_){case"!":_=t.get(m);break;case ic:_=i.get(m);break;default:_=n.normalizeStyleValue(m,g,_,r)}d.set(g,_)}),u||s.push(d),a=d,o=c}),r.length)throw function gZ(n){return new le(3502,!1)}();return s}function BD(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&VD(t,"start",n)));break;case"done":n.onDone(()=>i(t&&VD(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&VD(t,"destroy",n)))}}function VD(n,e,t){const s=zD(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function zD(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function fo(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function MU(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const AZ=(()=>typeof document>"u"?null:document.documentElement)();function HD(n){const e=n.parentNode||n.host||null;return e===AZ?null:e}let md=null,TU=!1;function AU(n,e){for(;e;){if(e===n)return!0;e=HD(e)}return!1}function DU(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]}let IU=(()=>{class n{validateStyleProperty(t){return function IZ(n){md||(md=function RZ(){return typeof document<"u"?document.body:null}()||{},TU=!!md.style&&"WebkitAppearance"in md.style);let e=!0;return md.style&&!function DZ(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in md.style,!e&&TU&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in md.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return AU(t,i)}getParentElement(t){return HD(t)}query(t,i,r){return DU(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new gv(r,s)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})(),GD=(()=>{class n{static#e=this.NOOP=new IU}return n})();const PZ=1e3,WD="ng-enter",pC="ng-leave",mC="ng-trigger",gC=".ng-trigger",PU="ng-animating",jD=".ng-animating";function rc(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:$D(parseFloat(e[1]),e[2])}function $D(n,e){return"s"===e?n*PZ:n}function _C(n,e,t){return n.hasOwnProperty("duration")?n:function LZ(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(SU()),{duration:0,delay:0,easing:""};r=$D(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=$D(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function XY(){return new le(3100,!1)}()),a=!0),s<0&&(e.push(function YY(){return new le(3101,!1)}()),a=!0),a&&e.splice(l,0,SU())}return{duration:r,delay:s,easing:o}}(n,e,t)}function _v(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function OU(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Nu(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function hl(n,e,t){e.forEach((i,r)=>{const s=XD(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function gd(n,e){e.forEach((t,i)=>{const r=XD(i);n.style[r]=""})}function yv(n){return Array.isArray(n)?1==n.length?n[0]:bU(n):n}const qD=new RegExp("{{\\s*(.+?)\\s*}}","g");function NU(n){let e=[];if("string"==typeof n){let t;for(;t=qD.exec(n);)e.push(t[1]);qD.lastIndex=0}return e}function vv(n,e,t){const i=n.toString(),r=i.replace(qD,(s,o)=>{let a=e[o];return null==a&&(t.push(function KY(n){return new le(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function yC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const kZ=/-+([a-z0-9])/g;function XD(n){return n.replace(kZ,(...e)=>e[1].toUpperCase())}function po(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function JY(n){return new le(3004,!1)}()}}function FU(n,e){return window.getComputedStyle(n)[e]}const vC="*";function VZ(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function zZ(n,e,t){if(":"==n[0]){const l=function HZ(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function dZ(n){return new le(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function hZ(n){return new le(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(kU(r,o));"<"==s[0]&&!(r==vC&&o==vC)&&e.push(kU(o,r))}(i,t,e)):t.push(n),t}const wC=new Set(["true","1"]),bC=new Set(["false","0"]);function kU(n,e){const t=wC.has(n)||bC.has(n),i=wC.has(e)||bC.has(e);return(r,s)=>{let o=n==vC||n==r,a=e==vC||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?wC.has(n):bC.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?wC.has(e):bC.has(e)),o&&a}}const GZ=new RegExp("s*:selfs*,?","g");function YD(n,e,t,i){return new WZ(n).build(e,t,i)}class WZ{constructor(e){this._driver=e}build(e,t,i){const r=new qZ(t);return this._resetContextStyleTimingState(r),po(this,yv(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function eZ(){return new le(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function tZ(){return new le(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{NU(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(yC(s.values()),t.errors.push(function nZ(n,e){return new le(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=po(this,yv(e.animation),t);return{type:1,matchers:VZ(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:_d(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>po(this,i,t)),options:_d(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=po(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:_d(e.options)}}visitAnimate(e,t){const i=function YZ(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return ZD(_C(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ZD(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=_C(t,e);return ZD(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:xU({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=xU(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===ic?i.push(a):t.errors.push(new le(3002,!1)):i.push(OU(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function rZ(n,e,t,i,r){return new le(3010,!1)}()),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&function FZ(n,e,t){const i=e.params||{},r=NU(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function ZY(n){return new le(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function sZ(){return new le(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(y=>{const b=this._makeStyleAst(y,t);let x=null!=b.offset?b.offset:function XZ(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(b.styles),S=0;return null!=x&&(s++,S=b.offset=x),l=l||S<0||S>1,a=a||S<c,c=S,o.push(S),b});l&&t.errors.push(function oZ(){return new le(3012,!1)}()),a&&t.errors.push(function aZ(){return new le(3200,!1)}());const d=e.steps.length;let f=0;s>0&&s<d?t.errors.push(function lZ(){return new le(3202,!1)}()):0==s&&(f=1/(d-1));const m=d-1,g=t.currentTime,_=t.currentAnimateTimings,v=_.duration;return u.forEach((y,b)=>{const x=f>0?b==m?1:f*b:o[b],S=x*v;t.currentTime=g+_.delay+S,_.duration=S,this._validateStyleAst(y,t),y.offset=x,i.styles.push(y)}),i}visitReference(e,t){return{type:8,animation:po(this,yv(e.animation),t),options:_d(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:_d(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:_d(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function jZ(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(GZ,"")),n=n.replace(/@\*/g,gC).replace(/@\w+/g,t=>gC+"-"+t.slice(1)).replace(/:animating/g,jD),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,fo(t.collectedStyles,t.currentQuerySelector,new Map);const a=po(this,yv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:_d(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function cZ(){return new le(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:_C(e.timings,t.errors,!0);return{type:12,animation:po(this,yv(e.animation),t),timings:i,options:null}}}class qZ{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function _d(n){return n?(n=_v(n)).params&&(n.params=function $Z(n){return n?_v(n):null}(n.params)):n={},n}function ZD(n,e,t){return{duration:n,delay:e,easing:t}}function KD(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class xC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const JZ=new RegExp(":enter","g"),eK=new RegExp(":leave","g");function JD(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new tK).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class tK{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new xC;const d=new QD(e,t,c,r,s,u,[]);d.options=l;const f=l.delay?rc(l.delay):0;d.currentTimeline.delayNextStep(f),d.currentTimeline.setStyles([o],null,d.errors,l),po(this,i,d);const m=d.timelines.filter(g=>g.containsAnimation());if(m.length&&a.size){let g;for(let _=m.length-1;_>=0;_--){const v=m[_];if(v.element===t){g=v;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,d.errors,l)}return m.length?m.map(g=>g.buildKeyframes()):[KD(t,[],[],[],0,f,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:rc(vv(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?rc(i.duration):null,a=null!=i.delay?rc(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),po(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=CC);const o=rc(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>po(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?rc(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),po(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return _C(t.params?vv(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?rc(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=CC);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),po(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,d.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const d=u.currentTime;po(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}}const CC={};class QD{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=CC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new SC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=rc(i.duration)),null!=i.delay&&(r.delay=rc(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=vv(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new QD(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=CC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new nK(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(JZ,"."+this._enterClassName)).replace(eK,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function uZ(n){return new le(3014,!1)}()),a}}class SC{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new SC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||ic),this._currentKeyframe.set(t,ic);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function iK(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,ic)}else Nu(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=vv(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??ic),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Nu(a,new Map,this._backFill);c.forEach((u,d)=>{"!"===u?e.add(d):u===ic&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?yC(e.values()):[],o=t.size?yC(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return KD(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class nK extends SC{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=Nu(e[0]);l.set("offset",0),s.push(l);const c=Nu(e[0]);c.set("offset",VU(a)),s.push(c);const u=e.length-1;for(let d=1;d<=u;d++){let f=Nu(e[d]);const m=f.get("offset");f.set("offset",VU((t+m*i)/o)),s.push(f)}i=o,t=0,r="",e=s}return KD(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function VU(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class eI{}const rK=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class sK extends eI{normalizePropertyName(e,t){return XD(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(rK.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function QY(n,e){return new le(3005,!1)}())}return o+s}}function zU(n,e,t,i,r,s,o,a,l,c,u,d,f){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:f}}const tI={};class HU{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function oK(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){const d=[],f=this.ast.options&&this.ast.options.params||tI,g=this.buildStyles(i,a&&a.params||tI,d),_=l&&l.params||tI,v=this.buildStyles(r,_,d),y=new Set,b=new Map,x=new Map,S="void"===r,E={params:aK(_,f),delay:this.ast.options?.delay},A=u?[]:JD(e,t,this.ast.animation,s,o,g,v,E,c,d);let M=0;if(A.forEach(T=>{M=Math.max(T.duration+T.delay,M)}),d.length)return zU(t,this._triggerName,i,r,S,g,v,[],[],b,x,M,d);A.forEach(T=>{const R=T.element,$=fo(b,R,new Set);T.preStyleProps.forEach(ie=>$.add(ie));const ee=fo(x,R,new Set);T.postStyleProps.forEach(ie=>ee.add(ie)),R!==t&&y.add(R)});const N=yC(y.values());return zU(t,this._triggerName,i,r,S,g,v,A,N,b,x,M)}}function aK(n,e){const t=_v(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class lK{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=_v(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=vv(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class uK{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new lK(r.style,r.options&&r.options.params||{},i))}),GU(this.states,"true","1"),GU(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new HU(e,r,this.states))}),this.fallbackTransition=function hK(n,e,t){return new HU(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function GU(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const dK=new xC;class fK{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=YD(this._driver,t,i,[]);if(i.length)throw function _Z(n){return new le(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=EU(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=JD(this._driver,t,s,WD,pC,new Map,new Map,i,dK,r),o.forEach(u=>{const d=fo(a,u.element,new Map);u.postStyleProps.forEach(f=>d.set(f,null))})):(r.push(function yZ(){return new le(3300,!1)}()),o=[]),r.length)throw function vZ(n){return new le(3504,!1)}();a.forEach((u,d)=>{u.forEach((f,m)=>{u.set(m,this._driver.computeStyle(d,m,ic))})});const c=Lu(o.map(u=>{const d=a.get(u.element);return this._buildPlayer(u,new Map,d)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function wZ(n){return new le(3301,!1)}();return t}listen(e,t,i,r){const s=zD(t,"","","");return BD(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const WU="ng-animate-queued",nI="ng-animate-disabled",yK=[],jU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vK={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Aa="__ng_removed";class iI{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function CK(n){return n??null}(i?e.value:e),i){const s=_v(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const wv="void",rI=new iI(wv);class wK{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wo(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function bZ(n,e){return new le(3302,!1)}();if(null==i||0==i.length)throw function xZ(n){return new le(3303,!1)}();if(!function SK(n){return"start"==n||"done"==n}(i))throw function CZ(n,e){return new le(3400,!1)}();const s=fo(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=fo(this._engine.statesByElement,e,new Map);return a.has(t)||(Wo(e,mC),Wo(e,mC+"-"+t),a.set(t,rI)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function SZ(n){return new le(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new sI(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Wo(e,mC),Wo(e,mC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new iI(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=rI),c.value!==wv&&l.value===c.value){if(!function TK(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const _=[],v=s.matchStyles(l.value,l.params,_),y=s.matchStyles(c.value,c.params,_);_.length?this._engine.reportError(_):this._engine.afterFlush(()=>{gd(e,v),hl(e,y)})}return}const f=fo(this._engine.playersByElement,e,[]);f.forEach(_=>{_.namespaceId==this.id&&_.triggerName==t&&_.queued&&_.destroy()});let m=s.matchTransition(l.value,c.value,e,c.params),g=!1;if(!m){if(!r)return;m=s.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:g}),g||(Wo(e,WU),o.onStart(()=>{pm(e,WU)})),o.onDone(()=>{let _=this.players.indexOf(o);_>=0&&this.players.splice(_,1);const v=this._engine.playersByElement.get(e);if(v){let y=v.indexOf(o);y>=0&&v.splice(y,1)}}),this.players.push(o),f.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,gC,!0);i.forEach(r=>{if(r[Aa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,wv,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Lu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||rI,u=new iI(wv),d=new sI(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Aa];(!s||s===jU)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Wo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=zD(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,BD(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class bK{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new wK(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(EC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!EC(t))return;const s=t[Aa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wo(e,nI)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),pm(e,nI))}removeNode(e,t,i){if(EC(t)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Aa]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return EC(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,gC,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,jD,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Lu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Aa];if(t&&t.setForRemoval){if(e[Aa]=jU,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(nI)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Wo(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Lu(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function EZ(n){return new le(3402,!1)}()}_flushAnimations(e,t){const i=new xC,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(G=>{u.add(G);const X=this.driver.query(G,".ng-animate-queued",!0);for(let Q=0;Q<X.length;Q++)u.add(X[Q])});const d=this.bodyNode,f=Array.from(this.statesByElement.keys()),m=XU(f,this.collectedEnterElements),g=new Map;let _=0;m.forEach((G,X)=>{const Q=WD+_++;g.set(X,Q),G.forEach(Z=>Wo(Z,Q))});const v=[],y=new Set,b=new Set;for(let G=0;G<this.collectedLeaveElements.length;G++){const X=this.collectedLeaveElements[G],Q=X[Aa];Q&&Q.setForRemoval&&(v.push(X),y.add(X),Q.hasAnimation?this.driver.query(X,".ng-star-inserted",!0).forEach(Z=>y.add(Z)):b.add(X))}const x=new Map,S=XU(f,Array.from(y));S.forEach((G,X)=>{const Q=pC+_++;x.set(X,Q),G.forEach(Z=>Wo(Z,Q))}),e.push(()=>{m.forEach((G,X)=>{const Q=g.get(X);G.forEach(Z=>pm(Z,Q))}),S.forEach((G,X)=>{const Q=x.get(X);G.forEach(Z=>pm(Z,Q))}),v.forEach(G=>{this.processLeaveNode(G)})});const E=[],A=[];for(let G=this._namespaceList.length-1;G>=0;G--)this._namespaceList[G].drainQueuedTransitions(t).forEach(Q=>{const Z=Q.player,ce=Q.element;if(E.push(Z),this.collectedEnterElements.length){const We=ce[Aa];if(We&&We.setForMove){if(We.previousTriggersValues&&We.previousTriggersValues.has(Q.triggerName)){const et=We.previousTriggersValues.get(Q.triggerName),St=this.statesByElement.get(Q.element);if(St&&St.has(Q.triggerName)){const Lt=St.get(Q.triggerName);Lt.value=et,St.set(Q.triggerName,Lt)}}return void Z.destroy()}}const q=!d||!this.driver.containsElement(d,ce),ae=x.get(ce),Ee=g.get(ce),ve=this._buildInstruction(Q,i,Ee,ae,q);if(ve.errors&&ve.errors.length)return void A.push(ve);if(q)return Z.onStart(()=>gd(ce,ve.fromStyles)),Z.onDestroy(()=>hl(ce,ve.toStyles)),void r.push(Z);if(Q.isFallbackTransition)return Z.onStart(()=>gd(ce,ve.fromStyles)),Z.onDestroy(()=>hl(ce,ve.toStyles)),void r.push(Z);const Ue=[];ve.timelines.forEach(We=>{We.stretchStartingKeyframe=!0,this.disabledNodes.has(We.element)||Ue.push(We)}),ve.timelines=Ue,i.append(ce,ve.timelines),o.push({instruction:ve,player:Z,element:ce}),ve.queriedElements.forEach(We=>fo(a,We,[]).push(Z)),ve.preStyleProps.forEach((We,et)=>{if(We.size){let St=l.get(et);St||l.set(et,St=new Set),We.forEach((Lt,ut)=>St.add(ut))}}),ve.postStyleProps.forEach((We,et)=>{let St=c.get(et);St||c.set(et,St=new Set),We.forEach((Lt,ut)=>St.add(ut))})});if(A.length){const G=[];A.forEach(X=>{G.push(function MZ(n,e){return new le(3505,!1)}())}),E.forEach(X=>X.destroy()),this.reportError(G)}const M=new Map,N=new Map;o.forEach(G=>{const X=G.element;i.has(X)&&(N.set(X,X),this._beforeAnimationBuild(G.player.namespaceId,G.instruction,M))}),r.forEach(G=>{const X=G.element;this._getPreviousPlayers(X,!1,G.namespaceId,G.triggerName,null).forEach(Z=>{fo(M,X,[]).push(Z),Z.destroy()})});const T=v.filter(G=>ZU(G,l,c)),R=new Map;qU(R,this.driver,b,c,ic).forEach(G=>{ZU(G,l,c)&&T.push(G)});const ee=new Map;m.forEach((G,X)=>{qU(ee,this.driver,new Set(G),l,"!")}),T.forEach(G=>{const X=R.get(G),Q=ee.get(G);R.set(G,new Map([...X?.entries()??[],...Q?.entries()??[]]))});const ie=[],V=[],K={};o.forEach(G=>{const{element:X,player:Q,instruction:Z}=G;if(i.has(X)){if(u.has(X))return Q.onDestroy(()=>hl(X,Z.toStyles)),Q.disabled=!0,Q.overrideTotalTime(Z.totalTime),void r.push(Q);let ce=K;if(N.size>1){let ae=X;const Ee=[];for(;ae=ae.parentNode;){const ve=N.get(ae);if(ve){ce=ve;break}Ee.push(ae)}Ee.forEach(ve=>N.set(ve,ce))}const q=this._buildAnimation(Q.namespaceId,Z,M,s,ee,R);if(Q.setRealPlayer(q),ce===K)ie.push(Q);else{const ae=this.playersByElement.get(ce);ae&&ae.length&&(Q.parentPlayer=Lu(ae)),r.push(Q)}}else gd(X,Z.fromStyles),Q.onDestroy(()=>hl(X,Z.toStyles)),V.push(Q),u.has(X)&&r.push(Q)}),V.forEach(G=>{const X=s.get(G.element);if(X&&X.length){const Q=Lu(X);G.setRealPlayer(Q)}}),r.forEach(G=>{G.parentPlayer?G.syncPlayerEvents(G.parentPlayer):G.destroy()});for(let G=0;G<v.length;G++){const X=v[G],Q=X[Aa];if(pm(X,pC),Q&&Q.hasAnimation)continue;let Z=[];if(a.size){let q=a.get(X);q&&q.length&&Z.push(...q);let ae=this.driver.query(X,jD,!0);for(let Ee=0;Ee<ae.length;Ee++){let ve=a.get(ae[Ee]);ve&&ve.length&&Z.push(...ve)}}const ce=Z.filter(q=>!q.destroyed);ce.length?EK(this,X,ce):this.processLeaveNode(X)}return v.length=0,ie.forEach(G=>{this.players.push(G),G.onDone(()=>{G.destroy();const X=this.players.indexOf(G);this.players.splice(X,1)}),G.play()}),ie}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==wv;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,d=fo(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(m=>{const g=m.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),m.destroy(),d.push(m)})}gd(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,f=t.timelines.map(g=>{const _=g.element;u.add(_);const v=_[Aa];if(v&&v.removedBeforeQueried)return new gv(g.duration,g.delay);const y=_!==l,b=function MK(n){const e=[];return YU(n,e),e}((i.get(_)||yK).map(M=>M.getRealPlayer())).filter(M=>!!M.element&&M.element===_),x=s.get(_),S=o.get(_),E=EU(this._normalizer,g.keyframes,x,S),A=this._buildPlayer(g,E,b);if(g.subTimeline&&r&&d.add(_),y){const M=new sI(e,a,_);M.setRealPlayer(A),c.push(M)}return A});c.forEach(g=>{fo(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>function xK(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,g.element,g))}),u.forEach(g=>Wo(g,PU));const m=Lu(f);return m.onDestroy(()=>{u.forEach(g=>pm(g,PU)),hl(l,t.toStyles)}),d.forEach(g=>{fo(r,g,[]).push(m)}),m}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new gv(e.duration,e.delay)}}class sI{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new gv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>BD(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){fo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function EC(n){return n&&1===n.nodeType}function $U(n,e){const t=n.style.display;return n.style.display=e??"none",t}function qU(n,e,t,i,r){const s=[];t.forEach(l=>s.push($U(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(d=>{const f=e.computeStyle(c,d,r);u.set(d,f),(!f||0==f.length)&&(c[Aa]=vK,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>$U(l,s[a++])),o}function XU(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function Wo(n,e){n.classList?.add(e)}function pm(n,e){n.classList?.remove(e)}function EK(n,e,t){Lu(t).onDone(()=>n.processLeaveNode(e))}function YU(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof CU?YU(i.players,e):e.push(i)}}function ZU(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class MC{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new bK(e,t,i),this._timelineEngine=new fK(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],u=YD(this._driver,s,l,[]);if(l.length)throw function mZ(n,e){return new le(3404,!1)}();a=function cK(n,e,t){return new uK(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=MU(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=MU(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let DK=(()=>{class n{static#e=this.initialStylesByElement=new WeakMap;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&hl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(hl(this._element,this._initialStyles),this._endStyles&&(hl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(gd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(gd(this._element,this._endStyles),this._endStyles=null),hl(this._element,this._initialStyles),this._state=3)}}return n})();function oI(n){let e=null;return n.forEach((t,i)=>{(function IK(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class KU{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:FU(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class RK{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return AU(e,t)}getParentElement(e){return HD(e)}query(e,t,i){return DU(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(m=>m instanceof KU);(function UZ(n,e){return 0===n||0===e})(i,r)&&u.forEach(m=>{m.currentSnapshot.forEach((g,_)=>c.set(_,g))});let d=function NZ(n){return n.length?n[0]instanceof Map?n:n.map(e=>OU(e)):[]}(t).map(m=>Nu(m));d=function BZ(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,FU(n,a)))}}return e}(e,d,c);const f=function AK(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=oI(e[0]),e.length>1&&(i=oI(e[e.length-1]))):e instanceof Map&&(t=oI(e)),t||i?new DK(n,t,i):null}(e,d);return new KU(e,d,l,f)}}let PK=(()=>{class n extends wU{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:ks.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?bU(t):t;return JU(this._renderer,null,i,"register",[r]),new OK(i,this._renderer)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve($n),Ve(Ar))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();class OK extends qY{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new LK(this._id,e,t||{},this._renderer)}}class LK{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return JU(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function JU(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const QU="@.disabled";let NK=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new eB("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new FK(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}static#e=this.\u0275fac=function(i){return new(i||n)(Ve($n),Ve(MC),Ve(In))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();class eB{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==QU?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class FK extends eB{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==QU?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function kK(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function UK(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let BK=(()=>{class n extends MC{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ar),Ve(GD),Ve(eI),Ve(dd))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const tB=[{provide:wU,useClass:PK},{provide:eI,useFactory:function VK(){return new sK}},{provide:MC,useClass:BK},{provide:$n,useFactory:function zK(n,e,t){return new NK(n,e,t)},deps:[OD,MC,In]}],aI=[{provide:GD,useFactory:()=>new RK},{provide:yx,useValue:"BrowserAnimations"},...tB],nB=[{provide:GD,useClass:IU},{provide:yx,useValue:"NoopAnimations"},...tB];let HK=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?nB:aI}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({providers:aI,imports:[gU]})}return n})();const{isArray:GK}=Array,{getPrototypeOf:WK,prototype:jK,keys:$K}=Object;function iB(n){if(1===n.length){const e=n[0];if(GK(e))return{args:e,keys:null};if(function qK(n){return n&&"object"==typeof n&&WK(n)===jK}(e)){const t=$K(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:XK}=Array;function rB(n){return ln(e=>function YK(n,e){return XK(e)?n(...e):n(e)}(n,e))}function sB(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}let oB=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ei),re(vn))};static#t=this.\u0275dir=wt({type:n})}return n})(),yd=(()=>{class n extends oB{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static#t=this.\u0275dir=wt({type:n,features:[wn]})}return n})();const jo=new tt("NgValueAccessor"),JK={provide:jo,useExisting:xn(()=>bv),multi:!0},eJ=new tt("CompositionEventMode");let bv=(()=>{class n extends oB{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function QK(){const n=Ru()?Ru().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ei),re(vn),re(eJ,8))};static#t=this.\u0275dir=wt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){1&i&&ct("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[Vn([JK]),wn]})}return n})();const Qr=new tt("NgValidators"),ku=new tt("NgAsyncValidators");function _B(n){return null!=n}function yB(n){return qy(n)?Di(n):n}function vB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function wB(n,e){return e.map(t=>t(n))}function bB(n){return n.map(e=>function nJ(n){return!n.validate}(e)?e:t=>e.validate(t))}function lI(n){return null!=n?function xB(n){if(!n)return null;const e=n.filter(_B);return 0==e.length?null:function(t){return vB(wB(t,e))}}(bB(n)):null}function cI(n){return null!=n?function CB(n){if(!n)return null;const e=n.filter(_B);return 0==e.length?null:function(t){return function ZK(...n){const e=_h(n),{args:t,keys:i}=iB(n),r=new Pn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let d=!1;ds(t[u]).subscribe(oi(s,f=>{d||(d=!0,c--),a[u]=f},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?sB(i,a):a),s.complete())}))}});return e?r.pipe(rB(e)):r}(wB(t,e).map(yB)).pipe(ln(vB))}}(bB(n)):null}function SB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uI(n){return n?Array.isArray(n)?n:[n]:[]}function DC(n,e){return Array.isArray(n)?n.includes(e):n===e}function TB(n,e){const t=uI(e);return uI(n).forEach(r=>{DC(t,r)||t.push(r)}),t}function AB(n,e){return uI(e).filter(t=>!DC(n,t))}class DB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ms extends DB{get formDirective(){return null}get path(){return null}}class sc extends DB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class IB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let hI=(()=>{class n extends IB{constructor(t){super(t)}static#e=this.\u0275fac=function(i){return new(i||n)(re(sc,2))};static#t=this.\u0275dir=wt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){2&i&&cd("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[wn]})}return n})();const xv="VALID",RC="INVALID",mm="PENDING",Cv="DISABLED";function PC(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class LB{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xv}get invalid(){return this.status===RC}get pending(){return this.status==mm}get disabled(){return this.status===Cv}get enabled(){return this.status!==Cv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AB(e,this._rawAsyncValidators))}hasValidator(e){return DC(this._rawValidators,e)}hasAsyncValidator(e){return DC(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cv,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xv,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xv||this.status===mm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cv:xv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mm,this._hasOwnPendingAsyncValidator=!0;const t=yB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Mn,this.statusChanges=new Mn}_calculateStatus(){return this._allControlsDisabled()?Cv:this.errors?RC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mm)?mm:this._anyControlsHaveStatus(RC)?RC:xv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){PC(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function aJ(n){return Array.isArray(n)?lI(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function lJ(n){return Array.isArray(n)?cI(n):n||null}(this._rawAsyncValidators)}}const gm=new tt("CallSetDisabledState",{providedIn:"root",factory:()=>OC}),OC="always";function Sv(n,e,t=OC){(function _I(n,e){const t=function EB(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(SB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function MB(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(SB(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();FC(e._rawValidators,r),FC(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function hJ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&NB(n,e)})}(n,e),function fJ(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function dJ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&NB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function uJ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function FC(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function NB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function BB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const VB=class extends LB{constructor(e=null,t,i){super(function pI(n){return(PC(n)?n.validators:n)||null}(t),function mI(n,e){return(PC(e)?e.asyncValidators:n)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),PC(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=BB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){UB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){UB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){BB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},bJ={provide:sc,useExisting:xn(()=>Mv)},GB=(()=>Promise.resolve())();let Mv=(()=>{class n extends sc{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new VB,this._registered=!1,this.name="",this.update=new Mn,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function wI(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===bv?t=s:function gJ(n){return Object.getPrototypeOf(n.constructor)===yd}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function vI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Sv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){GB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function dm(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);GB.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function LC(n,e){return[...e.path,n]}(t,this._parent):[t]}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ms,9),re(Qr,10),re(ku,10),re(jo,10),re(Iu,8),re(gm,8))};static#t=this.\u0275dir=wt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vn([bJ]),wn,Ii]})}return n})(),jB=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({})}return n})(),$J=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({imports:[jB]})}return n})(),XJ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gm,useValue:t.callSetDisabledState??OC}]}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({imports:[$J]})}return n})();function AI(...n){const e=yh(n),t=_h(n),{args:i,keys:r}=iB(n);if(0===i.length)return Di([],e);const s=new Pn(function ZJ(n,e,t=ia){return i=>{cV(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)cV(e,()=>{const c=Di(n[l],e);let u=!1;c.subscribe(oi(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>sB(r,o):ia));return t?s.pipe(rB(t)):s}function cV(n,e,t){n?Io(t,n,e):e()}const UC=B(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function DI(...n){return function KJ(){return Gc(1)}()(Di(n,yh(n)))}function uV(n){return new Pn(e=>{ds(n()).subscribe(e)})}function Tv(n,e){const t=Sn(n)?n:()=>n,i=r=>r.error(t());return new Pn(e?r=>e.schedule(i,0,r):i)}function II(){return Zn((n,e)=>{let t=null;n._refCount++;const i=oi(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class hV extends Pn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,rw(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ls;const t=this.getSubject();e.add(this.source.subscribe(oi(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ls.EMPTY)}return e}refCount(){return II()(this)}}function _m(n){return n<=0?()=>Ro:Zn((e,t)=>{let i=0;e.subscribe(oi(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function oc(n,e){return Zn((t,i)=>{let r=0;t.subscribe(oi(i,s=>n.call(e,s,r++)&&i.next(s)))})}function BC(n){return Zn((e,t)=>{let i=!1;e.subscribe(oi(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function dV(n=QJ){return Zn((e,t)=>{let i=!1;e.subscribe(oi(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function QJ(){return new UC}function wd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?oc((r,s)=>n(r,s,i)):ia,_m(1),t?BC(e):dV(()=>new UC))}function ym(n,e){return Sn(e)?lr(n,e,1):lr(n,1)}function es(n,e,t){const i=Sn(n)||e||t?{next:n,error:e,complete:t}:n;return i?Zn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(oi(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):ia}function bd(n){return Zn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(oi(t,void 0,void 0,o=>{s=ds(n(o,bd(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function RI(n){return n<=0?()=>Ro:Zn((e,t)=>{let i=[];e.subscribe(oi(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function Av(n){return Zn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function fV(n){return Zn((e,t)=>{ds(n).subscribe(oi(t,()=>t.complete(),ff)),!t.closed&&e.subscribe(t)})}const Zt="primary",Dv=Symbol("RouteTitle");class rQ{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vm(n){return new rQ(n)}function sQ(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function dl(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!pV(n[r],e[r]))return!1;return!0}function pV(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function mV(n){return n.length>0?n[n.length-1]:null}function Uu(n){return function YJ(n){return!!n&&(n instanceof Pn||Sn(n.lift)&&Sn(n.subscribe))}(n)?n:qy(n)?Di(Promise.resolve(n)):Mt(n)}const aQ={exact:function yV(n,e,t){if(!xd(n.segments,e.segments)||!VC(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!yV(n.children[i],e.children[i],t))return!1;return!0},subset:vV},gV={exact:function lQ(n,e){return dl(n,e)},subset:function cQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pV(n[t],e[t]))},ignored:()=>!0};function _V(n,e,t){return aQ[t.paths](n.root,e.root,t.matrixParams)&&gV[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function vV(n,e,t){return wV(n,e,e.segments,t)}function wV(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!xd(r,t)||e.hasChildren()||!VC(r,t,i))}if(n.segments.length===t.length){if(!xd(n.segments,t)||!VC(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!vV(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(xd(n.segments,r)&&VC(n.segments,r,i)&&n.children[Zt])&&wV(n.children[Zt],e,s,i)}}function VC(n,e,t){return e.every((i,r)=>gV[t](n[r].parameters,i.parameters))}class wm{constructor(e=new Ln([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vm(this.queryParams)),this._queryParamMap}toString(){return dQ.serialize(this)}}class Ln{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zC(this)}}class Iv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vm(this.parameters)),this._parameterMap}toString(){return CV(this)}}function xd(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Rv=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return new PI},providedIn:"root"})}return n})();class PI{parse(e){const t=new CQ(e);return new wm(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Pv(e.root,!0)}`,i=function mQ(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${HC(t)}=${HC(r)}`).join("&"):`${HC(t)}=${HC(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function fQ(n){return encodeURI(n)}(e.fragment)}`:""}`}}const dQ=new PI;function zC(n){return n.segments.map(e=>CV(e)).join("/")}function Pv(n,e){if(!n.hasChildren())return zC(n);if(e){const t=n.children[Zt]?Pv(n.children[Zt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==Zt&&i.push(`${r}:${Pv(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function hQ(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===Zt&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(i,r)=>r===Zt?[Pv(n.children[Zt],!1)]:[`${r}:${Pv(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${zC(n)}/${t[0]}`:`${zC(n)}/(${t.join("//")})`}}function bV(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function HC(n){return bV(n).replace(/%3B/gi,";")}function OI(n){return bV(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function GC(n){return decodeURIComponent(n)}function xV(n){return GC(n.replace(/\+/g,"%20"))}function CV(n){return`${OI(n.path)}${function pQ(n){return Object.keys(n).map(e=>`;${OI(e)}=${OI(n[e])}`).join("")}(n.parameters)}`}const gQ=/^[^\/()?;#]+/;function LI(n){const e=n.match(gQ);return e?e[0]:""}const _Q=/^[^\/()?;=#]+/,vQ=/^[^=?&#]+/,bQ=/^[^&#]+/;class CQ{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ln([],{}):new Ln([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Zt]=new Ln(e,t)),i}parseSegment(){const e=LI(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new le(4009,!1);return this.capture(e),new Iv(GC(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function yQ(n){const e=n.match(_Q);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=LI(this.remaining);r&&(i=r,this.capture(i))}e[GC(t)]=GC(i)}parseQueryParam(e){const t=function wQ(n){const e=n.match(vQ);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function xQ(n){const e=n.match(bQ);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=xV(t),s=xV(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=LI(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new le(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[Zt]:new Ln([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new le(4011,!1)}}function SV(n){return n.segments.length>0?new Ln([],{[Zt]:n}):n}function EV(n){const e={};for(const i of Object.keys(n.children)){const s=EV(n.children[i]);if(i===Zt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function SQ(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new Ln(n.segments.concat(e.segments),e.children)}return n}(new Ln(n.segments,e))}function Cd(n){return n instanceof wm}function MV(n){let e;const r=SV(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new Ln(s.url,o);return s===n&&(e=a),a}(n.root));return e??r}function TV(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(0===e.length)return NI(r,r,r,t,i);const s=function MQ(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new DV(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new DV(t,e,i)}(e);if(s.toRoot())return NI(r,r,new Ln([],{}),t,i);const o=function TQ(n,e,t){if(n.isAbsolute)return new jC(e,!0,0);if(!t)return new jC(e,!1,NaN);if(null===t.parent)return new jC(t,!0,0);const i=WC(n.commands[0])?0:1;return function AQ(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new le(4005,!1);r=i.segments.length}return new jC(i,!1,r-s)}(t,t.segments.length-1+i,n.numberOfDoubleDots)}(s,r,n),a=o.processChildren?Lv(o.segmentGroup,o.index,s.commands):IV(o.segmentGroup,o.index,s.commands);return NI(r,o.segmentGroup,a,t,i)}function WC(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ov(n){return"object"==typeof n&&null!=n&&n.outlets}function NI(n,e,t,i,r){let o,s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`}),o=n===e?t:AV(n,e,t);const a=SV(EV(o));return new wm(a,s,r)}function AV(n,e,t){const i={};return Object.entries(n.children).forEach(([r,s])=>{i[r]=s===e?t:AV(s,e,t)}),new Ln(n.segments,i)}class DV{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&WC(i[0]))throw new le(4003,!1);const r=i.find(Ov);if(r&&r!==mV(i))throw new le(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class jC{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function IV(n,e,t){if(n||(n=new Ln([],{})),0===n.segments.length&&n.hasChildren())return Lv(n,e,t);const i=function IQ(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Ov(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!PV(l,c,o))return s;i+=2}else{if(!PV(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Ln(n.segments.slice(0,i.pathIndex),{});return s.children[Zt]=new Ln(n.segments.slice(i.pathIndex),n.children),Lv(s,0,r)}return i.match&&0===r.length?new Ln(n.segments,{}):i.match&&!n.hasChildren()?FI(n,e,t):i.match?Lv(n,0,r):FI(n,e,t)}function Lv(n,e,t){if(0===t.length)return new Ln(n.segments,{});{const i=function DQ(n){return Ov(n[0])?n[0].outlets:{[Zt]:n}}(t),r={};if(Object.keys(i).some(s=>s!==Zt)&&n.children[Zt]&&1===n.numberOfChildren&&0===n.children[Zt].segments.length){const s=Lv(n.children[Zt],e,t);return new Ln(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=IV(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===i[s]&&(r[s]=o)}),new Ln(n.segments,r)}}function FI(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Ov(s)){const l=RQ(s.outlets);return new Ln(i,l)}if(0===r&&WC(t[0])){i.push(new Iv(n.segments[e].path,RV(t[0]))),r++;continue}const o=Ov(s)?s.outlets[Zt]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&WC(a)?(i.push(new Iv(o,RV(a))),r+=2):(i.push(new Iv(o,{})),r++)}return new Ln(i,{})}function RQ(n){const e={};return Object.entries(n).forEach(([t,i])=>{"string"==typeof i&&(i=[i]),null!==i&&(e[t]=FI(new Ln([],{}),0,i))}),e}function RV(n){const e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function PV(n,e,t){return n==t.path&&dl(e,t.parameters)}const Nv="imperative";class fl{constructor(e,t){this.id=e,this.url=t}}class $C extends fl{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Bu extends fl{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Fv extends fl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bm extends fl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class qC extends fl{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class OV extends fl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PQ extends fl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class OQ extends fl{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class LQ extends fl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NQ extends fl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class FQ{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class kQ{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class UQ{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BQ{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class VQ{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zQ{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LV{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class kI{}class UI{constructor(e){this.url=e}}class HQ{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new kv,this.attachRef=null}}let kv=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new HQ,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class NV{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=BI(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=BI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=VI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return VI(e,this._root).map(t=>t.value)}}function BI(n,e){if(n===e.value)return e;for(const t of e.children){const i=BI(n,t);if(i)return i}return null}function VI(n,e){if(n===e.value)return[e];for(const t of e.children){const i=VI(n,t);if(i.length)return i.unshift(e),i}return[]}class ac{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xm(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class FV extends NV{constructor(e,t){super(e),this.snapshot=t,zI(this,e)}toString(){return this.snapshot.toString()}}function kV(n,e){const t=function GQ(n,e){const o=new XC([],{},{},"",{},Zt,e,null,{});return new BV("",new ac(o,[]))}(0,e),i=new $r([new Iv("",{})]),r=new $r({}),s=new $r({}),o=new $r({}),a=new $r(""),l=new lc(i,r,o,a,s,Zt,e,t.root);return l.snapshot=t.root,new FV(new ac(l,[]),t)}class lc{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ln(c=>c[Dv]))??Mt(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ln(e=>vm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ln(e=>vm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function UV(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function WQ(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class XC{get title(){return this.data?.[Dv]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class BV extends NV{constructor(e,t){super(t),this.url=e,zI(this,t)}toString(){return VV(this._root)}}function zI(n,e){e.value._routerState=n,e.children.forEach(t=>zI(n,t))}function VV(n){const e=n.children.length>0?` { ${n.children.map(VV).join(", ")} } `:"";return`${n.value}${e}`}function HI(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,dl(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),dl(e.params,t.params)||n.paramsSubject.next(t.params),function oQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!dl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),dl(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function GI(n,e){const t=dl(n.params,e.params)&&function uQ(n,e){return xd(n,e)&&n.every((t,i)=>dl(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||GI(n.parent,e.parent))}let WI=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Zt,this.activateEvents=new Mn,this.deactivateEvents=new Mn,this.attachEvents=new Mn,this.detachEvents=new Mn,this.parentContexts=qe(kv),this.location=qe(Ea),this.changeDetector=qe(Iu),this.environmentInjector=qe(bs),this.inputBinder=qe(YC,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new le(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new le(4013,!1);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new jQ(t,a,r.injector);this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275dir=wt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ii]})}return n})();class jQ{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===lc?this.route:e===kv?this.childContexts:this.parent.get(e,t)}}const YC=new tt("");let zV=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:i}=t,r=AI([i.queryParams,i.params,i.data]).pipe(Ls(([s,o,a],l)=>(a={...s,...o,...a},0===l?Mt(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==i||null===i.component)return void this.unsubscribeFromRouteData(t);const o=function Tq(n){const e=sn(n);if(!e)return null;const t=new zy(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(i.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,r)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();function Uv(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function qQ(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Uv(n,i,r);return Uv(n,i)})}(n,e,t);return new ac(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Uv(n,a)),o}}const i=function XQ(n){return new lc(new $r(n.url),new $r(n.params),new $r(n.queryParams),new $r(n.fragment),new $r(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Uv(n,s));return new ac(i,r)}}const jI="ngNavigationCancelingError";function HV(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=Cd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=GV(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function GV(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[jI]=!0,i.cancellationCode=e,t&&(i.url=t),i}function WV(n){return n&&n[jI]}let jV=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=yi({type:n,selectors:[["ng-component"]],standalone:!0,features:[Mu],decls:1,vars:0,template:function(i,r){1&i&&Bn(0,"router-outlet")},dependencies:[WI],encapsulation:2})}return n})();function $I(n){const e=n.children&&n.children.map($I),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=jV),t}function Da(n){return n.outlet||Zt}function Bv(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class nee{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),HI(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=xm(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=xm(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=xm(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){const r=xm(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new zQ(s.value.snapshot))}),e.children.length&&this.forwardEvent(new BQ(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(HI(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),HI(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Bv(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class $V{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ZC{constructor(e,t){this.component=e,this.route=t}}function iee(n,e,t){const i=n._root;return Vv(i,e?e._root:null,t,[i.value])}function Cm(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Sw(n){return null!==Ba(n)}(n)?e.get(n):n:i}function Vv(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=xm(e);return n.children.forEach(o=>{(function see(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function oee(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!xd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!xd(n.url,e.url)||!dl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!GI(n,e)||!dl(n.queryParams,e.queryParams);default:return!GI(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new $V(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Vv(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ZC(a.outlet.component,o))}else o&&zv(e,a,r),r.canActivateChecks.push(new $V(i)),Vv(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>zv(a,t.getContext(o),r)),r}function zv(n,e,t){const i=xm(n),r=n.value;Object.entries(i).forEach(([s,o])=>{zv(o,r.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new ZC(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Hv(n){return"function"==typeof n}function qV(n){return n instanceof UC||"EmptyError"===n?.name}const KC=Symbol("INITIAL_VALUE");function Sm(){return Ls(n=>AI(n.map(e=>e.pipe(_m(1),function JJ(...n){const e=yh(n);return Zn((t,i)=>{(e?DI(n,t,e):DI(n,t)).subscribe(i)})}(KC)))).pipe(ln(e=>{for(const t of e)if(!0!==t){if(t===KC)return KC;if(!1===t||t instanceof wm)return t}return!0}),oc(e=>e!==KC),_m(1)))}function XV(n){return function vE(...n){return nw(n)}(es(e=>{if(Cd(e))throw HV(0,e)}),ln(e=>!0===e))}class JC{constructor(e){this.segmentGroup=e||null}}class YV{constructor(e){this.urlTree=e}}function Em(n){return Tv(new JC(n))}function ZV(n){return Tv(new YV(n))}class Mee{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new le(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Mt(i);if(r.numberOfChildren>1||!r.children[Zt])return Tv(new le(4e3,!1));r=r.children[Zt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new wm(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Ln(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new le(4001,!1);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}const qI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Tee(n,e,t,i,r){const s=XI(n,e,t);return s.matched?(i=function ZQ(n,e){return n.providers&&!n._injector&&(n._injector=RA(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,i),function Cee(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Mt(r.map(o=>{const a=Cm(o,n);return Uu(function dee(n){return n&&Hv(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Sm(),XV()):Mt(!0)}(i,e,t).pipe(ln(o=>!0===o?s:{...qI}))):Mt(s)}function XI(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...qI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||sQ)(t,n,e);if(!r)return{...qI};const s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function KV(n,e,t,i){return t.length>0&&function Iee(n,e,t){return t.some(i=>QC(n,e,i)&&Da(i)!==Zt)}(n,t,i)?{segmentGroup:new Ln(e,Dee(i,new Ln(t,n.children))),slicedSegments:[]}:0===t.length&&function Ree(n,e,t){return t.some(i=>QC(n,e,i))}(n,t,i)?{segmentGroup:new Ln(n.segments,Aee(n,0,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Ln(n.segments,n.children),slicedSegments:t}}function Aee(n,e,t,i,r){const s={};for(const o of i)if(QC(n,t,o)&&!r[Da(o)]){const a=new Ln([],{});s[Da(o)]=a}return{...r,...s}}function Dee(n,e){const t={};t[Zt]=e;for(const i of n)if(""===i.path&&Da(i)!==Zt){const r=new Ln([],{});t[Da(i)]=r}return t}function QC(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class Nee{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Mee(this.urlSerializer,this.urlTree)}noMatchError(e){return new le(4002,!1)}recognize(){const e=KV(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Zt).pipe(bd(t=>{if(t instanceof YV)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof JC?this.noMatchError(t):t}),ln(t=>{const i=new XC([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Zt,this.rootComponentType,null,{}),r=new ac(i,t),s=new BV("",r),o=function EQ(n,e,t=null,i=null){return TV(MV(n),e,t,i)}(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Zt).pipe(bd(i=>{throw i instanceof JC?this.noMatchError(i):i}))}inheritParamsAndData(e){const t=e.value,i=UV(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0)}processChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Di(r).pipe(ym(s=>{const o=i.children[s],a=function eee(n,e){const t=n.filter(i=>Da(i)===e);return t.push(...n.filter(i=>Da(i)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),function tQ(n,e){return Zn(function eQ(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(oi(o,u=>{const d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}((s,o)=>(s.push(...o),s)),BC(null),function nQ(n,e){const t=arguments.length>=2;return i=>i.pipe(n?oc((r,s)=>n(r,s,i)):ia,RI(1),t?BC(e):dV(()=>new UC))}(),lr(s=>{if(null===s)return Em(i);const o=JV(s);return function Fee(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),Mt(o)}))}processSegment(e,t,i,r,s,o){return Di(t).pipe(ym(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(bd(l=>{if(l instanceof JC)return Mt(null);throw l}))),wd(a=>!!a),bd(a=>{if(qV(a))return function Oee(n,e,t){return 0===e.length&&!n.children[t]}(i,r,s)?Mt([]):Em(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return function Pee(n,e,t,i){return!!(Da(n)===i||i!==Zt&&QC(e,t,n))&&("**"===n.path||XI(e,n,t).matched)}(i,r,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,r,i,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Em(r):Em(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirects.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?ZV(s):this.applyRedirects.lineralizeSegments(i,s).pipe(lr(o=>{const a=new Ln(o,{});return this.processSegment(e,t,a,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=XI(t,r,s);if(!a)return Em(t);const d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?ZV(d):this.applyRedirects.lineralizeSegments(r,d).pipe(lr(f=>this.processSegment(e,i,t,f.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s,o){let a;if("**"===i.path){const l=r.length>0?mV(r).parameters:{};a=Mt({snapshot:new XC(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QV(i),Da(i),i.component??i._loadedComponent??null,i,ez(i)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Tee(t,i,r,e).pipe(ln(({matched:l,consumedSegments:c,remainingSegments:u,parameters:d})=>l?{snapshot:new XC(c,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,QV(i),Da(i),i.component??i._loadedComponent??null,i,ez(i)),consumedSegments:c,remainingSegments:u}:null));return a.pipe(Ls(l=>null===l?Em(t):this.getChildConfig(e=i._injector??e,i,r).pipe(Ls(({routes:c})=>{const u=i._loadedInjector??e,{snapshot:d,consumedSegments:f,remainingSegments:m}=l,{segmentGroup:g,slicedSegments:_}=KV(t,f,m,c);if(0===_.length&&g.hasChildren())return this.processChildren(u,c,g).pipe(ln(y=>null===y?null:[new ac(d,y)]));if(0===c.length&&0===_.length)return Mt([new ac(d,[])]);const v=Da(i)===s;return this.processSegment(u,c,g,_,v?Zt:s,!0).pipe(ln(y=>[new ac(d,y)]))}))))}getChildConfig(e,t,i){return t.children?Mt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Mt({routes:t._loadedRoutes,injector:t._loadedInjector}):function xee(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Mt(!0):Mt(r.map(o=>{const a=Cm(o,n);return Uu(function lee(n){return n&&Hv(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Sm(),XV())}(e,t,i).pipe(lr(r=>r?this.configLoader.loadChildren(e,t).pipe(es(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Eee(n){return Tv(GV(!1,3))}())):Mt({routes:[],injector:e})}}function kee(n){const e=n.value.routeConfig;return e&&""===e.path}function JV(n){const e=[],t=new Set;for(const i of n){if(!kee(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=JV(i.children);e.push(new ac(i.value,r))}return e.filter(i=>!t.has(i))}function QV(n){return n.data||{}}function ez(n){return n.resolve||{}}function tz(n){return"string"==typeof n.title||null===n.title}function YI(n){return Ls(e=>{const t=n(e);return t?Di(t).pipe(ln(()=>e)):Mt(e)})}const Mm=new tt("ROUTES");let ZI=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=qe(Xk)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Mt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Uu(t.loadComponent()).pipe(ln(nz),es(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Av(()=>{this.componentLoaders.delete(t)})),r=new hV(i,()=>new hs).pipe(II());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Mt({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=function Wee(n,e,t,i){return Uu(n.loadChildren()).pipe(ln(nz),lr(r=>r instanceof nk||Array.isArray(r)?Mt(r):Di(e.compileModuleAsync(r))),ln(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,!0):(s=r.create(t).injector,o=s.get(Mm,[],{optional:!0,self:!0}).flat()),{routes:o.map($I),injector:s}}))}(i,this.compiler,t,this.onLoadEndListener).pipe(Av(()=>{this.childrenLoaders.delete(i)})),o=new hV(s,()=>new hs).pipe(II());return this.childrenLoaders.set(i,o),o}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nz(n){return function jee(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let e1=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new hs,this.transitionAbortSubject=new hs,this.configLoader=qe(ZI),this.environmentInjector=qe(bs),this.urlSerializer=qe(Rv),this.rootContexts=qe(kv),this.inputBindingEnabled=null!==qe(YC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new kQ(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new FQ(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t,i,r){return this.transitions=new $r({id:0,currentUrlTree:i,currentRawUrl:i,currentBrowserUrl:i,extractedUrl:t.urlHandlingStrategy.extract(i),urlAfterRedirects:t.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Nv,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oc(s=>0!==s.id),ln(s=>({...s,extractedUrl:t.urlHandlingStrategy.extract(s.rawUrl)})),Ls(s=>{this.currentTransition=s;let o=!1,a=!1;return Mt(s).pipe(es(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ls(l=>{const c=l.currentBrowserUrl.toString(),u=!t.navigated||l.extractedUrl.toString()!==c||c!==l.currentUrlTree.toString();if(!u&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const f="";return this.events.next(new bm(l.id,this.urlSerializer.serialize(l.rawUrl),f,0)),l.resolve(null),Ro}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Mt(l).pipe(Ls(f=>{const m=this.transitions?.getValue();return this.events.next(new $C(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?Ro:Promise.resolve(f)}),function Uee(n,e,t,i,r,s){return lr(o=>function Lee(n,e,t,i,r,s,o="emptyOnly"){return new Nee(n,e,t,i,r,o,s).recognize()}(n,e,t,i,o.extractedUrl,r,s).pipe(ln(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),es(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects};const m=new OV(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){const{id:f,extractedUrl:m,source:g,restoredState:_,extras:v}=l,y=new $C(f,this.urlSerializer.serialize(m),g,_);this.events.next(y);const b=kV(0,this.rootComponentType).snapshot;return this.currentTransition=s={...l,targetSnapshot:b,urlAfterRedirects:m,extras:{...v,skipLocationChange:!1,replaceUrl:!1}},Mt(s)}{const f="";return this.events.next(new bm(l.id,this.urlSerializer.serialize(l.extractedUrl),f,1)),l.resolve(null),Ro}}),es(l=>{const c=new PQ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),ln(l=>(this.currentTransition=s={...l,guards:iee(l.targetSnapshot,l.currentSnapshot,this.rootContexts)},s)),function pee(n,e){return lr(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Mt({...t,guardsResult:!0}):function mee(n,e,t,i){return Di(n).pipe(lr(r=>function bee(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Mt(s.map(a=>{const l=Bv(e)??r,c=Cm(a,l);return Uu(function hee(n){return n&&Hv(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(wd())})).pipe(Sm()):Mt(!0)}(r.component,r.route,t,e,i)),wd(r=>!0!==r,!0))}(o,i,r,n).pipe(lr(a=>a&&function aee(n){return"boolean"==typeof n}(a)?function gee(n,e,t,i){return Di(e).pipe(ym(r=>DI(function yee(n,e){return null!==n&&e&&e(new UQ(n)),Mt(!0)}(r.route.parent,i),function _ee(n,e){return null!==n&&e&&e(new VQ(n)),Mt(!0)}(r.route,i),function wee(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function ree(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>uV(()=>Mt(o.guards.map(l=>{const c=Bv(o.node)??t,u=Cm(l,c);return Uu(function uee(n){return n&&Hv(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(wd())})).pipe(Sm())));return Mt(s).pipe(Sm())}(n,r.path,t),function vee(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Mt(!0);const r=i.map(s=>uV(()=>{const o=Bv(e)??t,a=Cm(s,o);return Uu(function cee(n){return n&&Hv(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(wd())}));return Mt(r).pipe(Sm())}(n,r.route,t))),wd(r=>!0!==r,!0))}(i,s,n,e):Mt(a)),ln(a=>({...t,guardsResult:a})))})}(this.environmentInjector,l=>this.events.next(l)),es(l=>{if(s.guardsResult=l.guardsResult,Cd(l.guardsResult))throw HV(0,l.guardsResult);const c=new OQ(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),oc(l=>!!l.guardsResult||(this.cancelNavigationTransition(l,"",3),!1)),YI(l=>{if(l.guards.canActivateChecks.length)return Mt(l).pipe(es(c=>{const u=new LQ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Ls(c=>{let u=!1;return Mt(c).pipe(function Bee(n,e){return lr(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Mt(t);let s=0;return Di(r).pipe(ym(o=>function Vee(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!tz(r)&&(s[Dv]=r.title),function zee(n,e,t,i){const r=function Hee(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Mt({});const s={};return Di(r).pipe(lr(o=>function Gee(n,e,t,i){const r=Bv(e)??i,s=Cm(n,r);return Uu(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(wd(),es(a=>{s[o]=a}))),RI(1),function iQ(n){return ln(()=>n)}(s),bd(o=>qV(o)?Ro:Tv(o)))}(s,n,e,i).pipe(ln(o=>(n._resolvedData=o,n.data=UV(n,t).resolve,r&&tz(r)&&(n.data[Dv]=r.title),null)))}(o.route,i,n,e)),es(()=>s++),RI(1),lr(o=>s===r.length?Mt(t):Ro))})}(t.paramsInheritanceStrategy,this.environmentInjector),es({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",2)}}))}),es(c=>{const u=new NQ(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),YI(l=>{const c=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(es(f=>{u.component=f}),ln(()=>{})));for(const f of u.children)d.push(...c(f));return d};return AI(c(l.targetSnapshot.root)).pipe(BC(),_m(1))}),YI(()=>this.afterPreactivation()),ln(l=>{const c=function $Q(n,e,t){const i=Uv(n,e._root,t?t._root:void 0);return new FV(i,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s={...l,targetRouterState:c},s}),es(()=>{this.events.next(new kI)}),((n,e,t,i)=>ln(r=>(new nee(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),_m(1),es({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Bu(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),fV(this.transitionAbortSubject.pipe(es(l=>{throw l}))),Av(()=>{o||a||this.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),bd(l=>{if(a=!0,WV(l))this.events.next(new Fv(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),function YQ(n){return WV(n)&&Cd(n.url)}(l)?this.events.next(new UI(l.url)):s.resolve(!1);else{this.events.next(new qC(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(t.errorHandler(l))}catch(c){s.reject(c)}}return Ro}))}))}cancelNavigationTransition(t,i,r){const s=new Fv(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iz(n){return n!==Nv}let rz=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===Zt);return i}getResolvedTitleForRoute(t){return t.data[Dv]}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return qe($ee)},providedIn:"root"})}return n})(),$ee=(()=>{class n extends rz{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(FD))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return qe(Yee)},providedIn:"root"})}return n})();class Xee{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let Yee=(()=>{class n extends Xee{static#e=this.\u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const t1=new tt("",{providedIn:"root",factory:()=>({})});let Zee=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:function(){return qe(Kee)},providedIn:"root"})}return n})(),Kee=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Gv=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Gv||{});function sz(n,e){n.events.pipe(oc(t=>t instanceof Bu||t instanceof Fv||t instanceof qC||t instanceof bm),ln(t=>t instanceof Bu||t instanceof bm?Gv.COMPLETE:t instanceof Fv&&(0===t.code||1===t.code)?Gv.REDIRECTING:Gv.FAILED),oc(t=>t!==Gv.REDIRECTING),_m(1)).subscribe(()=>{e()})}function Jee(n){throw n}function Qee(n,e,t){return e.parse("/")}const ete={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Br=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=qe(qk),this.isNgZoneEnabled=!1,this._events=new hs,this.options=qe(t1,{optional:!0})||{},this.pendingTasks=qe($x),this.errorHandler=this.options.errorHandler||Jee,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Qee,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=qe(Zee),this.routeReuseStrategy=qe(qee),this.titleStrategy=qe(rz),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=qe(Mm,{optional:!0})?.flat()??[],this.navigationTransitions=qe(e1),this.urlSerializer=qe(Rv),this.location=qe(hD),this.componentInputBindingEnabled=!!qe(YC,{optional:!0}),this.eventsSubscription=new ls,this.isNgZoneEnabled=qe(In)instanceof In&&In.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new wm,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kV(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(i=>{try{const{currentTransition:r}=this.navigationTransitions;if(null===r)return void(oz(i)&&this._events.next(i));if(i instanceof $C)iz(r.source)&&(this.browserUrlTree=r.extractedUrl);else if(i instanceof bm)this.rawUrlTree=r.rawUrl;else if(i instanceof OV){if("eager"===this.urlUpdateStrategy){if(!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl);this.setBrowserUrl(s,r)}this.browserUrlTree=r.urlAfterRedirects}}else if(i instanceof kI)this.currentUrlTree=r.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(r.urlAfterRedirects,r.rawUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r),this.browserUrlTree=r.urlAfterRedirects);else if(i instanceof Fv)0!==i.code&&1!==i.code&&(this.navigated=!0),(3===i.code||2===i.code)&&this.restoreHistory(r);else if(i instanceof UI){const s=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),o={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||iz(r.source)};this.scheduleNavigation(s,Nv,null,o,{resolve:r.resolve,reject:r.reject,promise:r.promise})}i instanceof qC&&this.restoreHistory(r,!0),i instanceof Bu&&(this.navigated=!0),oz(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Nv,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map($I),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}null!==u&&(u=this.removeEmptyProps(u));try{d=MV(r?r.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),d=this.currentUrlTree.root}return TV(d,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=Cd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Nv,null,i)}navigate(t,i={skipLocationChange:!1}){return function nte(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new le(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...ete}:!1===i?{...tte}:i,Cd(t))return _V(this.currentUrlTree,t,r);const s=this.parseUrl(t);return _V(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((d,f)=>{a=d,l=f});const u=this.pendingTasks.add();return sz(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(d=>Promise.reject(d))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId+1)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oz(n){return!(n instanceof kI||n instanceof UI)}class az{}let ste=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(oc(t=>t instanceof Bu),ym(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=RA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Di(r).pipe(Gc())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Mt(null);const s=r.pipe(lr(o=>null===o?Mt(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Di([s,this.loader.loadComponent(i)]).pipe(Gc()):s})}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Br),Ve(Xk),Ve(bs),Ve(az),Ve(ZI))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const JI=new tt("");let lz=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $C?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Bu?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bm&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof LV&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new LV(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(i){!function $L(){throw new Error("invalid")}()};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();function cc(n,e){return{\u0275kind:n,\u0275providers:e}}function uz(){const n=qe(Ws);return e=>{const t=n.get(dd);if(e!==t.components[0])return;const i=n.get(Br),r=n.get(hz);1===n.get(QI)&&i.initialNavigation(),n.get(dz,null,tn.Optional)?.setUpPreloading(),n.get(JI,null,tn.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const hz=new tt("",{factory:()=>new hs}),QI=new tt("",{providedIn:"root",factory:()=>1}),dz=new tt("");function cte(n){return cc(0,[{provide:dz,useExisting:ste},{provide:az,useExisting:n}])}const fz=new tt("ROUTER_FORROOT_GUARD"),hte=[hD,{provide:Rv,useClass:PI},Br,kv,{provide:lc,useFactory:function cz(n){return n.routerState.root},deps:[Br]},ZI,[]];function dte(){return new t3("Router",Br)}let pz=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[hte,[],{provide:Mm,multi:!0,useValue:t},{provide:fz,useFactory:gte,deps:[[Br,new mp,new gp]]},{provide:t1,useValue:i||{}},i?.useHash?{provide:pd,useClass:Pq}:{provide:pd,useClass:R3},{provide:JI,useFactory:()=>{const n=qe(XX),e=qe(In),t=qe(t1),i=qe(e1),r=qe(Rv);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lz(r,i,n,e,t)}},i?.preloadingStrategy?cte(i.preloadingStrategy).\u0275providers:[],{provide:t3,multi:!0,useFactory:dte},i?.initialNavigation?_te(i):[],i?.bindToComponentInputs?cc(8,[zV,{provide:YC,useExisting:zV}]).\u0275providers:[],[{provide:mz,useFactory:uz},{provide:tD,multi:!0,useExisting:mz}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Mm,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(fz,8))};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({})}return n})();function gte(n){return"guarded"}function _te(n){return["disabled"===n.initialNavigation?cc(3,[{provide:qA,multi:!0,useFactory:()=>{const e=qe(Br);return()=>{e.setUpLocationChangeListener()}}},{provide:QI,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?cc(2,[{provide:QI,useValue:0},{provide:qA,multi:!0,deps:[Ws],useFactory:e=>{const t=e.get(Iq,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Br),s=e.get(hz);sz(r,()=>{i(!0)}),e.get(e1).afterPreactivation=()=>(i(!0),s.closed?Mt(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const mz=new tt("");let n1=(()=>{class n{constructor(){this.destroy$=new hs,this.takeUntilDestroy=t=>t.pipe(fV(this.destroy$))}ngOnDestroy(){console.log("UnsubscriberService","ngOnDestroy"),this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();function gz(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function zn(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){gz(s,i,r,o,a,"next",l)}function a(l){gz(s,i,r,o,a,"throw",l)}o(void 0)})}}const yz=1,bte=2,uc=3,i1=0,zte=1,Hte=2,zu=0,Gte=1,Wte=2,jte=3,$te=4,qte=5,Hu=301,Sd=302,Wv=306,Ed=1e3,ts=1001,$i=1003,Mi=1006,dc=1008,Gu=1009,Wu=1014,fc=1015,qv=1016,Md=1020,qo=1023,Td=1026,Rm=1027,Xv=2300,Pm=2301,Ad=3001,Ti="srgb",Vr="srgb-linear",fR="display-p3",l1="display-p3-linear",c1="linear",di="srgb",u1="rec709",h1="p3",oH="300 es",pc=2e3;class Id{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ns=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Rd=Math.PI/180,Nm=180/Math.PI;function mo(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ns[255&n]+ns[n>>8&255]+ns[n>>16&255]+ns[n>>24&255]+"-"+ns[255&e]+ns[e>>8&255]+"-"+ns[e>>16&15|64]+ns[e>>24&255]+"-"+ns[63&t|128]+ns[t>>8&255]+"-"+ns[t>>16&255]+ns[t>>24&255]+ns[255&i]+ns[i>>8&255]+ns[i>>16&255]+ns[i>>24&255]).toLowerCase()}function Oi(n,e,t){return Math.max(e,Math.min(t,n))}function gR(n,e){return(n%e+e)%e}function Yv(n,e,t){return(1-t)*n+t*e}function _R(n){return 0==(n&n-1)&&0!==n}function lH(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function p1(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function qs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function en(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const ju_DEG2RAD=Rd,ju_degToRad=function Dne(n){return n*Rd},ju_radToDeg=function Ine(n){return n*Nm};class fe{constructor(e=0,t=0){fe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class on{constructor(e,t,i,r,s,o,a,l,c){on.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],m=i[5],g=i[8],_=r[0],v=r[3],y=r[6],b=r[1],x=r[4],S=r[7],E=r[2],A=r[5],M=r[8];return s[0]=o*_+a*b+l*E,s[3]=o*v+a*x+l*A,s[6]=o*y+a*S+l*M,s[1]=c*_+u*b+d*E,s[4]=c*v+u*x+d*A,s[7]=c*y+u*S+d*M,s[2]=f*_+m*b+g*E,s[5]=f*v+m*x+g*A,s[8]=f*y+m*S+g*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,m=c*s-o*l,g=t*d+i*f+r*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return e[0]=d*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=f*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=m*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(yR.makeScale(e,t)),this}rotate(e){return this.premultiply(yR.makeRotation(-e)),this}translate(e,t){return this.premultiply(yR.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const yR=new on;function cH(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function Zv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function One(){const n=Zv("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const uH={};function Kv(n){n in uH||(uH[n]=!0,console.warn(n))}const hH=(new on).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),dH=(new on).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),m1={[Vr]:{transfer:c1,primaries:u1,toReference:n=>n,fromReference:n=>n},[Ti]:{transfer:di,primaries:u1,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[l1]:{transfer:c1,primaries:h1,toReference:n=>n.applyMatrix3(dH),fromReference:n=>n.applyMatrix3(hH)},[fR]:{transfer:di,primaries:h1,toReference:n=>n.convertSRGBToLinear().applyMatrix3(dH),fromReference:n=>n.applyMatrix3(hH).convertLinearToSRGB()}},Lne=new Set([Vr,l1]),Rn={enabled:!0,_workingColorSpace:Vr,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Lne.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,m1[t].fromReference)((0,m1[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return m1[n].primaries},getTransfer:function(n){return""===n?c1:m1[n].transfer}};function km(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function vR(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Um;class fH{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Um&&(Um=Zv("canvas")),Um.width=e.width,Um.height=e.height;const i=Um.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Um}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Zv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*km(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*km(t[i]/255)):km(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Nne=0;class Bm{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Nne++}),this.uuid=mo(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(wR(r[o].isDataTexture?r[o].image:r[o]))}else s=wR(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function wR(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?fH.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Fne=0,Yo=(()=>{class n extends Id{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=ts,s=ts,o=Mi,a=dc,l=qo,c=Gu,u=n.DEFAULT_ANISOTROPY,d=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Fne++}),this.uuid=mo(),this.name="",this.source=new Bm(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new fe(0,0),this.repeat=new fe(1,1),this.center=new fe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new on,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof d?this.colorSpace=d:(Kv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===Ad?Ti:""),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ed:t.x=t.x-Math.floor(t.x);break;case ts:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ed:t.y=t.y-Math.floor(t.y);break;case ts:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Kv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ti?Ad:3e3}set encoding(t){Kv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Ad?Ti:""}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class Hn{constructor(e=0,t=0,i=0,r=1){Hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],d=l[8],f=l[1],m=l[5],g=l[9],_=l[2],v=l[6],y=l[10];if(Math.abs(u-f)<.01&&Math.abs(d-_)<.01&&Math.abs(g-v)<.01){if(Math.abs(u+f)<.1&&Math.abs(d+_)<.1&&Math.abs(g+v)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,S=(m+1)/2,E=(y+1)/2,A=(u+f)/4,M=(d+_)/4,N=(g+v)/4;return x>S&&x>E?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=A/i,s=M/i):S>E?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=A/r,s=N/r):E<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(E),i=M/s,r=N/s),this.set(i,r,s,t),this}let b=Math.sqrt((v-g)*(v-g)+(d-_)*(d-_)+(f-u)*(f-u));return Math.abs(b)<.001&&(b=1),this.x=(v-g)/b,this.y=(d-_)/b,this.z=(f-u)/b,this.w=Math.acos((c+m+y-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class kne extends Id{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Hn(0,0,e,t),this.scissorTest=!1,this.viewport=new Hn(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==i.encoding&&(Kv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ad?Ti:""),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new Yo(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Bm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pd extends kne{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class bR extends Yo{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$i,this.minFilter=$i,this.wrapR=ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class pH extends Yo{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$i,this.minFilter=$i,this.wrapR=ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Xn{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[o+0],m=s[o+1],g=s[o+2],_=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=f,e[t+1]=m,e[t+2]=g,void(e[t+3]=_);if(d!==_||l!==f||c!==m||u!==g){let v=1-a;const y=l*f+c*m+u*g+d*_,b=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const E=Math.sqrt(x),A=Math.atan2(E,y*b);v=Math.sin(v*A)/E,a=Math.sin(a*A)/E}const S=a*b;if(l=l*v+f*S,c=c*v+m*S,u=u*v+g*S,d=d*v+_*S,v===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=E,c*=E,u*=E,d*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],f=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*d+l*m-c*f,e[t+1]=l*g+u*f+c*d-a*m,e[t+2]=c*g+u*m+a*f-l*d,e[t+3]=u*g-a*d-l*f-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),f=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d-f*m*g;break;case"YXZ":this._x=f*u*d+c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d+f*m*g;break;case"ZXY":this._x=f*u*d-c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d-f*m*g;break;case"ZYX":this._x=f*u*d-c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d+f*m*g;break;case"YZX":this._x=f*u*d+c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d-f*m*g;break;case"XZY":this._x=f*u*d-c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d+f*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+a+d;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Oi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,t=0,i=0){O.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(mH.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(mH.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,f=-s*t-o*i-a*r;return this.x=c*l+f*-s+u*-a-d*-o,this.y=u*l+f*-o+d*-s-c*-a,this.z=d*l+f*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return xR.copy(this).projectOnVector(e),this.sub(xR)}reflect(e){return this.sub(xR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Oi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const xR=new O,mH=new Xn;class go{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(gc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(gc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=gc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Vm.copy(e.boundingBox),Vm.applyMatrix4(e.matrixWorld),this.union(Vm);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)gc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(gc)}else null===r.boundingBox&&r.computeBoundingBox(),Vm.copy(r.boundingBox),Vm.applyMatrix4(e.matrixWorld),this.union(Vm)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,gc),gc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Jv),g1.subVectors(this.max,Jv),zm.subVectors(e.a,Jv),Hm.subVectors(e.b,Jv),Gm.subVectors(e.c,Jv),$u.subVectors(Hm,zm),qu.subVectors(Gm,Hm),Od.subVectors(zm,Gm);let t=[0,-$u.z,$u.y,0,-qu.z,qu.y,0,-Od.z,Od.y,$u.z,0,-$u.x,qu.z,0,-qu.x,Od.z,0,-Od.x,-$u.y,$u.x,0,-qu.y,qu.x,0,-Od.y,Od.x,0];return!(!CR(t,zm,Hm,Gm,g1)||(t=[1,0,0,0,1,0,0,0,1],!CR(t,zm,Hm,Gm,g1)))&&(_1.crossVectors($u,qu),t=[_1.x,_1.y,_1.z],CR(t,zm,Hm,Gm,g1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,gc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(gc).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(mc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mc=[new O,new O,new O,new O,new O,new O,new O,new O],gc=new O,Vm=new go,zm=new O,Hm=new O,Gm=new O,$u=new O,qu=new O,Od=new O,Jv=new O,g1=new O,_1=new O,Ld=new O;function CR(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ld.fromArray(n,s);const a=r.x*Math.abs(Ld.x)+r.y*Math.abs(Ld.y)+r.z*Math.abs(Ld.z),l=e.dot(Ld),c=t.dot(Ld),u=i.dot(Ld);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Une=new go,Qv=new O,SR=new O;class Ia{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Une.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Qv.subVectors(e,this.center);const t=Qv.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Qv,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(SR.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Qv.copy(e.center).add(SR)),this.expandByPoint(Qv.copy(e.center).sub(SR))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const _c=new O,ER=new O,y1=new O,Xu=new O,MR=new O,v1=new O,TR=new O;class Wm{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,_c)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=_c.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(_c.copy(this.origin).addScaledVector(this.direction,t),_c.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){ER.copy(e).add(t).multiplyScalar(.5),y1.copy(t).sub(e).normalize(),Xu.copy(this.origin).sub(ER);const s=.5*e.distanceTo(t),o=-this.direction.dot(y1),a=Xu.dot(this.direction),l=-Xu.dot(y1),c=Xu.lengthSq(),u=Math.abs(1-o*o);let d,f,m,g;if(u>0)if(d=o*l-a,f=o*a-l,g=s*u,d>=0)if(f>=-g)if(f<=g){const _=1/u;d*=_,f*=_,m=d*(d+o*f+2*a)+f*(o*d+f+2*l)+c}else f=s,d=Math.max(0,-(o*f+a)),m=-d*d+f*(f+2*l)+c;else f=-s,d=Math.max(0,-(o*f+a)),m=-d*d+f*(f+2*l)+c;else f<=-g?(d=Math.max(0,-(-o*s+a)),f=d>0?-s:Math.min(Math.max(-s,-l),s),m=-d*d+f*(f+2*l)+c):f<=g?(d=0,f=Math.min(Math.max(-s,-l),s),m=f*(f+2*l)+c):(d=Math.max(0,-(o*s+a)),f=d>0?s:Math.min(Math.max(-s,-l),s),m=-d*d+f*(f+2*l)+c);else f=o>0?-s:s,d=Math.max(0,-(o*f+a)),m=-d*d+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(ER).addScaledVector(y1,f),m}intersectSphere(e,t){_c.subVectors(e.center,this.origin);const i=_c.dot(this.direction),r=_c.dot(_c)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),d>=0?(a=(e.min.z-f.z)*d,l=(e.max.z-f.z)*d):(a=(e.max.z-f.z)*d,l=(e.min.z-f.z)*d),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,_c)}intersectTriangle(e,t,i,r,s){MR.subVectors(t,e),v1.subVectors(i,e),TR.crossVectors(MR,v1);let a,o=this.direction.dot(TR);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Xu.subVectors(this.origin,e);const l=a*this.direction.dot(v1.crossVectors(Xu,v1));if(l<0)return null;const c=a*this.direction.dot(MR.cross(Xu));if(c<0||l+c>o)return null;const u=-a*Xu.dot(TR);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class It{constructor(e,t,i,r,s,o,a,l,c,u,d,f,m,g,_,v){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c,u,d,f,m,g,_,v)}set(e,t,i,r,s,o,a,l,c,u,d,f,m,g,_,v){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=f,y[3]=m,y[7]=g,y[11]=_,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new It).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/jm.setFromMatrixColumn(e,0).length(),s=1/jm.setFromMatrixColumn(e,1).length(),o=1/jm.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const f=o*u,m=o*d,g=a*u,_=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+g*c,t[5]=f-_*c,t[9]=-a*l,t[2]=_-f*c,t[6]=g+m*c,t[10]=o*l}else if("YXZ"===e.order){const f=l*u,m=l*d,g=c*u,_=c*d;t[0]=f+_*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=_+f*a,t[10]=o*l}else if("ZXY"===e.order){const f=l*u,m=l*d,g=c*u,_=c*d;t[0]=f-_*a,t[4]=-o*d,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=_-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const f=o*u,m=o*d,g=a*u,_=a*d;t[0]=l*u,t[4]=g*c-m,t[8]=f*c+_,t[1]=l*d,t[5]=_*c+f,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const f=o*l,m=o*c,g=a*l,_=a*c;t[0]=l*u,t[4]=_-f*d,t[8]=g*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+g,t[10]=f-_*d}else if("XZY"===e.order){const f=o*l,m=o*c,g=a*l,_=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+_,t[5]=o*u,t[9]=m*d-g,t[2]=g*d-m,t[6]=a*u,t[10]=_*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Bne,e,Vne)}lookAt(e,t,i){const r=this.elements;return _o.subVectors(e,t),0===_o.lengthSq()&&(_o.z=1),_o.normalize(),Yu.crossVectors(i,_o),0===Yu.lengthSq()&&(1===Math.abs(i.z)?_o.x+=1e-4:_o.z+=1e-4,_o.normalize(),Yu.crossVectors(i,_o)),Yu.normalize(),w1.crossVectors(_o,Yu),r[0]=Yu.x,r[4]=w1.x,r[8]=_o.x,r[1]=Yu.y,r[5]=w1.y,r[9]=_o.y,r[2]=Yu.z,r[6]=w1.z,r[10]=_o.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],m=i[13],g=i[2],_=i[6],v=i[10],y=i[14],b=i[3],x=i[7],S=i[11],E=i[15],A=r[0],M=r[4],N=r[8],T=r[12],R=r[1],$=r[5],ee=r[9],ie=r[13],V=r[2],K=r[6],G=r[10],X=r[14],Q=r[3],Z=r[7],ce=r[11],q=r[15];return s[0]=o*A+a*R+l*V+c*Q,s[4]=o*M+a*$+l*K+c*Z,s[8]=o*N+a*ee+l*G+c*ce,s[12]=o*T+a*ie+l*X+c*q,s[1]=u*A+d*R+f*V+m*Q,s[5]=u*M+d*$+f*K+m*Z,s[9]=u*N+d*ee+f*G+m*ce,s[13]=u*T+d*ie+f*X+m*q,s[2]=g*A+_*R+v*V+y*Q,s[6]=g*M+_*$+v*K+y*Z,s[10]=g*N+_*ee+v*G+y*ce,s[14]=g*T+_*ie+v*X+y*q,s[3]=b*A+x*R+S*V+E*Q,s[7]=b*M+x*$+S*K+E*Z,s[11]=b*N+x*ee+S*G+E*ce,s[15]=b*T+x*ie+S*X+E*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],m=e[14];return e[3]*(+s*l*d-r*c*d-s*a*f+i*c*f+r*a*m-i*l*m)+e[7]*(+t*l*m-t*c*f+s*o*f-r*o*m+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*m-s*o*d+i*o*m+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*f+r*o*d-i*o*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],g=e[12],_=e[13],v=e[14],y=e[15],b=d*v*c-_*f*c+_*l*m-a*v*m-d*l*y+a*f*y,x=g*f*c-u*v*c-g*l*m+o*v*m+u*l*y-o*f*y,S=u*_*c-g*d*c+g*a*m-o*_*m-u*a*y+o*d*y,E=g*d*l-u*_*l-g*a*f+o*_*f+u*a*v-o*d*v,A=t*b+i*x+r*S+s*E;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/A;return e[0]=b*M,e[1]=(_*f*s-d*v*s-_*r*m+i*v*m+d*r*y-i*f*y)*M,e[2]=(a*v*s-_*l*s+_*r*c-i*v*c-a*r*y+i*l*y)*M,e[3]=(d*l*s-a*f*s-d*r*c+i*f*c+a*r*m-i*l*m)*M,e[4]=x*M,e[5]=(u*v*s-g*f*s+g*r*m-t*v*m-u*r*y+t*f*y)*M,e[6]=(g*l*s-o*v*s-g*r*c+t*v*c+o*r*y-t*l*y)*M,e[7]=(o*f*s-u*l*s+u*r*c-t*f*c-o*r*m+t*l*m)*M,e[8]=S*M,e[9]=(g*d*s-u*_*s-g*i*m+t*_*m+u*i*y-t*d*y)*M,e[10]=(o*_*s-g*a*s+g*i*c-t*_*c-o*i*y+t*a*y)*M,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*m-t*a*m)*M,e[12]=E*M,e[13]=(u*_*r-g*d*r+g*i*f-t*_*f-u*i*v+t*d*v)*M,e[14]=(g*a*r-o*_*r-g*i*l+t*_*l+o*i*v-t*a*v)*M,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*f+t*a*f)*M,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,m=s*u,g=s*d,_=o*u,v=o*d,y=a*d,b=l*c,x=l*u,S=l*d,E=i.x,A=i.y,M=i.z;return r[0]=(1-(_+y))*E,r[1]=(m+S)*E,r[2]=(g-x)*E,r[3]=0,r[4]=(m-S)*A,r[5]=(1-(f+y))*A,r[6]=(v+b)*A,r[7]=0,r[8]=(g+x)*M,r[9]=(v-b)*M,r[10]=(1-(f+_))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=jm.set(r[0],r[1],r[2]).length();const o=jm.set(r[4],r[5],r[6]).length(),a=jm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ra.copy(this);const c=1/s,u=1/o,d=1/a;return Ra.elements[0]*=c,Ra.elements[1]*=c,Ra.elements[2]*=c,Ra.elements[4]*=u,Ra.elements[5]*=u,Ra.elements[6]*=u,Ra.elements[8]*=d,Ra.elements[9]*=d,Ra.elements[10]*=d,t.setFromRotationMatrix(Ra),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=pc){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let m,g;if(a===pc)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);m=-o/(o-s),g=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=pc){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),f=(t+e)*c,m=(i+r)*u;let g,_;if(a===pc)g=(o+s)*d,_=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);g=s*d,_=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const jm=new O,Ra=new It,Bne=new O(0,0,0),Vne=new O(1,1,1),Yu=new O,w1=new O,_o=new O,gH=new It,_H=new Xn;let yH=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],f=s[2],m=s[6],g=s[10];switch(i){case"XYZ":this._y=Math.asin(Oi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Oi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Oi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Oi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Oi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Oi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return gH.makeRotationFromQuaternion(t),this.setFromRotationMatrix(gH,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return _H.setFromEuler(this),this.setFromQuaternion(_H,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class AR{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let zne=0;const vH=new O,$m=new Xn,yc=new It,b1=new O,e0=new O,Hne=new O,Gne=new Xn,wH=new O(1,0,0),bH=new O(0,1,0),xH=new O(0,0,1),Wne={type:"added"},jne={type:"removed"};let fi=(()=>{class n extends Id{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:zne++}),this.uuid=mo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new O,i=new yH,r=new Xn,s=new O(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new It},normalMatrix:{value:new on}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new AR,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return $m.setFromAxisAngle(t,i),this.quaternion.multiply($m),this}rotateOnWorldAxis(t,i){return $m.setFromAxisAngle(t,i),this.quaternion.premultiply($m),this}rotateX(t){return this.rotateOnAxis(wH,t)}rotateY(t){return this.rotateOnAxis(bH,t)}rotateZ(t){return this.rotateOnAxis(xH,t)}translateOnAxis(t,i){return vH.copy(t).applyQuaternion(this.quaternion),this.position.add(vH.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(wH,t)}translateY(t){return this.translateOnAxis(bH,t)}translateZ(t){return this.translateOnAxis(xH,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(yc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?b1.copy(t):b1.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),e0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yc.lookAt(e0,b1,this.up):yc.lookAt(b1,e0,this.up),this.quaternion.setFromRotationMatrix(yc),s&&(yc.extractRotation(s.matrixWorld),$m.setFromRotationMatrix(yc),this.quaternion.premultiply($m.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Wne)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(jne)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),yc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),yc.multiply(t.parent.matrixWorld)),t.applyMatrix4(yc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,i);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e0,t,Hne),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(e0,Gne,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),f=a(t.shapes),m=a(t.skeletons),g=a(t.animations),_=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new O(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const Pa=new O,vc=new O,DR=new O,wc=new O,qm=new O,Xm=new O,CH=new O,IR=new O,RR=new O,PR=new O;let x1=!1;class yo{constructor(e=new O,t=new O,i=new O){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Pa.subVectors(e,t),r.cross(Pa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Pa.subVectors(r,t),vc.subVectors(i,t),DR.subVectors(e,t);const o=Pa.dot(Pa),a=Pa.dot(vc),l=Pa.dot(DR),c=vc.dot(vc),u=vc.dot(DR),d=o*c-a*a;if(0===d)return s.set(-2,-1,-1);const f=1/d,m=(c*l-a*u)*f,g=(o*u-a*l)*f;return s.set(1-m-g,g,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,wc),wc.x>=0&&wc.y>=0&&wc.x+wc.y<=1}static getUV(e,t,i,r,s,o,a,l){return!1===x1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),x1=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,wc),l.setScalar(0),l.addScaledVector(s,wc.x),l.addScaledVector(o,wc.y),l.addScaledVector(a,wc.z),l}static isFrontFacing(e,t,i,r){return Pa.subVectors(i,t),vc.subVectors(e,t),Pa.cross(vc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Pa.subVectors(this.c,this.b),vc.subVectors(this.a,this.b),.5*Pa.cross(vc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return yo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return yo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return!1===x1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),x1=!0),yo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return yo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return yo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return yo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;qm.subVectors(r,i),Xm.subVectors(s,i),IR.subVectors(e,i);const l=qm.dot(IR),c=Xm.dot(IR);if(l<=0&&c<=0)return t.copy(i);RR.subVectors(e,r);const u=qm.dot(RR),d=Xm.dot(RR);if(u>=0&&d<=u)return t.copy(r);const f=l*d-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(qm,o);PR.subVectors(e,s);const m=qm.dot(PR),g=Xm.dot(PR);if(g>=0&&m<=g)return t.copy(s);const _=m*c-l*g;if(_<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(Xm,a);const v=u*g-m*d;if(v<=0&&d-u>=0&&m-g>=0)return CH.subVectors(s,r),a=(d-u)/(d-u+(m-g)),t.copy(r).addScaledVector(CH,a);const y=1/(v+_+f);return o=_*y,a=f*y,t.copy(i).addScaledVector(qm,o).addScaledVector(Xm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let $ne=0;class As extends Id{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$ne++}),this.uuid=mo(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const SH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Zu={h:0,s:0,l:0},C1={h:0,s:0,l:0};function OR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Ye{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ti){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Rn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Rn.workingColorSpace){return this.r=e,this.g=t,this.b=i,Rn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Rn.workingColorSpace){if(e=gR(e,1),t=Oi(t,0,1),i=Oi(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=OR(o,s,e+1/3),this.g=OR(o,s,e),this.b=OR(o,s,e-1/3)}return Rn.toWorkingColorSpace(this,r),this}setStyle(e,t=Ti){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ti){const i=SH[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=km(e.r),this.g=km(e.g),this.b=km(e.b),this}copyLinearToSRGB(e){return this.r=vR(e.r),this.g=vR(e.g),this.b=vR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ti){return Rn.fromWorkingColorSpace(is.copy(this),e),65536*Math.round(Oi(255*is.r,0,255))+256*Math.round(Oi(255*is.g,0,255))+Math.round(Oi(255*is.b,0,255))}getHexString(e=Ti){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Rn.workingColorSpace){Rn.fromWorkingColorSpace(is.copy(this),t);const i=is.r,r=is.g,s=is.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(r-s)/d+(r<s?6:0);break;case r:l=(s-i)/d+2;break;case s:l=(i-r)/d+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Rn.workingColorSpace){return Rn.fromWorkingColorSpace(is.copy(this),t),e.r=is.r,e.g=is.g,e.b=is.b,e}getStyle(e=Ti){Rn.fromWorkingColorSpace(is.copy(this),e);const t=is.r,i=is.g,r=is.b;return e!==Ti?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(Zu),this.setHSL(Zu.h+e,Zu.s+t,Zu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Zu),e.getHSL(C1);const i=Yv(Zu.h,C1.h,t),r=Yv(Zu.s,C1.s,t),s=Yv(Zu.l,C1.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const is=new Ye;Ye.NAMES=SH;class wi extends As{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ye(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const rr=new O,S1=new fe;class ii{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this.updateRange={offset:0,count:-1},this.gpuType=fc,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)S1.fromBufferAttribute(this,t),S1.applyMatrix3(e),this.setXY(t,S1.x,S1.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.applyMatrix3(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.applyMatrix4(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.applyNormalMatrix(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rr.fromBufferAttribute(this,t),rr.transformDirection(e),this.setXYZ(t,rr.x,rr.y,rr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=qs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=en(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qs(t,this.array)),t}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qs(t,this.array)),t}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qs(t,this.array)),t}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),i=en(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array),s=en(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}}class EH extends ii{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class MH extends ii{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class nt extends ii{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Xne=0;const Zo=new It,LR=new fi,Ym=new O,vo=new go,n0=new go,Dr=new O;class Vt extends Id{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xne++}),this.uuid=mo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(cH(e)?MH:EH)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new on).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return Zo.makeRotationFromQuaternion(e),this.applyMatrix4(Zo),this}rotateX(e){return Zo.makeRotationX(e),this.applyMatrix4(Zo),this}rotateY(e){return Zo.makeRotationY(e),this.applyMatrix4(Zo),this}rotateZ(e){return Zo.makeRotationZ(e),this.applyMatrix4(Zo),this}translate(e,t,i){return Zo.makeTranslation(e,t,i),this.applyMatrix4(Zo),this}scale(e,t,i){return Zo.makeScale(e,t,i),this.applyMatrix4(Zo),this}lookAt(e){return LR.lookAt(e),LR.updateMatrix(),this.applyMatrix4(LR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ym).negate(),this.translate(Ym.x,Ym.y,Ym.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new nt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new go);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)vo.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Dr.addVectors(this.boundingBox.min,vo.min),this.boundingBox.expandByPoint(Dr),Dr.addVectors(this.boundingBox.max,vo.max),this.boundingBox.expandByPoint(Dr)):(this.boundingBox.expandByPoint(vo.min),this.boundingBox.expandByPoint(vo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ia);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new O,1/0);if(e){const i=this.boundingSphere.center;if(vo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)n0.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Dr.addVectors(vo.min,n0.min),vo.expandByPoint(Dr),Dr.addVectors(vo.max,n0.max),vo.expandByPoint(Dr)):(vo.expandByPoint(n0.min),vo.expandByPoint(n0.max));vo.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Dr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Dr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Dr.fromBufferAttribute(a,c),l&&(Ym.fromBufferAttribute(e,c),Dr.add(Ym)),r=Math.max(r,i.distanceToSquared(Dr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ii(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let R=0;R<a;R++)c[R]=new O,u[R]=new O;const d=new O,f=new O,m=new O,g=new fe,_=new fe,v=new fe,y=new O,b=new O;function x(R,$,ee){d.fromArray(r,3*R),f.fromArray(r,3*$),m.fromArray(r,3*ee),g.fromArray(o,2*R),_.fromArray(o,2*$),v.fromArray(o,2*ee),f.sub(d),m.sub(d),_.sub(g),v.sub(g);const ie=1/(_.x*v.y-v.x*_.y);isFinite(ie)&&(y.copy(f).multiplyScalar(v.y).addScaledVector(m,-_.y).multiplyScalar(ie),b.copy(m).multiplyScalar(_.x).addScaledVector(f,-v.x).multiplyScalar(ie),c[R].add(y),c[$].add(y),c[ee].add(y),u[R].add(b),u[$].add(b),u[ee].add(b))}let S=this.groups;0===S.length&&(S=[{start:0,count:i.length}]);for(let R=0,$=S.length;R<$;++R){const ee=S[R],ie=ee.start;for(let K=ie,G=ie+ee.count;K<G;K+=3)x(i[K+0],i[K+1],i[K+2])}const E=new O,A=new O,M=new O,N=new O;function T(R){M.fromArray(s,3*R),N.copy(M);const $=c[R];E.copy($),E.sub(M.multiplyScalar(M.dot($))).normalize(),A.crossVectors(N,$);const ie=A.dot(u[R])<0?-1:1;l[4*R]=E.x,l[4*R+1]=E.y,l[4*R+2]=E.z,l[4*R+3]=ie}for(let R=0,$=S.length;R<$;++R){const ee=S[R],ie=ee.start;for(let K=ie,G=ie+ee.count;K<G;K+=3)T(i[K+0]),T(i[K+1]),T(i[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new ii(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let f=0,m=i.count;f<m;f++)i.setXYZ(f,0,0,0);const r=new O,s=new O,o=new O,a=new O,l=new O,c=new O,u=new O,d=new O;if(e)for(let f=0,m=e.count;f<m;f+=3){const g=e.getX(f+0),_=e.getX(f+1),v=e.getX(f+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,_),o.fromBufferAttribute(t,v),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,_),c.fromBufferAttribute(i,v),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(_,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let f=0,m=t.count;f<m;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,s),d.subVectors(r,s),u.cross(d),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Dr.fromBufferAttribute(e,t),Dr.normalize(),e.setXYZ(t,Dr.x,Dr.y,Dr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,f=new c.constructor(l.length*u);let m=0,g=0;for(let _=0,v=l.length;_<v;_++){m=a.isInterleavedBufferAttribute?l[_]*a.data.stride+a.offset:l[_]*u;for(let y=0;y<u;y++)f[g++]=c[m++]}return new ii(f,u,d)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Vt,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const m=e(c[u],i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,f=c.length;d<f;d++)u.push(c[d].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let f=0,m=d.length;f<m;f++)u.push(d[f].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const TH=new It,Nd=new Wm,E1=new Ia,AH=new O,Zm=new O,Km=new O,Jm=new O,NR=new O,M1=new O,T1=new fe,A1=new fe,D1=new fe,DH=new O,IH=new O,RH=new O,I1=new O,R1=new O;class Ae extends fi{constructor(e=new Vt,t=new wi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){M1.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(NR.fromBufferAttribute(s[l],e),M1.addScaledVector(o?NR:NR.sub(t),u))}t.add(M1)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),E1.copy(i.boundingSphere),E1.applyMatrix4(s),Nd.copy(e.ray).recast(e.near),(!1!==E1.containsPoint(Nd.origin)||!(null===Nd.intersectSphere(E1,AH)||Nd.origin.distanceToSquared(AH)>(e.far-e.near)**2))&&(TH.copy(s).invert(),Nd.copy(e.ray).applyMatrix4(TH),(null===i.boundingBox||!1!==Nd.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,Nd)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,f=s.groups,m=s.drawRange;if(null!==a)if(Array.isArray(o))for(let g=0,_=f.length;g<_;g++){const v=f[g],y=o[v.materialIndex];for(let S=Math.max(v.start,m.start),E=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));S<E;S+=3)r=P1(this,y,e,i,c,u,d,a.getX(S),a.getX(S+1),a.getX(S+2)),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=v.materialIndex,t.push(r))}else for(let v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);v<y;v+=3)r=P1(this,o,e,i,c,u,d,a.getX(v),a.getX(v+1),a.getX(v+2)),r&&(r.faceIndex=Math.floor(v/3),t.push(r));else if(void 0!==l)if(Array.isArray(o))for(let g=0,_=f.length;g<_;g++){const v=f[g],y=o[v.materialIndex];for(let S=Math.max(v.start,m.start),E=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));S<E;S+=3)r=P1(this,y,e,i,c,u,d,S,S+1,S+2),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=v.materialIndex,t.push(r))}else for(let v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);v<y;v+=3)r=P1(this,o,e,i,c,u,d,v,v+1,v+2),r&&(r.faceIndex=Math.floor(v/3),t.push(r))}}function P1(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Zm),n.getVertexPosition(l,Km),n.getVertexPosition(c,Jm);const u=function Yne(n,e,t,i,r,s,o,a){let l;if(l=1===e.side?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;R1.copy(a),R1.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(R1);return c<t.near||c>t.far?null:{distance:c,point:R1.clone(),object:n}}(n,e,t,i,Zm,Km,Jm,I1);if(u){r&&(T1.fromBufferAttribute(r,a),A1.fromBufferAttribute(r,l),D1.fromBufferAttribute(r,c),u.uv=yo.getInterpolation(I1,Zm,Km,Jm,T1,A1,D1,new fe)),s&&(T1.fromBufferAttribute(s,a),A1.fromBufferAttribute(s,l),D1.fromBufferAttribute(s,c),u.uv1=yo.getInterpolation(I1,Zm,Km,Jm,T1,A1,D1,new fe),u.uv2=u.uv1),o&&(DH.fromBufferAttribute(o,a),IH.fromBufferAttribute(o,l),RH.fromBufferAttribute(o,c),u.normal=yo.getInterpolation(I1,Zm,Km,Jm,DH,IH,RH,new O),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new O,materialIndex:0};yo.getNormal(Zm,Km,Jm,d.normal),u.face=d}return u}class ri extends Vt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let f=0,m=0;function g(_,v,y,b,x,S,E,A,M,N,T){const R=S/M,$=E/N,ee=S/2,ie=E/2,V=A/2,K=M+1,G=N+1;let X=0,Q=0;const Z=new O;for(let ce=0;ce<G;ce++){const q=ce*$-ie;for(let ae=0;ae<K;ae++)Z[_]=(ae*R-ee)*b,Z[v]=q*x,Z[y]=V,c.push(Z.x,Z.y,Z.z),Z[_]=0,Z[v]=0,Z[y]=A>0?1:-1,u.push(Z.x,Z.y,Z.z),d.push(ae/M),d.push(1-ce/N),X+=1}for(let ce=0;ce<N;ce++)for(let q=0;q<M;q++){const Ee=f+q+K*(ce+1),ve=f+(q+1)+K*(ce+1),Ue=f+(q+1)+K*ce;l.push(f+q+K*ce,Ee,Ue),l.push(Ee,ve,Ue),Q+=6}a.addGroup(m,Q,T),m+=Q,f+=X}g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new nt(c,3)),this.setAttribute("normal",new nt(u,3)),this.setAttribute("uv",new nt(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ri(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Qm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Ds(n){const e={};for(let t=0;t<n.length;t++){const i=Qm(n[t]);for(const r in i)e[r]=i[r]}return e}function PH(n){return null===n.getRenderTarget()?n.outputColorSpace:Rn.workingColorSpace}const Kne={clone:Qm,merge:Ds};class xc extends As{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Qm(e.uniforms),this.uniformsGroups=function Zne(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class FR extends fi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It,this.coordinateSystem=pc}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class fr extends FR{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Nm*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Rd*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Nm*Math.atan(Math.tan(.5*Rd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Rd*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class eie extends fi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new fr(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new fr(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new fr(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new fr(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new fr(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new fr(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===pc)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const _=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=_,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(d,f,m),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class O1 extends Yo{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:Hu,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class tie extends Pd{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];void 0!==t.encoding&&(Kv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ad?Ti:""),this.texture=new O1(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Mi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new ri(5,5,5),s=new xc({name:"CubemapFromEquirect",uniforms:Qm(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Ae(r,s),a=t.minFilter;return t.minFilter===dc&&(t.minFilter=Mi),new eie(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const kR=new O,nie=new O,iie=new on;class Cc{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=kR.subVectors(i,t).cross(nie.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(kR),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||iie.getNormalMatrix(e),r=this.coplanarPoint(kR).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Fd=new Ia,L1=new O;class UR{constructor(e=new Cc,t=new Cc,i=new Cc,r=new Cc,s=new Cc,o=new Cc){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=pc){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],d=r[6],f=r[7],m=r[8],g=r[9],_=r[10],v=r[11],y=r[12],b=r[13],x=r[14],S=r[15];if(i[0].setComponents(l-s,f-c,v-m,S-y).normalize(),i[1].setComponents(l+s,f+c,v+m,S+y).normalize(),i[2].setComponents(l+o,f+u,v+g,S+b).normalize(),i[3].setComponents(l-o,f-u,v-g,S-b).normalize(),i[4].setComponents(l-a,f-d,v-_,S-x).normalize(),t===pc)i[5].setComponents(l+a,f+d,v+_,S+x).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,d,_,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Fd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Fd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Fd)}intersectsSprite(e){return Fd.center.set(0,0,0),Fd.radius=.7071067811865476,Fd.applyMatrix4(e.matrixWorld),this.intersectsSphere(Fd)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(L1.x=r.normal.x>0?e.max.x:e.min.x,L1.y=r.normal.y>0?e.max.y:e.min.y,L1.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(L1)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function OH(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function rie(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const f=i.get(c);return void((!f||f.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);void 0===d?i.set(c,function r(c,u){const d=c.array,f=c.usage,m=n.createBuffer();let g;if(n.bindBuffer(u,m),n.bufferData(u,d,f),c.onUploadCallback(),d instanceof Float32Array)g=n.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");g=n.HALF_FLOAT}else g=n.UNSIGNED_SHORT;else if(d instanceof Int16Array)g=n.SHORT;else if(d instanceof Uint32Array)g=n.UNSIGNED_INT;else if(d instanceof Int32Array)g=n.INT;else if(d instanceof Int8Array)g=n.BYTE;else if(d instanceof Uint8Array)g=n.UNSIGNED_BYTE;else{if(!(d instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);g=n.UNSIGNED_BYTE}return{buffer:m,type:g,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}(c,u)):d.version<c.version&&(function s(c,u,d){const f=u.array,m=u.updateRange;n.bindBuffer(d,c),-1===m.count?n.bufferSubData(d,0,f):(t?n.bufferSubData(d,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):n.bufferSubData(d,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()}(d.buffer,c,u),d.version=c.version)}}}class ng extends Vt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,d=e/a,f=t/l,m=[],g=[],_=[],v=[];for(let y=0;y<u;y++){const b=y*f-o;for(let x=0;x<c;x++)g.push(x*d-s,-b,0),_.push(0,0,1),v.push(x/a),v.push(1-y/l)}for(let y=0;y<l;y++)for(let b=0;b<a;b++){const S=b+c*(y+1),E=b+1+c*(y+1),A=b+1+c*y;m.push(b+c*y,S,A),m.push(S,E,A)}this.setIndex(m),this.setAttribute("position",new nt(g,3)),this.setAttribute("normal",new nt(_,3)),this.setAttribute("uv",new nt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ng(e.width,e.height,e.widthSegments,e.heightSegments)}}const nn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tanisotropyV /= material.anisotropy;\n\tmaterial.anisotropy = saturate( material.anisotropy );\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal;\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Xe={common:{diffuse:{value:new Ye(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new on}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new on}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new on}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new on},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new on},normalScale:{value:new fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new on},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new on}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new on}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new on}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ye(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ye(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0},uvTransform:{value:new on}},sprite:{diffuse:{value:new Ye(16777215)},opacity:{value:1},center:{value:new fe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new on},alphaMap:{value:null},alphaMapTransform:{value:new on},alphaTest:{value:0}}},pl={basic:{uniforms:Ds([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.fog]),vertexShader:nn.meshbasic_vert,fragmentShader:nn.meshbasic_frag},lambert:{uniforms:Ds([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new Ye(0)}}]),vertexShader:nn.meshlambert_vert,fragmentShader:nn.meshlambert_frag},phong:{uniforms:Ds([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new Ye(0)},specular:{value:new Ye(1118481)},shininess:{value:30}}]),vertexShader:nn.meshphong_vert,fragmentShader:nn.meshphong_frag},standard:{uniforms:Ds([Xe.common,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.roughnessmap,Xe.metalnessmap,Xe.fog,Xe.lights,{emissive:{value:new Ye(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag},toon:{uniforms:Ds([Xe.common,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.gradientmap,Xe.fog,Xe.lights,{emissive:{value:new Ye(0)}}]),vertexShader:nn.meshtoon_vert,fragmentShader:nn.meshtoon_frag},matcap:{uniforms:Ds([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,{matcap:{value:null}}]),vertexShader:nn.meshmatcap_vert,fragmentShader:nn.meshmatcap_frag},points:{uniforms:Ds([Xe.points,Xe.fog]),vertexShader:nn.points_vert,fragmentShader:nn.points_frag},dashed:{uniforms:Ds([Xe.common,Xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nn.linedashed_vert,fragmentShader:nn.linedashed_frag},depth:{uniforms:Ds([Xe.common,Xe.displacementmap]),vertexShader:nn.depth_vert,fragmentShader:nn.depth_frag},normal:{uniforms:Ds([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,{opacity:{value:1}}]),vertexShader:nn.meshnormal_vert,fragmentShader:nn.meshnormal_frag},sprite:{uniforms:Ds([Xe.sprite,Xe.fog]),vertexShader:nn.sprite_vert,fragmentShader:nn.sprite_frag},background:{uniforms:{uvTransform:{value:new on},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nn.background_vert,fragmentShader:nn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:nn.backgroundCube_vert,fragmentShader:nn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nn.cube_vert,fragmentShader:nn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nn.equirect_vert,fragmentShader:nn.equirect_frag},distanceRGBA:{uniforms:Ds([Xe.common,Xe.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nn.distanceRGBA_vert,fragmentShader:nn.distanceRGBA_frag},shadow:{uniforms:Ds([Xe.lights,Xe.fog,{color:{value:new Ye(0)},opacity:{value:1}}]),vertexShader:nn.shadow_vert,fragmentShader:nn.shadow_frag}};pl.physical={uniforms:Ds([pl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new on},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new on},clearcoatNormalScale:{value:new fe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new on},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new on},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new on},sheen:{value:0},sheenColor:{value:new Ye(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new on},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new on},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new on},transmissionSamplerSize:{value:new fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new on},attenuationDistance:{value:0},attenuationColor:{value:new Ye(0)},specularColor:{value:new Ye(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new on},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new on},anisotropyVector:{value:new fe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new on}}]),vertexShader:nn.meshphysical_vert,fragmentShader:nn.meshphysical_frag};const N1={r:0,b:0,g:0};function nse(n,e,t,i,r,s,o){const a=new Ye(0);let c,u,l=!0===s?0:1,d=null,f=0,m=null;function _(v,y){v.getRGB(N1,PH(n)),i.buffers.color.setClear(N1.r,N1.g,N1.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,_(a,l)},render:function g(v,y){let b=!1,x=!0===y.isScene?y.background:null;x&&x.isTexture&&(x=(y.backgroundBlurriness>0?t:e).get(x)),null===x?_(a,l):x&&x.isColor&&(_(x,1),b=!0);const S=n.xr.getEnvironmentBlendMode();"additive"===S?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===S&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||b)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Wv)?(void 0===u&&(u=new Ae(new ri(1,1,1),new xc({name:"BackgroundCubeMaterial",uniforms:Qm(pl.backgroundCube.uniforms),vertexShader:pl.backgroundCube.vertexShader,fragmentShader:pl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(E,A,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=Rn.getTransfer(x.colorSpace)!==di,(d!==x||f!==x.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,d=x,f=x.version,m=n.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new Ae(new ng(2,2),new xc({name:"BackgroundMaterial",uniforms:Qm(pl.background.uniforms),vertexShader:pl.background.vertexShader,fragmentShader:pl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=Rn.getTransfer(x.colorSpace)!==di,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||f!==x.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,d=x,f=x.version,m=n.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}}}function ise(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=v(null);let c=l,u=!1;function m(V){return i.isWebGL2?n.bindVertexArray(V):s.bindVertexArrayOES(V)}function g(V){return i.isWebGL2?n.deleteVertexArray(V):s.deleteVertexArrayOES(V)}function v(V){const K=[],G=[],X=[];for(let Q=0;Q<r;Q++)K[Q]=0,G[Q]=0,X[Q]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:G,attributeDivisors:X,object:V,attributes:{},index:null}}function x(){const V=c.newAttributes;for(let K=0,G=V.length;K<G;K++)V[K]=0}function S(V){E(V,0)}function E(V,K){const X=c.enabledAttributes,Q=c.attributeDivisors;c.newAttributes[V]=1,0===X[V]&&(n.enableVertexAttribArray(V),X[V]=1),Q[V]!==K&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,K),Q[V]=K)}function A(){const V=c.newAttributes,K=c.enabledAttributes;for(let G=0,X=K.length;G<X;G++)K[G]!==V[G]&&(n.disableVertexAttribArray(G),K[G]=0)}function M(V,K,G,X,Q,Z,ce){!0===ce?n.vertexAttribIPointer(V,K,G,Q,Z):n.vertexAttribPointer(V,K,G,X,Q,Z)}function ee(){ie(),u=!0,c!==l&&(c=l,m(c.object))}function ie(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function d(V,K,G,X,Q){let Z=!1;if(o){const ce=function _(V,K,G){const X=!0===G.wireframe;let Q=a[V.id];void 0===Q&&(Q={},a[V.id]=Q);let Z=Q[K.id];void 0===Z&&(Z={},Q[K.id]=Z);let ce=Z[X];return void 0===ce&&(ce=v(function f(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),Z[X]=ce),ce}(X,G,K);c!==ce&&(c=ce,m(c.object)),Z=function y(V,K,G,X){const Q=c.attributes,Z=K.attributes;let ce=0;const q=G.getAttributes();for(const ae in q)if(q[ae].location>=0){const ve=Q[ae];let Ue=Z[ae];if(void 0===Ue&&("instanceMatrix"===ae&&V.instanceMatrix&&(Ue=V.instanceMatrix),"instanceColor"===ae&&V.instanceColor&&(Ue=V.instanceColor)),void 0===ve||ve.attribute!==Ue||Ue&&ve.data!==Ue.data)return!0;ce++}return c.attributesNum!==ce||c.index!==X}(V,X,G,Q),Z&&function b(V,K,G,X){const Q={},Z=K.attributes;let ce=0;const q=G.getAttributes();for(const ae in q)if(q[ae].location>=0){let ve=Z[ae];void 0===ve&&("instanceMatrix"===ae&&V.instanceMatrix&&(ve=V.instanceMatrix),"instanceColor"===ae&&V.instanceColor&&(ve=V.instanceColor));const Ue={};Ue.attribute=ve,ve&&ve.data&&(Ue.data=ve.data),Q[ae]=Ue,ce++}c.attributes=Q,c.attributesNum=ce,c.index=X}(V,X,G,Q)}else{const ce=!0===K.wireframe;(c.geometry!==X.id||c.program!==G.id||c.wireframe!==ce)&&(c.geometry=X.id,c.program=G.id,c.wireframe=ce,Z=!0)}null!==Q&&t.update(Q,n.ELEMENT_ARRAY_BUFFER),(Z||u)&&(u=!1,function N(V,K,G,X){if(!1===i.isWebGL2&&(V.isInstancedMesh||X.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();const Q=X.attributes,Z=G.getAttributes(),ce=K.defaultAttributeValues;for(const q in Z){const ae=Z[q];if(ae.location>=0){let Ee=Q[q];if(void 0===Ee&&("instanceMatrix"===q&&V.instanceMatrix&&(Ee=V.instanceMatrix),"instanceColor"===q&&V.instanceColor&&(Ee=V.instanceColor)),void 0!==Ee){const ve=Ee.normalized,Ue=Ee.itemSize,Ke=t.get(Ee);if(void 0===Ke)continue;const We=Ke.buffer,et=Ke.type,St=Ke.bytesPerElement,Lt=!0===i.isWebGL2&&(et===n.INT||et===n.UNSIGNED_INT||1013===Ee.gpuType);if(Ee.isInterleavedBufferAttribute){const ut=Ee.data,H=ut.stride,Be=Ee.offset;if(ut.isInstancedInterleavedBuffer){for(let ye=0;ye<ae.locationSize;ye++)E(ae.location+ye,ut.meshPerAttribute);!0!==V.isInstancedMesh&&void 0===X._maxInstanceCount&&(X._maxInstanceCount=ut.meshPerAttribute*ut.count)}else for(let ye=0;ye<ae.locationSize;ye++)S(ae.location+ye);n.bindBuffer(n.ARRAY_BUFFER,We);for(let ye=0;ye<ae.locationSize;ye++)M(ae.location+ye,Ue/ae.locationSize,et,ve,H*St,(Be+Ue/ae.locationSize*ye)*St,Lt)}else{if(Ee.isInstancedBufferAttribute){for(let ut=0;ut<ae.locationSize;ut++)E(ae.location+ut,Ee.meshPerAttribute);!0!==V.isInstancedMesh&&void 0===X._maxInstanceCount&&(X._maxInstanceCount=Ee.meshPerAttribute*Ee.count)}else for(let ut=0;ut<ae.locationSize;ut++)S(ae.location+ut);n.bindBuffer(n.ARRAY_BUFFER,We);for(let ut=0;ut<ae.locationSize;ut++)M(ae.location+ut,Ue/ae.locationSize,et,ve,Ue*St,Ue/ae.locationSize*ut*St,Lt)}}else if(void 0!==ce){const ve=ce[q];if(void 0!==ve)switch(ve.length){case 2:n.vertexAttrib2fv(ae.location,ve);break;case 3:n.vertexAttrib3fv(ae.location,ve);break;case 4:n.vertexAttrib4fv(ae.location,ve);break;default:n.vertexAttrib1fv(ae.location,ve)}}}}A()}(V,K,G,X),null!==Q&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(Q).buffer))},reset:ee,resetDefaultState:ie,dispose:function T(){ee();for(const V in a){const K=a[V];for(const G in K){const X=K[G];for(const Q in X)g(X[Q].object),delete X[Q];delete K[G]}delete a[V]}},releaseStatesOfGeometry:function R(V){if(void 0===a[V.id])return;const K=a[V.id];for(const G in K){const X=K[G];for(const Q in X)g(X[Q].object),delete X[Q];delete K[G]}delete a[V.id]},releaseStatesOfProgram:function $(V){for(const K in a){const G=a[K];if(void 0===G[V.id])continue;const X=G[V.id];for(const Q in X)g(X[Q].object),delete X[Q];delete G[V.id]}},initAttributes:x,enableAttribute:S,disableUnusedAttributes:A}}function rse(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,u){n.drawArrays(s,c,u),t.update(u,s,1)},this.renderInstances=function l(c,u,d){if(0===d)return;let f,m;if(r)f=n,m="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",null===f)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");f[m](s,c,u,d),t.update(u,s,d)}}function sse(n,e,t){let i;function s(M){if("highp"===M){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return"mediump"===M&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,d=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),_=n.getParameter(n.MAX_VERTEX_ATTRIBS),v=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),y=n.getParameter(n.MAX_VARYING_VECTORS),b=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=f>0,S=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const M=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:g,maxAttributes:_,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:b,vertexTextures:x,floatFragmentTextures:S,floatVertexTextures:x&&S,maxSamples:o?n.getParameter(n.MAX_SAMPLES):0}}function ose(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Cc,a=new on,l={value:null,needsUpdate:!1};function u(d,f,m,g){const _=null!==d?d.length:0;let v=null;if(0!==_){if(v=l.value,!0!==g||null===v){const y=m+4*_,b=f.matrixWorldInverse;a.getNormalMatrix(b),(null===v||v.length<y)&&(v=new Float32Array(y));for(let x=0,S=m;x!==_;++x,S+=4)o.copy(d[x]).applyMatrix4(b,a),o.normal.toArray(v,S),v[S+3]=o.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,v}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){const m=0!==d.length||f||0!==i||r;return r=f,i=d.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=u(d,f,0)},this.setState=function(d,f,m){const g=d.clippingPlanes,_=d.clipIntersection,v=d.clipShadows,y=n.get(d);if(!r||null===g||0===g.length||s&&!v)s?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const b=s?0:i,x=4*b;let S=y.clippingState||null;l.value=S,S=u(g,f,x,m);for(let E=0;E!==x;++E)S[E]=t[E];y.clippingState=S,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=b}}}function ase(n){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=Hu:304===a&&(o.mapping=Sd),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new tie(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class F1 extends FR{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const LH=[.125,.215,.35,.446,.526,.582],BR=new F1,NH=new Ye;let VR=null;const Ud=(1+Math.sqrt(5))/2,rg=1/Ud,FH=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,Ud,rg),new O(0,Ud,-rg),new O(rg,0,Ud),new O(-rg,0,Ud),new O(Ud,rg,0),new O(-Ud,rg,0)];class zR{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){VR=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=BH(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=UH(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(VR),e.scissorTest=!1,k1(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Hu||e.mapping===Sd?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),VR=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Mi,minFilter:Mi,generateMipmaps:!1,type:qv,format:qo,colorSpace:Vr,depthBuffer:!1},r=kH(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=kH(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function lse(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+LH.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=LH[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,f=[u,u,d,u,d,d,u,u,d,d,u,d],m=6,g=6,_=3,v=2,y=1,b=new Float32Array(_*g*m),x=new Float32Array(v*g*m),S=new Float32Array(y*g*m);for(let A=0;A<m;A++){const M=A%3*2/3-1,N=A>2?0:-1;b.set([M,N,0,M+2/3,N,0,M+2/3,N+1,0,M,N,0,M+2/3,N+1,0,M,N+1,0],_*g*A),x.set(f,v*g*A),S.set([A,A,A,A,A,A],y*g*A)}const E=new Vt;E.setAttribute("position",new ii(b,_)),E.setAttribute("uv",new ii(x,v)),E.setAttribute("faceIndex",new ii(S,y)),e.push(E),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function cse(n,e,t){const i=new Float32Array(20),r=new O(0,1,0);return new xc({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ae(this._lodPlanes[0],e);this._renderer.compile(t,BR)}_sceneToCubeUV(e,t,i,r){const a=new fr(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,d=u.autoClear,f=u.toneMapping;u.getClearColor(NH),u.toneMapping=zu,u.autoClear=!1;const m=new wi({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),g=new Ae(new ri,m);let _=!1;const v=e.background;v?v.isColor&&(m.color.copy(v),e.background=null,_=!0):(m.color.copy(NH),_=!0);for(let y=0;y<6;y++){const b=y%3;0===b?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1===b?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const x=this._cubeSize;k1(r,b*x,y>2?x:0,x,x),u.setRenderTarget(r),_&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=f,u.autoClear=d,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Hu||e.mapping===Sd;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=BH()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=UH());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Ae(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;k1(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,BR)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,FH[(r-1)%FH.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const d=new Ae(this._lodPlanes[r],c),f=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,_=s/g,v=isFinite(s)?1+Math.floor(3*_):20;v>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);const y=[];let b=0;for(let M=0;M<20;++M){const N=M/_,T=Math.exp(-N*N/2);y.push(T),0===M?b+=T:M<v&&(b+=2*T)}for(let M=0;M<y.length;M++)y[M]=y[M]/b;f.envMap.value=e.texture,f.samples.value=v,f.weights.value=y,f.latitudinal.value="latitudinal"===o,a&&(f.poleAxis.value=a);const{_lodMax:x}=this;f.dTheta.value=g,f.mipInt.value=x-i;const S=this._sizeLods[r];k1(t,3*S*(r>x-4?r-x+4:0),4*(this._cubeSize-S),3*S,2*S),l.setRenderTarget(t),l.render(d,BR)}}function kH(n,e,t){const i=new Pd(n,e,t);return i.texture.mapping=Wv,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function k1(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function UH(){return new xc({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function BH(){return new xc({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function use(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,u=l===Hu||l===Sd;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let d=e.get(a);return null===t&&(t=new zR(n)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(d)){null===t&&(t=new zR(n));const f=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function hse(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function dse(n,e,t,i){const r={},s=new WeakMap;function o(d){const f=d.target;null!==f.index&&e.remove(f.index);for(const g in f.attributes)e.remove(f.attributes[g]);for(const g in f.morphAttributes){const _=f.morphAttributes[g];for(let v=0,y=_.length;v<y;v++)e.remove(_[v])}f.removeEventListener("dispose",o),delete r[f.id];const m=s.get(f);m&&(e.remove(m),s.delete(f)),i.releaseStatesOfGeometry(f),!0===f.isInstancedBufferGeometry&&delete f._maxInstanceCount,t.memory.geometries--}function c(d){const f=[],m=d.index,g=d.attributes.position;let _=0;if(null!==m){const b=m.array;_=m.version;for(let x=0,S=b.length;x<S;x+=3){const E=b[x+0],A=b[x+1],M=b[x+2];f.push(E,A,A,M,M,E)}}else{if(void 0===g)return;_=g.version;for(let x=0,S=g.array.length/3-1;x<S;x+=3){const E=x+0,A=x+1,M=x+2;f.push(E,A,A,M,M,E)}}const v=new(cH(f)?MH:EH)(f,1);v.version=_;const y=s.get(d);y&&e.remove(y),s.set(d,v)}return{get:function a(d,f){return!0===r[f.id]||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f},update:function l(d){const f=d.attributes;for(const g in f)e.update(f[g],n.ARRAY_BUFFER);const m=d.morphAttributes;for(const g in m){const _=m[g];for(let v=0,y=_.length;v<y;v++)e.update(_[v],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(d){const f=s.get(d);if(f){const m=d.index;null!==m&&f.version<m.version&&c(d)}else c(d);return s.get(d)}}}function fse(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(f){s=f},this.setIndex=function c(f){a=f.type,l=f.bytesPerElement},this.render=function u(f,m){n.drawElements(s,m,a,f*l),t.update(m,s,1)},this.renderInstances=function d(f,m,g){if(0===g)return;let _,v;if(r)_=n,v="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",null===_)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");_[v](s,m,a,f*l,g),t.update(m,s,g)}}function pse(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function mse(n,e){return n[0]-e[0]}function gse(n,e){return Math.abs(e[1])-Math.abs(n[1])}function _se(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Hn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,d){const f=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=void 0!==m?m.length:0;let _=s.get(u);if(void 0===_||_.count!==g){let V=function(){ee.dispose(),s.delete(u),u.removeEventListener("dispose",V)};void 0!==_&&_.texture.dispose();const b=void 0!==u.morphAttributes.position,x=void 0!==u.morphAttributes.normal,S=void 0!==u.morphAttributes.color,E=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],M=u.morphAttributes.color||[];let N=0;!0===b&&(N=1),!0===x&&(N=2),!0===S&&(N=3);let T=u.attributes.position.count*N,R=1;T>e.maxTextureSize&&(R=Math.ceil(T/e.maxTextureSize),T=e.maxTextureSize);const $=new Float32Array(T*R*4*g),ee=new bR($,T,R,g);ee.type=fc,ee.needsUpdate=!0;const ie=4*N;for(let K=0;K<g;K++){const G=E[K],X=A[K],Q=M[K],Z=T*R*4*K;for(let ce=0;ce<G.count;ce++){const q=ce*ie;!0===b&&(o.fromBufferAttribute(G,ce),$[Z+q+0]=o.x,$[Z+q+1]=o.y,$[Z+q+2]=o.z,$[Z+q+3]=0),!0===x&&(o.fromBufferAttribute(X,ce),$[Z+q+4]=o.x,$[Z+q+5]=o.y,$[Z+q+6]=o.z,$[Z+q+7]=0),!0===S&&(o.fromBufferAttribute(Q,ce),$[Z+q+8]=o.x,$[Z+q+9]=o.y,$[Z+q+10]=o.z,$[Z+q+11]=4===Q.itemSize?o.w:1)}}_={count:g,texture:ee,size:new fe(T,R)},s.set(u,_),u.addEventListener("dispose",V)}let v=0;for(let b=0;b<f.length;b++)v+=f[b];const y=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(n,"morphTargetBaseInfluence",y),d.getUniforms().setValue(n,"morphTargetInfluences",f),d.getUniforms().setValue(n,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",_.size)}else{const m=void 0===f?0:f.length;let g=i[u.id];if(void 0===g||g.length!==m){g=[];for(let x=0;x<m;x++)g[x]=[x,0];i[u.id]=g}for(let x=0;x<m;x++){const S=g[x];S[0]=x,S[1]=f[x]}g.sort(gse);for(let x=0;x<8;x++)x<m&&g[x][1]?(a[x][0]=g[x][0],a[x][1]=g[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(mse);const _=u.morphAttributes.position,v=u.morphAttributes.normal;let y=0;for(let x=0;x<8;x++){const S=a[x],E=S[0],A=S[1];E!==Number.MAX_SAFE_INTEGER&&A?(_&&u.getAttribute("morphTarget"+x)!==_[E]&&u.setAttribute("morphTarget"+x,_[E]),v&&u.getAttribute("morphNormal"+x)!==v[E]&&u.setAttribute("morphNormal"+x,v[E]),r[x]=A,y+=A):(_&&!0===u.hasAttribute("morphTarget"+x)&&u.deleteAttribute("morphTarget"+x),v&&!0===u.hasAttribute("morphNormal"+x)&&u.deleteAttribute("morphNormal"+x),r[x]=0)}const b=u.morphTargetsRelative?1:1-y;d.getUniforms().setValue(n,"morphTargetBaseInfluence",b),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function yse(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,d=e.get(l,l.geometry);if(r.get(d)!==c&&(e.update(d),r.set(d,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return d},dispose:function o(){r=new WeakMap}}}const VH=new Yo,zH=new bR,HH=new pH,GH=new O1,WH=[],jH=[],$H=new Float32Array(16),qH=new Float32Array(9),XH=new Float32Array(4);function sg(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=WH[r];if(void 0===s&&(s=new Float32Array(r),WH[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function pr(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function mr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function U1(n,e){let t=jH[e];void 0===t&&(t=new Int32Array(e),jH[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function vse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function wse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pr(t,e))return;n.uniform2fv(this.addr,e),mr(t,e)}}function bse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(pr(t,e))return;n.uniform3fv(this.addr,e),mr(t,e)}}function xse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pr(t,e))return;n.uniform4fv(this.addr,e),mr(t,e)}}function Cse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(pr(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),mr(t,e)}else{if(pr(t,i))return;XH.set(i),n.uniformMatrix2fv(this.addr,!1,XH),mr(t,i)}}function Sse(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(pr(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),mr(t,e)}else{if(pr(t,i))return;qH.set(i),n.uniformMatrix3fv(this.addr,!1,qH),mr(t,i)}}function Ese(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(pr(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),mr(t,e)}else{if(pr(t,i))return;$H.set(i),n.uniformMatrix4fv(this.addr,!1,$H),mr(t,i)}}function Mse(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Tse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pr(t,e))return;n.uniform2iv(this.addr,e),mr(t,e)}}function Ase(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(pr(t,e))return;n.uniform3iv(this.addr,e),mr(t,e)}}function Dse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pr(t,e))return;n.uniform4iv(this.addr,e),mr(t,e)}}function Ise(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Rse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(pr(t,e))return;n.uniform2uiv(this.addr,e),mr(t,e)}}function Pse(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(pr(t,e))return;n.uniform3uiv(this.addr,e),mr(t,e)}}function Ose(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(pr(t,e))return;n.uniform4uiv(this.addr,e),mr(t,e)}}function Lse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||VH,r)}function Nse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||HH,r)}function Fse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||GH,r)}function kse(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||zH,r)}function Bse(n,e){n.uniform1fv(this.addr,e)}function Vse(n,e){const t=sg(e,this.size,2);n.uniform2fv(this.addr,t)}function zse(n,e){const t=sg(e,this.size,3);n.uniform3fv(this.addr,t)}function Hse(n,e){const t=sg(e,this.size,4);n.uniform4fv(this.addr,t)}function Gse(n,e){const t=sg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Wse(n,e){const t=sg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function jse(n,e){const t=sg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function $se(n,e){n.uniform1iv(this.addr,e)}function qse(n,e){n.uniform2iv(this.addr,e)}function Xse(n,e){n.uniform3iv(this.addr,e)}function Yse(n,e){n.uniform4iv(this.addr,e)}function Zse(n,e){n.uniform1uiv(this.addr,e)}function Kse(n,e){n.uniform2uiv(this.addr,e)}function Jse(n,e){n.uniform3uiv(this.addr,e)}function Qse(n,e){n.uniform4uiv(this.addr,e)}function eoe(n,e,t){const i=this.cache,r=e.length,s=U1(t,r);pr(i,s)||(n.uniform1iv(this.addr,s),mr(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||VH,s[o])}function toe(n,e,t){const i=this.cache,r=e.length,s=U1(t,r);pr(i,s)||(n.uniform1iv(this.addr,s),mr(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||HH,s[o])}function noe(n,e,t){const i=this.cache,r=e.length,s=U1(t,r);pr(i,s)||(n.uniform1iv(this.addr,s),mr(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||GH,s[o])}function ioe(n,e,t){const i=this.cache,r=e.length,s=U1(t,r);pr(i,s)||(n.uniform1iv(this.addr,s),mr(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||zH,s[o])}class soe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function Use(n){switch(n){case 5126:return vse;case 35664:return wse;case 35665:return bse;case 35666:return xse;case 35674:return Cse;case 35675:return Sse;case 35676:return Ese;case 5124:case 35670:return Mse;case 35667:case 35671:return Tse;case 35668:case 35672:return Ase;case 35669:case 35673:return Dse;case 5125:return Ise;case 36294:return Rse;case 36295:return Pse;case 36296:return Ose;case 35678:case 36198:case 36298:case 36306:case 35682:return Lse;case 35679:case 36299:case 36307:return Nse;case 35680:case 36300:case 36308:case 36293:return Fse;case 36289:case 36303:case 36311:case 36292:return kse}}(t.type)}}class ooe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function roe(n){switch(n){case 5126:return Bse;case 35664:return Vse;case 35665:return zse;case 35666:return Hse;case 35674:return Gse;case 35675:return Wse;case 35676:return jse;case 5124:case 35670:return $se;case 35667:case 35671:return qse;case 35668:case 35672:return Xse;case 35669:case 35673:return Yse;case 5125:return Zse;case 36294:return Kse;case 36295:return Jse;case 36296:return Qse;case 35678:case 36198:case 36298:case 36306:case 35682:return eoe;case 35679:case 36299:case 36307:return toe;case 35680:case 36300:case 36308:case 36293:return noe;case 36289:case 36303:case 36311:case 36292:return ioe}}(t.type)}}class aoe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const GR=/(\w+)(\])?(\[|\.)?/g;function YH(n,e){n.seq.push(e),n.map[e.id]=e}function loe(n,e,t){const i=n.name,r=i.length;for(GR.lastIndex=0;;){const s=GR.exec(i);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&GR.lastIndex+2===r){YH(t,void 0===c?new soe(a,n,e):new ooe(a,n,e));break}{let d=t.map[a];void 0===d&&(d=new aoe(a),YH(t,d)),t=d}}}class B1{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);loe(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function ZH(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let coe=0;function KH(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function uoe(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function doe(n,e){const t=function hoe(n){const e=Rn.getPrimaries(Rn.workingColorSpace),t=Rn.getPrimaries(n);let i;switch(e===t?i="":e===h1&&t===u1?i="LinearDisplayP3ToLinearSRGB":e===u1&&t===h1&&(i="LinearSRGBToLinearDisplayP3"),n){case Vr:case l1:return[i,"LinearTransferOETF"];case Ti:case fR:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function foe(n,e){let t;switch(e){case Gte:t="Linear";break;case Wte:t="Reinhard";break;case jte:t="OptimizedCineon";break;case $te:t="ACESFilmic";break;case qte:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function r0(n){return""!==n}function JH(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function QH(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _oe=/^[ \t]*#include +<([\w\d./]+)>/gm;function WR(n){return n.replace(_oe,voe)}const yoe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function voe(n,e){let t=nn[e];if(void 0===t){const i=yoe.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=nn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return WR(t)}const woe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function e4(n){return n.replace(woe,boe)}function boe(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function t4(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function Toe(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function xoe(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===yz?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===bte?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===uc&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Coe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Hu:case Sd:e="ENVMAP_TYPE_CUBE";break;case Wv:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function Soe(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Sd&&(e="ENVMAP_MODE_REFRACTION"),e}(t),d=function Eoe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case i1:e="ENVMAP_BLENDING_MULTIPLY";break;case zte:e="ENVMAP_BLENDING_MIX";break;case Hte:e="ENVMAP_BLENDING_ADD"}return e}(t),f=function Moe(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),m=t.isWebGL2?"":function poe(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(r0).join("\n")}(t),g=function moe(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),_=r.createProgram();let v,y,b=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(r0).join("\n"),v.length>0&&(v+="\n"),y=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g].filter(r0).join("\n"),y.length>0&&(y+="\n")):(v=[t4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(r0).join("\n"),y=[m,t4(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,g,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zu?"#define TONE_MAPPING":"",t.toneMapping!==zu?nn.tonemapping_pars_fragment:"",t.toneMapping!==zu?foe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",nn.colorspace_pars_fragment,doe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(r0).join("\n")),o=WR(o),o=JH(o,t),o=QH(o,t),a=WR(a),a=JH(a,t),a=QH(a,t),o=e4(o),a=e4(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(b="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["#define varying in",t.glslVersion===oH?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===oH?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const S=b+y+a,E=ZH(r,r.VERTEX_SHADER,b+v+o),A=ZH(r,r.FRAGMENT_SHADER,S);if(r.attachShader(_,E),r.attachShader(_,A),void 0!==t.index0AttributeName?r.bindAttribLocation(_,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),n.debug.checkShaderErrors){const T=r.getProgramInfoLog(_).trim(),R=r.getShaderInfoLog(E).trim(),$=r.getShaderInfoLog(A).trim();let ee=!0,ie=!0;if(!1===r.getProgramParameter(_,r.LINK_STATUS))if(ee=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,_,E,A);else{const V=KH(r,E,"vertex"),K=KH(r,A,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+T+"\n"+V+"\n"+K)}else""!==T?console.warn("THREE.WebGLProgram: Program Info Log:",T):(""===R||""===$)&&(ie=!1);ie&&(this.diagnostics={runnable:ee,programLog:T,vertexShader:{log:R,prefix:v},fragmentShader:{log:$,prefix:y}})}let M,N;return r.deleteShader(E),r.deleteShader(A),this.getUniforms=function(){return void 0===M&&(M=new B1(r,_)),M},this.getAttributes=function(){return void 0===N&&(N=function goe(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,_)),N},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=coe++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=E,this.fragmentShader=A,this}let Aoe=0;class Doe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Ioe(e),t.set(e,i)),i}}class Ioe{constructor(e){this.id=Aoe++,this.code=e,this.usedTimes=0}}function Roe(n,e,t,i,r,s,o){const a=new AR,l=new Doe,c=[],u=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(T){return 0===T?"uv":`uv${T}`}return{getParameters:function v(T,R,$,ee,ie){const V=ee.fog,K=ie.geometry,X=(T.isMeshStandardMaterial?t:e).get(T.envMap||(T.isMeshStandardMaterial?ee.environment:null)),Q=X&&X.mapping===Wv?X.image.height:null,Z=g[T.type];null!==T.precision&&(m=r.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const ce=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,q=void 0!==ce?ce.length:0;let Ee,ve,Ue,Ke,ae=0;if(void 0!==K.morphAttributes.position&&(ae=1),void 0!==K.morphAttributes.normal&&(ae=2),void 0!==K.morphAttributes.color&&(ae=3),Z){const _i=pl[Z];Ee=_i.vertexShader,ve=_i.fragmentShader}else Ee=T.vertexShader,ve=T.fragmentShader,l.update(T),Ue=l.getVertexShaderID(T),Ke=l.getFragmentShaderID(T);const We=n.getRenderTarget(),et=!0===ie.isInstancedMesh,St=!!T.map,ut=!!X,H=!!T.aoMap,Be=!!T.lightMap,ye=!!T.bumpMap,Pe=!!T.normalMap,Ce=!!T.displacementMap,_t=!!T.emissiveMap,it=!!T.metalnessMap,ot=!!T.roughnessMap,Rt=T.anisotropy>0,un=T.clearcoat>0,xi=T.iridescence>0,k=T.sheen>0,P=T.transmission>0,se=Rt&&!!T.anisotropyMap,Re=un&&!!T.clearcoatMap,De=un&&!!T.clearcoatNormalMap,Oe=un&&!!T.clearcoatRoughnessMap,pt=xi&&!!T.iridescenceMap,Ne=xi&&!!T.iridescenceThicknessMap,Je=k&&!!T.sheenColorMap,W=k&&!!T.sheenRoughnessMap,Fe=!!T.specularMap,be=!!T.specularColorMap,Nt=!!T.specularIntensityMap,yt=P&&!!T.transmissionMap,Et=P&&!!T.thicknessMap,z=!!T.alphaMap,Ze=!!T.extensions,He=!!K.attributes.uv1,Me=!!K.attributes.uv2,ft=!!K.attributes.uv3;let kt=zu;return T.toneMapped&&(null===We||!0===We.isXRRenderTarget)&&(kt=n.toneMapping),{isWebGL2:u,shaderID:Z,shaderType:T.type,shaderName:T.name,vertexShader:Ee,fragmentShader:ve,defines:T.defines,customVertexShaderID:Ue,customFragmentShaderID:Ke,isRawShaderMaterial:!0===T.isRawShaderMaterial,glslVersion:T.glslVersion,precision:m,instancing:et,instancingColor:et&&null!==ie.instanceColor,supportsVertexTextures:f,outputColorSpace:null===We?n.outputColorSpace:!0===We.isXRRenderTarget?We.texture.colorSpace:Vr,map:St,matcap:!!T.matcap,envMap:ut,envMapMode:ut&&X.mapping,envMapCubeUVHeight:Q,aoMap:H,lightMap:Be,bumpMap:ye,normalMap:Pe,displacementMap:f&&Ce,emissiveMap:_t,normalMapObjectSpace:Pe&&1===T.normalMapType,normalMapTangentSpace:Pe&&0===T.normalMapType,metalnessMap:it,roughnessMap:ot,anisotropy:Rt,anisotropyMap:se,clearcoat:un,clearcoatMap:Re,clearcoatNormalMap:De,clearcoatRoughnessMap:Oe,iridescence:xi,iridescenceMap:pt,iridescenceThicknessMap:Ne,sheen:k,sheenColorMap:Je,sheenRoughnessMap:W,specularMap:Fe,specularColorMap:be,specularIntensityMap:Nt,transmission:P,transmissionMap:yt,thicknessMap:Et,gradientMap:!!T.gradientMap,opaque:!1===T.transparent&&1===T.blending,alphaMap:z,alphaTest:T.alphaTest>0,alphaHash:!!T.alphaHash,combine:T.combine,mapUv:St&&_(T.map.channel),aoMapUv:H&&_(T.aoMap.channel),lightMapUv:Be&&_(T.lightMap.channel),bumpMapUv:ye&&_(T.bumpMap.channel),normalMapUv:Pe&&_(T.normalMap.channel),displacementMapUv:Ce&&_(T.displacementMap.channel),emissiveMapUv:_t&&_(T.emissiveMap.channel),metalnessMapUv:it&&_(T.metalnessMap.channel),roughnessMapUv:ot&&_(T.roughnessMap.channel),anisotropyMapUv:se&&_(T.anisotropyMap.channel),clearcoatMapUv:Re&&_(T.clearcoatMap.channel),clearcoatNormalMapUv:De&&_(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Oe&&_(T.clearcoatRoughnessMap.channel),iridescenceMapUv:pt&&_(T.iridescenceMap.channel),iridescenceThicknessMapUv:Ne&&_(T.iridescenceThicknessMap.channel),sheenColorMapUv:Je&&_(T.sheenColorMap.channel),sheenRoughnessMapUv:W&&_(T.sheenRoughnessMap.channel),specularMapUv:Fe&&_(T.specularMap.channel),specularColorMapUv:be&&_(T.specularColorMap.channel),specularIntensityMapUv:Nt&&_(T.specularIntensityMap.channel),transmissionMapUv:yt&&_(T.transmissionMap.channel),thicknessMapUv:Et&&_(T.thicknessMap.channel),alphaMapUv:z&&_(T.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(Pe||Rt),vertexColors:T.vertexColors,vertexAlphas:!0===T.vertexColors&&!!K.attributes.color&&4===K.attributes.color.itemSize,vertexUv1s:He,vertexUv2s:Me,vertexUv3s:ft,pointsUvs:!0===ie.isPoints&&!!K.attributes.uv&&(St||z),fog:!!V,useFog:!0===T.fog,fogExp2:V&&V.isFogExp2,flatShading:!0===T.flatShading,sizeAttenuation:!0===T.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===ie.isSkinnedMesh,morphTargets:void 0!==K.morphAttributes.position,morphNormals:void 0!==K.morphAttributes.normal,morphColors:void 0!==K.morphAttributes.color,morphTargetsCount:q,morphTextureStride:ae,numDirLights:R.directional.length,numPointLights:R.point.length,numSpotLights:R.spot.length,numSpotLightMaps:R.spotLightMap.length,numRectAreaLights:R.rectArea.length,numHemiLights:R.hemi.length,numDirLightShadows:R.directionalShadowMap.length,numPointLightShadows:R.pointShadowMap.length,numSpotLightShadows:R.spotShadowMap.length,numSpotLightShadowsWithMaps:R.numSpotLightShadowsWithMaps,numLightProbes:R.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:n.shadowMap.enabled&&$.length>0,shadowMapType:n.shadowMap.type,toneMapping:kt,useLegacyLights:n._useLegacyLights,decodeVideoTexture:St&&!0===T.map.isVideoTexture&&Rn.getTransfer(T.map.colorSpace)===di,premultipliedAlpha:T.premultipliedAlpha,doubleSided:2===T.side,flipSided:1===T.side,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:Ze&&!0===T.extensions.derivatives,extensionFragDepth:Ze&&!0===T.extensions.fragDepth,extensionDrawBuffers:Ze&&!0===T.extensions.drawBuffers,extensionShaderTextureLOD:Ze&&!0===T.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}},getProgramCacheKey:function y(T){const R=[];if(T.shaderID?R.push(T.shaderID):(R.push(T.customVertexShaderID),R.push(T.customFragmentShaderID)),void 0!==T.defines)for(const $ in T.defines)R.push($),R.push(T.defines[$]);return!1===T.isRawShaderMaterial&&(function b(T,R){T.push(R.precision),T.push(R.outputColorSpace),T.push(R.envMapMode),T.push(R.envMapCubeUVHeight),T.push(R.mapUv),T.push(R.alphaMapUv),T.push(R.lightMapUv),T.push(R.aoMapUv),T.push(R.bumpMapUv),T.push(R.normalMapUv),T.push(R.displacementMapUv),T.push(R.emissiveMapUv),T.push(R.metalnessMapUv),T.push(R.roughnessMapUv),T.push(R.anisotropyMapUv),T.push(R.clearcoatMapUv),T.push(R.clearcoatNormalMapUv),T.push(R.clearcoatRoughnessMapUv),T.push(R.iridescenceMapUv),T.push(R.iridescenceThicknessMapUv),T.push(R.sheenColorMapUv),T.push(R.sheenRoughnessMapUv),T.push(R.specularMapUv),T.push(R.specularColorMapUv),T.push(R.specularIntensityMapUv),T.push(R.transmissionMapUv),T.push(R.thicknessMapUv),T.push(R.combine),T.push(R.fogExp2),T.push(R.sizeAttenuation),T.push(R.morphTargetsCount),T.push(R.morphAttributeCount),T.push(R.numDirLights),T.push(R.numPointLights),T.push(R.numSpotLights),T.push(R.numSpotLightMaps),T.push(R.numHemiLights),T.push(R.numRectAreaLights),T.push(R.numDirLightShadows),T.push(R.numPointLightShadows),T.push(R.numSpotLightShadows),T.push(R.numSpotLightShadowsWithMaps),T.push(R.numLightProbes),T.push(R.shadowMapType),T.push(R.toneMapping),T.push(R.numClippingPlanes),T.push(R.numClipIntersection),T.push(R.depthPacking)}(R,T),function x(T,R){a.disableAll(),R.isWebGL2&&a.enable(0),R.supportsVertexTextures&&a.enable(1),R.instancing&&a.enable(2),R.instancingColor&&a.enable(3),R.matcap&&a.enable(4),R.envMap&&a.enable(5),R.normalMapObjectSpace&&a.enable(6),R.normalMapTangentSpace&&a.enable(7),R.clearcoat&&a.enable(8),R.iridescence&&a.enable(9),R.alphaTest&&a.enable(10),R.vertexColors&&a.enable(11),R.vertexAlphas&&a.enable(12),R.vertexUv1s&&a.enable(13),R.vertexUv2s&&a.enable(14),R.vertexUv3s&&a.enable(15),R.vertexTangents&&a.enable(16),R.anisotropy&&a.enable(17),T.push(a.mask),a.disableAll(),R.fog&&a.enable(0),R.useFog&&a.enable(1),R.flatShading&&a.enable(2),R.logarithmicDepthBuffer&&a.enable(3),R.skinning&&a.enable(4),R.morphTargets&&a.enable(5),R.morphNormals&&a.enable(6),R.morphColors&&a.enable(7),R.premultipliedAlpha&&a.enable(8),R.shadowMapEnabled&&a.enable(9),R.useLegacyLights&&a.enable(10),R.doubleSided&&a.enable(11),R.flipSided&&a.enable(12),R.useDepthPacking&&a.enable(13),R.dithering&&a.enable(14),R.transmission&&a.enable(15),R.sheen&&a.enable(16),R.opaque&&a.enable(17),R.pointsUvs&&a.enable(18),R.decodeVideoTexture&&a.enable(19),T.push(a.mask)}(R,T),R.push(n.outputColorSpace)),R.push(T.customProgramCacheKey),R.join()},getUniforms:function S(T){const R=g[T.type];let $;return $=R?Kne.clone(pl[R].uniforms):T.uniforms,$},acquireProgram:function E(T,R){let $;for(let ee=0,ie=c.length;ee<ie;ee++){const V=c[ee];if(V.cacheKey===R){$=V,++$.usedTimes;break}}return void 0===$&&($=new Toe(n,R,T,s),c.push($)),$},releaseProgram:function A(T){if(0==--T.usedTimes){const R=c.indexOf(T);c[R]=c[c.length-1],c.pop(),T.destroy()}},releaseShaderCache:function M(T){l.remove(T)},programs:c,dispose:function N(){l.dispose()}}}function Poe(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function Ooe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function n4(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function i4(){const n=[];let e=0;const t=[],i=[],r=[];function o(d,f,m,g,_,v){let y=n[e];return void 0===y?(y={id:d.id,object:d,geometry:f,material:m,groupOrder:g,renderOrder:d.renderOrder,z:_,group:v},n[e]=y):(y.id=d.id,y.object=d,y.geometry=f,y.material=m,y.groupOrder=g,y.renderOrder=d.renderOrder,y.z=_,y.group=v),e++,y}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(d,f,m,g,_,v){const y=o(d,f,m,g,_,v);m.transmission>0?i.push(y):!0===m.transparent?r.push(y):t.push(y)},unshift:function l(d,f,m,g,_,v){const y=o(d,f,m,g,_,v);m.transmission>0?i.unshift(y):!0===m.transparent?r.unshift(y):t.unshift(y)},finish:function u(){for(let d=e,f=n.length;d<f;d++){const m=n[d];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(d,f){t.length>1&&t.sort(d||Ooe),i.length>1&&i.sort(f||n4),r.length>1&&r.sort(f||n4)}}}function Loe(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new i4,n.set(i,[o])):r>=s.length?(o=new i4,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function Noe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new Ye};break;case"SpotLight":t={position:new O,direction:new O,color:new Ye,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new Ye,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new Ye,groundColor:new Ye};break;case"RectAreaLight":t={color:new Ye,position:new O,halfWidth:new O,halfHeight:new O}}return n[e.id]=t,t}}}let koe=0;function Uoe(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Boe(n,e){const t=new Noe,i=function Foe(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new fe,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new O);const s=new O,o=new It,a=new It;return{setup:function l(u,d){let f=0,m=0,g=0;for(let ee=0;ee<9;ee++)r.probe[ee].set(0,0,0);let _=0,v=0,y=0,b=0,x=0,S=0,E=0,A=0,M=0,N=0,T=0;u.sort(Uoe);const R=!0===d?Math.PI:1;for(let ee=0,ie=u.length;ee<ie;ee++){const V=u[ee],K=V.color,G=V.intensity,X=V.distance,Q=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)f+=K.r*G*R,m+=K.g*G*R,g+=K.b*G*R;else if(V.isLightProbe){for(let Z=0;Z<9;Z++)r.probe[Z].addScaledVector(V.sh.coefficients[Z],G);T++}else if(V.isDirectionalLight){const Z=t.get(V);if(Z.color.copy(V.color).multiplyScalar(V.intensity*R),V.castShadow){const ce=V.shadow,q=i.get(V);q.shadowBias=ce.bias,q.shadowNormalBias=ce.normalBias,q.shadowRadius=ce.radius,q.shadowMapSize=ce.mapSize,r.directionalShadow[_]=q,r.directionalShadowMap[_]=Q,r.directionalShadowMatrix[_]=V.shadow.matrix,S++}r.directional[_]=Z,_++}else if(V.isSpotLight){const Z=t.get(V);Z.position.setFromMatrixPosition(V.matrixWorld),Z.color.copy(K).multiplyScalar(G*R),Z.distance=X,Z.coneCos=Math.cos(V.angle),Z.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),Z.decay=V.decay,r.spot[y]=Z;const ce=V.shadow;if(V.map&&(r.spotLightMap[M]=V.map,M++,ce.updateMatrices(V),V.castShadow&&N++),r.spotLightMatrix[y]=ce.matrix,V.castShadow){const q=i.get(V);q.shadowBias=ce.bias,q.shadowNormalBias=ce.normalBias,q.shadowRadius=ce.radius,q.shadowMapSize=ce.mapSize,r.spotShadow[y]=q,r.spotShadowMap[y]=Q,A++}y++}else if(V.isRectAreaLight){const Z=t.get(V);Z.color.copy(K).multiplyScalar(G),Z.halfWidth.set(.5*V.width,0,0),Z.halfHeight.set(0,.5*V.height,0),r.rectArea[b]=Z,b++}else if(V.isPointLight){const Z=t.get(V);if(Z.color.copy(V.color).multiplyScalar(V.intensity*R),Z.distance=V.distance,Z.decay=V.decay,V.castShadow){const ce=V.shadow,q=i.get(V);q.shadowBias=ce.bias,q.shadowNormalBias=ce.normalBias,q.shadowRadius=ce.radius,q.shadowMapSize=ce.mapSize,q.shadowCameraNear=ce.camera.near,q.shadowCameraFar=ce.camera.far,r.pointShadow[v]=q,r.pointShadowMap[v]=Q,r.pointShadowMatrix[v]=V.shadow.matrix,E++}r.point[v]=Z,v++}else if(V.isHemisphereLight){const Z=t.get(V);Z.skyColor.copy(V.color).multiplyScalar(G*R),Z.groundColor.copy(V.groundColor).multiplyScalar(G*R),r.hemi[x]=Z,x++}}b>0&&(e.isWebGL2||!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=Xe.LTC_FLOAT_1,r.rectAreaLTC2=Xe.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Xe.LTC_HALF_1,r.rectAreaLTC2=Xe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=m,r.ambient[2]=g;const $=r.hash;($.directionalLength!==_||$.pointLength!==v||$.spotLength!==y||$.rectAreaLength!==b||$.hemiLength!==x||$.numDirectionalShadows!==S||$.numPointShadows!==E||$.numSpotShadows!==A||$.numSpotMaps!==M||$.numLightProbes!==T)&&(r.directional.length=_,r.spot.length=y,r.rectArea.length=b,r.point.length=v,r.hemi.length=x,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=E,r.pointShadowMap.length=E,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=E,r.spotLightMatrix.length=A+M-N,r.spotLightMap.length=M,r.numSpotLightShadowsWithMaps=N,r.numLightProbes=T,$.directionalLength=_,$.pointLength=v,$.spotLength=y,$.rectAreaLength=b,$.hemiLength=x,$.numDirectionalShadows=S,$.numPointShadows=E,$.numSpotShadows=A,$.numSpotMaps=M,$.numLightProbes=T,r.version=koe++)},setupView:function c(u,d){let f=0,m=0,g=0,_=0,v=0;const y=d.matrixWorldInverse;for(let b=0,x=u.length;b<x;b++){const S=u[b];if(S.isDirectionalLight){const E=r.directional[f];E.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),f++}else if(S.isSpotLight){const E=r.spot[g];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),E.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),E.direction.sub(s),E.direction.transformDirection(y),g++}else if(S.isRectAreaLight){const E=r.rectArea[_];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),a.identity(),o.copy(S.matrixWorld),o.premultiply(y),a.extractRotation(o),E.halfWidth.set(.5*S.width,0,0),E.halfHeight.set(0,.5*S.height,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),_++}else if(S.isPointLight){const E=r.point[m];E.position.setFromMatrixPosition(S.matrixWorld),E.position.applyMatrix4(y),m++}else if(S.isHemisphereLight){const E=r.hemi[v];E.direction.setFromMatrixPosition(S.matrixWorld),E.direction.transformDirection(y),v++}}},state:r}}function r4(n,e){const t=new Boe(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(d){t.setup(i,d)},setupLightsView:function c(d){t.setupView(i,d)},pushLight:function o(d){i.push(d)},pushShadow:function a(d){r.push(d)}}}function Voe(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new r4(n,e),t.set(s,[l])):o>=a.length?(l=new r4(n,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class s4 extends As{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class o4 extends As{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Goe(n,e,t){let i=new UR;const r=new fe,s=new fe,o=new Hn,a=new s4({depthPacking:3201}),l=new o4,c={},u=t.maxTextureSize,d={0:1,1:0,2:2},f=new xc({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new fe},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=f.clone();m.defines.HORIZONTAL_PASS=1;const g=new Vt;g.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Ae(g,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yz;let y=this.type;function b(E,A){const M=e.update(_);f.defines.VSM_SAMPLES!==E.blurSamples&&(f.defines.VSM_SAMPLES=E.blurSamples,m.defines.VSM_SAMPLES=E.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),null===E.mapPass&&(E.mapPass=new Pd(r.x,r.y)),f.uniforms.shadow_pass.value=E.map.texture,f.uniforms.resolution.value=E.mapSize,f.uniforms.radius.value=E.radius,n.setRenderTarget(E.mapPass),n.clear(),n.renderBufferDirect(A,null,M,f,_,null),m.uniforms.shadow_pass.value=E.mapPass.texture,m.uniforms.resolution.value=E.mapSize,m.uniforms.radius.value=E.radius,n.setRenderTarget(E.map),n.clear(),n.renderBufferDirect(A,null,M,m,_,null)}function x(E,A,M,N){let T=null;const R=!0===M.isPointLight?E.customDistanceMaterial:E.customDepthMaterial;if(void 0!==R)T=R;else if(T=!0===M.isPointLight?l:a,n.localClippingEnabled&&!0===A.clipShadows&&Array.isArray(A.clippingPlanes)&&0!==A.clippingPlanes.length||A.displacementMap&&0!==A.displacementScale||A.alphaMap&&A.alphaTest>0||A.map&&A.alphaTest>0){const $=T.uuid,ee=A.uuid;let ie=c[$];void 0===ie&&(ie={},c[$]=ie);let V=ie[ee];void 0===V&&(V=T.clone(),ie[ee]=V),T=V}return T.visible=A.visible,T.wireframe=A.wireframe,T.side=N===uc?null!==A.shadowSide?A.shadowSide:A.side:null!==A.shadowSide?A.shadowSide:d[A.side],T.alphaMap=A.alphaMap,T.alphaTest=A.alphaTest,T.map=A.map,T.clipShadows=A.clipShadows,T.clippingPlanes=A.clippingPlanes,T.clipIntersection=A.clipIntersection,T.displacementMap=A.displacementMap,T.displacementScale=A.displacementScale,T.displacementBias=A.displacementBias,T.wireframeLinewidth=A.wireframeLinewidth,T.linewidth=A.linewidth,!0===M.isPointLight&&!0===T.isMeshDistanceMaterial&&(n.properties.get(T).light=M),T}function S(E,A,M,N,T){if(!1===E.visible)return;if(E.layers.test(A.layers)&&(E.isMesh||E.isLine||E.isPoints)&&(E.castShadow||E.receiveShadow&&T===uc)&&(!E.frustumCulled||i.intersectsObject(E))){E.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,E.matrixWorld);const ee=e.update(E),ie=E.material;if(Array.isArray(ie)){const V=ee.groups;for(let K=0,G=V.length;K<G;K++){const X=V[K],Q=ie[X.materialIndex];if(Q&&Q.visible){const Z=x(E,Q,N,T);n.renderBufferDirect(M,null,ee,Z,E,X)}}}else if(ie.visible){const V=x(E,ie,N,T);n.renderBufferDirect(M,null,ee,V,E,null)}}const $=E.children;for(let ee=0,ie=$.length;ee<ie;ee++)S($[ee],A,M,N,T)}this.render=function(E,A,M){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===E.length)return;const N=n.getRenderTarget(),T=n.getActiveCubeFace(),R=n.getActiveMipmapLevel(),$=n.state;$.setBlending(0),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const ee=y!==uc&&this.type===uc,ie=y===uc&&this.type!==uc;for(let V=0,K=E.length;V<K;V++){const G=E[V],X=G.shadow;if(void 0===X){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(!1===X.autoUpdate&&!1===X.needsUpdate)continue;r.copy(X.mapSize);const Q=X.getFrameExtents();if(r.multiply(Q),s.copy(X.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Q.x),r.x=s.x*Q.x,X.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Q.y),r.y=s.y*Q.y,X.mapSize.y=s.y)),null===X.map||!0===ee||!0===ie){const ce=this.type!==uc?{minFilter:$i,magFilter:$i}:{};null!==X.map&&X.map.dispose(),X.map=new Pd(r.x,r.y,ce),X.map.texture.name=G.name+".shadowMap",X.camera.updateProjectionMatrix()}n.setRenderTarget(X.map),n.clear();const Z=X.getViewportCount();for(let ce=0;ce<Z;ce++){const q=X.getViewport(ce);o.set(s.x*q.x,s.y*q.y,s.x*q.z,s.y*q.w),$.viewport(o),X.updateMatrices(G,ce),i=X.getFrustum(),S(A,M,X.camera,G,this.type)}!0!==X.isPointLightShadow&&this.type===uc&&b(X,M),X.needsUpdate=!1}y=this.type,v.needsUpdate=!1,n.setRenderTarget(N,T,R)}}function Woe(n,e,t){const i=t.isWebGL2,a=new function r(){let z=!1;const ze=new Hn;let ke=null;const Ze=new Hn(0,0,0,0);return{setMask:function(He){ke!==He&&!z&&(n.colorMask(He,He,He,He),ke=He)},setLocked:function(He){z=He},setClear:function(He,Me,ft,kt,sr){!0===sr&&(He*=kt,Me*=kt,ft*=kt),ze.set(He,Me,ft,kt),!1===Ze.equals(ze)&&(n.clearColor(He,Me,ft,kt),Ze.copy(ze))},reset:function(){z=!1,ke=null,Ze.set(-1,0,0,0)}}},l=new function s(){let z=!1,ze=null,ke=null,Ze=null;return{setTest:function(He){He?We(n.DEPTH_TEST):et(n.DEPTH_TEST)},setMask:function(He){ze!==He&&!z&&(n.depthMask(He),ze=He)},setFunc:function(He){if(ke!==He){switch(He){case 0:n.depthFunc(n.NEVER);break;case 1:n.depthFunc(n.ALWAYS);break;case 2:n.depthFunc(n.LESS);break;case 3:default:n.depthFunc(n.LEQUAL);break;case 4:n.depthFunc(n.EQUAL);break;case 5:n.depthFunc(n.GEQUAL);break;case 6:n.depthFunc(n.GREATER);break;case 7:n.depthFunc(n.NOTEQUAL)}ke=He}},setLocked:function(He){z=He},setClear:function(He){Ze!==He&&(n.clearDepth(He),Ze=He)},reset:function(){z=!1,ze=null,ke=null,Ze=null}}},c=new function o(){let z=!1,ze=null,ke=null,Ze=null,He=null,Me=null,ft=null,kt=null,sr=null;return{setTest:function(_i){z||(_i?We(n.STENCIL_TEST):et(n.STENCIL_TEST))},setMask:function(_i){ze!==_i&&!z&&(n.stencilMask(_i),ze=_i)},setFunc:function(_i,Cl,Ps){(ke!==_i||Ze!==Cl||He!==Ps)&&(n.stencilFunc(_i,Cl,Ps),ke=_i,Ze=Cl,He=Ps)},setOp:function(_i,Cl,Ps){(Me!==_i||ft!==Cl||kt!==Ps)&&(n.stencilOp(_i,Cl,Ps),Me=_i,ft=Cl,kt=Ps)},setLocked:function(_i){z=_i},setClear:function(_i){sr!==_i&&(n.clearStencil(_i),sr=_i)},reset:function(){z=!1,ze=null,ke=null,Ze=null,He=null,Me=null,ft=null,kt=null,sr=null}}},u=new WeakMap,d=new WeakMap;let f={},m={},g=new WeakMap,_=[],v=null,y=!1,b=null,x=null,S=null,E=null,A=null,M=null,N=null,T=!1,R=null,$=null,ee=null,ie=null,V=null;const K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,X=0;const Q=n.getParameter(n.VERSION);-1!==Q.indexOf("WebGL")?(X=parseFloat(/^WebGL (\d)/.exec(Q)[1]),G=X>=1):-1!==Q.indexOf("OpenGL ES")&&(X=parseFloat(/^OpenGL ES (\d)/.exec(Q)[1]),G=X>=2);let Z=null,ce={};const q=n.getParameter(n.SCISSOR_BOX),ae=n.getParameter(n.VIEWPORT),Ee=(new Hn).fromArray(q),ve=(new Hn).fromArray(ae);function Ue(z,ze,ke,Ze){const He=new Uint8Array(4),Me=n.createTexture();n.bindTexture(z,Me),n.texParameteri(z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let ft=0;ft<ke;ft++)!i||z!==n.TEXTURE_3D&&z!==n.TEXTURE_2D_ARRAY?n.texImage2D(ze+ft,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,He):n.texImage3D(ze,0,n.RGBA,1,1,Ze,0,n.RGBA,n.UNSIGNED_BYTE,He);return Me}const Ke={};function We(z){!0!==f[z]&&(n.enable(z),f[z]=!0)}function et(z){!1!==f[z]&&(n.disable(z),f[z]=!1)}Ke[n.TEXTURE_2D]=Ue(n.TEXTURE_2D,n.TEXTURE_2D,1),Ke[n.TEXTURE_CUBE_MAP]=Ue(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Ke[n.TEXTURE_2D_ARRAY]=Ue(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ke[n.TEXTURE_3D]=Ue(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),We(n.DEPTH_TEST),l.setFunc(3),Ce(!1),_t(1),We(n.CULL_FACE),ye(0);const H={100:n.FUNC_ADD,101:n.FUNC_SUBTRACT,102:n.FUNC_REVERSE_SUBTRACT};if(i)H[103]=n.MIN,H[104]=n.MAX;else{const z=e.get("EXT_blend_minmax");null!==z&&(H[103]=z.MIN_EXT,H[104]=z.MAX_EXT)}const Be={200:n.ZERO,201:n.ONE,202:n.SRC_COLOR,204:n.SRC_ALPHA,210:n.SRC_ALPHA_SATURATE,208:n.DST_COLOR,206:n.DST_ALPHA,203:n.ONE_MINUS_SRC_COLOR,205:n.ONE_MINUS_SRC_ALPHA,209:n.ONE_MINUS_DST_COLOR,207:n.ONE_MINUS_DST_ALPHA};function ye(z,ze,ke,Ze,He,Me,ft,kt){if(0!==z){if(!1===y&&(We(n.BLEND),y=!0),5===z)He=He||ze,Me=Me||ke,ft=ft||Ze,(ze!==x||He!==A)&&(n.blendEquationSeparate(H[ze],H[He]),x=ze,A=He),(ke!==S||Ze!==E||Me!==M||ft!==N)&&(n.blendFuncSeparate(Be[ke],Be[Ze],Be[Me],Be[ft]),S=ke,E=Ze,M=Me,N=ft),b=z,T=!1;else if(z!==b||kt!==T){if((100!==x||100!==A)&&(n.blendEquation(n.FUNC_ADD),x=100,A=100),kt)switch(z){case 1:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.ONE,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",z)}else switch(z){case 1:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case 2:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case 3:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case 4:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",z)}S=null,E=null,M=null,N=null,b=z,T=kt}}else!0===y&&(et(n.BLEND),y=!1)}function Ce(z){R!==z&&(n.frontFace(z?n.CW:n.CCW),R=z)}function _t(z){0!==z?(We(n.CULL_FACE),z!==$&&n.cullFace(1===z?n.BACK:2===z?n.FRONT:n.FRONT_AND_BACK)):et(n.CULL_FACE),$=z}function ot(z,ze,ke){z?(We(n.POLYGON_OFFSET_FILL),(ie!==ze||V!==ke)&&(n.polygonOffset(ze,ke),ie=ze,V=ke)):et(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:l,stencil:c},enable:We,disable:et,bindFramebuffer:function St(z,ze){return m[z]!==ze&&(n.bindFramebuffer(z,ze),m[z]=ze,i&&(z===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=ze),z===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=ze)),!0)},drawBuffers:function Lt(z,ze){let ke=_,Ze=!1;if(z)if(ke=g.get(ze),void 0===ke&&(ke=[],g.set(ze,ke)),z.isWebGLMultipleRenderTargets){const He=z.texture;if(ke.length!==He.length||ke[0]!==n.COLOR_ATTACHMENT0){for(let Me=0,ft=He.length;Me<ft;Me++)ke[Me]=n.COLOR_ATTACHMENT0+Me;ke.length=He.length,Ze=!0}}else ke[0]!==n.COLOR_ATTACHMENT0&&(ke[0]=n.COLOR_ATTACHMENT0,Ze=!0);else ke[0]!==n.BACK&&(ke[0]=n.BACK,Ze=!0);Ze&&(t.isWebGL2?n.drawBuffers(ke):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))},useProgram:function ut(z){return v!==z&&(n.useProgram(z),v=z,!0)},setBlending:ye,setMaterial:function Pe(z,ze){2===z.side?et(n.CULL_FACE):We(n.CULL_FACE);let ke=1===z.side;ze&&(ke=!ke),Ce(ke),1===z.blending&&!1===z.transparent?ye(0):ye(z.blending,z.blendEquation,z.blendSrc,z.blendDst,z.blendEquationAlpha,z.blendSrcAlpha,z.blendDstAlpha,z.premultipliedAlpha),l.setFunc(z.depthFunc),l.setTest(z.depthTest),l.setMask(z.depthWrite),a.setMask(z.colorWrite);const Ze=z.stencilWrite;c.setTest(Ze),Ze&&(c.setMask(z.stencilWriteMask),c.setFunc(z.stencilFunc,z.stencilRef,z.stencilFuncMask),c.setOp(z.stencilFail,z.stencilZFail,z.stencilZPass)),ot(z.polygonOffset,z.polygonOffsetFactor,z.polygonOffsetUnits),!0===z.alphaToCoverage?We(n.SAMPLE_ALPHA_TO_COVERAGE):et(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ce,setCullFace:_t,setLineWidth:function it(z){z!==ee&&(G&&n.lineWidth(z),ee=z)},setPolygonOffset:ot,setScissorTest:function Rt(z){z?We(n.SCISSOR_TEST):et(n.SCISSOR_TEST)},activeTexture:function un(z){void 0===z&&(z=n.TEXTURE0+K-1),Z!==z&&(n.activeTexture(z),Z=z)},bindTexture:function xi(z,ze,ke){void 0===ke&&(ke=null===Z?n.TEXTURE0+K-1:Z);let Ze=ce[ke];void 0===Ze&&(Ze={type:void 0,texture:void 0},ce[ke]=Ze),(Ze.type!==z||Ze.texture!==ze)&&(Z!==ke&&(n.activeTexture(ke),Z=ke),n.bindTexture(z,ze||Ke[z]),Ze.type=z,Ze.texture=ze)},unbindTexture:function k(){const z=ce[Z];void 0!==z&&void 0!==z.type&&(n.bindTexture(z.type,null),z.type=void 0,z.texture=void 0)},compressedTexImage2D:function P(){try{n.compressedTexImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},compressedTexImage3D:function se(){try{n.compressedTexImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texImage2D:function W(){try{n.texImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texImage3D:function Fe(){try{n.texImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},updateUBOMapping:function yt(z,ze){let ke=d.get(ze);void 0===ke&&(ke=new WeakMap,d.set(ze,ke));let Ze=ke.get(z);void 0===Ze&&(Ze=n.getUniformBlockIndex(ze,z.name),ke.set(z,Ze))},uniformBlockBinding:function Et(z,ze){const Ze=d.get(ze).get(z);u.get(ze)!==Ze&&(n.uniformBlockBinding(ze,Ze,z.__bindingPointIndex),u.set(ze,Ze))},texStorage2D:function Ne(){try{n.texStorage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texStorage3D:function Je(){try{n.texStorage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texSubImage2D:function Re(){try{n.texSubImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},texSubImage3D:function De(){try{n.texSubImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},compressedTexSubImage2D:function Oe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},compressedTexSubImage3D:function pt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(z){console.error("THREE.WebGLState:",z)}},scissor:function be(z){!1===Ee.equals(z)&&(n.scissor(z.x,z.y,z.z,z.w),Ee.copy(z))},viewport:function Nt(z){!1===ve.equals(z)&&(n.viewport(z.x,z.y,z.z,z.w),ve.copy(z))},reset:function gt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},Z=null,ce={},m={},g=new WeakMap,_=[],v=null,y=!1,b=null,x=null,S=null,E=null,A=null,M=null,N=null,T=!1,R=null,$=null,ee=null,ie=null,V=null,Ee.set(0,0,n.canvas.width,n.canvas.height),ve.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function joe(n,e,t,i,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,d=r.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),g=new WeakMap;let _;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function b(k,P){return y?new OffscreenCanvas(k,P):Zv("canvas")}function x(k,P,se,Re){let De=1;if((k.width>Re||k.height>Re)&&(De=Re/Math.max(k.width,k.height)),De<1||!0===P){if(typeof HTMLImageElement<"u"&&k instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&k instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&k instanceof ImageBitmap){const Oe=P?p1:Math.floor,pt=Oe(De*k.width),Ne=Oe(De*k.height);void 0===_&&(_=b(pt,Ne));const Je=se?b(pt,Ne):_;return Je.width=pt,Je.height=Ne,Je.getContext("2d").drawImage(k,0,0,pt,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+k.width+"x"+k.height+") to ("+pt+"x"+Ne+")."),Je}return"data"in k&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+k.width+"x"+k.height+")."),k}return k}function S(k){return _R(k.width)&&_R(k.height)}function A(k,P){return k.generateMipmaps&&P&&k.minFilter!==$i&&k.minFilter!==Mi}function M(k){n.generateMipmap(k)}function N(k,P,se,Re,De=!1){if(!1===a)return P;if(null!==k){if(void 0!==n[k])return n[k];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+k+"'")}let Oe=P;if(P===n.RED&&(se===n.FLOAT&&(Oe=n.R32F),se===n.HALF_FLOAT&&(Oe=n.R16F),se===n.UNSIGNED_BYTE&&(Oe=n.R8)),P===n.RED_INTEGER&&(se===n.UNSIGNED_BYTE&&(Oe=n.R8UI),se===n.UNSIGNED_SHORT&&(Oe=n.R16UI),se===n.UNSIGNED_INT&&(Oe=n.R32UI),se===n.BYTE&&(Oe=n.R8I),se===n.SHORT&&(Oe=n.R16I),se===n.INT&&(Oe=n.R32I)),P===n.RG&&(se===n.FLOAT&&(Oe=n.RG32F),se===n.HALF_FLOAT&&(Oe=n.RG16F),se===n.UNSIGNED_BYTE&&(Oe=n.RG8)),P===n.RGBA){const pt=De?c1:Rn.getTransfer(Re);se===n.FLOAT&&(Oe=n.RGBA32F),se===n.HALF_FLOAT&&(Oe=n.RGBA16F),se===n.UNSIGNED_BYTE&&(Oe=pt===di?n.SRGB8_ALPHA8:n.RGBA8),se===n.UNSIGNED_SHORT_4_4_4_4&&(Oe=n.RGBA4),se===n.UNSIGNED_SHORT_5_5_5_1&&(Oe=n.RGB5_A1)}return(Oe===n.R16F||Oe===n.R32F||Oe===n.RG16F||Oe===n.RG32F||Oe===n.RGBA16F||Oe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Oe}function T(k,P,se){return!0===A(k,se)||k.isFramebufferTexture&&k.minFilter!==$i&&k.minFilter!==Mi?Math.log2(Math.max(P.width,P.height))+1:void 0!==k.mipmaps&&k.mipmaps.length>0?k.mipmaps.length:k.isCompressedTexture&&Array.isArray(k.image)?P.mipmaps.length:1}function R(k){return k===$i||1004===k||1005===k?n.NEAREST:n.LINEAR}function $(k){const P=k.target;P.removeEventListener("dispose",$),function ie(k){const P=i.get(k);if(void 0===P.__webglInit)return;const se=k.source,Re=v.get(se);if(Re){const De=Re[P.__cacheKey];De.usedTimes--,0===De.usedTimes&&V(k),0===Object.keys(Re).length&&v.delete(se)}i.remove(k)}(P),P.isVideoTexture&&g.delete(P)}function ee(k){const P=k.target;P.removeEventListener("dispose",ee),function K(k){const P=k.texture,se=i.get(k),Re=i.get(P);if(void 0!==Re.__webglTexture&&(n.deleteTexture(Re.__webglTexture),o.memory.textures--),k.depthTexture&&k.depthTexture.dispose(),k.isWebGLCubeRenderTarget)for(let De=0;De<6;De++){if(Array.isArray(se.__webglFramebuffer[De]))for(let Oe=0;Oe<se.__webglFramebuffer[De].length;Oe++)n.deleteFramebuffer(se.__webglFramebuffer[De][Oe]);else n.deleteFramebuffer(se.__webglFramebuffer[De]);se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer[De])}else{if(Array.isArray(se.__webglFramebuffer))for(let De=0;De<se.__webglFramebuffer.length;De++)n.deleteFramebuffer(se.__webglFramebuffer[De]);else n.deleteFramebuffer(se.__webglFramebuffer);if(se.__webglDepthbuffer&&n.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&n.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let De=0;De<se.__webglColorRenderbuffer.length;De++)se.__webglColorRenderbuffer[De]&&n.deleteRenderbuffer(se.__webglColorRenderbuffer[De]);se.__webglDepthRenderbuffer&&n.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(k.isWebGLMultipleRenderTargets)for(let De=0,Oe=P.length;De<Oe;De++){const pt=i.get(P[De]);pt.__webglTexture&&(n.deleteTexture(pt.__webglTexture),o.memory.textures--),i.remove(P[De])}i.remove(P),i.remove(k)}(P)}function V(k){const P=i.get(k);n.deleteTexture(P.__webglTexture),delete v.get(k.source)[P.__cacheKey],o.memory.textures--}let G=0;function ce(k,P){const se=i.get(k);if(k.isVideoTexture&&function un(k){const P=o.render.frame;g.get(k)!==P&&(g.set(k,P),k.update())}(k),!1===k.isRenderTargetTexture&&k.version>0&&se.__version!==k.version){const Re=k.image;if(null===Re)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Re.complete)return void St(se,k,P);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,se.__webglTexture,n.TEXTURE0+P)}const ve={[Ed]:n.REPEAT,[ts]:n.CLAMP_TO_EDGE,1002:n.MIRRORED_REPEAT},Ue={[$i]:n.NEAREST,1004:n.NEAREST_MIPMAP_NEAREST,1005:n.NEAREST_MIPMAP_LINEAR,[Mi]:n.LINEAR,1007:n.LINEAR_MIPMAP_NEAREST,[dc]:n.LINEAR_MIPMAP_LINEAR},Ke={512:n.NEVER,519:n.ALWAYS,513:n.LESS,515:n.LEQUAL,514:n.EQUAL,518:n.GEQUAL,516:n.GREATER,517:n.NOTEQUAL};function We(k,P,se){if(se?(n.texParameteri(k,n.TEXTURE_WRAP_S,ve[P.wrapS]),n.texParameteri(k,n.TEXTURE_WRAP_T,ve[P.wrapT]),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,ve[P.wrapR]),n.texParameteri(k,n.TEXTURE_MAG_FILTER,Ue[P.magFilter]),n.texParameteri(k,n.TEXTURE_MIN_FILTER,Ue[P.minFilter])):(n.texParameteri(k,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(k,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(k===n.TEXTURE_3D||k===n.TEXTURE_2D_ARRAY)&&n.texParameteri(k,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(P.wrapS!==ts||P.wrapT!==ts)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(k,n.TEXTURE_MAG_FILTER,R(P.magFilter)),n.texParameteri(k,n.TEXTURE_MIN_FILTER,R(P.minFilter)),P.minFilter!==$i&&P.minFilter!==Mi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),P.compareFunction&&(n.texParameteri(k,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(k,n.TEXTURE_COMPARE_FUNC,Ke[P.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const Re=e.get("EXT_texture_filter_anisotropic");if(P.magFilter===$i||1005!==P.minFilter&&P.minFilter!==dc||P.type===fc&&!1===e.has("OES_texture_float_linear")||!1===a&&P.type===qv&&!1===e.has("OES_texture_half_float_linear"))return;(P.anisotropy>1||i.get(P).__currentAnisotropy)&&(n.texParameterf(k,Re.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,r.getMaxAnisotropy())),i.get(P).__currentAnisotropy=P.anisotropy)}}function et(k,P){let se=!1;void 0===k.__webglInit&&(k.__webglInit=!0,P.addEventListener("dispose",$));const Re=P.source;let De=v.get(Re);void 0===De&&(De={},v.set(Re,De));const Oe=function Z(k){const P=[];return P.push(k.wrapS),P.push(k.wrapT),P.push(k.wrapR||0),P.push(k.magFilter),P.push(k.minFilter),P.push(k.anisotropy),P.push(k.internalFormat),P.push(k.format),P.push(k.type),P.push(k.generateMipmaps),P.push(k.premultiplyAlpha),P.push(k.flipY),P.push(k.unpackAlignment),P.push(k.colorSpace),P.join()}(P);if(Oe!==k.__cacheKey){void 0===De[Oe]&&(De[Oe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,se=!0),De[Oe].usedTimes++;const pt=De[k.__cacheKey];void 0!==pt&&(De[k.__cacheKey].usedTimes--,0===pt.usedTimes&&V(P)),k.__cacheKey=Oe,k.__webglTexture=De[Oe].texture}return se}function St(k,P,se){let Re=n.TEXTURE_2D;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(Re=n.TEXTURE_2D_ARRAY),P.isData3DTexture&&(Re=n.TEXTURE_3D);const De=et(k,P),Oe=P.source;t.bindTexture(Re,k.__webglTexture,n.TEXTURE0+se);const pt=i.get(Oe);if(Oe.version!==pt.__version||!0===De){t.activeTexture(n.TEXTURE0+se);const Ne=Rn.getPrimaries(Rn.workingColorSpace),Je=""===P.colorSpace?null:Rn.getPrimaries(P.colorSpace),W=""===P.colorSpace||Ne===Je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,W);const Fe=function E(k){return!a&&(k.wrapS!==ts||k.wrapT!==ts||k.minFilter!==$i&&k.minFilter!==Mi)}(P)&&!1===S(P.image);let be=x(P.image,Fe,!1,u);be=xi(P,be);const Nt=S(be)||a,yt=s.convert(P.format,P.colorSpace);let z,Et=s.convert(P.type),gt=N(P.internalFormat,yt,Et,P.colorSpace,P.isVideoTexture);We(Re,P,Nt);const ze=P.mipmaps,ke=a&&!0!==P.isVideoTexture,Ze=void 0===pt.__version||!0===De,He=T(P,be,Nt);if(P.isDepthTexture)gt=n.DEPTH_COMPONENT,a?gt=P.type===fc?n.DEPTH_COMPONENT32F:P.type===Wu?n.DEPTH_COMPONENT24:P.type===Md?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:P.type===fc&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===Td&&gt===n.DEPTH_COMPONENT&&1012!==P.type&&P.type!==Wu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=Wu,Et=s.convert(P.type)),P.format===Rm&&gt===n.DEPTH_COMPONENT&&(gt=n.DEPTH_STENCIL,P.type!==Md&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=Md,Et=s.convert(P.type))),Ze&&(ke?t.texStorage2D(n.TEXTURE_2D,1,gt,be.width,be.height):t.texImage2D(n.TEXTURE_2D,0,gt,be.width,be.height,0,yt,Et,null));else if(P.isDataTexture)if(ze.length>0&&Nt){ke&&Ze&&t.texStorage2D(n.TEXTURE_2D,He,gt,ze[0].width,ze[0].height);for(let Me=0,ft=ze.length;Me<ft;Me++)z=ze[Me],ke?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,z.width,z.height,yt,Et,z.data):t.texImage2D(n.TEXTURE_2D,Me,gt,z.width,z.height,0,yt,Et,z.data);P.generateMipmaps=!1}else ke?(Ze&&t.texStorage2D(n.TEXTURE_2D,He,gt,be.width,be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,be.width,be.height,yt,Et,be.data)):t.texImage2D(n.TEXTURE_2D,0,gt,be.width,be.height,0,yt,Et,be.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){ke&&Ze&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,gt,ze[0].width,ze[0].height,be.depth);for(let Me=0,ft=ze.length;Me<ft;Me++)z=ze[Me],P.format!==qo?null!==yt?ke?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,z.width,z.height,be.depth,yt,z.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Me,gt,z.width,z.height,be.depth,0,z.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ke?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Me,0,0,0,z.width,z.height,be.depth,yt,Et,z.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Me,gt,z.width,z.height,be.depth,0,yt,Et,z.data)}else{ke&&Ze&&t.texStorage2D(n.TEXTURE_2D,He,gt,ze[0].width,ze[0].height);for(let Me=0,ft=ze.length;Me<ft;Me++)z=ze[Me],P.format!==qo?null!==yt?ke?t.compressedTexSubImage2D(n.TEXTURE_2D,Me,0,0,z.width,z.height,yt,z.data):t.compressedTexImage2D(n.TEXTURE_2D,Me,gt,z.width,z.height,0,z.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ke?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,z.width,z.height,yt,Et,z.data):t.texImage2D(n.TEXTURE_2D,Me,gt,z.width,z.height,0,yt,Et,z.data)}else if(P.isDataArrayTexture)ke?(Ze&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,gt,be.width,be.height,be.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,be.width,be.height,be.depth,yt,Et,be.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,gt,be.width,be.height,be.depth,0,yt,Et,be.data);else if(P.isData3DTexture)ke?(Ze&&t.texStorage3D(n.TEXTURE_3D,He,gt,be.width,be.height,be.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,be.width,be.height,be.depth,yt,Et,be.data)):t.texImage3D(n.TEXTURE_3D,0,gt,be.width,be.height,be.depth,0,yt,Et,be.data);else if(P.isFramebufferTexture){if(Ze)if(ke)t.texStorage2D(n.TEXTURE_2D,He,gt,be.width,be.height);else{let Me=be.width,ft=be.height;for(let kt=0;kt<He;kt++)t.texImage2D(n.TEXTURE_2D,kt,gt,Me,ft,0,yt,Et,null),Me>>=1,ft>>=1}}else if(ze.length>0&&Nt){ke&&Ze&&t.texStorage2D(n.TEXTURE_2D,He,gt,ze[0].width,ze[0].height);for(let Me=0,ft=ze.length;Me<ft;Me++)z=ze[Me],ke?t.texSubImage2D(n.TEXTURE_2D,Me,0,0,yt,Et,z):t.texImage2D(n.TEXTURE_2D,Me,gt,yt,Et,z);P.generateMipmaps=!1}else ke?(Ze&&t.texStorage2D(n.TEXTURE_2D,He,gt,be.width,be.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,yt,Et,be)):t.texImage2D(n.TEXTURE_2D,0,gt,yt,Et,be);A(P,Nt)&&M(Re),pt.__version=Oe.version,P.onUpdate&&P.onUpdate(P)}k.__version=P.version}function ut(k,P,se,Re,De,Oe){const pt=s.convert(se.format,se.colorSpace),Ne=s.convert(se.type),Je=N(se.internalFormat,pt,Ne,se.colorSpace);if(!i.get(P).__hasExternalTextures){const Fe=Math.max(1,P.width>>Oe),be=Math.max(1,P.height>>Oe);De===n.TEXTURE_3D||De===n.TEXTURE_2D_ARRAY?t.texImage3D(De,Oe,Je,Fe,be,P.depth,0,pt,Ne,null):t.texImage2D(De,Oe,Je,Fe,be,0,pt,Ne,null)}t.bindFramebuffer(n.FRAMEBUFFER,k),Rt(P)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Re,De,i.get(se).__webglTexture,0,ot(P)):(De===n.TEXTURE_2D||De>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&De<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Re,De,i.get(se).__webglTexture,Oe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function H(k,P,se){if(n.bindRenderbuffer(n.RENDERBUFFER,k),P.depthBuffer&&!P.stencilBuffer){let Re=!0===a?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(se||Rt(P)){const De=P.depthTexture;De&&De.isDepthTexture&&(De.type===fc?Re=n.DEPTH_COMPONENT32F:De.type===Wu&&(Re=n.DEPTH_COMPONENT24));const Oe=ot(P);Rt(P)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Oe,Re,P.width,P.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Oe,Re,P.width,P.height)}else n.renderbufferStorage(n.RENDERBUFFER,Re,P.width,P.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,k)}else if(P.depthBuffer&&P.stencilBuffer){const Re=ot(P);se&&!1===Rt(P)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Re,n.DEPTH24_STENCIL8,P.width,P.height):Rt(P)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Re,n.DEPTH24_STENCIL8,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,P.width,P.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,k)}else{const Re=!0===P.isWebGLMultipleRenderTargets?P.texture:[P.texture];for(let De=0;De<Re.length;De++){const Oe=Re[De],pt=s.convert(Oe.format,Oe.colorSpace),Ne=s.convert(Oe.type),Je=N(Oe.internalFormat,pt,Ne,Oe.colorSpace),W=ot(P);se&&!1===Rt(P)?n.renderbufferStorageMultisample(n.RENDERBUFFER,W,Je,P.width,P.height):Rt(P)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,W,Je,P.width,P.height):n.renderbufferStorage(n.RENDERBUFFER,Je,P.width,P.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ye(k){const P=i.get(k),se=!0===k.isWebGLCubeRenderTarget;if(k.depthTexture&&!P.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");!function Be(k,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,k),!P.depthTexture||!P.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),ce(P.depthTexture,0);const Re=i.get(P.depthTexture).__webglTexture,De=ot(P);if(P.depthTexture.format===Td)Rt(P)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else{if(P.depthTexture.format!==Rm)throw new Error("Unknown depthTexture format");Rt(P)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,De):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0)}}(P.__webglFramebuffer,k)}else if(se){P.__webglDepthbuffer=[];for(let Re=0;Re<6;Re++)t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer[Re]),P.__webglDepthbuffer[Re]=n.createRenderbuffer(),H(P.__webglDepthbuffer[Re],k,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,P.__webglFramebuffer),P.__webglDepthbuffer=n.createRenderbuffer(),H(P.__webglDepthbuffer,k,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ot(k){return Math.min(d,k.samples)}function Rt(k){const P=i.get(k);return a&&k.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==P.__useRenderToTexture}function xi(k,P){const se=k.colorSpace,Re=k.format,De=k.type;return!0===k.isCompressedTexture||!0===k.isVideoTexture||1035===k.format||se!==Vr&&""!==se&&(Rn.getTransfer(se)===di?!1===a?!0===e.has("EXT_sRGB")&&Re===qo?(k.format=1035,k.minFilter=Mi,k.generateMipmaps=!1):P=fH.sRGBToLinear(P):(Re!==qo||De!==Gu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),P}this.allocateTextureUnit=function Q(){const k=G;return k>=l&&console.warn("THREE.WebGLTextures: Trying to use "+k+" texture units while this GPU supports only "+l),G+=1,k},this.resetTextureUnits=function X(){G=0},this.setTexture2D=ce,this.setTexture2DArray=function q(k,P){const se=i.get(k);k.version>0&&se.__version!==k.version?St(se,k,P):t.bindTexture(n.TEXTURE_2D_ARRAY,se.__webglTexture,n.TEXTURE0+P)},this.setTexture3D=function ae(k,P){const se=i.get(k);k.version>0&&se.__version!==k.version?St(se,k,P):t.bindTexture(n.TEXTURE_3D,se.__webglTexture,n.TEXTURE0+P)},this.setTextureCube=function Ee(k,P){const se=i.get(k);k.version>0&&se.__version!==k.version?function Lt(k,P,se){if(6!==P.image.length)return;const Re=et(k,P),De=P.source;t.bindTexture(n.TEXTURE_CUBE_MAP,k.__webglTexture,n.TEXTURE0+se);const Oe=i.get(De);if(De.version!==Oe.__version||!0===Re){t.activeTexture(n.TEXTURE0+se);const pt=Rn.getPrimaries(Rn.workingColorSpace),Ne=""===P.colorSpace?null:Rn.getPrimaries(P.colorSpace),Je=""===P.colorSpace||pt===Ne?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,P.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,P.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Je);const W=P.isCompressedTexture||P.image[0].isCompressedTexture,Fe=P.image[0]&&P.image[0].isDataTexture,be=[];for(let Me=0;Me<6;Me++)be[Me]=W||Fe?Fe?P.image[Me].image:P.image[Me]:x(P.image[Me],!1,!0,c),be[Me]=xi(P,be[Me]);const Nt=be[0],yt=S(Nt)||a,Et=s.convert(P.format,P.colorSpace),gt=s.convert(P.type),z=N(P.internalFormat,Et,gt,P.colorSpace),ze=a&&!0!==P.isVideoTexture,ke=void 0===Oe.__version||!0===Re;let He,Ze=T(P,Nt,yt);if(We(n.TEXTURE_CUBE_MAP,P,yt),W){ze&&ke&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,z,Nt.width,Nt.height);for(let Me=0;Me<6;Me++){He=be[Me].mipmaps;for(let ft=0;ft<He.length;ft++){const kt=He[ft];P.format!==qo?null!==Et?ze?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft,0,0,kt.width,kt.height,Et,kt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft,z,kt.width,kt.height,0,kt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft,0,0,kt.width,kt.height,Et,gt,kt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft,z,kt.width,kt.height,0,Et,gt,kt.data)}}}else{He=P.mipmaps,ze&&ke&&(He.length>0&&Ze++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,z,be[0].width,be[0].height));for(let Me=0;Me<6;Me++)if(Fe){ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,be[Me].width,be[Me].height,Et,gt,be[Me].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,z,be[Me].width,be[Me].height,0,Et,gt,be[Me].data);for(let ft=0;ft<He.length;ft++){const sr=He[ft].image[Me].image;ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft+1,0,0,sr.width,sr.height,Et,gt,sr.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft+1,z,sr.width,sr.height,0,Et,gt,sr.data)}}else{ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Et,gt,be[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,z,Et,gt,be[Me]);for(let ft=0;ft<He.length;ft++){const kt=He[ft];ze?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft+1,0,0,Et,gt,kt.image[Me]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Me,ft+1,z,Et,gt,kt.image[Me])}}}A(P,yt)&&M(n.TEXTURE_CUBE_MAP),Oe.__version=De.version,P.onUpdate&&P.onUpdate(P)}k.__version=P.version}(se,k,P):t.bindTexture(n.TEXTURE_CUBE_MAP,se.__webglTexture,n.TEXTURE0+P)},this.rebindTextures=function Pe(k,P,se){const Re=i.get(k);void 0!==P&&ut(Re.__webglFramebuffer,k,k.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==se&&ye(k)},this.setupRenderTarget=function Ce(k){const P=k.texture,se=i.get(k),Re=i.get(P);k.addEventListener("dispose",ee),!0!==k.isWebGLMultipleRenderTargets&&(void 0===Re.__webglTexture&&(Re.__webglTexture=n.createTexture()),Re.__version=P.version,o.memory.textures++);const De=!0===k.isWebGLCubeRenderTarget,Oe=!0===k.isWebGLMultipleRenderTargets,pt=S(k)||a;if(De){se.__webglFramebuffer=[];for(let Ne=0;Ne<6;Ne++)if(a&&P.mipmaps&&P.mipmaps.length>0){se.__webglFramebuffer[Ne]=[];for(let Je=0;Je<P.mipmaps.length;Je++)se.__webglFramebuffer[Ne][Je]=n.createFramebuffer()}else se.__webglFramebuffer[Ne]=n.createFramebuffer()}else{if(a&&P.mipmaps&&P.mipmaps.length>0){se.__webglFramebuffer=[];for(let Ne=0;Ne<P.mipmaps.length;Ne++)se.__webglFramebuffer[Ne]=n.createFramebuffer()}else se.__webglFramebuffer=n.createFramebuffer();if(Oe)if(r.drawBuffers){const Ne=k.texture;for(let Je=0,W=Ne.length;Je<W;Je++){const Fe=i.get(Ne[Je]);void 0===Fe.__webglTexture&&(Fe.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&k.samples>0&&!1===Rt(k)){const Ne=Oe?P:[P];se.__webglMultisampledFramebuffer=n.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Je=0;Je<Ne.length;Je++){const W=Ne[Je];se.__webglColorRenderbuffer[Je]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,se.__webglColorRenderbuffer[Je]);const Fe=s.convert(W.format,W.colorSpace),be=s.convert(W.type),Nt=N(W.internalFormat,Fe,be,W.colorSpace,!0===k.isXRRenderTarget),yt=ot(k);n.renderbufferStorageMultisample(n.RENDERBUFFER,yt,Nt,k.width,k.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Je,n.RENDERBUFFER,se.__webglColorRenderbuffer[Je])}n.bindRenderbuffer(n.RENDERBUFFER,null),k.depthBuffer&&(se.__webglDepthRenderbuffer=n.createRenderbuffer(),H(se.__webglDepthRenderbuffer,k,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(De){t.bindTexture(n.TEXTURE_CUBE_MAP,Re.__webglTexture),We(n.TEXTURE_CUBE_MAP,P,pt);for(let Ne=0;Ne<6;Ne++)if(a&&P.mipmaps&&P.mipmaps.length>0)for(let Je=0;Je<P.mipmaps.length;Je++)ut(se.__webglFramebuffer[Ne][Je],k,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,Je);else ut(se.__webglFramebuffer[Ne],k,P,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0);A(P,pt)&&M(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Oe){const Ne=k.texture;for(let Je=0,W=Ne.length;Je<W;Je++){const Fe=Ne[Je],be=i.get(Fe);t.bindTexture(n.TEXTURE_2D,be.__webglTexture),We(n.TEXTURE_2D,Fe,pt),ut(se.__webglFramebuffer,k,Fe,n.COLOR_ATTACHMENT0+Je,n.TEXTURE_2D,0),A(Fe,pt)&&M(n.TEXTURE_2D)}t.unbindTexture()}else{let Ne=n.TEXTURE_2D;if((k.isWebGL3DRenderTarget||k.isWebGLArrayRenderTarget)&&(a?Ne=k.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ne,Re.__webglTexture),We(Ne,P,pt),a&&P.mipmaps&&P.mipmaps.length>0)for(let Je=0;Je<P.mipmaps.length;Je++)ut(se.__webglFramebuffer[Je],k,P,n.COLOR_ATTACHMENT0,Ne,Je);else ut(se.__webglFramebuffer,k,P,n.COLOR_ATTACHMENT0,Ne,0);A(P,pt)&&M(Ne),t.unbindTexture()}k.depthBuffer&&ye(k)},this.updateRenderTargetMipmap=function _t(k){const P=S(k)||a,se=!0===k.isWebGLMultipleRenderTargets?k.texture:[k.texture];for(let Re=0,De=se.length;Re<De;Re++){const Oe=se[Re];if(A(Oe,P)){const pt=k.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Ne=i.get(Oe).__webglTexture;t.bindTexture(pt,Ne),M(pt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function it(k){if(a&&k.samples>0&&!1===Rt(k)){const P=k.isWebGLMultipleRenderTargets?k.texture:[k.texture],se=k.width,Re=k.height;let De=n.COLOR_BUFFER_BIT;const Oe=[],pt=k.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ne=i.get(k),Je=!0===k.isWebGLMultipleRenderTargets;if(Je)for(let W=0;W<P.length;W++)t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+W,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+W,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let W=0;W<P.length;W++){Oe.push(n.COLOR_ATTACHMENT0+W),k.depthBuffer&&Oe.push(pt);const Fe=void 0!==Ne.__ignoreDepthValues&&Ne.__ignoreDepthValues;if(!1===Fe&&(k.depthBuffer&&(De|=n.DEPTH_BUFFER_BIT),k.stencilBuffer&&(De|=n.STENCIL_BUFFER_BIT)),Je&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[W]),!0===Fe&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[pt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[pt])),Je){const be=i.get(P[W]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,be,0)}n.blitFramebuffer(0,0,se,Re,0,0,se,Re,De,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Oe)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Je)for(let W=0;W<P.length;W++){t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+W,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[W]);const Fe=i.get(P[W]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+W,n.TEXTURE_2D,Fe,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ye,this.setupFrameBufferTexture=ut,this.useMultisampledRTT=Rt}function $oe(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=""){let a;const l=Rn.getTransfer(o);if(s===Gu)return n.UNSIGNED_BYTE;if(1017===s)return n.UNSIGNED_SHORT_4_4_4_4;if(1018===s)return n.UNSIGNED_SHORT_5_5_5_1;if(1010===s)return n.BYTE;if(1011===s)return n.SHORT;if(1012===s)return n.UNSIGNED_SHORT;if(1013===s)return n.INT;if(s===Wu)return n.UNSIGNED_INT;if(s===fc)return n.FLOAT;if(s===qv)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return n.ALPHA;if(s===qo)return n.RGBA;if(1024===s)return n.LUMINANCE;if(1025===s)return n.LUMINANCE_ALPHA;if(s===Td)return n.DEPTH_COMPONENT;if(s===Rm)return n.DEPTH_STENCIL;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return n.RED;if(1029===s)return n.RED_INTEGER;if(1030===s)return n.RG;if(1031===s)return n.RG_INTEGER;if(1033===s)return n.RGBA_INTEGER;if(33776===s||33777===s||33778===s||33779===s)if(l===di){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return l===di?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return l===di?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s||36494===s||36495===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return l===di?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===s)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===s)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===Md?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class qoe extends fr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wo extends fi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xoe={type:"move"};class jR{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new wo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new wo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new wo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const _ of e.hand.values()){const v=t.getJointPose(_,i),y=this._getHandJoint(c,_);null!==v&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=null!==v}const f=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,g=.005;c.inputState.pinching&&f>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Xoe)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new wo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Yoe extends Yo{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Td)!==Td&&u!==Rm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Td&&(i=Wu),void 0===i&&u===Rm&&(i=Md),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:$i,this.minFilter=void 0!==l?l:$i,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}class Zoe extends Id{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,f=null,m=null,g=null;const _=t.getContextAttributes();let v=null,y=null;const b=[],x=[],S=new fr;S.layers.enable(1),S.viewport=new Hn;const E=new fr;E.layers.enable(2),E.viewport=new Hn;const A=[S,E],M=new qoe;M.layers.enable(1),M.layers.enable(2);let N=null,T=null;function R(q){const ae=x.indexOf(q.inputSource);if(-1===ae)return;const Ee=b[ae];void 0!==Ee&&(Ee.update(q.inputSource,q.frame,c||o),Ee.dispatchEvent({type:q.type,data:q.inputSource}))}function $(){r.removeEventListener("select",R),r.removeEventListener("selectstart",R),r.removeEventListener("selectend",R),r.removeEventListener("squeeze",R),r.removeEventListener("squeezestart",R),r.removeEventListener("squeezeend",R),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",ee);for(let q=0;q<b.length;q++){const ae=x[q];null!==ae&&(x[q]=null,b[q].disconnect(ae))}N=null,T=null,e.setRenderTarget(v),m=null,f=null,d=null,r=null,y=null,ce.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function ee(q){for(let ae=0;ae<q.removed.length;ae++){const Ee=q.removed[ae],ve=x.indexOf(Ee);ve>=0&&(x[ve]=null,b[ve].disconnect(Ee))}for(let ae=0;ae<q.added.length;ae++){const Ee=q.added[ae];let ve=x.indexOf(Ee);if(-1===ve){for(let Ke=0;Ke<b.length;Ke++){if(Ke>=x.length){x.push(Ee),ve=Ke;break}if(null===x[Ke]){x[Ke]=Ee,ve=Ke;break}}if(-1===ve)break}const Ue=b[ve];Ue&&Ue.connect(Ee)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(q){let ae=b[q];return void 0===ae&&(ae=new jR,b[q]=ae),ae.getTargetRaySpace()},this.getControllerGrip=function(q){let ae=b[q];return void 0===ae&&(ae=new jR,b[q]=ae),ae.getGripSpace()},this.getHand=function(q){let ae=b[q];return void 0===ae&&(ae=new jR,b[q]=ae),ae.getHandSpace()},this.setFramebufferScaleFactor=function(q){s=q,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(q){a=q,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(q){c=q},this.getBaseLayer=function(){return null!==f?f:m},this.getBinding=function(){return d},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var q=zn(function*(ae){if(r=ae,null!==r){if(v=e.getRenderTarget(),r.addEventListener("select",R),r.addEventListener("selectstart",R),r.addEventListener("selectend",R),r.addEventListener("squeeze",R),r.addEventListener("squeezestart",R),r.addEventListener("squeezeend",R),r.addEventListener("end",$),r.addEventListener("inputsourceschange",ee),!0!==_.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)m=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),y=new Pd(m.framebufferWidth,m.framebufferHeight,{format:qo,type:Gu,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil});else{let Ee=null,ve=null,Ue=null;_.depth&&(Ue=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ee=_.stencil?Rm:Td,ve=_.stencil?Md:Wu);const Ke={colorFormat:t.RGBA8,depthFormat:Ue,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(Ke),r.updateRenderState({layers:[f]}),y=new Pd(f.textureWidth,f.textureHeight,{format:qo,type:Gu,depthTexture:new Yoe(f.textureWidth,f.textureHeight,ve,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0}),e.properties.get(y).__ignoreDepthValues=f.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),ce.setContext(r),ce.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(ae){return q.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const ie=new O,V=new O;function G(q,ae){null===ae?q.matrixWorld.copy(q.matrix):q.matrixWorld.multiplyMatrices(ae.matrixWorld,q.matrix),q.matrixWorldInverse.copy(q.matrixWorld).invert()}this.updateCamera=function(q){if(null===r)return;M.near=E.near=S.near=q.near,M.far=E.far=S.far=q.far,(N!==M.near||T!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),N=M.near,T=M.far);const ae=q.parent,Ee=M.cameras;G(M,ae);for(let ve=0;ve<Ee.length;ve++)G(Ee[ve],ae);2===Ee.length?function K(q,ae,Ee){ie.setFromMatrixPosition(ae.matrixWorld),V.setFromMatrixPosition(Ee.matrixWorld);const ve=ie.distanceTo(V),Ue=ae.projectionMatrix.elements,Ke=Ee.projectionMatrix.elements,We=Ue[14]/(Ue[10]-1),et=Ue[14]/(Ue[10]+1),St=(Ue[9]+1)/Ue[5],Lt=(Ue[9]-1)/Ue[5],ut=(Ue[8]-1)/Ue[0],H=(Ke[8]+1)/Ke[0],Be=We*ut,ye=We*H,Pe=ve/(-ut+H),Ce=Pe*-ut;ae.matrixWorld.decompose(q.position,q.quaternion,q.scale),q.translateX(Ce),q.translateZ(Pe),q.matrixWorld.compose(q.position,q.quaternion,q.scale),q.matrixWorldInverse.copy(q.matrixWorld).invert();const _t=We+Pe,it=et+Pe;q.projectionMatrix.makePerspective(Be-Ce,ye+(ve-Ce),St*et/it*_t,Lt*et/it*_t,_t,it),q.projectionMatrixInverse.copy(q.projectionMatrix).invert()}(M,S,E):M.projectionMatrix.copy(S.projectionMatrix),function X(q,ae,Ee){null===Ee?q.matrix.copy(ae.matrixWorld):(q.matrix.copy(Ee.matrixWorld),q.matrix.invert(),q.matrix.multiply(ae.matrixWorld)),q.matrix.decompose(q.position,q.quaternion,q.scale),q.updateMatrixWorld(!0),q.projectionMatrix.copy(ae.projectionMatrix),q.projectionMatrixInverse.copy(ae.projectionMatrixInverse),q.isPerspectiveCamera&&(q.fov=2*Nm*Math.atan(1/q.projectionMatrix.elements[5]),q.zoom=1)}(q,M,ae)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==f||null!==m)return l},this.setFoveation=function(q){l=q,null!==f&&(f.fixedFoveation=q),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=q)};let Q=null;const ce=new OH;ce.setAnimationLoop(function Z(q,ae){if(u=ae.getViewerPose(c||o),g=ae,null!==u){const Ee=u.views;null!==m&&(e.setRenderTargetFramebuffer(y,m.framebuffer),e.setRenderTarget(y));let ve=!1;Ee.length!==M.cameras.length&&(M.cameras.length=0,ve=!0);for(let Ue=0;Ue<Ee.length;Ue++){const Ke=Ee[Ue];let We=null;if(null!==m)We=m.getViewport(Ke);else{const St=d.getViewSubImage(f,Ke);We=St.viewport,0===Ue&&(e.setRenderTargetTextures(y,St.colorTexture,f.ignoreDepthValues?void 0:St.depthStencilTexture),e.setRenderTarget(y))}let et=A[Ue];void 0===et&&(et=new fr,et.layers.enable(Ue),et.viewport=new Hn,A[Ue]=et),et.matrix.fromArray(Ke.transform.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale),et.projectionMatrix.fromArray(Ke.projectionMatrix),et.projectionMatrixInverse.copy(et.projectionMatrix).invert(),et.viewport.set(We.x,We.y,We.width,We.height),0===Ue&&(M.matrix.copy(et.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),!0===ve&&M.cameras.push(et)}}for(let Ee=0;Ee<b.length;Ee++){const ve=x[Ee],Ue=b[Ee];null!==ve&&void 0!==Ue&&Ue.update(ve,ae,c||o)}Q&&Q(q,ae),ae.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ae}),g=null}),this.setAnimationLoop=function(q){Q=q},this.dispose=function(){}}}function Koe(n,e){function t(v,y){!0===v.matrixAutoUpdate&&v.updateMatrix(),y.value.copy(v.matrix)}function s(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,t(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,1===y.side&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,t(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),1===y.side&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,t(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,t(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const b=e.get(y).envMap;if(b&&(v.envMap.value=b,v.flipEnvMap.value=b.isCubeTexture&&!1===b.isRenderTargetTexture?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const x=!0===n._useLegacyLights?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*x,t(y.lightMap,v.lightMapTransform)}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,v.aoMapTransform))}return{refreshFogUniforms:function i(v,y){y.color.getRGB(v.fogColor.value,PH(n)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)},refreshMaterialUniforms:function r(v,y,b,x,S){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(v,y):y.isMeshToonMaterial?(s(v,y),function d(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}(v,y)):y.isMeshPhongMaterial?(s(v,y),function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}(v,y)):y.isMeshStandardMaterial?(s(v,y),function f(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,v.roughnessMapTransform)),e.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}(v,y),y.isMeshPhysicalMaterial&&function m(v,y,b){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),1===y.side&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,v.specularIntensityMapTransform))}(v,y,S)):y.isMeshMatcapMaterial?(s(v,y),function g(v,y){y.matcap&&(v.matcap.value=y.matcap)}(v,y)):y.isMeshDepthMaterial?s(v,y):y.isMeshDistanceMaterial?(s(v,y),function _(v,y){const b=e.get(y).light;v.referencePosition.value.setFromMatrixPosition(b.matrixWorld),v.nearDistance.value=b.shadow.camera.near,v.farDistance.value=b.shadow.camera.far}(v,y)):y.isMeshNormalMaterial?s(v,y):y.isLineBasicMaterial?(function o(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform))}(v,y),y.isLineDashedMaterial&&function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}(v,y)):y.isPointsMaterial?function l(v,y,b,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*b,v.scale.value=.5*x,y.map&&(v.map.value=y.map,t(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y,b,x):y.isSpriteMaterial?function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}}}function Joe(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function m(b,x,S){const E=b.value;if(void 0===S[x]){if("number"==typeof E)S[x]=E;else{const A=Array.isArray(E)?E:[E],M=[];for(let N=0;N<A.length;N++)M.push(A[N].clone());S[x]=M}return!0}if("number"==typeof E){if(S[x]!==E)return S[x]=E,!0}else{const A=Array.isArray(S[x])?S[x]:[S[x]],M=Array.isArray(E)?E:[E];for(let N=0;N<A.length;N++){const T=A[N];if(!1===T.equals(M[N]))return T.copy(M[N]),!0}}return!1}function _(b){const x={boundary:0,storage:0};return"number"==typeof b?(x.boundary=4,x.storage=4):b.isVector2?(x.boundary=8,x.storage=8):b.isVector3||b.isColor?(x.boundary=16,x.storage=12):b.isVector4?(x.boundary=16,x.storage=16):b.isMatrix3?(x.boundary=48,x.storage=48):b.isMatrix4?(x.boundary=64,x.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),x}function v(b){const x=b.target;x.removeEventListener("dispose",v);const S=o.indexOf(x.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}return{bind:function l(b,x){i.uniformBlockBinding(b,x.program)},update:function c(b,x){let S=r[b.id];void 0===S&&(function g(b){const x=b.uniforms;let S=0;let A=0;for(let M=0,N=x.length;M<N;M++){const T=x[M],R={boundary:0,storage:0},$=Array.isArray(T.value)?T.value:[T.value];for(let ee=0,ie=$.length;ee<ie;ee++){const K=_($[ee]);R.boundary+=K.boundary,R.storage+=K.storage}T.__data=new Float32Array(R.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=S,M>0&&(A=S%16,0!==A&&16-A-R.boundary<0&&(S+=16-A,T.__offset=S)),S+=R.storage}A=S%16,A>0&&(S+=16-A),b.__size=S,b.__cache={}}(b),S=function u(b){const x=function d(){for(let b=0;b<a;b++)if(-1===o.indexOf(b))return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=x;const S=n.createBuffer(),E=b.__size,A=b.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,E,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,S),S}(b),r[b.id]=S,b.addEventListener("dispose",v)),i.updateUBOMapping(b,x.program);const A=e.render.frame;s[b.id]!==A&&(function f(b){const S=b.uniforms,E=b.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[b.id]);for(let A=0,M=S.length;A<M;A++){const N=S[A];if(!0===m(N,A,E)){const T=N.__offset,R=Array.isArray(N.value)?N.value:[N.value];let $=0;for(let ee=0;ee<R.length;ee++){const ie=R[ee],V=_(ie);"number"==typeof ie?(N.__data[0]=ie,n.bufferSubData(n.UNIFORM_BUFFER,T+$,N.__data)):ie.isMatrix3?(N.__data[0]=ie.elements[0],N.__data[1]=ie.elements[1],N.__data[2]=ie.elements[2],N.__data[3]=ie.elements[0],N.__data[4]=ie.elements[3],N.__data[5]=ie.elements[4],N.__data[6]=ie.elements[5],N.__data[7]=ie.elements[0],N.__data[8]=ie.elements[6],N.__data[9]=ie.elements[7],N.__data[10]=ie.elements[8],N.__data[11]=ie.elements[0]):(ie.toArray(N.__data,$),$+=V.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,T,N.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(b),s[b.id]=A)},dispose:function y(){for(const b in r)n.deleteBuffer(r[b]);o=[],r={},s={}}}}class $R{constructor(e={}){const{canvas:t=One(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;let f;this.isWebGLRenderer=!0,f=null!==i?i.getContextAttributes().alpha:o;const m=new Uint32Array(4),g=new Int32Array(4);let _=null,v=null;const y=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ti,this._useLegacyLights=!1,this.toneMapping=zu,this.toneMappingExposure=1;const x=this;let S=!1,E=0,A=0,M=null,N=-1,T=null;const R=new Hn,$=new Hn;let ee=null;const ie=new Ye(0);let V=0,K=t.width,G=t.height,X=1,Q=null,Z=null;const ce=new Hn(0,0,K,G),q=new Hn(0,0,K,G);let ae=!1;const Ee=new UR;let ve=!1,Ue=!1,Ke=null;const We=new It,et=new fe,St=new O,Lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ut(){return null===M?X:1}let ye,Pe,Ce,_t,it,ot,Rt,un,xi,k,P,se,Re,De,Oe,pt,Ne,Je,W,Fe,be,Nt,yt,Et,H=i;function Be(F,te){for(let he=0;he<F.length;he++){const de=t.getContext(F[he],te);if(null!==de)return de}return null}try{const F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r157"),t.addEventListener("webglcontextlost",ze,!1),t.addEventListener("webglcontextrestored",ke,!1),t.addEventListener("webglcontextcreationerror",Ze,!1),null===H){const te=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&te.shift(),H=Be(te,F),null===H)throw Be(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&H instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===H.getShaderPrecisionFormat&&(H.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}function gt(){ye=new hse(H),Pe=new sse(H,ye,e),ye.init(Pe),Nt=new $oe(H,ye,Pe),Ce=new Woe(H,ye,Pe),_t=new pse(H),it=new Poe,ot=new joe(H,ye,Ce,it,Pe,Nt,_t),Rt=new ase(x),un=new use(x),xi=new rie(H,Pe),yt=new ise(H,ye,xi,Pe),k=new dse(H,xi,_t,yt),P=new yse(H,k,xi,_t),W=new _se(H,Pe,ot),pt=new ose(it),se=new Roe(x,Rt,un,ye,Pe,yt,pt),Re=new Koe(x,it),De=new Loe,Oe=new Voe(ye,Pe),Je=new nse(x,Rt,un,Ce,P,f,l),Ne=new Goe(x,P,Pe),Et=new Joe(H,_t,Pe,Ce),Fe=new rse(H,ye,_t,Pe),be=new fse(H,ye,_t,Pe),_t.programs=se.programs,x.capabilities=Pe,x.extensions=ye,x.properties=it,x.renderLists=De,x.shadowMap=Ne,x.state=Ce,x.info=_t}gt();const z=new Zoe(x,H);function ze(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function ke(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const F=_t.autoReset,te=Ne.enabled,he=Ne.autoUpdate,ne=Ne.needsUpdate,de=Ne.type;gt(),_t.autoReset=F,Ne.enabled=te,Ne.autoUpdate=he,Ne.needsUpdate=ne,Ne.type=de}function Ze(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function He(F){const te=F.target;te.removeEventListener("dispose",He),function Me(F){(function ft(F){const te=it.get(F).programs;void 0!==te&&(te.forEach(function(he){se.releaseProgram(he)}),F.isShaderMaterial&&se.releaseShaderCache(F))})(F),it.remove(F)}(te)}this.xr=z,this.getContext=function(){return H},this.getContextAttributes=function(){return H.getContextAttributes()},this.forceContextLoss=function(){const F=ye.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=ye.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(F){void 0!==F&&(X=F,this.setSize(K,G,!1))},this.getSize=function(F){return F.set(K,G)},this.setSize=function(F,te,he=!0){z.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(K=F,G=te,t.width=Math.floor(F*X),t.height=Math.floor(te*X),!0===he&&(t.style.width=F+"px",t.style.height=te+"px"),this.setViewport(0,0,F,te))},this.getDrawingBufferSize=function(F){return F.set(K*X,G*X).floor()},this.setDrawingBufferSize=function(F,te,he){K=F,G=te,X=he,t.width=Math.floor(F*he),t.height=Math.floor(te*he),this.setViewport(0,0,F,te)},this.getCurrentViewport=function(F){return F.copy(R)},this.getViewport=function(F){return F.copy(ce)},this.setViewport=function(F,te,he,ne){F.isVector4?ce.set(F.x,F.y,F.z,F.w):ce.set(F,te,he,ne),Ce.viewport(R.copy(ce).multiplyScalar(X).floor())},this.getScissor=function(F){return F.copy(q)},this.setScissor=function(F,te,he,ne){F.isVector4?q.set(F.x,F.y,F.z,F.w):q.set(F,te,he,ne),Ce.scissor($.copy(q).multiplyScalar(X).floor())},this.getScissorTest=function(){return ae},this.setScissorTest=function(F){Ce.setScissorTest(ae=F)},this.setOpaqueSort=function(F){Q=F},this.setTransparentSort=function(F){Z=F},this.getClearColor=function(F){return F.copy(Je.getClearColor())},this.setClearColor=function(){Je.setClearColor.apply(Je,arguments)},this.getClearAlpha=function(){return Je.getClearAlpha()},this.setClearAlpha=function(){Je.setClearAlpha.apply(Je,arguments)},this.clear=function(F=!0,te=!0,he=!0){let ne=0;if(F){let de=!1;if(null!==M){const at=M.texture.format;de=1033===at||1031===at||1029===at}if(de){const at=M.texture.type,Dt=at===Gu||at===Wu||1012===at||at===Md||1017===at||1018===at,Gt=Je.getClearColor(),Wt=Je.getClearAlpha(),hn=Gt.r,zt=Gt.g,rn=Gt.b;Dt?(m[0]=hn,m[1]=zt,m[2]=rn,m[3]=Wt,H.clearBufferuiv(H.COLOR,0,m)):(g[0]=hn,g[1]=zt,g[2]=rn,g[3]=Wt,H.clearBufferiv(H.COLOR,0,g))}else ne|=H.COLOR_BUFFER_BIT}te&&(ne|=H.DEPTH_BUFFER_BIT),he&&(ne|=H.STENCIL_BUFFER_BIT),H.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ze,!1),t.removeEventListener("webglcontextrestored",ke,!1),t.removeEventListener("webglcontextcreationerror",Ze,!1),De.dispose(),Oe.dispose(),it.dispose(),Rt.dispose(),un.dispose(),P.dispose(),yt.dispose(),Et.dispose(),se.dispose(),z.dispose(),z.removeEventListener("sessionstart",_i),z.removeEventListener("sessionend",Cl),Ke&&(Ke.dispose(),Ke=null),Ps.stop()},this.renderBufferDirect=function(F,te,he,ne,de,at){null===te&&(te=Lt);const Dt=de.isMesh&&de.matrixWorld.determinant()<0,Gt=function age(F,te,he,ne,de){!0!==te.isScene&&(te=Lt),ot.resetTextureUnits();const at=te.fog,Gt=null===M?x.outputColorSpace:!0===M.isXRRenderTarget?M.texture.colorSpace:Vr,Wt=(ne.isMeshStandardMaterial?un:Rt).get(ne.envMap||(ne.isMeshStandardMaterial?te.environment:null)),hn=!0===ne.vertexColors&&!!he.attributes.color&&4===he.attributes.color.itemSize,zt=!!he.attributes.tangent&&(!!ne.normalMap||ne.anisotropy>0),rn=!!he.morphAttributes.position,Ui=!!he.morphAttributes.normal,Xi=!!he.morphAttributes.color;let Qo=zu;ne.toneMapped&&(null===M||!0===M.isXRRenderTarget)&&(Qo=x.toneMapping);const Lc=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,or=void 0!==Lc?Lc.length:0,pn=it.get(ne),aO=v.state.lights;!0!==ve||!0!==Ue&&F===T||pt.setState(ne,F,F===T&&ne.id===N);let ar=!1;ne.version===pn.__version?(pn.needsLights&&pn.lightsStateVersion!==aO.state.version||pn.outputColorSpace!==Gt||de.isInstancedMesh&&!1===pn.instancing||!de.isInstancedMesh&&!0===pn.instancing||de.isSkinnedMesh&&!1===pn.skinning||!de.isSkinnedMesh&&!0===pn.skinning||de.isInstancedMesh&&!0===pn.instancingColor&&null===de.instanceColor||de.isInstancedMesh&&!1===pn.instancingColor&&null!==de.instanceColor||pn.envMap!==Wt||!0===ne.fog&&pn.fog!==at||void 0!==pn.numClippingPlanes&&(pn.numClippingPlanes!==pt.numPlanes||pn.numIntersection!==pt.numIntersection)||pn.vertexAlphas!==hn||pn.vertexTangents!==zt||pn.morphTargets!==rn||pn.morphNormals!==Ui||pn.morphColors!==Xi||pn.toneMapping!==Qo||!0===Pe.isWebGL2&&pn.morphTargetsCount!==or)&&(ar=!0):(ar=!0,pn.__version=ne.version);let cf=pn.currentProgram;!0===ar&&(cf=gE(ne,te,de));let SW=!1,ew=!1,lO=!1;const Os=cf.getUniforms(),uf=pn.uniforms;if(Ce.useProgram(cf.program)&&(SW=!0,ew=!0,lO=!0),ne.id!==N&&(N=ne.id,ew=!0),SW||T!==F){Os.setValue(H,"projectionMatrix",F.projectionMatrix),Os.setValue(H,"viewMatrix",F.matrixWorldInverse);const Eo=Os.map.cameraPosition;void 0!==Eo&&Eo.setValue(H,St.setFromMatrixPosition(F.matrixWorld)),Pe.logarithmicDepthBuffer&&Os.setValue(H,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&Os.setValue(H,"isOrthographic",!0===F.isOrthographicCamera),T!==F&&(T=F,ew=!0,lO=!0)}if(de.isSkinnedMesh){Os.setOptional(H,de,"bindMatrix"),Os.setOptional(H,de,"bindMatrixInverse");const Eo=de.skeleton;Eo&&(Pe.floatVertexTextures?(null===Eo.boneTexture&&Eo.computeBoneTexture(),Os.setValue(H,"boneTexture",Eo.boneTexture,ot),Os.setValue(H,"boneTextureSize",Eo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const cO=he.morphAttributes;if((void 0!==cO.position||void 0!==cO.normal||void 0!==cO.color&&!0===Pe.isWebGL2)&&W.update(de,he,cf),(ew||pn.receiveShadow!==de.receiveShadow)&&(pn.receiveShadow=de.receiveShadow,Os.setValue(H,"receiveShadow",de.receiveShadow)),ne.isMeshGouraudMaterial&&null!==ne.envMap&&(uf.envMap.value=Wt,uf.flipEnvMap.value=Wt.isCubeTexture&&!1===Wt.isRenderTargetTexture?-1:1),ew&&(Os.setValue(H,"toneMappingExposure",x.toneMappingExposure),pn.needsLights&&function lge(F,te){F.ambientLightColor.needsUpdate=te,F.lightProbe.needsUpdate=te,F.directionalLights.needsUpdate=te,F.directionalLightShadows.needsUpdate=te,F.pointLights.needsUpdate=te,F.pointLightShadows.needsUpdate=te,F.spotLights.needsUpdate=te,F.spotLightShadows.needsUpdate=te,F.rectAreaLights.needsUpdate=te,F.hemisphereLights.needsUpdate=te}(uf,lO),at&&!0===ne.fog&&Re.refreshFogUniforms(uf,at),Re.refreshMaterialUniforms(uf,ne,X,G,Ke),B1.upload(H,pn.uniformsList,uf,ot)),ne.isShaderMaterial&&!0===ne.uniformsNeedUpdate&&(B1.upload(H,pn.uniformsList,uf,ot),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&Os.setValue(H,"center",de.center),Os.setValue(H,"modelViewMatrix",de.modelViewMatrix),Os.setValue(H,"normalMatrix",de.normalMatrix),Os.setValue(H,"modelMatrix",de.matrixWorld),ne.isShaderMaterial||ne.isRawShaderMaterial){const Eo=ne.uniformsGroups;for(let uO=0,uge=Eo.length;uO<uge;uO++)if(Pe.isWebGL2){const EW=Eo[uO];Et.update(EW,cf),Et.bind(EW,cf)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return cf}(F,te,he,ne,de);Ce.setMaterial(ne,Dt);let Wt=he.index,hn=1;if(!0===ne.wireframe){if(Wt=k.getWireframeAttribute(he),void 0===Wt)return;hn=2}const zt=he.drawRange,rn=he.attributes.position;let Ui=zt.start*hn,Xi=(zt.start+zt.count)*hn;null!==at&&(Ui=Math.max(Ui,at.start*hn),Xi=Math.min(Xi,(at.start+at.count)*hn)),null!==Wt?(Ui=Math.max(Ui,0),Xi=Math.min(Xi,Wt.count)):null!=rn&&(Ui=Math.max(Ui,0),Xi=Math.min(Xi,rn.count));const Qo=Xi-Ui;if(Qo<0||Qo===1/0)return;yt.setup(de,ne,Gt,he,Wt);let Lc,or=Fe;if(null!==Wt&&(Lc=xi.get(Wt),or=be,or.setIndex(Lc)),de.isMesh)!0===ne.wireframe?(Ce.setLineWidth(ne.wireframeLinewidth*ut()),or.setMode(H.LINES)):or.setMode(H.TRIANGLES);else if(de.isLine){let pn=ne.linewidth;void 0===pn&&(pn=1),Ce.setLineWidth(pn*ut()),or.setMode(de.isLineSegments?H.LINES:de.isLineLoop?H.LINE_LOOP:H.LINE_STRIP)}else de.isPoints?or.setMode(H.POINTS):de.isSprite&&or.setMode(H.TRIANGLES);if(de.isInstancedMesh)or.renderInstances(Ui,Qo,de.count);else if(he.isInstancedBufferGeometry){const aO=Math.min(he.instanceCount,void 0!==he._maxInstanceCount?he._maxInstanceCount:1/0);or.renderInstances(Ui,Qo,aO)}else or.render(Ui,Qo)},this.compile=function(F,te){function he(ne,de,at){!0===ne.transparent&&2===ne.side&&!1===ne.forceSinglePass?(ne.side=1,ne.needsUpdate=!0,gE(ne,de,at),ne.side=0,ne.needsUpdate=!0,gE(ne,de,at),ne.side=2):gE(ne,de,at)}v=Oe.get(F),v.init(),b.push(v),F.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(v.pushLight(ne),ne.castShadow&&v.pushShadow(ne))}),v.setupLights(x._useLegacyLights),F.traverse(function(ne){const de=ne.material;if(de)if(Array.isArray(de))for(let at=0;at<de.length;at++)he(de[at],F,ne);else he(de,F,ne)}),b.pop(),v=null};let kt=null;function _i(){Ps.stop()}function Cl(){Ps.start()}const Ps=new OH;function wW(F,te,he,ne){if(!1===F.visible)return;if(F.layers.test(te.layers))if(F.isGroup)he=F.renderOrder;else if(F.isLOD)!0===F.autoUpdate&&F.update(te);else if(F.isLight)v.pushLight(F),F.castShadow&&v.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||Ee.intersectsSprite(F)){ne&&St.setFromMatrixPosition(F.matrixWorld).applyMatrix4(We);const Dt=P.update(F),Gt=F.material;Gt.visible&&_.push(F,Dt,Gt,he,St.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||Ee.intersectsObject(F))){const Dt=P.update(F),Gt=F.material;if(ne&&(void 0!==F.boundingSphere?(null===F.boundingSphere&&F.computeBoundingSphere(),St.copy(F.boundingSphere.center)):(null===Dt.boundingSphere&&Dt.computeBoundingSphere(),St.copy(Dt.boundingSphere.center)),St.applyMatrix4(F.matrixWorld).applyMatrix4(We)),Array.isArray(Gt)){const Wt=Dt.groups;for(let hn=0,zt=Wt.length;hn<zt;hn++){const rn=Wt[hn],Ui=Gt[rn.materialIndex];Ui&&Ui.visible&&_.push(F,Dt,Ui,he,St.z,rn)}}else Gt.visible&&_.push(F,Dt,Gt,he,St.z,null)}const at=F.children;for(let Dt=0,Gt=at.length;Dt<Gt;Dt++)wW(at[Dt],te,he,ne)}function bW(F,te,he,ne){const de=F.opaque,at=F.transmissive,Dt=F.transparent;v.setupLightsView(he),!0===ve&&pt.setGlobalState(x.clippingPlanes,he),at.length>0&&function oge(F,te,he,ne){const de=Pe.isWebGL2;null===Ke&&(Ke=new Pd(1,1,{generateMipmaps:!0,type:ye.has("EXT_color_buffer_half_float")?qv:Gu,minFilter:dc,samples:de?4:0})),x.getDrawingBufferSize(et),de?Ke.setSize(et.x,et.y):Ke.setSize(p1(et.x),p1(et.y));const at=x.getRenderTarget();x.setRenderTarget(Ke),x.getClearColor(ie),V=x.getClearAlpha(),V<1&&x.setClearColor(16777215,.5),x.clear();const Dt=x.toneMapping;x.toneMapping=zu,mE(F,he,ne),ot.updateMultisampleRenderTarget(Ke),ot.updateRenderTargetMipmap(Ke);let Gt=!1;for(let Wt=0,hn=te.length;Wt<hn;Wt++){const zt=te[Wt],rn=zt.object,Ui=zt.geometry,Xi=zt.material,Qo=zt.group;if(2===Xi.side&&rn.layers.test(ne.layers)){const Lc=Xi.side;Xi.side=1,Xi.needsUpdate=!0,xW(rn,he,ne,Ui,Xi,Qo),Xi.side=Lc,Xi.needsUpdate=!0,Gt=!0}}!0===Gt&&(ot.updateMultisampleRenderTarget(Ke),ot.updateRenderTargetMipmap(Ke)),x.setRenderTarget(at),x.setClearColor(ie,V),x.toneMapping=Dt}(de,at,te,he),ne&&Ce.viewport(R.copy(ne)),de.length>0&&mE(de,te,he),at.length>0&&mE(at,te,he),Dt.length>0&&mE(Dt,te,he),Ce.buffers.depth.setTest(!0),Ce.buffers.depth.setMask(!0),Ce.buffers.color.setMask(!0),Ce.setPolygonOffset(!1)}function mE(F,te,he){const ne=!0===te.isScene?te.overrideMaterial:null;for(let de=0,at=F.length;de<at;de++){const Dt=F[de],Gt=Dt.object,Wt=Dt.geometry,hn=null===ne?Dt.material:ne,zt=Dt.group;Gt.layers.test(he.layers)&&xW(Gt,te,he,Wt,hn,zt)}}function xW(F,te,he,ne,de,at){F.onBeforeRender(x,te,he,ne,de,at),F.modelViewMatrix.multiplyMatrices(he.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),de.onBeforeRender(x,te,he,ne,F,at),!0===de.transparent&&2===de.side&&!1===de.forceSinglePass?(de.side=1,de.needsUpdate=!0,x.renderBufferDirect(he,te,ne,de,F,at),de.side=0,de.needsUpdate=!0,x.renderBufferDirect(he,te,ne,de,F,at),de.side=2):x.renderBufferDirect(he,te,ne,de,F,at),F.onAfterRender(x,te,he,ne,de,at)}function gE(F,te,he){!0!==te.isScene&&(te=Lt);const ne=it.get(F),de=v.state.lights,Dt=de.state.version,Gt=se.getParameters(F,de.state,v.state.shadowsArray,te,he),Wt=se.getProgramCacheKey(Gt);let hn=ne.programs;ne.environment=F.isMeshStandardMaterial?te.environment:null,ne.fog=te.fog,ne.envMap=(F.isMeshStandardMaterial?un:Rt).get(F.envMap||ne.environment),void 0===hn&&(F.addEventListener("dispose",He),hn=new Map,ne.programs=hn);let zt=hn.get(Wt);if(void 0!==zt){if(ne.currentProgram===zt&&ne.lightsStateVersion===Dt)return CW(F,Gt),zt}else Gt.uniforms=se.getUniforms(F),F.onBuild(he,Gt,x),F.onBeforeCompile(Gt,x),zt=se.acquireProgram(Gt,Wt),hn.set(Wt,zt),ne.uniforms=Gt.uniforms;const rn=ne.uniforms;(!F.isShaderMaterial&&!F.isRawShaderMaterial||!0===F.clipping)&&(rn.clippingPlanes=pt.uniform),CW(F,Gt),ne.needsLights=function cge(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&!0===F.lights}(F),ne.lightsStateVersion=Dt,ne.needsLights&&(rn.ambientLightColor.value=de.state.ambient,rn.lightProbe.value=de.state.probe,rn.directionalLights.value=de.state.directional,rn.directionalLightShadows.value=de.state.directionalShadow,rn.spotLights.value=de.state.spot,rn.spotLightShadows.value=de.state.spotShadow,rn.rectAreaLights.value=de.state.rectArea,rn.ltc_1.value=de.state.rectAreaLTC1,rn.ltc_2.value=de.state.rectAreaLTC2,rn.pointLights.value=de.state.point,rn.pointLightShadows.value=de.state.pointShadow,rn.hemisphereLights.value=de.state.hemi,rn.directionalShadowMap.value=de.state.directionalShadowMap,rn.directionalShadowMatrix.value=de.state.directionalShadowMatrix,rn.spotShadowMap.value=de.state.spotShadowMap,rn.spotLightMatrix.value=de.state.spotLightMatrix,rn.spotLightMap.value=de.state.spotLightMap,rn.pointShadowMap.value=de.state.pointShadowMap,rn.pointShadowMatrix.value=de.state.pointShadowMatrix);const Ui=zt.getUniforms(),Xi=B1.seqWithValue(Ui.seq,rn);return ne.currentProgram=zt,ne.uniformsList=Xi,zt}function CW(F,te){const he=it.get(F);he.outputColorSpace=te.outputColorSpace,he.instancing=te.instancing,he.instancingColor=te.instancingColor,he.skinning=te.skinning,he.morphTargets=te.morphTargets,he.morphNormals=te.morphNormals,he.morphColors=te.morphColors,he.morphTargetsCount=te.morphTargetsCount,he.numClippingPlanes=te.numClippingPlanes,he.numIntersection=te.numClipIntersection,he.vertexAlphas=te.vertexAlphas,he.vertexTangents=te.vertexTangents,he.toneMapping=te.toneMapping}Ps.setAnimationLoop(function sr(F){kt&&kt(F)}),typeof self<"u"&&Ps.setContext(self),this.setAnimationLoop=function(F){kt=F,z.setAnimationLoop(F),null===F?Ps.stop():Ps.start()},z.addEventListener("sessionstart",_i),z.addEventListener("sessionend",Cl),this.render=function(F,te){if(void 0===te||!0===te.isCamera){if(!0!==S){if(!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),null===te.parent&&!0===te.matrixWorldAutoUpdate&&te.updateMatrixWorld(),!0===z.enabled&&!0===z.isPresenting&&(!0===z.cameraAutoUpdate&&z.updateCamera(te),te=z.getCamera()),!0===F.isScene&&F.onBeforeRender(x,F,te,M),v=Oe.get(F,b.length),v.init(),b.push(v),We.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),Ee.setFromProjectionMatrix(We),Ue=this.localClippingEnabled,ve=pt.init(this.clippingPlanes,Ue),_=De.get(F,y.length),_.init(),y.push(_),wW(F,te,0,x.sortObjects),_.finish(),!0===x.sortObjects&&_.sort(Q,Z),this.info.render.frame++,!0===ve&&pt.beginShadows(),Ne.render(v.state.shadowsArray,F,te),!0===ve&&pt.endShadows(),!0===this.info.autoReset&&this.info.reset(),Je.render(_,F),v.setupLights(x._useLegacyLights),te.isArrayCamera){const ne=te.cameras;for(let de=0,at=ne.length;de<at;de++){const Dt=ne[de];bW(_,F,Dt,Dt.viewport)}}else bW(_,F,te);null!==M&&(ot.updateMultisampleRenderTarget(M),ot.updateRenderTargetMipmap(M)),!0===F.isScene&&F.onAfterRender(x,F,te),yt.resetDefaultState(),N=-1,T=null,b.pop(),v=b.length>0?b[b.length-1]:null,y.pop(),_=y.length>0?y[y.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(F,te,he){it.get(F.texture).__webglTexture=te,it.get(F.depthTexture).__webglTexture=he;const ne=it.get(F);ne.__hasExternalTextures=!0,ne.__hasExternalTextures&&(ne.__autoAllocateDepthBuffer=void 0===he,ne.__autoAllocateDepthBuffer||!0===ye.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(F,te){const he=it.get(F);he.__webglFramebuffer=te,he.__useDefaultFramebuffer=void 0===te},this.setRenderTarget=function(F,te=0,he=0){M=F,E=te,A=he;let ne=!0,de=null,at=!1,Dt=!1;if(F){const Wt=it.get(F);void 0!==Wt.__useDefaultFramebuffer?(Ce.bindFramebuffer(H.FRAMEBUFFER,null),ne=!1):void 0===Wt.__webglFramebuffer?ot.setupRenderTarget(F):Wt.__hasExternalTextures&&ot.rebindTextures(F,it.get(F.texture).__webglTexture,it.get(F.depthTexture).__webglTexture);const hn=F.texture;(hn.isData3DTexture||hn.isDataArrayTexture||hn.isCompressedArrayTexture)&&(Dt=!0);const zt=it.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(de=Array.isArray(zt[te])?zt[te][he]:zt[te],at=!0):de=Pe.isWebGL2&&F.samples>0&&!1===ot.useMultisampledRTT(F)?it.get(F).__webglMultisampledFramebuffer:Array.isArray(zt)?zt[he]:zt,R.copy(F.viewport),$.copy(F.scissor),ee=F.scissorTest}else R.copy(ce).multiplyScalar(X).floor(),$.copy(q).multiplyScalar(X).floor(),ee=ae;if(Ce.bindFramebuffer(H.FRAMEBUFFER,de)&&Pe.drawBuffers&&ne&&Ce.drawBuffers(F,de),Ce.viewport(R),Ce.scissor($),Ce.setScissorTest(ee),at){const Wt=it.get(F.texture);H.framebufferTexture2D(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,H.TEXTURE_CUBE_MAP_POSITIVE_X+te,Wt.__webglTexture,he)}else if(Dt){const Wt=it.get(F.texture);H.framebufferTextureLayer(H.FRAMEBUFFER,H.COLOR_ATTACHMENT0,Wt.__webglTexture,he||0,te||0)}N=-1},this.readRenderTargetPixels=function(F,te,he,ne,de,at,Dt){if(!F||!F.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Gt=it.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==Dt&&(Gt=Gt[Dt]),Gt){Ce.bindFramebuffer(H.FRAMEBUFFER,Gt);try{const Wt=F.texture,hn=Wt.format,zt=Wt.type;if(hn!==qo&&Nt.convert(hn)!==H.getParameter(H.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const rn=zt===qv&&(ye.has("EXT_color_buffer_half_float")||Pe.isWebGL2&&ye.has("EXT_color_buffer_float"));if(!(zt===Gu||Nt.convert(zt)===H.getParameter(H.IMPLEMENTATION_COLOR_READ_TYPE)||zt===fc&&(Pe.isWebGL2||ye.has("OES_texture_float")||ye.has("WEBGL_color_buffer_float"))||rn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");te>=0&&te<=F.width-ne&&he>=0&&he<=F.height-de&&H.readPixels(te,he,ne,de,Nt.convert(hn),Nt.convert(zt),at)}finally{const Wt=null!==M?it.get(M).__webglFramebuffer:null;Ce.bindFramebuffer(H.FRAMEBUFFER,Wt)}}},this.copyFramebufferToTexture=function(F,te,he=0){const ne=Math.pow(2,-he),de=Math.floor(te.image.width*ne),at=Math.floor(te.image.height*ne);ot.setTexture2D(te,0),H.copyTexSubImage2D(H.TEXTURE_2D,he,0,0,F.x,F.y,de,at),Ce.unbindTexture()},this.copyTextureToTexture=function(F,te,he,ne=0){const de=te.image.width,at=te.image.height,Dt=Nt.convert(he.format),Gt=Nt.convert(he.type);ot.setTexture2D(he,0),H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,he.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,he.unpackAlignment),te.isDataTexture?H.texSubImage2D(H.TEXTURE_2D,ne,F.x,F.y,de,at,Dt,Gt,te.image.data):te.isCompressedTexture?H.compressedTexSubImage2D(H.TEXTURE_2D,ne,F.x,F.y,te.mipmaps[0].width,te.mipmaps[0].height,Dt,te.mipmaps[0].data):H.texSubImage2D(H.TEXTURE_2D,ne,F.x,F.y,Dt,Gt,te.image),0===ne&&he.generateMipmaps&&H.generateMipmap(H.TEXTURE_2D),Ce.unbindTexture()},this.copyTextureToTexture3D=function(F,te,he,ne,de=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const at=F.max.x-F.min.x+1,Dt=F.max.y-F.min.y+1,Gt=F.max.z-F.min.z+1,Wt=Nt.convert(ne.format),hn=Nt.convert(ne.type);let zt;if(ne.isData3DTexture)ot.setTexture3D(ne,0),zt=H.TEXTURE_3D;else{if(!ne.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ot.setTexture2DArray(ne,0),zt=H.TEXTURE_2D_ARRAY}H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ne.flipY),H.pixelStorei(H.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),H.pixelStorei(H.UNPACK_ALIGNMENT,ne.unpackAlignment);const rn=H.getParameter(H.UNPACK_ROW_LENGTH),Ui=H.getParameter(H.UNPACK_IMAGE_HEIGHT),Xi=H.getParameter(H.UNPACK_SKIP_PIXELS),Qo=H.getParameter(H.UNPACK_SKIP_ROWS),Lc=H.getParameter(H.UNPACK_SKIP_IMAGES),or=he.isCompressedTexture?he.mipmaps[0]:he.image;H.pixelStorei(H.UNPACK_ROW_LENGTH,or.width),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,or.height),H.pixelStorei(H.UNPACK_SKIP_PIXELS,F.min.x),H.pixelStorei(H.UNPACK_SKIP_ROWS,F.min.y),H.pixelStorei(H.UNPACK_SKIP_IMAGES,F.min.z),he.isDataTexture||he.isData3DTexture?H.texSubImage3D(zt,de,te.x,te.y,te.z,at,Dt,Gt,Wt,hn,or.data):he.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),H.compressedTexSubImage3D(zt,de,te.x,te.y,te.z,at,Dt,Gt,Wt,or.data)):H.texSubImage3D(zt,de,te.x,te.y,te.z,at,Dt,Gt,Wt,hn,or),H.pixelStorei(H.UNPACK_ROW_LENGTH,rn),H.pixelStorei(H.UNPACK_IMAGE_HEIGHT,Ui),H.pixelStorei(H.UNPACK_SKIP_PIXELS,Xi),H.pixelStorei(H.UNPACK_SKIP_ROWS,Qo),H.pixelStorei(H.UNPACK_SKIP_IMAGES,Lc),0===de&&ne.generateMipmaps&&H.generateMipmap(zt),Ce.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?ot.setTextureCube(F,0):F.isData3DTexture?ot.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?ot.setTexture2DArray(F,0):ot.setTexture2D(F,0),Ce.unbindTexture()},this.resetState=function(){E=0,A=0,M=null,Ce.reset(),yt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return pc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===fR?"display-p3":"srgb",t.unpackColorSpace=Rn.workingColorSpace===l1?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ti?Ad:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ad?Ti:Vr}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class Qoe extends $R{}).prototype.isWebGL1Renderer=!0;class V1 extends fi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class YR{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=mo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=mo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=mo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Is=new O;class Bd{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.applyMatrix4(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.applyNormalMatrix(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Is.fromBufferAttribute(this,t),Is.transformDirection(e),this.setXYZ(t,Is.x,Is.y,Is.z);return this}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),i=en(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),i=en(i,this.array),r=en(r,this.array),s=en(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new ii(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const d4=new O,f4=new Hn,p4=new Hn,nae=new O,m4=new It,ug=new O,KR=new Ia,g4=new It,JR=new Wm;class _4 extends Ae{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new It,this.bindMatrixInverse=new It,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new go),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)ug.fromBufferAttribute(t,i),this.applyBoneTransform(i,ug),this.boundingBox.expandByPoint(ug)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Ia),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)ug.fromBufferAttribute(t,i),this.applyBoneTransform(i,ug),this.boundingSphere.expandByPoint(ug)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),KR.copy(this.boundingSphere),KR.applyMatrix4(r),!1!==e.ray.intersectsSphere(KR)&&(g4.copy(r).invert(),JR.copy(e.ray).applyMatrix4(g4),(null===this.boundingBox||!1!==JR.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,JR)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Hn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;f4.fromBufferAttribute(r.attributes.skinIndex,e),p4.fromBufferAttribute(r.attributes.skinWeight,e),d4.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=p4.getComponent(s);if(0!==o){const a=f4.getComponent(s);m4.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(nae.copy(d4).applyMatrix4(m4),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class QR extends fi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class l0 extends Yo{constructor(e=null,t=1,i=1,r,s,o,a,l,c=$i,u=$i,d,f){super(null,o,a,l,c,u,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const y4=new It,iae=new It;class j1{constructor(e=[],t=[]){this.uuid=mo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new It)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new It;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)y4.multiplyMatrices(e[s]?e[s].matrixWorld:iae,t[s]),y4.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new j1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=lH(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new l0(t,e,e,qo,fc);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new QR),this.bones.push(o),this.boneInverses.push((new It).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class c0 extends ii{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hg=new It,v4=new It,$1=[],w4=new go,rae=new It,u0=new Ae,h0=new Ia;class b4 extends Ae{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new c0(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,rae)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new go),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,hg),w4.copy(e.boundingBox).applyMatrix4(hg),this.boundingBox.union(w4)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Ia),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,hg),h0.copy(e.boundingSphere).applyMatrix4(hg),this.boundingSphere.union(h0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(u0.geometry=this.geometry,u0.material=this.material,void 0!==u0.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),h0.copy(this.boundingSphere),h0.applyMatrix4(i),!1!==e.ray.intersectsSphere(h0)))for(let s=0;s<r;s++){this.getMatrixAt(s,hg),v4.multiplyMatrices(i,hg),u0.matrixWorld=v4,u0.raycast(e,$1);for(let o=0,a=$1.length;o<a;o++){const l=$1[o];l.instanceId=s,l.object=this,t.push(l)}$1.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new c0(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ir extends As{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ye(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const x4=new O,C4=new O,S4=new It,eP=new Wm,q1=new Ia;class rs extends fi{constructor(e=new Vt,t=new Ir){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)x4.fromBufferAttribute(t,r-1),C4.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=x4.distanceTo(C4);e.setAttribute("lineDistance",new nt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),q1.copy(i.boundingSphere),q1.applyMatrix4(r),q1.radius+=s,!1===e.ray.intersectsSphere(q1))return;S4.copy(r).invert(),eP.copy(e.ray).applyMatrix4(S4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new O,u=new O,d=new O,f=new O,m=this.isLineSegments?2:1,g=i.index,v=i.attributes.position;if(null!==g)for(let x=Math.max(0,o.start),S=Math.min(g.count,o.start+o.count)-1;x<S;x+=m){const E=g.getX(x),A=g.getX(x+1);if(c.fromBufferAttribute(v,E),u.fromBufferAttribute(v,A),eP.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const N=e.ray.origin.distanceTo(f);N<e.near||N>e.far||t.push({distance:N,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count)-1;x<S;x+=m){if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,x+1),eP.distanceSqToSegment(c,u,f,d)>l)continue;f.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(f);A<e.near||A>e.far||t.push({distance:A,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const E4=new O,M4=new O;class Ku extends rs{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)E4.fromBufferAttribute(t,r),M4.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+E4.distanceTo(M4);e.setAttribute("lineDistance",new nt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class T4 extends rs{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Vd extends As{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ye(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const A4=new It,tP=new Wm,X1=new Ia,Y1=new O;class d0 extends fi{constructor(e=new Vt,t=new Vd){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),X1.copy(i.boundingSphere),X1.applyMatrix4(r),X1.radius+=s,!1===e.ray.intersectsSphere(X1))return;A4.copy(r).invert(),tP.copy(e.ray).applyMatrix4(A4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,d=i.attributes.position;if(null!==c)for(let g=Math.max(0,o.start),_=Math.min(c.count,o.start+o.count);g<_;g++){const v=c.getX(g);Y1.fromBufferAttribute(d,v),D4(Y1,v,l,r,e,t,this)}else for(let g=Math.max(0,o.start),_=Math.min(d.count,o.start+o.count);g<_;g++)Y1.fromBufferAttribute(d,g),D4(Y1,g,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function D4(n,e,t,i,r,s,o){const a=tP.distanceSqToPoint(n);if(a<t){const l=new O;tP.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class oae extends Yo{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class ml{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new fe:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new O,r=[],s=[],o=[],a=new O,l=new It;for(let m=0;m<=e;m++)r[m]=this.getTangentAt(m/e,new O);s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),d=Math.abs(r[0].y),f=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),f<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Oi(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(!0===t){let m=Math.acos(Oi(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class nP extends ml{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new fe,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),f=l-this.aX,m=c-this.aY;l=f*u-m*d+this.aX,c=f*d+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function iP(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let f=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+d)+(l-a)/d;f*=u,m*=u,r(o,a,f,m)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const Z1=new O,rP=new iP,sP=new iP,oP=new iP;function I4(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function f0(n,e,t,i){return function cae(n,e){const t=1-n;return t*t*e}(n,e)+function uae(n,e){return 2*(1-n)*n*e}(n,t)+function hae(n,e){return n*n*e}(n,i)}function p0(n,e,t,i,r){return function dae(n,e){const t=1-n;return t*t*t*e}(n,e)+function fae(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function pae(n,e){return 3*(1-n)*n*n*e}(n,i)+function mae(n,e){return n*n*n*e}(n,r)}class R4 extends ml{constructor(e=new fe,t=new fe,i=new fe,r=new fe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new fe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(p0(e,r.x,s.x,o.x,a.x),p0(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class P4 extends ml{constructor(e=new fe,t=new fe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new fe){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new fe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class O4 extends ml{constructor(e=new fe,t=new fe,i=new fe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new fe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(f0(e,r.x,s.x,o.x),f0(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class N4 extends ml{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new fe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],d=r[o>r.length-3?r.length-1:o+2];return i.set(I4(a,l.x,c.x,u.x,d.x),I4(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new fe).fromArray(r))}return this}}var K1=Object.freeze({__proto__:null,ArcCurve:class aae extends nP{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class lae extends ml{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new O){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(Z1.subVectors(r[0],r[1]).add(r[0]),c=Z1);const d=r[a%s],f=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Z1.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Z1),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let g=Math.pow(c.distanceToSquared(d),m),_=Math.pow(d.distanceToSquared(f),m),v=Math.pow(f.distanceToSquared(u),m);_<1e-4&&(_=1),g<1e-4&&(g=_),v<1e-4&&(v=_),rP.initNonuniformCatmullRom(c.x,d.x,f.x,u.x,g,_,v),sP.initNonuniformCatmullRom(c.y,d.y,f.y,u.y,g,_,v),oP.initNonuniformCatmullRom(c.z,d.z,f.z,u.z,g,_,v)}else"catmullrom"===this.curveType&&(rP.initCatmullRom(c.x,d.x,f.x,u.x,this.tension),sP.initCatmullRom(c.y,d.y,f.y,u.y,this.tension),oP.initCatmullRom(c.z,d.z,f.z,u.z,this.tension));return i.set(rP.calc(l),sP.calc(l),oP.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new O).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:R4,CubicBezierCurve3:class gae extends ml{constructor(e=new O,t=new O,i=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(p0(e,r.x,s.x,o.x,a.x),p0(e,r.y,s.y,o.y,a.y),p0(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:nP,LineCurve:P4,LineCurve3:class _ae extends ml{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new O){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:O4,QuadraticBezierCurve3:class L4 extends ml{constructor(e=new O,t=new O,i=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new O){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(f0(e,r.x,s.x,o.x),f0(e,r.y,s.y,o.y),f0(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:N4});class yae extends ml{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);return e.equals(t)||this.curves.push(new K1[!0===e.isVector2?"LineCurve":"LineCurve3"](t,e)),this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new K1[r.type]).fromJSON(r))}return this}}class J1 extends yae{constructor(e){super(),this.type="Path",this.currentPoint=new fe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new P4(this.currentPoint.clone(),new fe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new O4(this.currentPoint.clone(),new fe(e,t),new fe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new R4(this.currentPoint.clone(),new fe(e,t),new fe(i,r),new fe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new N4(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new nP(e,t,i,r,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class gr extends Vt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],d=[],f=[],m=[];let g=0;const _=[],v=i/2;let y=0;function x(S){const E=g,A=new fe,M=new O;let N=0;const T=!0===S?e:t,R=!0===S?1:-1;for(let ee=1;ee<=r;ee++)d.push(0,v*R,0),f.push(0,R,0),m.push(.5,.5),g++;const $=g;for(let ee=0;ee<=r;ee++){const V=ee/r*l+a,K=Math.cos(V),G=Math.sin(V);M.x=T*G,M.y=v*R,M.z=T*K,d.push(M.x,M.y,M.z),f.push(0,R,0),A.x=.5*K+.5,A.y=.5*G*R+.5,m.push(A.x,A.y),g++}for(let ee=0;ee<r;ee++){const ie=E+ee,V=$+ee;!0===S?u.push(V,V+1,ie):u.push(V+1,V,ie),N+=3}c.addGroup(y,N,!0===S?1:2),y+=N}(function b(){const S=new O,E=new O;let A=0;const M=(t-e)/i;for(let N=0;N<=s;N++){const T=[],R=N/s,$=R*(t-e)+e;for(let ee=0;ee<=r;ee++){const ie=ee/r,V=ie*l+a,K=Math.sin(V),G=Math.cos(V);E.x=$*K,E.y=-R*i+v,E.z=$*G,d.push(E.x,E.y,E.z),S.set(K,M,G).normalize(),f.push(S.x,S.y,S.z),m.push(ie,1-R),T.push(g++)}_.push(T)}for(let N=0;N<r;N++)for(let T=0;T<s;T++){const $=_[T+1][N],ee=_[T+1][N+1],ie=_[T][N+1];u.push(_[T][N],$,ie),u.push($,ee,ie),A+=6}c.addGroup(y,A,0),y+=A})(),!1===o&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new nt(d,3)),this.setAttribute("normal",new nt(f,3)),this.setAttribute("uv",new nt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gr(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zd extends Vt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];function l(b,x,S,E){const A=E+1,M=[];for(let N=0;N<=A;N++){M[N]=[];const T=b.clone().lerp(S,N/A),R=x.clone().lerp(S,N/A),$=A-N;for(let ee=0;ee<=$;ee++)M[N][ee]=0===ee&&N===A?T:T.clone().lerp(R,ee/$)}for(let N=0;N<A;N++)for(let T=0;T<2*(A-N)-1;T++){const R=Math.floor(T/2);T%2==0?(f(M[N][R+1]),f(M[N+1][R]),f(M[N][R])):(f(M[N][R+1]),f(M[N+1][R+1]),f(M[N+1][R]))}}function f(b){s.push(b.x,b.y,b.z)}function m(b,x){const S=3*b;x.x=e[S+0],x.y=e[S+1],x.z=e[S+2]}function _(b,x,S,E){E<0&&1===b.x&&(o[x]=b.x-1),0===S.x&&0===S.z&&(o[x]=E/2/Math.PI+.5)}function v(b){return Math.atan2(b.z,-b.x)}function y(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}(function a(b){const x=new O,S=new O,E=new O;for(let A=0;A<t.length;A+=3)m(t[A+0],x),m(t[A+1],S),m(t[A+2],E),l(x,S,E,b)})(r),function c(b){const x=new O;for(let S=0;S<s.length;S+=3)x.x=s[S+0],x.y=s[S+1],x.z=s[S+2],x.normalize().multiplyScalar(b),s[S+0]=x.x,s[S+1]=x.y,s[S+2]=x.z}(i),function u(){const b=new O;for(let x=0;x<s.length;x+=3){b.x=s[x+0],b.y=s[x+1],b.z=s[x+2];const S=v(b)/2/Math.PI+.5,E=y(b)/Math.PI+.5;o.push(S,1-E)}(function g(){const b=new O,x=new O,S=new O,E=new O,A=new fe,M=new fe,N=new fe;for(let T=0,R=0;T<s.length;T+=9,R+=6){b.set(s[T+0],s[T+1],s[T+2]),x.set(s[T+3],s[T+4],s[T+5]),S.set(s[T+6],s[T+7],s[T+8]),A.set(o[R+0],o[R+1]),M.set(o[R+2],o[R+3]),N.set(o[R+4],o[R+5]),E.copy(b).add(x).add(S).divideScalar(3);const $=v(E);_(A,R+0,b,$),_(M,R+2,x,$),_(N,R+4,S,$)}})(),function d(){for(let b=0;b<o.length;b+=6){const x=o[b+0],S=o[b+2],E=o[b+4],A=Math.max(x,S,E),M=Math.min(x,S,E);A>.9&&M<.1&&(x<.2&&(o[b+0]+=1),S<.2&&(o[b+2]+=1),E<.2&&(o[b+4]+=1))}}()}(),this.setAttribute("position",new nt(s,3)),this.setAttribute("normal",new nt(s.slice(),3)),this.setAttribute("uv",new nt(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zd(e.vertices,e.indices,e.radius,e.details)}}class dg extends J1{constructor(e){super(e),this.uuid=mo(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push((new J1).fromJSON(r))}return this}}function F4(n,e,t,i,r){let s,o;if(r===function Fae(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}(n,e,t,i)>0)for(s=e;s<t;s+=i)o=B4(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=B4(s,n[s],n[s+1],o);return o&&iS(o,o.next)&&(_0(o),o=o.next),o}function Hd(n,e){if(!n)return n;e||(e=n);let i,t=n;do{if(i=!1,t.steiner||!iS(t,t.next)&&0!==Ai(t.prev,t,t.next))t=t.next;else{if(_0(t),t=e=t.prev,t===t.next)break;i=!0}}while(i||t!==e);return e}function m0(n,e,t,i,r,s,o){if(!n)return;!o&&s&&function Iae(n,e,t,i){let r=n;do{0===r.z&&(r.z=dP(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,function Rae(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,i);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1)}(r)}(n,i,r,s);let l,c,a=n;for(;n.prev!==n.next;)if(l=n.prev,c=n.next,s?xae(n,i,r,s):bae(n))e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),_0(n),n=c.next,a=c.next;else if((n=c)===a){o?1===o?m0(n=Cae(Hd(n),e,t),e,t,i,r,s,2):2===o&&Sae(n,e,t,i,r,s):m0(Hd(n),e,t,i,r,s,1);break}}function bae(n){const e=n.prev,t=n,i=n.next;if(Ai(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,f=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let g=i.next;for(;g!==e;){if(g.x>=u&&g.x<=f&&g.y>=d&&g.y<=m&&fg(r,a,s,l,o,c,g.x,g.y)&&Ai(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function xae(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Ai(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,d=s.y,f=o.y,m=a<l?a<c?a:c:l<c?l:c,g=u<d?u<f?u:f:d<f?d:f,_=a>l?a>c?a:c:l>c?l:c,v=u>d?u>f?u:f:d>f?d:f,y=dP(m,g,e,t,i),b=dP(_,v,e,t,i);let x=n.prevZ,S=n.nextZ;for(;x&&x.z>=y&&S&&S.z<=b;){if(x.x>=m&&x.x<=_&&x.y>=g&&x.y<=v&&x!==r&&x!==o&&fg(a,u,l,d,c,f,x.x,x.y)&&Ai(x.prev,x,x.next)>=0||(x=x.prevZ,S.x>=m&&S.x<=_&&S.y>=g&&S.y<=v&&S!==r&&S!==o&&fg(a,u,l,d,c,f,S.x,S.y)&&Ai(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;x&&x.z>=y;){if(x.x>=m&&x.x<=_&&x.y>=g&&x.y<=v&&x!==r&&x!==o&&fg(a,u,l,d,c,f,x.x,x.y)&&Ai(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;S&&S.z<=b;){if(S.x>=m&&S.x<=_&&S.y>=g&&S.y<=v&&S!==r&&S!==o&&fg(a,u,l,d,c,f,S.x,S.y)&&Ai(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function Cae(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!iS(r,s)&&k4(r,i,i.next,s)&&g0(r,s)&&g0(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),_0(i),_0(i.next),i=n=s),i=i.next}while(i!==n);return Hd(i)}function Sae(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Oae(o,a)){let l=U4(o,a);return o=Hd(o,o.next),l=Hd(l,l.next),m0(o,e,t,i,r,s,0),void m0(l,e,t,i,r,s,0)}a=a.next}o=o.next}while(o!==n)}function Mae(n,e){return n.x-e.x}function Tae(n,e){const t=function Aae(n,e){let r,t=e,i=-1/0;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const f=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>i&&(i=f,r=t.x<t.next.x?t:t.next,f===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let d,u=1/0;t=r;do{s>=t.x&&t.x>=l&&s!==t.x&&fg(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),g0(t,n)&&(d<u||d===u&&(t.x>r.x||t.x===r.x&&Dae(r,t)))&&(r=t,u=d)),t=t.next}while(t!==a);return r}(n,e);if(!t)return e;const i=U4(t,n);return Hd(i,i.next),Hd(t,t.next)}function Dae(n,e){return Ai(n.prev,n,e.prev)<0&&Ai(e.next,n,n.next)<0}function dP(n,e,t,i,r){return(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-t)*r|0)|n<<8))|n<<4))|n<<2))|n<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Pae(n){let e=n,t=n;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==n);return t}function fg(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function Oae(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function Lae(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&k4(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}(n,e)&&(g0(n,e)&&g0(e,n)&&function Nae(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next}while(t!==n);return i}(n,e)&&(Ai(n.prev,n,e.prev)||Ai(n,e.prev,e))||iS(n,e)&&Ai(n.prev,n,n.next)>0&&Ai(e.prev,e,e.next)>0)}function Ai(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function iS(n,e){return n.x===e.x&&n.y===e.y}function k4(n,e,t,i){const r=sS(Ai(n,e,t)),s=sS(Ai(n,e,i)),o=sS(Ai(t,i,n)),a=sS(Ai(t,i,e));return!!(r!==s&&o!==a||0===r&&rS(n,t,e)||0===s&&rS(n,i,e)||0===o&&rS(t,n,i)||0===a&&rS(t,e,i))}function rS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function sS(n){return n>0?1:n<0?-1:0}function g0(n,e){return Ai(n.prev,n,n.next)<0?Ai(n,e,n.next)>=0&&Ai(n,n.prev,e)>=0:Ai(n,e,n.prev)<0||Ai(n,n.next,e)<0}function U4(n,e){const t=new fP(n.i,n.x,n.y),i=new fP(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function B4(n,e,t,i){const r=new fP(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function _0(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function fP(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Sc{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*i}static isClockWise(e){return Sc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];V4(e),z4(i,e);let o=e.length;t.forEach(V4);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,z4(i,t[l]);const a=function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=F4(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,f,m;if(i&&(s=function Eae(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=F4(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Pae(c));for(r.sort(Mae),s=0;s<r.length;s++)t=Tae(r[s],t);return t}(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let g=t;g<r;g+=t)d=n[g],f=n[g+1],d<a&&(a=d),f<l&&(l=f),d>c&&(c=d),f>u&&(u=f);m=Math.max(c-a,u-l),m=0!==m?32767/m:0}return m0(s,o,t,a,l,m,0),o}(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function V4(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function z4(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class oS extends Vt{constructor(e=new dg([new fe(.5,.5),new fe(-.5,.5),new fe(-.5,-.5),new fe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++)o(e[a]);function o(a){const l=[],c=void 0!==t.curveSegments?t.curveSegments:12,u=void 0!==t.steps?t.steps:1,d=void 0!==t.depth?t.depth:1;let f=void 0===t.bevelEnabled||t.bevelEnabled,m=void 0!==t.bevelThickness?t.bevelThickness:.2,g=void 0!==t.bevelSize?t.bevelSize:m-.1,_=void 0!==t.bevelOffset?t.bevelOffset:0,v=void 0!==t.bevelSegments?t.bevelSegments:3;const y=t.extrudePath,b=void 0!==t.UVGenerator?t.UVGenerator:kae;let x,E,A,M,N,S=!1;y&&(x=y.getSpacedPoints(u),S=!0,f=!1,E=y.computeFrenetFrames(u,!1),A=new O,M=new O,N=new O),f||(v=0,m=0,g=0,_=0);const T=a.extractPoints(c);let R=T.shape;const $=T.holes;if(!Sc.isClockWise(R)){R=R.reverse();for(let H=0,Be=$.length;H<Be;H++){const ye=$[H];Sc.isClockWise(ye)&&($[H]=ye.reverse())}}const ie=Sc.triangulateShape(R,$),V=R;for(let H=0,Be=$.length;H<Be;H++)R=R.concat($[H]);function K(H,Be,ye){return Be||console.error("THREE.ExtrudeGeometry: vec does not exist"),H.clone().addScaledVector(Be,ye)}const G=R.length,X=ie.length;function Q(H,Be,ye){let Pe,Ce,_t;const it=H.x-Be.x,ot=H.y-Be.y,Rt=ye.x-H.x,un=ye.y-H.y,xi=it*it+ot*ot;if(Math.abs(it*un-ot*Rt)>Number.EPSILON){const P=Math.sqrt(xi),se=Math.sqrt(Rt*Rt+un*un),Re=Be.x-ot/P,De=Be.y+it/P,Ne=((ye.x-un/se-Re)*un-(ye.y+Rt/se-De)*Rt)/(it*un-ot*Rt);Pe=Re+it*Ne-H.x,Ce=De+ot*Ne-H.y;const Je=Pe*Pe+Ce*Ce;if(Je<=2)return new fe(Pe,Ce);_t=Math.sqrt(Je/2)}else{let P=!1;it>Number.EPSILON?Rt>Number.EPSILON&&(P=!0):it<-Number.EPSILON?Rt<-Number.EPSILON&&(P=!0):Math.sign(ot)===Math.sign(un)&&(P=!0),P?(Pe=-ot,Ce=it,_t=Math.sqrt(xi)):(Pe=it,Ce=ot,_t=Math.sqrt(xi/2))}return new fe(Pe/_t,Ce/_t)}const Z=[];for(let H=0,Be=V.length,ye=Be-1,Pe=H+1;H<Be;H++,ye++,Pe++)ye===Be&&(ye=0),Pe===Be&&(Pe=0),Z[H]=Q(V[H],V[ye],V[Pe]);const ce=[];let q,ae=Z.concat();for(let H=0,Be=$.length;H<Be;H++){const ye=$[H];q=[];for(let Pe=0,Ce=ye.length,_t=Ce-1,it=Pe+1;Pe<Ce;Pe++,_t++,it++)_t===Ce&&(_t=0),it===Ce&&(it=0),q[Pe]=Q(ye[Pe],ye[_t],ye[it]);ce.push(q),ae=ae.concat(q)}for(let H=0;H<v;H++){const Be=H/v,ye=m*Math.cos(Be*Math.PI/2),Pe=g*Math.sin(Be*Math.PI/2)+_;for(let Ce=0,_t=V.length;Ce<_t;Ce++){const it=K(V[Ce],Z[Ce],Pe);We(it.x,it.y,-ye)}for(let Ce=0,_t=$.length;Ce<_t;Ce++){const it=$[Ce];q=ce[Ce];for(let ot=0,Rt=it.length;ot<Rt;ot++){const un=K(it[ot],q[ot],Pe);We(un.x,un.y,-ye)}}}const Ee=g+_;for(let H=0;H<G;H++){const Be=f?K(R[H],ae[H],Ee):R[H];S?(M.copy(E.normals[0]).multiplyScalar(Be.x),A.copy(E.binormals[0]).multiplyScalar(Be.y),N.copy(x[0]).add(M).add(A),We(N.x,N.y,N.z)):We(Be.x,Be.y,0)}for(let H=1;H<=u;H++)for(let Be=0;Be<G;Be++){const ye=f?K(R[Be],ae[Be],Ee):R[Be];S?(M.copy(E.normals[H]).multiplyScalar(ye.x),A.copy(E.binormals[H]).multiplyScalar(ye.y),N.copy(x[H]).add(M).add(A),We(N.x,N.y,N.z)):We(ye.x,ye.y,d/u*H)}for(let H=v-1;H>=0;H--){const Be=H/v,ye=m*Math.cos(Be*Math.PI/2),Pe=g*Math.sin(Be*Math.PI/2)+_;for(let Ce=0,_t=V.length;Ce<_t;Ce++){const it=K(V[Ce],Z[Ce],Pe);We(it.x,it.y,d+ye)}for(let Ce=0,_t=$.length;Ce<_t;Ce++){const it=$[Ce];q=ce[Ce];for(let ot=0,Rt=it.length;ot<Rt;ot++){const un=K(it[ot],q[ot],Pe);S?We(un.x,un.y+x[u-1].y,x[u-1].x+ye):We(un.x,un.y,d+ye)}}}function Ke(H,Be){let ye=H.length;for(;--ye>=0;){const Pe=ye;let Ce=ye-1;Ce<0&&(Ce=H.length-1);for(let _t=0,it=u+2*v;_t<it;_t++){const ot=G*_t,Rt=G*(_t+1);St(Be+Pe+ot,Be+Ce+ot,Be+Ce+Rt,Be+Pe+Rt)}}}function We(H,Be,ye){l.push(H),l.push(Be),l.push(ye)}function et(H,Be,ye){Lt(H),Lt(Be),Lt(ye);const Pe=r.length/3,Ce=b.generateTopUV(i,r,Pe-3,Pe-2,Pe-1);ut(Ce[0]),ut(Ce[1]),ut(Ce[2])}function St(H,Be,ye,Pe){Lt(H),Lt(Be),Lt(Pe),Lt(Be),Lt(ye),Lt(Pe);const Ce=r.length/3,_t=b.generateSideWallUV(i,r,Ce-6,Ce-3,Ce-2,Ce-1);ut(_t[0]),ut(_t[1]),ut(_t[3]),ut(_t[1]),ut(_t[2]),ut(_t[3])}function Lt(H){r.push(l[3*H+0]),r.push(l[3*H+1]),r.push(l[3*H+2])}function ut(H){s.push(H.x),s.push(H.y)}(function ve(){const H=r.length/3;if(f){let Be=0,ye=G*Be;for(let Pe=0;Pe<X;Pe++){const Ce=ie[Pe];et(Ce[2]+ye,Ce[1]+ye,Ce[0]+ye)}Be=u+2*v,ye=G*Be;for(let Pe=0;Pe<X;Pe++){const Ce=ie[Pe];et(Ce[0]+ye,Ce[1]+ye,Ce[2]+ye)}}else{for(let Be=0;Be<X;Be++){const ye=ie[Be];et(ye[2],ye[1],ye[0])}for(let Be=0;Be<X;Be++){const ye=ie[Be];et(ye[0]+G*u,ye[1]+G*u,ye[2]+G*u)}}i.addGroup(H,r.length/3-H,0)})(),function Ue(){const H=r.length/3;let Be=0;Ke(V,Be),Be+=V.length;for(let ye=0,Pe=$.length;ye<Pe;ye++){const Ce=$[ye];Ke(Ce,Be),Be+=Ce.length}i.addGroup(H,r.length/3-H,1)}()}this.setAttribute("position",new nt(r,3)),this.setAttribute("uv",new nt(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function Uae(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++)t.shapes.push(n[i].uuid);else t.shapes.push(n.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++)i.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new K1[r.type]).fromJSON(r)),new oS(i,e.options)}}const kae={generateTopUV:function(n,e,t,i,r){const a=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new fe(e[3*t],e[3*t+1]),new fe(a,l),new fe(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[3*t],a=e[3*t+1],l=e[3*t+2],c=e[3*i],u=e[3*i+1],d=e[3*i+2],f=e[3*r],m=e[3*r+1],g=e[3*r+2],_=e[3*s],v=e[3*s+1],y=e[3*s+2];return Math.abs(a-u)<Math.abs(o-c)?[new fe(o,1-l),new fe(c,1-d),new fe(f,1-g),new fe(_,1-y)]:[new fe(a,1-l),new fe(u,1-d),new fe(m,1-g),new fe(v,1-y)]}};class Ju extends zd{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ju(e.radius,e.detail)}}class pg extends Vt{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new O,f=new O,m=[],g=[],_=[],v=[];for(let y=0;y<=i;y++){const b=[],x=y/i;let S=0;0===y&&0===o?S=.5/t:y===i&&l===Math.PI&&(S=-.5/t);for(let E=0;E<=t;E++){const A=E/t;d.x=-e*Math.cos(r+A*s)*Math.sin(o+x*a),d.y=e*Math.cos(o+x*a),d.z=e*Math.sin(r+A*s)*Math.sin(o+x*a),g.push(d.x,d.y,d.z),f.copy(d).normalize(),_.push(f.x,f.y,f.z),v.push(A+S,1-x),b.push(c++)}u.push(b)}for(let y=0;y<i;y++)for(let b=0;b<t;b++){const S=u[y][b],E=u[y+1][b],A=u[y+1][b+1];(0!==y||o>0)&&m.push(u[y][b+1],S,A),(y!==i-1||l<Math.PI)&&m.push(S,E,A)}this.setIndex(m),this.setAttribute("position",new nt(g,3)),this.setAttribute("normal",new nt(_,3)),this.setAttribute("uv",new nt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Qu extends Vt{constructor(e=1,t=.4,i=12,r=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new O,d=new O,f=new O;for(let m=0;m<=i;m++)for(let g=0;g<=r;g++){const _=g/r*s,v=m/i*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(_),d.y=(e+t*Math.cos(v))*Math.sin(_),d.z=t*Math.sin(v),a.push(d.x,d.y,d.z),u.x=e*Math.cos(_),u.y=e*Math.sin(_),f.subVectors(d,u).normalize(),l.push(f.x,f.y,f.z),c.push(g/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let g=1;g<=r;g++){const v=(r+1)*(m-1)+g-1,y=(r+1)*(m-1)+g,b=(r+1)*m+g;o.push((r+1)*m+g-1,v,b),o.push(v,y,b)}this.setIndex(o),this.setAttribute("position",new nt(a,3)),this.setAttribute("normal",new nt(l,3)),this.setAttribute("uv",new nt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qu(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class mg extends As{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ye(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ec extends mg{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new fe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Oi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ye(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ye(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ye(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class wP extends As{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ye(16777215),this.specular=new Ye(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ye(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class W4 extends As{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}function Gd(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function $4(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function bP(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function xP(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class y0{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Yae extends y0{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,m=this._weightNext,g=(i-t)/(r-t),_=g*g,v=_*g,y=-f*v+2*f*_-f*g,b=(1+f)*v+(-1.5-2*f)*_+(-.5+f)*g+1,x=(-1-m)*v+(1.5+m)*_+.5*g,S=m*v-m*_;for(let E=0;E!==a;++E)s[E]=y*o[u+E]+b*o[c+E]+x*o[l+E]+S*o[d+E];return s}}class q4 extends y0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),d=1-u;for(let f=0;f!==a;++f)s[f]=o[c+f]*d+o[l+f]*u;return s}}class Zae extends y0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class gl{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Gd(t,this.TimeBufferType),this.values=Gd(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Gd(e.times,Array),values:Gd(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Zae(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new q4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Yae(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Xv:t=this.InterpolantFactoryMethodDiscrete;break;case Pm:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Xv;case this.InterpolantFactoryMethodLinear:return Pm;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&function j4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const d=a*i,f=d-i,m=d+i;for(let g=0;g!==i;++g){const _=t[d+g];if(_!==t[f+g]||_!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,f=o*i;for(let m=0;m!==i;++m)t[f+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}gl.prototype.TimeBufferType=Float32Array,gl.prototype.ValueBufferType=Float32Array,gl.prototype.DefaultInterpolation=Pm;class gg extends gl{}gg.prototype.ValueTypeName="bool",gg.prototype.ValueBufferType=Array,gg.prototype.DefaultInterpolation=Xv,gg.prototype.InterpolantFactoryMethodLinear=void 0,gg.prototype.InterpolantFactoryMethodSmooth=void 0;class X4 extends gl{}X4.prototype.ValueTypeName="color";class _g extends gl{}_g.prototype.ValueTypeName="number";class Kae extends y0{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Xn.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Wd extends gl{InterpolantFactoryMethodLinear(e){return new Kae(this.times,this.values,this.getValueSize(),e)}}Wd.prototype.ValueTypeName="quaternion",Wd.prototype.DefaultInterpolation=Pm,Wd.prototype.InterpolantFactoryMethodSmooth=void 0;class yg extends gl{}yg.prototype.ValueTypeName="string",yg.prototype.ValueBufferType=Array,yg.prototype.DefaultInterpolation=Xv,yg.prototype.InterpolantFactoryMethodLinear=void 0,yg.prototype.InterpolantFactoryMethodSmooth=void 0;class vg extends gl{}vg.prototype.ValueTypeName="vector";class v0{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=mo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Qae(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(gl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=$4(l);l=bP(l,1,u),c=bP(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new _g(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let f=r[d];f||(r[d]=f=[]),f.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(d,f,m,g,_){if(0!==m.length){const v=[],y=[];xP(m,v,y,g),0!==v.length&&_.push(new d(f,v,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let d=0;d<c.length;d++){const f=c[d].keys;if(f&&0!==f.length)if(f[0].morphTargets){const m={};let g;for(g=0;g<f.length;g++)if(f[g].morphTargets)for(let _=0;_<f[g].morphTargets.length;_++)m[f[g].morphTargets[_]]=-1;for(const _ in m){const v=[],y=[];for(let b=0;b!==f[g].morphTargets.length;++b){const x=f[g];v.push(x.time),y.push(x.morphTarget===_?1:0)}r.push(new _g(".morphTargetInfluence["+_+"]",v,y))}l=m.length*o}else{const m=".bones["+t[d].name+"]";i(vg,m+".position",f,"pos",r),i(Wd,m+".quaternion",f,"rot",r),i(vg,m+".scale",f,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Qae(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Jae(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return _g;case"vector":case"vector2":case"vector3":case"vector4":return vg;case"color":return X4;case"quaternion":return Wd;case"bool":case"boolean":return gg;case"string":return yg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];xP(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const wg={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Y4{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return-1!==d&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,f=c.length;d<f;d+=2){const m=c[d],g=c[d+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const ele=new Y4;let _l=(()=>{class n{constructor(t){this.manager=void 0!==t?t:ele,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const Mc={};class tle extends Error{constructor(e,t){super(e),this.response=t}}class Ys extends _l{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=wg.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Mc[e])return void Mc[e].push({onLoad:t,onProgress:i,onError:r});Mc[e]=[],Mc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=Mc[e],d=c.body.getReader(),f=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=f?parseInt(f):0,g=0!==m;let _=0;const v=new ReadableStream({start(y){!function b(){d.read().then(({done:x,value:S})=>{if(x)y.close();else{_+=S.byteLength;const E=new ProgressEvent("progress",{lengthComputable:g,loaded:_,total:m});for(let A=0,M=u.length;A<M;A++){const N=u[A];N.onProgress&&N.onProgress(E)}y.enqueue(S),b()}})}()}});return new Response(v)}throw new tle(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const d=/charset="?([^;"\s]*)"?/i.exec(a),f=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(f);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{wg.add(e,c);const u=Mc[e];delete Mc[e];for(let d=0,f=u.length;d<f;d++){const m=u[d];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Mc[e];if(void 0===u)throw this.manager.itemError(e),c;delete Mc[e];for(let d=0,f=u.length;d<f;d++){const m=u[d];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class aS extends _l{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Zv("img");function l(){u(),wg.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Z4 extends _l{constructor(e){super(e)}load(e,t,i,r){const s=new O1;s.colorSpace=Ti;const o=new aS(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,6===a&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class CP extends _l{constructor(e){super(e)}load(e,t,i,r){const s=new Yo,o=new aS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class SP extends fi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ye(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const EP=new It,K4=new O,J4=new O;class MP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new fe(512,512),this.map=null,this.mapPass=null,this.matrix=new It,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new UR,this._frameExtents=new fe(1,1),this._viewportCount=1,this._viewports=[new Hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;K4.setFromMatrixPosition(e.matrixWorld),t.position.copy(K4),J4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(J4),t.updateMatrixWorld(),EP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(EP),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(EP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class ile extends MP{constructor(){super(new fr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Nm*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Q4 extends SP{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fi.DEFAULT_UP),this.updateMatrix(),this.target=new fi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new ile}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const e5=new It,w0=new O,TP=new O;class rle extends MP{constructor(){super(new fr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new fe(4,2),this._viewportCount=6,this._viewports=[new Hn(2,1,1,1),new Hn(0,1,1,1),new Hn(3,1,1,1),new Hn(1,1,1,1),new Hn(3,0,1,1),new Hn(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),w0.setFromMatrixPosition(e.matrixWorld),i.position.copy(w0),TP.copy(i.position),TP.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(TP),i.updateMatrixWorld(),r.makeTranslation(-w0.x,-w0.y,-w0.z),e5.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(e5)}}class AP extends SP{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new rle}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class sle extends MP{constructor(){super(new F1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class t5 extends SP{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fi.DEFAULT_UP),this.updateMatrix(),this.target=new fi,this.shadow=new sle}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class b0{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class fle extends _l{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wg.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){wg.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let lS;class r5{static getContext(){return void 0===lS&&(lS=new(window.AudioContext||window.webkitAudioContext)),lS}static setContext(e){lS=e}}class ple extends _l{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);r5.getContext().decodeAudioData(c,function(d){t(d)},a)}catch(c){a(c)}},i,r)}}class mle{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=a5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=a5();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function a5(){return(typeof performance>"u"?Date:performance).now()}const $d=new O,l5=new Xn,gle=new O,qd=new O;class _le extends fi{constructor(){super(),this.type="AudioListener",this.context=r5.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new mle}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($d,l5,gle),qd.set(0,0,-1).applyQuaternion(l5),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime($d.x,r),t.positionY.linearRampToValueAtTime($d.y,r),t.positionZ.linearRampToValueAtTime($d.z,r),t.forwardX.linearRampToValueAtTime(qd.x,r),t.forwardY.linearRampToValueAtTime(qd.y,r),t.forwardZ.linearRampToValueAtTime(qd.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition($d.x,$d.y,$d.z),t.setOrientation(qd.x,qd.y,qd.z,i.x,i.y,i.z)}}class yle extends fi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Xd=new O,c5=new Xn,vle=new O,Yd=new O;class wle extends yle{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Xd,c5,vle),Yd.set(0,0,1).applyQuaternion(c5);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Xd.x,i),t.positionY.linearRampToValueAtTime(Xd.y,i),t.positionZ.linearRampToValueAtTime(Xd.z,i),t.orientationX.linearRampToValueAtTime(Yd.x,i),t.orientationY.linearRampToValueAtTime(Yd.y,i),t.orientationZ.linearRampToValueAtTime(Yd.z,i)}else t.setPosition(Xd.x,Xd.y,Xd.z),t.setOrientation(Yd.x,Yd.y,Yd.z)}}const IP="\\[\\]\\.:\\/",xle=new RegExp("["+IP+"]","g"),RP="[^"+IP+"]",Cle="[^"+IP.replace("\\.","")+"]",Ale=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",RP)+/(WCOD+)?/.source.replace("WCOD",Cle)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",RP)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",RP)+"$"),Dle=["material","materials","bones","map"];class Ile{constructor(e,t,i){const r=i||si.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let si=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(xle,"")}static parseTrackName(t){const i=Ale.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Dle.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let d=0;d<t.length;d++)if(t[d].name===u){u=d;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Ile,n})();si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},si.prototype.GetterByBindingType=[si.prototype._getValue_direct,si.prototype._getValue_array,si.prototype._getValue_arrayElement,si.prototype._getValue_toArray],si.prototype.SetterByBindingTypeAndVersioning=[[si.prototype._setValue_direct,si.prototype._setValue_direct_setNeedsUpdate,si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[si.prototype._setValue_array,si.prototype._setValue_array_setNeedsUpdate,si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[si.prototype._setValue_arrayElement,si.prototype._setValue_arrayElement_setNeedsUpdate,si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[si.prototype._setValue_fromArray,si.prototype._setValue_fromArray_setNeedsUpdate,si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class PP{constructor(e,t,i=0,r=1/0){this.ray=new Wm(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new AR,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return OP(e,this,i,t),i.sort(h5),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)OP(e[r],this,i,t);return i.sort(h5),i}}function h5(n,e){return n.distance-e.distance}function OP(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),!0===i){const r=n.children;for(let s=0,o=r.length;s<o;s++)OP(r[s],e,t,!0)}}class d5{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Oi(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Nle extends Ku{constructor(e=10,t=10,i=4473924,r=8947848){i=new Ye(i),r=new Ye(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let f=0,m=0,g=-a;f<=t;f++,g+=o){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const _=f===s?i:r;_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3,_.toArray(c,m),m+=3}const u=new Vt;u.setAttribute("position",new nt(l,3)),u.setAttribute("color",new nt(c,3)),super(u,new Ir({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const fS=new go;class Fle extends Ku{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),s=new Vt;s.setIndex(new ii(i,1)),s.setAttribute("position",new ii(r,3)),super(s,new Ir({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&fS.setFromObject(this.object),fS.isEmpty())return;const t=fS.min,i=fS.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class kle extends Ku{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Vt;r.setAttribute("position",new nt(t,3)),r.setAttribute("color",new nt([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new Ir({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const r=new Ye,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ule{constructor(){this.type="ShapePath",this.color=new Ye,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new J1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function i(y,b){const x=b.length;let S=!1;for(let E=x-1,A=0;A<x;E=A++){let M=b[E],N=b[A],T=N.x-M.x,R=N.y-M.y;if(Math.abs(R)>Number.EPSILON){if(R<0&&(M=b[A],T=-T,N=b[E],R=-R),y.y<M.y||y.y>N.y)continue;if(y.y===M.y){if(y.x===M.x)return!0}else{const $=R*(y.x-M.x)-T*(y.y-M.y);if(0===$)return!0;if($<0)continue;S=!S}}else{if(y.y!==M.y)continue;if(N.x<=y.x&&y.x<=M.x||M.x<=y.x&&y.x<=N.x)return!0}}return S}const r=Sc.isClockWise,s=this.subPaths;if(0===s.length)return[];let o,a,l;const c=[];if(1===s.length)return a=s[0],l=new dg,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const d=[],f=[];let _,v,m=[],g=0;f[g]=void 0,m[g]=[];for(let y=0,b=s.length;y<b;y++)a=s[y],_=a.getPoints(),o=r(_),o=e?!o:o,o?(!u&&f[g]&&g++,f[g]={s:new dg,p:_},f[g].s.curves=a.curves,u&&g++,m[g]=[]):m[g].push({h:a,p:_[0]});if(!f[0])return function t(y){const b=[];for(let x=0,S=y.length;x<S;x++){const E=y[x],A=new dg;A.curves=E.curves,b.push(A)}return b}(s);if(f.length>1){let y=!1,b=0;for(let x=0,S=f.length;x<S;x++)d[x]=[];for(let x=0,S=f.length;x<S;x++){const E=m[x];for(let A=0;A<E.length;A++){const M=E[A];let N=!0;for(let T=0;T<f.length;T++)i(M.p,f[T].p)&&(x!==T&&b++,N?(N=!1,d[T].push(M)):y=!0);N&&d[x].push(M)}}b>0&&!1===y&&(m=d)}for(let y=0,b=f.length;y<b;y++){l=f[y].s,c.push(l),v=m[y];for(let x=0,S=v.length;x<S;x++)l.holes.push(v[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"157"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="157");const x5={type:"change"},FP={type:"start"},C5={type:"end"},mS=new Wm,S5=new Cc,Ble=Math.cos(70*ju_DEG2RAD);class E5 extends Id{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new O,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},this.touches={ONE:0,TWO:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(W){W.addEventListener("keydown",P),this._domElementKeyEvents=W},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",P),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(x5),i.update(),s=r.NONE},this.update=function(){const W=new O,Fe=(new Xn).setFromUnitVectors(e.up,new O(0,1,0)),be=Fe.clone().invert(),Nt=new O,yt=new Xn,Et=new O,gt=2*Math.PI;return function(ze=null){const ke=i.object.position;W.copy(ke).sub(i.target),W.applyQuaternion(Fe),a.setFromVector3(W),i.autoRotate&&s===r.NONE&&$(function T(W){return null!==W?2*Math.PI/60*i.autoRotateSpeed*W:2*Math.PI/60/60*i.autoRotateSpeed}(ze)),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let Ze=i.minAzimuthAngle,He=i.maxAzimuthAngle;isFinite(Ze)&&isFinite(He)&&(Ze<-Math.PI?Ze+=gt:Ze>Math.PI&&(Ze-=gt),He<-Math.PI?He+=gt:He>Math.PI&&(He-=gt),a.theta=Ze<=He?Math.max(Ze,Math.min(He,a.theta)):a.theta>(Ze+He)/2?Math.max(Ze,a.theta):Math.min(He,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),!0===i.enableDamping?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),a.radius=Z(i.zoomToCursor&&A||i.object.isOrthographicCamera?a.radius:a.radius*c),W.setFromSpherical(a),W.applyQuaternion(be),ke.copy(i.target).add(W),i.object.lookAt(i.target),!0===i.enableDamping?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let Me=!1;if(i.zoomToCursor&&A){let ft=null;if(i.object.isPerspectiveCamera){const kt=W.length();ft=Z(kt*c),i.object.position.addScaledVector(S,kt-ft),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const kt=new O(E.x,E.y,0);kt.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),Me=!0;const sr=new O(E.x,E.y,0);sr.unproject(i.object),i.object.position.sub(sr).add(kt),i.object.updateMatrixWorld(),ft=W.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;null!==ft&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(ft).add(i.object.position):(mS.origin.copy(i.object.position),mS.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(mS.direction))<Ble?e.lookAt(i.target):(S5.setFromNormalAndCoplanarPoint(i.object.up,i.target),mS.intersectPlane(S5,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),Me=!0);return c=1,A=!1,!!(Me||Nt.distanceToSquared(i.object.position)>o||8*(1-yt.dot(i.object.quaternion))>o||Et.distanceToSquared(i.target)>0)&&(i.dispatchEvent(x5),Nt.copy(i.object.position),yt.copy(i.object.quaternion),Et.copy(i.target),Me=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",De),i.domElement.removeEventListener("pointerdown",it),i.domElement.removeEventListener("pointercancel",Rt),i.domElement.removeEventListener("wheel",k),i.domElement.removeEventListener("pointermove",ot),i.domElement.removeEventListener("pointerup",Rt),null!==i._domElementKeyEvents&&(i._domElementKeyEvents.removeEventListener("keydown",P),i._domElementKeyEvents=null)};const i=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const o=1e-6,a=new d5,l=new d5;let c=1;const u=new O,d=new fe,f=new fe,m=new fe,g=new fe,_=new fe,v=new fe,y=new fe,b=new fe,x=new fe,S=new O,E=new fe;let A=!1;const M=[],N={};function R(){return Math.pow(.95,i.zoomSpeed)}function $(W){l.theta-=W}function ee(W){l.phi-=W}const ie=function(){const W=new O;return function(be,Nt){W.setFromMatrixColumn(Nt,0),W.multiplyScalar(-be),u.add(W)}}(),V=function(){const W=new O;return function(be,Nt){!0===i.screenSpacePanning?W.setFromMatrixColumn(Nt,1):(W.setFromMatrixColumn(Nt,0),W.crossVectors(i.object.up,W)),W.multiplyScalar(be),u.add(W)}}(),K=function(){const W=new O;return function(be,Nt){const yt=i.domElement;if(i.object.isPerspectiveCamera){W.copy(i.object.position).sub(i.target);let gt=W.length();gt*=Math.tan(i.object.fov/2*Math.PI/180),ie(2*be*gt/yt.clientHeight,i.object.matrix),V(2*Nt*gt/yt.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(ie(be*(i.object.right-i.object.left)/i.object.zoom/yt.clientWidth,i.object.matrix),V(Nt*(i.object.top-i.object.bottom)/i.object.zoom/yt.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function G(W){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=W:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(W){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=W:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function Q(W){if(!i.zoomToCursor)return;A=!0;const Fe=i.domElement.getBoundingClientRect(),Nt=W.clientY-Fe.top,Et=Fe.height;E.x=(W.clientX-Fe.left)/Fe.width*2-1,E.y=-Nt/Et*2+1,S.set(E.x,E.y,1).unproject(i.object).sub(i.object.position).normalize()}function Z(W){return Math.max(i.minDistance,Math.min(i.maxDistance,W))}function ce(W){d.set(W.clientX,W.clientY)}function ae(W){g.set(W.clientX,W.clientY)}function et(){1===M.length?d.set(M[0].pageX,M[0].pageY):d.set(.5*(M[0].pageX+M[1].pageX),.5*(M[0].pageY+M[1].pageY))}function St(){1===M.length?g.set(M[0].pageX,M[0].pageY):g.set(.5*(M[0].pageX+M[1].pageX),.5*(M[0].pageY+M[1].pageY))}function Lt(){const W=M[0].pageX-M[1].pageX,Fe=M[0].pageY-M[1].pageY,be=Math.sqrt(W*W+Fe*Fe);y.set(0,be)}function Be(W){if(1==M.length)f.set(W.pageX,W.pageY);else{const be=Je(W);f.set(.5*(W.pageX+be.x),.5*(W.pageY+be.y))}m.subVectors(f,d).multiplyScalar(i.rotateSpeed);const Fe=i.domElement;$(2*Math.PI*m.x/Fe.clientHeight),ee(2*Math.PI*m.y/Fe.clientHeight),d.copy(f)}function ye(W){if(1===M.length)_.set(W.pageX,W.pageY);else{const Fe=Je(W);_.set(.5*(W.pageX+Fe.x),.5*(W.pageY+Fe.y))}v.subVectors(_,g).multiplyScalar(i.panSpeed),K(v.x,v.y),g.copy(_)}function Pe(W){const Fe=Je(W),be=W.pageX-Fe.x,Nt=W.pageY-Fe.y,yt=Math.sqrt(be*be+Nt*Nt);b.set(0,yt),x.set(0,Math.pow(b.y/y.y,i.zoomSpeed)),G(x.y),y.copy(b)}function it(W){!1!==i.enabled&&(0===M.length&&(i.domElement.setPointerCapture(W.pointerId),i.domElement.addEventListener("pointermove",ot),i.domElement.addEventListener("pointerup",Rt)),function Oe(W){M.push(W)}(W),"touch"===W.pointerType?function se(W){switch(Ne(W),M.length){case 1:switch(i.touches.ONE){case 0:if(!1===i.enableRotate)return;et(),s=r.TOUCH_ROTATE;break;case 1:if(!1===i.enablePan)return;St(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(i.touches.TWO){case 2:if(!1===i.enableZoom&&!1===i.enablePan)return;(function ut(){i.enableZoom&&Lt(),i.enablePan&&St()})(),s=r.TOUCH_DOLLY_PAN;break;case 3:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function H(){i.enableZoom&&Lt(),i.enableRotate&&et()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(FP)}(W):function un(W){let Fe;switch(W.button){case 0:Fe=i.mouseButtons.LEFT;break;case 1:Fe=i.mouseButtons.MIDDLE;break;case 2:Fe=i.mouseButtons.RIGHT;break;default:Fe=-1}switch(Fe){case 1:if(!1===i.enableZoom)return;(function q(W){Q(W),y.set(W.clientX,W.clientY)})(W),s=r.DOLLY;break;case 0:if(W.ctrlKey||W.metaKey||W.shiftKey){if(!1===i.enablePan)return;ae(W),s=r.PAN}else{if(!1===i.enableRotate)return;ce(W),s=r.ROTATE}break;case 2:if(W.ctrlKey||W.metaKey||W.shiftKey){if(!1===i.enableRotate)return;ce(W),s=r.ROTATE}else{if(!1===i.enablePan)return;ae(W),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&i.dispatchEvent(FP)}(W))}function ot(W){!1!==i.enabled&&("touch"===W.pointerType?function Re(W){switch(Ne(W),s){case r.TOUCH_ROTATE:if(!1===i.enableRotate)return;Be(W),i.update();break;case r.TOUCH_PAN:if(!1===i.enablePan)return;ye(W),i.update();break;case r.TOUCH_DOLLY_PAN:if(!1===i.enableZoom&&!1===i.enablePan)return;(function Ce(W){i.enableZoom&&Pe(W),i.enablePan&&ye(W)})(W),i.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===i.enableZoom&&!1===i.enableRotate)return;(function _t(W){i.enableZoom&&Pe(W),i.enableRotate&&Be(W)})(W),i.update();break;default:s=r.NONE}}(W):function xi(W){switch(s){case r.ROTATE:if(!1===i.enableRotate)return;!function Ee(W){f.set(W.clientX,W.clientY),m.subVectors(f,d).multiplyScalar(i.rotateSpeed);const Fe=i.domElement;$(2*Math.PI*m.x/Fe.clientHeight),ee(2*Math.PI*m.y/Fe.clientHeight),d.copy(f),i.update()}(W);break;case r.DOLLY:if(!1===i.enableZoom)return;!function ve(W){b.set(W.clientX,W.clientY),x.subVectors(b,y),x.y>0?G(R()):x.y<0&&X(R()),y.copy(b),i.update()}(W);break;case r.PAN:if(!1===i.enablePan)return;!function Ue(W){_.set(W.clientX,W.clientY),v.subVectors(_,g).multiplyScalar(i.panSpeed),K(v.x,v.y),g.copy(_),i.update()}(W)}}(W))}function Rt(W){(function pt(W){delete N[W.pointerId];for(let Fe=0;Fe<M.length;Fe++)if(M[Fe].pointerId==W.pointerId)return void M.splice(Fe,1)})(W),0===M.length&&(i.domElement.releasePointerCapture(W.pointerId),i.domElement.removeEventListener("pointermove",ot),i.domElement.removeEventListener("pointerup",Rt)),i.dispatchEvent(C5),s=r.NONE}function k(W){!1===i.enabled||!1===i.enableZoom||s!==r.NONE||(W.preventDefault(),i.dispatchEvent(FP),function Ke(W){Q(W),W.deltaY<0?X(R()):W.deltaY>0&&G(R()),i.update()}(W),i.dispatchEvent(C5))}function P(W){!1===i.enabled||!1===i.enablePan||function We(W){let Fe=!1;switch(W.code){case i.keys.UP:W.ctrlKey||W.metaKey||W.shiftKey?ee(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):K(0,i.keyPanSpeed),Fe=!0;break;case i.keys.BOTTOM:W.ctrlKey||W.metaKey||W.shiftKey?ee(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):K(0,-i.keyPanSpeed),Fe=!0;break;case i.keys.LEFT:W.ctrlKey||W.metaKey||W.shiftKey?$(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):K(i.keyPanSpeed,0),Fe=!0;break;case i.keys.RIGHT:W.ctrlKey||W.metaKey||W.shiftKey?$(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):K(-i.keyPanSpeed,0),Fe=!0}Fe&&(W.preventDefault(),i.update())}(W)}function De(W){!1!==i.enabled&&W.preventDefault()}function Ne(W){let Fe=N[W.pointerId];void 0===Fe&&(Fe=new fe,N[W.pointerId]=Fe),Fe.set(W.pageX,W.pageY)}function Je(W){return N[(W.pointerId===M[0].pointerId?M[1]:M[0]).pointerId]}i.domElement.addEventListener("contextmenu",De),i.domElement.addEventListener("pointerdown",it),i.domElement.addEventListener("pointercancel",Rt),i.domElement.addEventListener("wheel",k,{passive:!1}),this.update()}}function M5(n,e){if(0===e)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(2===e||1===e){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(2===e)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class T5 extends _l{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new jle(t)}),this.register(function(t){return new Qle(t)}),this.register(function(t){return new ece(t)}),this.register(function(t){return new tce(t)}),this.register(function(t){return new qle(t)}),this.register(function(t){return new Xle(t)}),this.register(function(t){return new Yle(t)}),this.register(function(t){return new Zle(t)}),this.register(function(t){return new Wle(t)}),this.register(function(t){return new Kle(t)}),this.register(function(t){return new $le(t)}),this.register(function(t){return new Jle(t)}),this.register(function(t){return new Hle(t)}),this.register(function(t){return new nce(t)}),this.register(function(t){return new ice(t)})}load(e,t,i,r){const s=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:b0.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ys(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===A5){try{o[_n.KHR_BINARY_GLTF]=new rce(e)}catch(d){return void(r&&r(d))}s=JSON.parse(o[_n.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new _ce(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],f=s.extensionsRequired||[];switch(d){case _n.KHR_MATERIALS_UNLIT:o[d]=new Gle;break;case _n.KHR_DRACO_MESH_COMPRESSION:o[d]=new sce(s,this.dracoLoader);break;case _n.KHR_TEXTURE_TRANSFORM:o[d]=new oce;break;case _n.KHR_MESH_QUANTIZATION:o[d]=new ace;break;default:f.indexOf(d)>=0&&void 0===a[d]&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function zle(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const _n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Hle{constructor(e){this.parser=e,this.name=_n.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ye(16777215);void 0!==l.color&&u.setRGB(l.color[0],l.color[1],l.color[2],Vr);const d=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new t5(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new AP(u),c.distance=d;break;case"spot":c=new Q4(u),c.distance=d,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,nh(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class Gle{constructor(){this.name=_n.KHR_MATERIALS_UNLIT}getMaterialType(){return wi}extendParams(e,t,i){const r=[];e.color=new Ye(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Vr),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ti))}return Promise.all(r)}}class Wle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class jle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new fe(a,a)}return Promise.all(s)}}class $le{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class qle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ye(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Vr)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ti)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Xle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Yle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Ye).setRGB(a[0],a[1],a[2],Vr),Promise.all(s)}}class Zle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Kle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Ye).setRGB(a[0],a[1],a[2],Vr),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ti)),Promise.all(s)}}class Jle{constructor(e){this.parser=e,this.name=_n.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Ec:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Qle{constructor(e){this.parser=e,this.name=_n.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class ece{constructor(e){this.parser=e,this.name=_n.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class tce{constructor(e){this.parser=e,this.name=_n.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class nce{constructor(e){this.name=_n.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,d=r.byteStride,f=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,f,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(m),u,d,f,r.mode,r.filter),m})})}return null}}class ice{constructor(e){this.name=_n.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Ko.TRIANGLES&&c.mode!==Ko.TRIANGLE_STRIP&&c.mode!==Ko.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),d=u.isGroup?u.children:[u],f=c[0].count,m=[];for(const g of d){const _=new It,v=new O,y=new Xn,b=new O(1,1,1),x=new b4(g.geometry,g.material,f);for(let S=0;S<f;S++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,S),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,S),l.SCALE&&b.fromBufferAttribute(l.SCALE,S),x.setMatrixAt(S,_.compose(v,y,b));for(const S in l)"TRANSLATION"!==S&&"ROTATION"!==S&&"SCALE"!==S&&g.geometry.setAttribute(S,l[S]);fi.prototype.copy.call(x,g),this.parser.assignFinalMaterial(x),m.push(x)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const A5="glTF";class rce{constructor(e){this.name=_n.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==A5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=i.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class sce{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=VP[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=VP[u]||u.toLowerCase();if(void 0!==o[u]){const f=i.accessors[e.attributes[u]];c[d]=bg[f.componentType].name,l[d]=!0===f.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){r.decodeDracoFile(u,function(f){for(const m in f.attributes){const _=l[m];void 0!==_&&(f.attributes[m].normalized=_)}d(f)},a,c)})})}}class oce{constructor(){this.name=_n.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class ace{constructor(){this.name=_n.KHR_MESH_QUANTIZATION}}class I5 extends y0{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,d=(i-t)/u,f=d*d,m=f*d,g=e*c,_=g-c,v=-2*m+3*f,y=m-f,b=1-v,x=y-f+d;for(let S=0;S!==a;S++)s[S]=b*o[_+S+a]+x*(o[_+S+l]*u)+v*o[g+S+a]+y*(o[g+S]*u);return s}}const lce=new Xn;class cce extends I5{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return lce.fromArray(s).normalize().toArray(s),s}}const Ko={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},bg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},R5={9728:$i,9729:Mi,9984:1004,9985:1007,9986:1005,9987:dc},P5={33071:ts,33648:1002,10497:Ed},BP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},VP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},th={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},uce={CUBICSPLINE:void 0,LINEAR:Pm,STEP:Xv};function Zd(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function nh(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function fce(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pce(n){let e;const t=n.extensions&&n.extensions[_n.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+HP(t.attributes):n.indices+":"+HP(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+HP(n.targets[i]);return e}function HP(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function GP(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const gce=new It;class _ce{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new zle,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new CP(this.options.manager):new fle(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ys(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return Zd(s,a,r),nh(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[_n.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(b0.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=BP[r.type],l=!0===r.normalized,c=new(0,bg[r.componentType])(r.count*o);return Promise.resolve(new ii(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=BP[r.type],c=bg[r.componentType],u=c.BYTES_PER_ELEMENT,f=r.byteOffset||0,m=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,g=!0===r.normalized;let _,v;if(m&&m!==u*l){const y=Math.floor(f/m),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let x=t.cache.get(b);x||(_=new c(a,y*m,r.count*m/u),x=new YR(_,m/u),t.cache.add(b,x)),v=new Bd(x,l,f%m/u,g)}else _=null===a?new c(r.count*l):new c(a,f,r.count*l),v=new ii(_,l,g);if(void 0!==r.sparse){const S=r.sparse.values.byteOffset||0,E=new(0,bg[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*BP.SCALAR),A=new c(o[2],S,r.sparse.count*l);null!==a&&(v=new ii(v.array.slice(),v.itemSize,v.normalized));for(let M=0,N=E.length;M<N;M++){const T=E[M];if(v.setX(T,A[M*l]),l>=2&&v.setY(T,A[M*l+1]),l>=3&&v.setZ(T,A[M*l+2]),l>=4&&v.setW(T,A[M*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const f=(s.samplers||{})[o.sampler]||{};return u.magFilter=R5[f.magFilter]||Mi,u.minFilter=R5[f.minFilter]||dc,u.wrapS=P5[f.wrapS]||Ed,u.wrapT=P5[f.wrapT]||Ed,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(d=>d.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const f=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(f),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(f,m){let g=f;!0===t.isImageBitmapLoader&&(g=function(_){const v=new Yo(_);v.needsUpdate=!0,f(v)}),t.load(b0.resolveURL(d,s.path),g,void 0,m)})}).then(function(d){return!0===c&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||function mce(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[_n.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[_n.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[_n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Vd,As.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Ir,As.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return mg}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=[];if((s.extensions||{})[_n.KHR_MATERIALS_UNLIT]){const d=r[_n.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new Ye(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const f=d.baseColorFactor;a.color.setRGB(f[0],f[1],f[2],Vr),a.opacity=f[3]}void 0!==d.baseColorTexture&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Ti)),a.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,a.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(f){return f.getMaterialType&&f.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(f){return f.extendMaterialParams&&f.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=2);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==wi&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new fe(1,1),void 0!==s.normalTexture.scale)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(void 0!==s.occlusionTexture&&o!==wi&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==wi){const d=s.emissiveFactor;a.emissive=(new Ye).setRGB(d[0],d[1],d[2],Vr)}return void 0!==s.emissiveTexture&&o!==wi&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Ti)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),nh(d,s),t.associations.set(d,{materials:e}),s.extensions&&Zd(r,d,s),d})}createUniqueName(e){const t=si.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[_n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return O5(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=pce(c),d=r[u];if(d)o.push(d.promise);else{let f;f=c.extensions&&c.extensions[_n.KHR_DRACO_MESH_COMPRESSION]?s(c):O5(new Vt,c,t),r[u]={primitive:c,promise:f},o.push(f)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new mg({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),n.DefaultMaterial):this.getDependency("material",o[l].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let m=0,g=u.length;m<g;m++){const _=u[m],v=o[m];let y;const b=c[m];if(v.mode===Ko.TRIANGLES||v.mode===Ko.TRIANGLE_STRIP||v.mode===Ko.TRIANGLE_FAN||void 0===v.mode)y=!0===s.isSkinnedMesh?new _4(_,b):new Ae(_,b),!0===y.isSkinnedMesh&&y.normalizeSkinWeights(),v.mode===Ko.TRIANGLE_STRIP?y.geometry=M5(y.geometry,1):v.mode===Ko.TRIANGLE_FAN&&(y.geometry=M5(y.geometry,2));else if(v.mode===Ko.LINES)y=new Ku(_,b);else if(v.mode===Ko.LINE_STRIP)y=new rs(_,b);else if(v.mode===Ko.LINE_LOOP)y=new T4(_,b);else{if(v.mode!==Ko.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);y=new d0(_,b)}Object.keys(y.geometry.morphAttributes).length>0&&fce(y,s),y.name=t.createUniqueName(s.name||"mesh_"+e),nh(y,s),v.extensions&&Zd(r,y,v),t.assignFinalMaterial(y),d.push(y)}for(let m=0,g=d.length;m<g;m++)t.associations.set(d[m],{meshes:e,primitives:m});if(1===d.length)return s.extensions&&Zd(r,d[0],s),d[0];const f=new wo;s.extensions&&Zd(r,f,s),t.associations.set(f,{meshes:e});for(let m=0,g=d.length;m<g;m++)f.add(d[m]);return f})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new fr(ju_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new F1(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),nh(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const f=new It;null!==s&&f.fromArray(s.array,16*c),l.push(f)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new j1(a,l)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,f=r.channels.length;d<f;d++){const m=r.channels[d],g=r.samplers[m.sampler],_=m.target,y=void 0!==r.parameters?r.parameters[g.input]:g.input,b=void 0!==r.parameters?r.parameters[g.output]:g.output;void 0!==_.node&&(o.push(this.getDependency("node",_.node)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",b)),c.push(g),u.push(_))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const f=d[0],m=d[1],g=d[2],_=d[3],v=d[4],y=[];for(let b=0,x=f.length;b<x;b++){const S=f[b],E=m[b],A=g[b],M=_[b],N=v[b];if(void 0===S)continue;S.updateMatrix&&S.updateMatrix();const T=i._createAnimationTracks(S,E,A,M,N);if(T)for(let R=0;R<T.length;R++)y.push(T[R])}return new v0(s,void 0,y)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],f=c[2];null!==f&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(f,gce)});for(let m=0,g=d.length;m<g;m++)u.add(d[m]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(u=!0===s.isBone?new QR:c.length>1?new wo:1===c.length?c[0]:new fi,u!==c[0])for(let d=0,f=c.length;d<f;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),nh(u,s),s.extensions&&Zd(i,u,s),void 0!==s.matrix){const d=new It;d.fromArray(s.matrix),u.applyMatrix4(d)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new wo;i.name&&(s.name=r.createUniqueName(i.name)),nh(s,i),i.extensions&&Zd(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);return r.associations=(u=>{const d=new Map;for(const[f,m]of r.associations)(f instanceof As||f instanceof Yo)&&d.set(f,m);return u.traverse(f=>{const m=r.associations.get(f);null!=m&&d.set(f,m)}),d})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];let c;switch(th[s.path]===th.weights?e.traverse(function(f){f.morphTargetInfluences&&l.push(f.name?f.name:f.uuid)}):l.push(a),th[s.path]){case th.weights:c=_g;break;case th.rotation:c=Wd;break;case th.position:case th.scale:c=vg;break;default:c=1===i.itemSize?_g:vg}const u=void 0!==r.interpolation?uce[r.interpolation]:Pm,d=this._getArrayFromAccessor(i);for(let f=0,m=l.length;f<m;f++){const g=new c(l[f]+"."+th[s.path],t.array,d,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=GP(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof Wd?cce:I5)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function O5(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=VP[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return Rn.workingColorSpace!==Vr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Rn.workingColorSpace}" not supported.`),nh(n,e),function yce(n,e,t){const i=e.attributes,r=new go;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new O(l[0],l[1],l[2]),new O(c[0],c[1],c[2])),a.normalized){const u=GP(bg[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new O,l=new O;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(void 0!==d.POSITION){const f=t.json.accessors[d.POSITION],m=f.min,g=f.max;if(void 0!==m&&void 0!==g){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),f.normalized){const _=GP(bg[f.componentType]);l.multiplyScalar(_)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new Ia;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function dce(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(void 0!==d.POSITION&&(i=!0),void 0!==d.NORMAL&&(r=!0),void 0!==d.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const f=void 0!==d.POSITION?t.getDependency("accessor",d.POSITION):n.attributes.position;o.push(f)}if(r){const f=void 0!==d.NORMAL?t.getDependency("accessor",d.NORMAL):n.attributes.normal;a.push(f)}if(s){const f=void 0!==d.COLOR_0?t.getDependency("accessor",d.COLOR_0):n.attributes.color;l.push(f)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const d=c[1],f=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=d),s&&(n.morphAttributes.color=f),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}class vce extends _l{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){function i(c,u,d){for(let f=0,m=c.length;f<m;f++)if(c[f]!==u.getUint8(d+f))return!1;return!0}const l=function a(c){if("string"==typeof c){const u=new Uint8Array(c.length);for(let d=0;d<c.length;d++)u[d]=255&c.charCodeAt(d);return u.buffer||u}return c}(e);return function t(c){const u=new DataView(c);if(84+50*u.getUint32(80,!0)===u.byteLength)return!0;const g=[115,111,108,105,100];for(let _=0;_<5;_++)if(i(g,u,_))return!1;return!0}(l)?function r(c){const u=new DataView(c),d=u.getUint32(80,!0);let f,m,g,v,y,b,x,S,_=!1;for(let $=0;$<70;$++)1129270351==u.getUint32($,!1)&&82==u.getUint8($+4)&&61==u.getUint8($+5)&&(_=!0,v=new Float32Array(3*d*3),y=u.getUint8($+6)/255,b=u.getUint8($+7)/255,x=u.getUint8($+8)/255,S=u.getUint8($+9)/255);const M=new Vt,N=new Float32Array(3*d*3),T=new Float32Array(3*d*3),R=new Ye;for(let $=0;$<d;$++){const ee=84+50*$,ie=u.getFloat32(ee,!0),V=u.getFloat32(ee+4,!0),K=u.getFloat32(ee+8,!0);if(_){const G=u.getUint16(ee+48,!0);32768&G?(f=y,m=b,g=x):(f=(31&G)/31,m=(G>>5&31)/31,g=(G>>10&31)/31)}for(let G=1;G<=3;G++){const X=ee+12*G,Q=3*$*3+3*(G-1);N[Q]=u.getFloat32(X,!0),N[Q+1]=u.getFloat32(X+4,!0),N[Q+2]=u.getFloat32(X+8,!0),T[Q]=ie,T[Q+1]=V,T[Q+2]=K,_&&(R.set(f,m,g).convertSRGBToLinear(),v[Q]=R.r,v[Q+1]=R.g,v[Q+2]=R.b)}}return M.setAttribute("position",new ii(N,3)),M.setAttribute("normal",new ii(T,3)),_&&(M.setAttribute("color",new ii(v,3)),M.hasColors=!0,M.alpha=S),M}(l):function s(c){const u=new Vt,d=/solid([\s\S]*?)endsolid/g,f=/facet([\s\S]*?)endfacet/g,m=/solid\s(.+)/;let g=0;const _=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,v=new RegExp("vertex"+_+_+_,"g"),y=new RegExp("normal"+_+_+_,"g"),b=[],x=[],S=[],E=new O;let A,M=0,N=0,T=0;for(;null!==(A=d.exec(c));){N=T;const R=A[0],$=null!==(A=m.exec(R))?A[1]:"";for(S.push($);null!==(A=f.exec(R));){let V=0,K=0;const G=A[0];for(;null!==(A=y.exec(G));)E.x=parseFloat(A[1]),E.y=parseFloat(A[2]),E.z=parseFloat(A[3]),K++;for(;null!==(A=v.exec(G));)b.push(parseFloat(A[1]),parseFloat(A[2]),parseFloat(A[3])),x.push(E.x,E.y,E.z),V++,T++;1!==K&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+g),3!==V&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+g),g++}const ee=N,ie=T-N;u.userData.groupNames=S,u.addGroup(ee,ie,M),M++}return u.setAttribute("position",new nt(b,3)),u.setAttribute("normal",new nt(x,3)),u}(function o(c){return"string"!=typeof c?(new TextDecoder).decode(c):c}(e))}}const wce=/^[og]\s*(.+)?/,bce=/^mtllib /,xce=/^usemtl /,Cce=/^usemap /,L5=/\s+/,N5=new O,WP=new O,F5=new O,k5=new O,Jo=new O,gS=new Ye;function Sce(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;N5.fromArray(r,e),WP.fromArray(r,t),F5.fromArray(r,i),Jo.subVectors(F5,WP),k5.subVectors(N5,WP),Jo.cross(k5),Jo.normalize(),s.push(Jo.x,Jo.y,Jo.z),s.push(Jo.x,Jo.y,Jo.z),s.push(Jo.x,Jo.y,Jo.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,l,c){const u=this.vertices.length;let d=this.parseVertexIndex(e,u),f=this.parseVertexIndex(t,u),m=this.parseVertexIndex(i,u);if(this.addVertex(d,f,m),this.addColor(d,f,m),void 0!==a&&""!==a){const g=this.normals.length;d=this.parseNormalIndex(a,g),f=this.parseNormalIndex(l,g),m=this.parseNormalIndex(c,g),this.addNormal(d,f,m)}else this.addFaceNormal(d,f,m);if(void 0!==r&&""!==r){const g=this.uvs.length;d=this.parseUVIndex(r,g),f=this.parseUVIndex(s,g),m=this.parseUVIndex(o,g),this.addUV(d,f,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class Ece extends _l{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new Sce;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a].trimStart();if(0===c.length)continue;const u=c.charAt(0);if("#"!==u)if("v"===u){const d=c.split(L5);switch(d[0]){case"v":t.vertices.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])),d.length>=7?(gS.setRGB(parseFloat(d[4]),parseFloat(d[5]),parseFloat(d[6])).convertSRGBToLinear(),t.colors.push(gS.r,gS.g,gS.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));break;case"vt":t.uvs.push(parseFloat(d[1]),parseFloat(d[2]))}}else if("f"===u){const f=c.slice(1).trim().split(L5),m=[];for(let _=0,v=f.length;_<v;_++){const y=f[_];if(y.length>0){const b=y.split("/");m.push(b)}}const g=m[0];for(let _=1,v=m.length-1;_<v;_++){const y=m[_],b=m[_+1];t.addFace(g[0],y[0],b[0],g[1],y[1],b[1],g[2],y[2],b[2])}}else if("l"===u){const d=c.substring(1).trim().split(" ");let f=[];const m=[];if(-1===c.indexOf("/"))f=d;else for(let g=0,_=d.length;g<_;g++){const v=d[g].split("/");""!==v[0]&&f.push(v[0]),""!==v[1]&&m.push(v[1])}t.addLineGeometry(f,m)}else if("p"===u){const f=c.slice(1).trim().split(" ");t.addPointGeometry(f)}else if(null!==(r=wce.exec(c))){const d=(" "+r[0].slice(1).trim()).slice(1);t.startObject(d)}else if(xce.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(bce.test(c))t.materialLibraries.push(c.substring(7).trim());else if(Cce.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=c.split(" "),r.length>1){const f=r[1].trim().toLowerCase();t.object.smooth="0"!==f&&"off"!==f}else t.object.smooth=!0;const d=t.object.currentMaterial();d&&(d.smooth=t.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new wo;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],u=c.geometry,d=c.materials,f="Line"===u.type,m="Points"===u.type;let g=!1;if(0===u.vertices.length)continue;const _=new Vt;_.setAttribute("position",new nt(u.vertices,3)),u.normals.length>0&&_.setAttribute("normal",new nt(u.normals,3)),u.colors.length>0&&(g=!0,_.setAttribute("color",new nt(u.colors,3))),!0===u.hasUVIndices&&_.setAttribute("uv",new nt(u.uvs,2));const v=[];for(let b=0,x=d.length;b<x;b++){const S=d[b],E=S.name+"_"+S.smooth+"_"+g;let A=t.materials[E];if(null!==this.materials)if(A=this.materials.create(S.name),!f||!A||A instanceof Ir){if(m&&A&&!(A instanceof Vd)){const M=new Vd({size:10,sizeAttenuation:!1});As.prototype.copy.call(M,A),M.color.copy(A.color),M.map=A.map,A=M}}else{const M=new Ir;As.prototype.copy.call(M,A),M.color.copy(A.color),A=M}void 0===A&&(A=f?new Ir:m?new Vd({size:1,sizeAttenuation:!1}):new wP,A.name=S.name,A.flatShading=!S.smooth,A.vertexColors=g,t.materials[E]=A),v.push(A)}let y;if(v.length>1){for(let b=0,x=d.length;b<x;b++){const S=d[b];_.addGroup(S.groupStart,S.groupCount,b)}y=f?new Ku(_,v):m?new d0(_,v):new Ae(_,v)}else y=f?new Ku(_,v[0]):m?new d0(_,v[0]):new Ae(_,v[0]);y.name=c.name,s.add(y)}else if(t.vertices.length>0){const a=new Vd({size:1,sizeAttenuation:!1}),l=new Vt;l.setAttribute("position",new nt(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(l.setAttribute("color",new nt(t.colors,3)),a.vertexColors=!0);const c=new d0(l,a);s.add(c)}return s}}class Mce extends _l{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ys(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){const l=s.parse(JSON.parse(a));t&&t(l)},i,r)}parse(e){return new Tce(e)}}class Tce{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const i=[],r=function Ace(n,e,t){const i=Array.from(n),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,l=0;for(let c=0;c<i.length;c++){const u=i[c];if("\n"===u)a=0,l-=s;else{const d=Dce(u,r,a,l,t);a+=d.offsetX,o.push(d.path)}}return o}(e,t,this.data);for(let s=0,o=r.length;s<o;s++)i.push(...r[s].toShapes());return i}}function Dce(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");const o=new Ule;let a,l,c,u,d,f,m,g;if(s.o){const _=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let v=0,y=_.length;v<y;)switch(_[v++]){case"m":a=_[v++]*e+t,l=_[v++]*e+i,o.moveTo(a,l);break;case"l":a=_[v++]*e+t,l=_[v++]*e+i,o.lineTo(a,l);break;case"q":c=_[v++]*e+t,u=_[v++]*e+i,d=_[v++]*e+t,f=_[v++]*e+i,o.quadraticCurveTo(d,f,c,u);break;case"b":c=_[v++]*e+t,u=_[v++]*e+i,d=_[v++]*e+t,f=_[v++]*e+i,m=_[v++]*e+t,g=_[v++]*e+i,o.bezierCurveTo(d,f,m,g,c,u)}}return{offsetX:s.ha*e,path:o}}class U5{constructor(e,t){this.wasIntersected=!1,this.target=e,this.name=t,this.intersected=!1,this.distance=0,this.point=new O(0,0)}}class Zs{constructor(e,t=null){this.coords=new fe(0,0),this.distance=0,this.intersected=!1,this.point=new O,this.cancelBubble=!1,this.type=e,this.originalEvent=t}stopPropagation(){this.cancelBubble=!0}}class Ice{constructor(e,t,i,r){this.dispose=()=>{this.domElement.removeEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("pointermove",this.onDocumentPointerMove):this.domElement.removeEventListener("pointermove",this.onDocumentPointerMove),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?this.domElement.ownerDocument.removeEventListener("mousemove",this.onDocumentMouseMove):this.domElement.removeEventListener("mousemove",this.onDocumentMouseMove),this.domElement.removeEventListener("mousedown",this.onMouseDown),this.domElement.removeEventListener("mouseup",this.onMouseUp),this.domElement.removeEventListener("touchstart",this.onTouchStart),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd)},this.add=(s,o=[])=>{if(s&&!this.interactiveObjects.find(a=>a.target===s))if(o.length>0)o.forEach(a=>{const l=s.getObjectByName(a);if(l){const c=new U5(l,a);this.interactiveObjects.push(c)}});else{const a=new U5(s,s.name);this.interactiveObjects.push(a)}},this.remove=(s,o=[])=>{s&&(o.length>0?o.forEach(a=>{const l=s.getObjectByName(a);l&&(this.interactiveObjects=this.interactiveObjects.filter(c=>c.target!==l))}):this.interactiveObjects=this.interactiveObjects.filter(a=>a.target!==s))},this.update=()=>{this.raycaster.setFromCamera(this.mouse,this.camera),this.interactiveObjects.forEach(l=>{l.target&&this.checkIntersection(l)}),this.interactiveObjects.sort(function(l,c){return l.distance-c.distance});const s=this.interactiveObjects.find(l=>l.intersected)??null;if(s!=this.closestObject){if(this.closestObject){const l=new Zs("mouseout");this.dispatch(this.closestObject,l)}if(s){const l=new Zs("mouseover");this.dispatch(s,l)}this.closestObject=s}let o,a;this.interactiveObjects.forEach(l=>{!l.intersected&&l.wasIntersected&&(o||(o=new Zs("mouseleave")),this.dispatch(l,o))}),this.interactiveObjects.forEach(l=>{l.intersected&&!l.wasIntersected&&(a||(a=new Zs("mouseenter")),this.dispatch(l,a))})},this.checkIntersection=s=>{const o=this.raycaster.intersectObjects([s.target],!0);if(s.wasIntersected=s.intersected,o.length>0){let a=o[0].distance;o.forEach(l=>{l.distance<a&&(a=l.distance)}),s.point=o[0].point,s.intersected=!0,s.distance=a}else s.intersected=!1},this.onDocumentMouseMove=s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY);const o=new Zs("mousemove",s);this.interactiveObjects.forEach(a=>{this.dispatch(a,o)})},this.onDocumentPointerMove=s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY);const o=new Zs("pointermove",s);this.interactiveObjects.forEach(a=>{this.dispatch(a,o)})},this.onTouchMove=s=>{s.touches.length>0&&this.mapPositionToPoint(this.mouse,s.touches[0].clientX,s.touches[0].clientY);const o=new Zs(this.treatTouchEventsAsMouseEvents?"mousemove":"touchmove",s);this.interactiveObjects.forEach(a=>{this.dispatch(a,o)})},this.onMouseClick=s=>{this.update();const o=new Zs("click",s);this.interactiveObjects.forEach(a=>{a.intersected&&this.dispatch(a,o)})},this.onMouseDown=s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY),this.update();const o=new Zs("mousedown",s);this.interactiveObjects.forEach(a=>{a.intersected&&this.dispatch(a,o)})},this.onPointerDown=s=>{this.mapPositionToPoint(this.mouse,s.clientX,s.clientY),this.update();const o=new Zs("pointerdown",s);this.interactiveObjects.forEach(a=>{a.intersected&&this.dispatch(a,o)})},this.onTouchStart=s=>{s.touches.length>0&&this.mapPositionToPoint(this.mouse,s.touches[0].clientX,s.touches[0].clientY),this.update();const o=new Zs(this.treatTouchEventsAsMouseEvents?"mousedown":"touchstart",s);this.interactiveObjects.forEach(a=>{a.intersected&&this.dispatch(a,o)})},this.onMouseUp=s=>{const o=new Zs("mouseup",s);this.interactiveObjects.forEach(a=>{this.dispatch(a,o)})},this.onPointerUp=s=>{const o=new Zs("pointerup",s);this.interactiveObjects.forEach(a=>{this.dispatch(a,o)})},this.onTouchEnd=s=>{s.touches.length>0&&this.mapPositionToPoint(this.mouse,s.touches[0].clientX,s.touches[0].clientY),this.update();const o=new Zs(this.treatTouchEventsAsMouseEvents?"mouseup":"touchend",s);this.interactiveObjects.forEach(a=>{this.dispatch(a,o)})},this.dispatch=(s,o)=>{s.target&&!o.cancelBubble&&(o.coords=this.mouse,o.point=s.point,o.distance=s.distance,o.intersected=s.intersected,s.target.dispatchEvent(o))},this.mapPositionToPoint=(s,o,a)=>{const l=this.renderer.domElement.getBoundingClientRect();s.x=(o-l.left)/l.width*2-1,s.y=-(a-l.top)/l.height*2+1},this.renderer=e,this.camera=t,this.domElement=i,this.bindEventsOnBodyElement=!(r&&typeof r.bindEventsOnBodyElement<"u")||r.bindEventsOnBodyElement,this.scene=r&&typeof r.scene<"u"?r.scene:null,this.scene&&(this.scene.onBeforeRender=()=>{this.autoAdd&&null!==this.scene&&this.scene.traverse(s=>{this.add(s),s.addEventListener("removed",o=>{this.remove(o.target)})}),this.update()}),this.autoAdd=!!(r&&typeof r.autoAdd<"u")&&r.autoAdd,this.autoAdd&&null===this.scene&&console.error("Attention: Options.scene needs to be set when using options.autoAdd"),this.mouse=new fe(-1,1),this.supportsPointerEvents=!!window.PointerEvent,this.interactiveObjects=[],this.closestObject=null,this.raycaster=new PP,i.addEventListener("click",this.onMouseClick),this.supportsPointerEvents&&(this.bindEventsOnBodyElement?i.ownerDocument.addEventListener("pointermove",this.onDocumentPointerMove):i.addEventListener("pointermove",this.onDocumentPointerMove),i.addEventListener("pointerdown",this.onPointerDown),i.addEventListener("pointerup",this.onPointerUp)),this.bindEventsOnBodyElement?i.ownerDocument.addEventListener("mousemove",this.onDocumentMouseMove):i.addEventListener("mousemove",this.onDocumentMouseMove),i.addEventListener("mousedown",this.onMouseDown),i.addEventListener("mouseup",this.onMouseUp),i.addEventListener("touchstart",this.onTouchStart,{passive:!0}),i.addEventListener("touchmove",this.onTouchMove,{passive:!0}),i.addEventListener("touchend",this.onTouchEnd,{passive:!0}),this.treatTouchEventsAsMouseEvents=!0}}class Rce extends V1{constructor(e=null){super();const t=new ri;t.deleteAttribute("uv");const i=new mg({side:1}),r=new mg;let s=5;null!==e&&!1===e._useLegacyLights&&(s=900);const o=new AP(16777215,s,28,2);o.position.set(.418,16.199,.3),this.add(o);const a=new Ae(t,i);a.position.set(-.757,13.219,.717),a.scale.set(31.713,28.305,28.591),this.add(a);const l=new Ae(t,r);l.position.set(-10.906,2.009,1.846),l.rotation.set(0,-.195,0),l.scale.set(2.328,7.905,4.651),this.add(l);const c=new Ae(t,r);c.position.set(-5.607,-.754,-.758),c.rotation.set(0,.994,0),c.scale.set(1.97,1.534,3.955),this.add(c);const u=new Ae(t,r);u.position.set(6.167,.857,7.803),u.rotation.set(0,.561,0),u.scale.set(3.927,6.285,3.687),this.add(u);const d=new Ae(t,r);d.position.set(-2.017,.018,6.124),d.rotation.set(0,.333,0),d.scale.set(2.002,4.566,2.064),this.add(d);const f=new Ae(t,r);f.position.set(2.291,-.756,-2.621),f.rotation.set(0,-.286,0),f.scale.set(1.546,1.552,1.496),this.add(f);const m=new Ae(t,r);m.position.set(-2.193,-.369,-5.547),m.rotation.set(0,.516,0),m.scale.set(3.875,3.487,2.986),this.add(m);const g=new Ae(t,xg(50));g.position.set(-16.116,14.37,8.208),g.scale.set(.1,2.428,2.739),this.add(g);const _=new Ae(t,xg(50));_.position.set(-16.109,18.021,-8.207),_.scale.set(.1,2.425,2.751),this.add(_);const v=new Ae(t,xg(17));v.position.set(14.904,12.198,-1.832),v.scale.set(.15,4.265,6.331),this.add(v);const y=new Ae(t,xg(43));y.position.set(-.462,8.89,14.52),y.scale.set(4.38,5.441,.088),this.add(y);const b=new Ae(t,xg(20));b.position.set(3.235,11.486,-12.541),b.scale.set(2.5,2,.1),this.add(b);const x=new Ae(t,xg(100));x.position.set(0,20,0),x.scale.set(1,.1,1),this.add(x)}dispose(){const e=new Set;this.traverse(t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))});for(const t of e)t.dispose()}}function xg(n){const e=new wi;return e.color.setScalar(n),e}var zr={d:(n,e)=>{for(var t in e)zr.o(e,t)&&!zr.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})},o:(n,e)=>Object.prototype.hasOwnProperty.call(n,e),r:n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},bo={};zr.d(bo,{g1:()=>yS,gO:()=>T0,km:()=>_S,zV:()=>E0,ol:()=>h2,uM:()=>vS,N1:()=>hG,xv:()=>u2,PH:()=>bS,UH:()=>wS,ZP:()=>sue,Vx:()=>dG});var _S={};zr.r(_S),zr.d(_S,{COLUMN:()=>xS,COLUMN_REVERSE:()=>V5,ROW:()=>C0,ROW_REVERSE:()=>B5,contentDirection:()=>z5});var yS={};zr.r(yS),zr.d(yS,{CENTER:()=>$P,END:()=>qP,START:()=>jP,STRETCH:()=>H5,alignItems:()=>G5,warnAboutDeprecatedAlignItems:()=>W5});var vS={};zr.r(vS),zr.d(vS,{CENTER:()=>YP,END:()=>ZP,SPACE_AROUND:()=>KP,SPACE_BETWEEN:()=>JP,SPACE_EVENLY:()=>QP,START:()=>XP,justifyContent:()=>j5});var wS={};zr.r(wS),zr.d(wS,{NORMAL:()=>S0,NOWRAP:()=>Cg,PRE:()=>CS,PRE_LINE:()=>Sg,PRE_WRAP:()=>SS,WHITE_CHARS:()=>t2,collapseWhitespaceOnInlines:()=>Y5,collapseWhitespaceOnString:()=>$5,newlineBreakability:()=>q5,shouldBreak:()=>X5});var bS={};zr.r(bS),zr.d(bS,{CENTER:()=>n2,JUSTIFY:()=>r2,JUSTIFY_CENTER:()=>nG,JUSTIFY_LEFT:()=>tG,JUSTIFY_RIGHT:()=>ES,LEFT:()=>Q5,RIGHT:()=>eG,textAlign:()=>iG});const fn=(zr.d(e={},{BufferAttribute:()=>ii,BufferGeometry:()=>Vt,CanvasTexture:()=>oae,Color:()=>Ye,FileLoader:()=>Ys,LinearFilter:()=>Mi,Mesh:()=>Ae,Object3D:()=>fi,Plane:()=>Cc,PlaneGeometry:()=>ng,ShaderMaterial:()=>xc,TextureLoader:()=>CP,Vector2:()=>fe,Vector3:()=>O}),e),C0="row",B5="row-reverse",xS="column",V5="column-reverse";var e;function z5(n,e,t,i){let r=t,s="getWidth",o="x",a="y";0===e.indexOf(xS)&&(s="getHeight",o="y",a="x");for(let l=0;l<n.childrenBoxes.length;l++){const c=n.childrenBoxes[l],u=c.id,d=c[s](),f=c.margin||0;r+=f*i,n.childrenPos[u]={[o]:r+d/2*i,[a]:0},r+=i*(d+f)}}const jP="start",$P="center",qP="end",H5="stretch";function G5(n,e){const t=n.getAlignItems();-1===Oce.indexOf(t)&&console.warn(`alignItems === '${t}' is not supported`);let i="getWidth",r="x";0===e.indexOf(C0)&&(i="getHeight",r="y");const s=n[i]()/2-(n.padding||0);n.childrenBoxes.forEach(o=>{let a;switch(t){case qP:case"right":case"bottom":a=0===e.indexOf(C0)?-s+o[i]()/2+(o.margin||0):s-o[i]()/2-(o.margin||0);break;case jP:case"left":case"top":a=0===e.indexOf(C0)?s-o[i]()/2-(o.margin||0):-s+o[i]()/2+(o.margin||0)}n.childrenPos[o.id][r]=a||0})}function W5(n){-1!==Lce.indexOf(n)&&console.warn(`alignItems === '${n}' is deprecated and will be remove in 7.x.x. Fallback are 'start'|'end'`)}const Oce=[jP,$P,qP,H5,"top","right","bottom","left"],Lce=["top","right","bottom","left"],XP="start",YP="center",ZP="end",KP="space-around",JP="space-between",QP="space-evenly";function j5(n,e,t,i){const r=n.getJustifyContent();-1===Nce.indexOf(r)&&console.warn(`justifyContent === '${r}' is not supported`);const s=0===e.indexOf("row")?"width":"height",o=n.getChildrenSideSum(s),l=("width"===s?n.getInnerWidth():n.getInnerHeight())-o,u=function Fce(n,e){switch(n){case ZP:return e;case YP:return e/2}return 0}(r,2*t-o*Math.sign(t)),d=function kce(n,e,t,i){const r=Array(n.length).fill(0);if(e>0)switch(t){case JP:if(n.length>1){const s=e/(n.length-1)*i;r[0]=0;for(let o=1;o<n.length;o++)r[o]=s*o}break;case QP:if(n.length>1){const s=e/(n.length+1)*i;for(let o=0;o<n.length;o++)r[o]=s*(o+1)}break;case KP:if(n.length>1){const s=e/n.length*i,o=s/2;r[0]=o;for(let a=1;a<n.length;a++)r[a]=o+s*a}}return r}(n.childrenBoxes,l,r,i),f=0===e.indexOf("row")?"x":"y";n.childrenBoxes.forEach((m,g)=>{n.childrenPos[m.id][f]-=u-d[g]})}const Nce=[XP,YP,ZP,KP,JP,QP];function e2(n){return class extends n{constructor(t){super(t),this.isBoxComponent=!0,this.childrenPos={}}getInnerWidth(){const t=this.getContentDirection();switch(t){case"row":case"row-reverse":return this.width-(2*this.padding||0)||this.getChildrenSideSum("width");case"column":case"column-reverse":return this.getHighestChildSizeOn("width");default:console.error(`Invalid contentDirection : ${t}`)}}getInnerHeight(){const t=this.getContentDirection();switch(t){case"row":case"row-reverse":return this.getHighestChildSizeOn("height");case"column":case"column-reverse":return this.height-(2*this.padding||0)||this.getChildrenSideSum("height");default:console.error(`Invalid contentDirection : ${t}`)}}getChildrenSideSum(t){return this.childrenBoxes.reduce((i,r)=>{const s=2*r.margin||0;return i+("width"===t?r.getWidth()+s:r.getHeight()+s)},0)}setPosFromParentRecords(){this.parentUI&&this.parentUI.childrenPos[this.id]&&(this.position.x=this.parentUI.childrenPos[this.id].x,this.position.y=this.parentUI.childrenPos[this.id].y)}computeChildrenPosition(){if(this.children.length>0){const t=this.getContentDirection();let i;switch(t){case C0:i=-this.getInnerWidth()/2;break;case B5:i=this.getInnerWidth()/2;break;case xS:i=this.getInnerHeight()/2;break;case V5:i=-this.getInnerHeight()/2}const r=-Math.sign(i);z5(this,t,i,r),j5(this,t,i,r),G5(this,t)}}getHighestChildSizeOn(t){return this.childrenBoxes.reduce((i,r)=>{const s=r.margin||0,o="width"===t?r.getWidth()+2*s:r.getHeight()+2*s;return Math.max(i,o)},0)}getWidth(){return this.parentUI&&"stretch"===this.parentUI.getAlignItems()&&-1!==this.parentUI.getContentDirection().indexOf("column")?this.parentUI.getWidth()-(2*this.parentUI.padding||0):this.width||this.getInnerWidth()+(2*this.padding||0)}getHeight(){return this.parentUI&&"stretch"===this.parentUI.getAlignItems()&&-1!==this.parentUI.getContentDirection().indexOf("row")?this.parentUI.getHeight()-(2*this.parentUI.padding||0):this.height||this.getInnerHeight()+(2*this.padding||0)}}}const t2={"\t":"\t","\n":"\n","\r":"\r"," ":" "},S0="normal",Cg="nowrap",CS="pre",Sg="pre-line",SS="pre-wrap",$5=function(n,e){switch(e){case Cg:case S0:n=n.replace(/\n/g," ");case Sg:n=n.replace(/[ ]{2,}/g," ")}return n},q5=function(n){switch(n){case CS:case SS:case Sg:return"mandatory"}},X5=function(n,e,t,i){const r=n[e];switch(i.WHITESPACE){case S0:case Sg:case SS:if("mandatory"===r.lineBreak)return!0;if(t+(r.xadvance?r.xadvance:r.width)+(r.xoffset?r.xoffset:0)+(r.kerning?r.kerning:0)>i.INNER_WIDTH)return!0;const l=J5(n,e,i);return function Uce(n,e,t,i){return!(!n||!n.glyph||e+t<i.INNER_WIDTH)&&i.BREAKON.indexOf(n.glyph)>-1}(n[e-1],t,l,i);case CS:return"mandatory"===r.lineBreak;default:return!1}},Y5=function(n,e){const t=n[0],i=n[n.length-1];switch(e){case SS:t.glyph&&"\n"===t.glyph&&n.length>1&&K5([t],n[1]),i.glyph&&"\n"===i.glyph&&n.length>1&&Z5([i],n[n.length-2]);break;case Sg:case Cg:case S0:let s,r=[];for(let o=0;o<n.length;o++){const a=n[o];if(!(a.glyph&&t2[a.glyph]&&n.length>o))break;r.push(a),s=n[o+1]}K5(r,s),r=[],s=null;for(let o=n.length-1;o>0;o--){const a=n[o];if(!(a.glyph&&t2[a.glyph]&&o>0))break;r.push(a),s=n[o-1]}Z5(r,s);break;case CS:break;default:return console.warn(`whiteSpace: '${e}' is not valid`),0}return t.offsetX};function Z5(n,e){if(e)for(let t=0;t<n.length;t++){const i=n[t];i.width=0,i.height=0,i.offsetX=e.offsetX+e.width}}function K5(n,e){if(e)for(let t=0;t<n.length;t++){const i=n[t];i.width=0,i.height=0,i.offsetX=e.offsetX}}function J5(n,e,t,i){if(i=i||0,!n[e])return i;const r=n[e],a=r.xadvance?r.xadvance:r.width;return r.lineBreak?i+a:J5(n,e+1,t,i+a+t.LETTERSPACING+(r.xoffset?r.xoffset:0)+(r.kerning?r.kerning:0))}const Q5="left",eG="right",n2="center",r2="justify",tG="justify-left",ES="justify-right",nG="justify-center";function iG(n,e,t){for(let i=0;i<n.length;i++){const r=n[i],s=Bce(r,e,t,i===n.length-1);for(let o=0;o<r.length;o++)r[o].offsetX+=s;r.x=s}if(0===e.indexOf(r2))for(let i=0;i<n.length;i++){const r=n[i];if(-1!==e.indexOf("-")&&i===n.length-1)return;const s=t-r.width;if(s<=0)return;let o=0;for(let u=1;u<r.length-1;u++)o+=" "===r[u].glyph?1:0;const a=s/o;let l=1;e===ES&&(r.reverse(),l=-1);let c=0;for(let u=1;u<=r.length-1;u++){const d=r[u];d.offsetX+=c*l,c+=" "===d.glyph?a:0}e===ES&&r.reverse()}}const Bce=(n,e,t,i)=>{switch(e){case tG:case r2:case Q5:return-t/2;case ES:case eG:return t/2-n.width;case n2:return-n.width/2;case nG:return i?-n.width/2:-t/2;default:console.warn(`textAlign: '${e}' is not valid`)}};function rG(n){return class extends n{computeInlinesPosition(){const t=this.getWidth()-(2*this.padding||0),i=this.getHeight()-(2*this.padding||0),r=this.getJustifyContent(),s=this.getTextAlign(),o=this.getInterLine(),a=this.computeLines();a.interLine=o;const l=Math.abs(a.height),c=(()=>{switch(r){case"start":return i/2;case"end":return l-i/2;case"center":return l/2;default:console.warn(`justifyContent: '${r}' is not valid`)}})();a.forEach(u=>{u.y+=c,u.forEach(d=>{d.offsetY+=c})}),iG(a,s,t),this.lines=a}calculateBestFit(t){if(0!==this.childrenInlines.length)switch(t){case"grow":this.calculateGrowFit();break;case"shrink":this.calculateShrinkFit();break;case"auto":this.calculateAutoFit()}}calculateGrowFit(){const t=this.getHeight()-(2*this.padding||0);let i=1;const s=this.childrenInlines.find(u=>u.isText);let c,o=1,a=2,l=s._fitFontSize?s._fitFontSize/s.getFontSize():1;do{if(c=this.calculateHeight(l),c>t){if(l<=o){this.childrenInlines.forEach(u=>{u.isInlineBlock||(u._fitFontSize=u.getFontSize())});break}a=l,l-=(a-o)/2}else{if(Math.abs(t-c)<.075)break;Math.abs(l-a)<5e-10&&(a*=2),o=l,l+=(a-o)/2}}while(++i<=10)}calculateShrinkFit(){const t=this.getHeight()-(2*this.padding||0);let i=1;const s=this.childrenInlines.find(u=>u.isText);let c,o=0,a=1,l=s._fitFontSize?s._fitFontSize/s.getFontSize():1;do{if(c=this.calculateHeight(l),c>t)a=l,l-=(a-o)/2;else{if(l>=a){this.childrenInlines.forEach(u=>{u.isInlineBlock||(u._fitFontSize=u.getFontSize())});break}if(Math.abs(t-c)<.075)break;o=l,l+=(a-o)/2}}while(++i<=10)}calculateAutoFit(){const t=this.getHeight()-(2*this.padding||0);let i=1;const s=this.childrenInlines.find(u=>u.isText);let c,o=0,a=2,l=s._fitFontSize?s._fitFontSize/s.getFontSize():1;do{if(c=this.calculateHeight(l),c>t)a=l,l-=(a-o)/2;else{if(Math.abs(t-c)<.075)break;Math.abs(l-a)<5e-10&&(a*=2),o=l,l+=(a-o)/2}}while(++i<=10)}computeLines(){const t=this.getWidth()-(2*this.padding||0),i=[[]];i.height=0;const r=this.getInterLine();this.childrenInlines.reduce((l,c)=>{if(!c.inlines)return;const u=c._fitFontSize||c.getFontSize(),d=c.isText?c.getLetterSpacing()*u:0,f=c.getWhiteSpace(),m=c.getBreakOn(),g={WHITESPACE:f,LETTERSPACING:d,BREAKON:m,INNER_WIDTH:t};return c.inlines.reduce((v,y,b,x)=>{const S=y.kerning?y.kerning:0,E=y.xoffset?y.xoffset:0,A=y.xadvance?y.xadvance:y.width;return X5(x,b,v,g)?(i.push([y]),y.offsetX=E,0===y.width?0:A+d):(i[i.length-1].push(y),y.offsetX=v+E+S,v+A+S+d)},l)},0);let s=0,o=0,a=-r/2;return i.forEach(l=>{if(l.lineHeight=l.reduce((u,d)=>Math.max(u,void 0!==d.lineHeight?d.lineHeight:d.height),0),l.lineBase=l.reduce((u,d)=>Math.max(u,void 0!==d.lineBase?d.lineBase:d.height),0),l.width=0,l.height=l.lineHeight,l[0]){const u=this.getWhiteSpace(),d=Y5(l,u);l.forEach(f=>{f.offsetX-=d}),l.width=this.computeLineWidth(l),l.width>s&&(s=l.width),l.forEach(f=>{f.offsetY=a-f.height-f.anchor,f.lineHeight<l.lineHeight&&(f.offsetY-=l.lineBase-f.lineBase)}),l.y=a,o+=l.lineHeight+r,a-=l.lineHeight+r}}),i.height=o,i.width=s,i}calculateHeight(t){this.childrenInlines.forEach(r=>{r.isInlineBlock||(r._fitFontSize=r.getFontSize()*t,r.calculateInlines(r._fitFontSize))});const i=this.computeLines();return Math.abs(i.height)}computeLineWidth(t){const r=t[t.length-1];return r.offsetX+r.width+t[0].offsetX}}}const Vce=new fn.FileLoader,s2=[],MS={},zce=new fn.TextureLoader,o2=[],TS={},ss={};function a2(n){if(n._kernings)return;const e={};for(let t=0;t<n.kernings.length;t++){const i=n.kernings[t];0!==i.amount&&(e[String.fromCharCode(i.first,i.second)]=i.amount)}n._kernings=e}const E0={setFontFamily:function Hce(n,e){"string"==typeof e?function Wce(n,e){-1===s2.indexOf(e)&&(s2.push(e),Vce.load(e,t=>{const i=JSON.parse(t);a2(i),MS[e]=i;for(const r of Object.keys(ss))e===ss[r].jsonURL&&ss[r].component._updateFontFamily(i)})),ss[n.id]||(ss[n.id]={component:n}),ss[n.id].jsonURL=e,MS[e]&&n._updateFontFamily(MS[e])}(n,e):(ss[n.id]||(ss[n.id]={component:n}),a2(e),ss[n.id].json=e,n._updateFontFamily(e))},setFontTexture:function Gce(n,e){-1===o2.indexOf(e)&&(o2.push(e),zce.load(e,t=>{t.generateMipmaps=!1,t.minFilter=fn.LinearFilter,t.magFilter=fn.LinearFilter,TS[e]=t;for(const i of Object.keys(ss))e===ss[i].textureURL&&ss[i].component._updateFontTexture(t)})),ss[n.id]||(ss[n.id]={component:n}),ss[n.id].textureURL=e,TS[e]&&n._updateFontTexture(TS[e])},getFontOf:function sG(n){const e=ss[n.id];return!e&&n.parentUI?sG(n.parentUI):e},addFont:function jce(n,e,t){t.generateMipmaps=!1,t.minFilter=fn.LinearFilter,t.magFilter=fn.LinearFilter,s2.push(n),MS[n]=e,a2(e),t&&(o2.push(n),TS[n]=t)}};let M0=(()=>{class n{static requestUpdate(t,i,r,s){t.traverse(o=>{o.isUI&&(this.requestedUpdates[o.id]?(i&&(this.requestedUpdates[o.id].updateParsing=!0),r&&(this.requestedUpdates[o.id].updateLayout=!0),s&&(this.requestedUpdates[o.id].updateInner=!0)):this.requestedUpdates[o.id]={updateParsing:i,updateLayout:r,updateInner:s,needCallback:i||r||s})})}static register(t){this.components.includes(t)||this.components.push(t)}static disposeOf(t){const i=this.components.indexOf(t);i>-1&&this.components.splice(i,1)}static update(){if(Object.keys(this.requestedUpdates).length>0){const t=this.components.filter(i=>!i.parentUI);t.forEach(i=>this.traverseParsing(i)),t.forEach(i=>this.traverseUpdates(i))}}static traverseParsing(t){const i=this.requestedUpdates[t.id];i&&i.updateParsing&&(t.parseParams(),i.updateParsing=!1),t.childrenUIs.forEach(r=>this.traverseParsing(r))}static traverseUpdates(t){const i=this.requestedUpdates[t.id];delete this.requestedUpdates[t.id],i&&i.updateLayout&&(i.updateLayout=!1,t.updateLayout()),i&&i.updateInner&&(i.updateInner=!1,t.updateInner()),t.childrenUIs.forEach(r=>{this.traverseUpdates(r)}),i&&i.needCallback&&t.onAfterUpdate()}}return n.components=[],n.requestedUpdates={},n})();const Hr={container:null,fontFamily:null,fontSize:.05,fontKerning:"normal",bestFit:"none",offset:.01,interLine:.01,breakOn:"- ,.:?!\n",whiteSpace:Sg,contentDirection:xS,alignItems:$P,justifyContent:XP,textAlign:n2,textType:"MSDF",fontColor:new fn.Color(16777215),fontOpacity:1,fontPXRange:4,fontSupersampling:!0,borderRadius:.01,borderWidth:0,borderColor:new fn.Color("black"),borderOpacity:1,backgroundSize:"cover",backgroundColor:new fn.Color(2236962),backgroundWhiteColor:new fn.Color(16777215),backgroundOpacity:.8,backgroundOpaqueOpacity:1,getDefaultTexture:function $ce(){if(!AS){const n=document.createElement("canvas").getContext("2d");n.canvas.width=1,n.canvas.height=1,n.fillStyle="#ffffff",n.fillRect(0,0,1,1),AS=new fn.CanvasTexture(n.canvas),AS.isDefault=!0}return AS},hiddenOverflow:!1,letterSpacing:0};let AS;function DS(n){return class extends n{constructor(t){super(t),this.states={},this.currentState=void 0,this.isUI=!0,this.autoLayout=!0,this.childrenUIs=[],this.childrenBoxes=[],this.childrenTexts=[],this.childrenInlines=[],this.parentUI=null,this.addEventListener("added",this._rebuildParentUI),this.addEventListener("removed",this._rebuildParentUI)}getClippingPlanes(){const t=[];if(this.parentUI){if(this.isBlock&&this.parentUI.getHiddenOverflow()){const i=this.parentUI.getHeight()/2-(this.parentUI.padding||0),r=this.parentUI.getWidth()/2-(this.parentUI.padding||0),s=[new fn.Plane(new fn.Vector3(0,1,0),i),new fn.Plane(new fn.Vector3(0,-1,0),i),new fn.Plane(new fn.Vector3(1,0,0),r),new fn.Plane(new fn.Vector3(-1,0,0),r)];s.forEach(o=>{o.applyMatrix4(this.parent.matrixWorld)}),t.push(...s)}this.parentUI.parentUI&&t.push(...this.parentUI.getClippingPlanes())}return t}getHighestParent(){return this.parentUI?this.parent.getHighestParent():this}_getProperty(t){return void 0===this[t]&&this.parentUI?this.parent._getProperty(t):void 0!==this[t]?this[t]:Hr[t]}getFontSize(){return this._getProperty("fontSize")}getFontKerning(){return this._getProperty("fontKerning")}getLetterSpacing(){return this._getProperty("letterSpacing")}getFontTexture(){return void 0===this.fontTexture&&this.parentUI?this.parent._getProperty("fontTexture"):void 0!==this.fontTexture?this.fontTexture:Hr.getDefaultTexture()}getFontFamily(){return this._getProperty("fontFamily")}getBreakOn(){return this._getProperty("breakOn")}getWhiteSpace(){return this._getProperty("whiteSpace")}getTextAlign(){return this._getProperty("textAlign")}getTextType(){return this._getProperty("textType")}getFontColor(){return this._getProperty("fontColor")}getFontSupersampling(){return this._getProperty("fontSupersampling")}getFontOpacity(){return this._getProperty("fontOpacity")}getFontPXRange(){return this._getProperty("fontPXRange")}getBorderRadius(){return this._getProperty("borderRadius")}getBorderWidth(){return this._getProperty("borderWidth")}getBorderColor(){return this._getProperty("borderColor")}getBorderOpacity(){return this._getProperty("borderOpacity")}getContainer(){return!this.threeOBJ&&this.parent?this.parent.getContainer():this.threeOBJ?this:Hr.container}getParentsNumber(t){return t=t||0,this.parentUI?this.parentUI.getParentsNumber(t+1):t}getBackgroundOpacity(){return this.backgroundOpacity||0===this.backgroundOpacity?this.backgroundOpacity:Hr.backgroundOpacity}getBackgroundColor(){return this.backgroundColor||Hr.backgroundColor}getBackgroundTexture(){return this.backgroundTexture||Hr.getDefaultTexture()}getAlignContent(){return this.alignContent||Hr.alignContent}getAlignItems(){return this.alignItems||Hr.alignItems}getContentDirection(){return this.contentDirection||Hr.contentDirection}getJustifyContent(){return this.justifyContent||Hr.justifyContent}getInterLine(){return void 0===this.interLine?Hr.interLine:this.interLine}getOffset(){return void 0===this.offset?Hr.offset:this.offset}getBackgroundSize(){return void 0===this.backgroundSize?Hr.backgroundSize:this.backgroundSize}getHiddenOverflow(){return void 0===this.hiddenOverflow?Hr.hiddenOverflow:this.hiddenOverflow}getBestFit(){return void 0===this.bestFit?Hr.bestFit:this.bestFit}_rebuildChildrenLists(){this.childrenUIs=this.children.filter(t=>t.isUI),this.childrenBoxes=this.children.filter(t=>t.isBoxComponent),this.childrenInlines=this.children.filter(t=>t.isInline),this.childrenTexts=this.children.filter(t=>t.isText)}_rebuildParentUI=()=>{this.parentUI=this.parent&&this.parent.isUI?this.parent:null};add(){for(const i of Object.keys(arguments))arguments[i].isInline&&this.update(null,!0);const t=super.add(...arguments);return this._rebuildChildrenLists(),t}remove(){for(const i of Object.keys(arguments))arguments[i].isInline&&this.update(null,!0);const t=super.remove(...arguments);return this._rebuildChildrenLists(),t}update(t,i,r){M0.requestUpdate(this,t,i,r)}onAfterUpdate(){}_updateFontFamily(t){this.fontFamily=t,this.traverse(i=>{i.isUI&&i.update(!0,!0,!1)}),this.getHighestParent().update(!1,!0,!1)}_updateFontTexture(t){this.fontTexture=t,this.getHighestParent().update(!1,!0,!1)}set(t){let i,r,s;if(M0.register(this),t&&JSON.stringify(t)!==JSON.stringify({})){t.alignContent&&(t.alignItems=t.alignContent,t.textAlign||(t.textAlign=t.alignContent),console.warn("`alignContent` property has been deprecated, please rely on `alignItems` and `textAlign` instead."),delete t.alignContent),t.alignItems&&W5(t.alignItems);for(const o of Object.keys(t))if(this[o]!=t[o])switch(o){case"content":case"fontSize":case"fontKerning":case"breakOn":case"whiteSpace":this.isText&&(i=!0),r=!0,this[o]=t[o];break;case"bestFit":this.isBlock&&(i=!0,r=!0),this[o]=t[o];break;case"width":case"height":case"padding":(this.isInlineBlock||this.isBlock&&"none"!=this.getBestFit())&&(i=!0),r=!0,this[o]=t[o];break;case"letterSpacing":case"interLine":this.isBlock&&"none"!=this.getBestFit()&&(i=!0),r=!0,this[o]=t[o];break;case"margin":case"contentDirection":case"justifyContent":case"alignContent":case"alignItems":case"textAlign":case"textType":r=!0,this[o]=t[o];break;case"fontColor":case"fontOpacity":case"fontSupersampling":case"offset":case"backgroundColor":case"backgroundOpacity":case"backgroundTexture":case"backgroundSize":case"borderRadius":case"borderWidth":case"borderColor":case"borderOpacity":s=!0,this[o]=t[o];break;case"hiddenOverflow":this[o]=t[o]}t.fontFamily&&E0.setFontFamily(this,t.fontFamily),t.fontTexture&&E0.setFontTexture(this,t.fontTexture),this.parentUI&&"none"!=this.parentUI.getBestFit()&&this.parentUI.update(!0,!0,!1),this.update(i,r,s),r&&this.getHighestParent().update(!1,!0,!1)}}setupState(t){this.states[t.state]={attributes:t.attributes,onSet:t.onSet}}setState(t){const i=this.states[t];i?t!==this.currentState&&(this.currentState=t,i.onSet&&i.onSet(),i.attributes&&this.set(i.attributes)):console.warn(`state "${t}" does not exist within this component:`,this.name)}clear(){this.traverse(t=>{M0.disposeOf(t),t.material&&t.material.dispose(),t.geometry&&t.geometry.dispose()})}}}function l2(n){return class extends n{constructor(t){super(t),this.textUniforms={u_texture:{value:this.getFontTexture()},u_color:{value:this.getFontColor()},u_opacity:{value:this.getFontOpacity()},u_pxRange:{value:this.getFontPXRange()},u_useRGSS:{value:this.getFontSupersampling()}},this.backgroundUniforms={u_texture:{value:this.getBackgroundTexture()},u_color:{value:this.getBackgroundColor()},u_opacity:{value:this.getBackgroundOpacity()},u_backgroundMapping:{value:this.getBackgroundSize()},u_borderWidth:{value:this.getBorderWidth()},u_borderColor:{value:this.getBorderColor()},u_borderRadiusTopLeft:{value:this.getBorderRadius()},u_borderRadiusTopRight:{value:this.getBorderRadius()},u_borderRadiusBottomRight:{value:this.getBorderRadius()},u_borderRadiusBottomLeft:{value:this.getBorderRadius()},u_borderOpacity:{value:this.getBorderOpacity()},u_size:{value:new fn.Vector2(1,1)},u_tSize:{value:new fn.Vector2(1,1)}}}updateBackgroundMaterial(){this.backgroundUniforms.u_texture.value=this.getBackgroundTexture(),this.backgroundUniforms.u_tSize.value.set(this.backgroundUniforms.u_texture.value.image.width,this.backgroundUniforms.u_texture.value.image.height),this.size&&this.backgroundUniforms.u_size.value.copy(this.size),this.backgroundUniforms.u_texture.value.isDefault?(this.backgroundUniforms.u_color.value=this.getBackgroundColor(),this.backgroundUniforms.u_opacity.value=this.getBackgroundOpacity()):(this.backgroundUniforms.u_color.value=this.backgroundColor||Hr.backgroundWhiteColor,this.backgroundUniforms.u_opacity.value=this.backgroundOpacity||0===this.backgroundOpacity?this.backgroundOpacity:Hr.backgroundOpaqueOpacity),this.backgroundUniforms.u_backgroundMapping.value=(()=>{switch(this.getBackgroundSize()){case"stretch":return 0;case"contain":return 1;case"cover":return 2}})();const t=this.getBorderRadius();this.backgroundUniforms.u_borderWidth.value=this.getBorderWidth(),this.backgroundUniforms.u_borderColor.value=this.getBorderColor(),this.backgroundUniforms.u_borderOpacity.value=this.getBorderOpacity(),Array.isArray(t)?(this.backgroundUniforms.u_borderRadiusTopLeft.value=t[0],this.backgroundUniforms.u_borderRadiusTopRight.value=t[1],this.backgroundUniforms.u_borderRadiusBottomRight.value=t[2],this.backgroundUniforms.u_borderRadiusBottomLeft.value=t[3]):(this.backgroundUniforms.u_borderRadiusTopLeft.value=t,this.backgroundUniforms.u_borderRadiusTopRight.value=t,this.backgroundUniforms.u_borderRadiusBottomRight.value=t,this.backgroundUniforms.u_borderRadiusBottomLeft.value=t)}updateTextMaterial(){this.textUniforms.u_texture.value=this.getFontTexture(),this.textUniforms.u_color.value=this.getFontColor(),this.textUniforms.u_opacity.value=this.getFontOpacity(),this.textUniforms.u_pxRange.value=this.getFontPXRange(),this.textUniforms.u_useRGSS.value=this.getFontSupersampling()}getBackgroundMaterial(){return(!this.backgroundMaterial||!this.backgroundUniforms)&&(this.backgroundMaterial=this._makeBackgroundMaterial()),this.backgroundMaterial}getFontMaterial(){return(!this.fontMaterial||!this.textUniforms)&&(this.fontMaterial=this._makeTextMaterial()),this.fontMaterial}_makeTextMaterial(){return new fn.ShaderMaterial({uniforms:this.textUniforms,transparent:!0,clipping:!0,vertexShader:qce,fragmentShader:Xce,extensions:{derivatives:!0}})}_makeBackgroundMaterial(){return new fn.ShaderMaterial({uniforms:this.backgroundUniforms,transparent:!0,clipping:!0,vertexShader:Yce,fragmentShader:Zce,extensions:{derivatives:!0}})}updateClippingPlanes(t){const i=void 0!==t?t:this.getClippingPlanes();JSON.stringify(i)!==JSON.stringify(this.clippingPlanes)&&(this.clippingPlanes=i,this.fontMaterial&&(this.fontMaterial.clippingPlanes=this.clippingPlanes),this.backgroundMaterial&&(this.backgroundMaterial.clippingPlanes=this.clippingPlanes))}}}const qce="\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\tgl_Position.z -= 0.00001;\n\n\t#include <clipping_planes_vertex>\n\n}\n",Xce="\n\nuniform sampler2D u_texture;\nuniform vec3 u_color;\nuniform float u_opacity;\nuniform float u_pxRange;\nuniform bool u_useRGSS;\n\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_fragment>\n\n// functions from the original msdf repo:\n// https://github.com/Chlumsky/msdfgen#using-a-multi-channel-distance-field\n\nfloat median(float r, float g, float b) {\n\treturn max(min(r, g), min(max(r, g), b));\n}\n\nfloat screenPxRange() {\n\tvec2 unitRange = vec2(u_pxRange)/vec2(textureSize(u_texture, 0));\n\tvec2 screenTexSize = vec2(1.0)/fwidth(vUv);\n\treturn max(0.5*dot(unitRange, screenTexSize), 1.0);\n}\n\nfloat tap(vec2 offsetUV) {\n\tvec3 msd = texture( u_texture, offsetUV ).rgb;\n\tfloat sd = median(msd.r, msd.g, msd.b);\n\tfloat screenPxDistance = screenPxRange() * (sd - 0.5);\n\tfloat alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\treturn alpha;\n}\n\nvoid main() {\n\n\tfloat alpha;\n\n\tif ( u_useRGSS ) {\n\n\t\t// shader-based supersampling based on https://bgolus.medium.com/sharper-mipmapping-using-shader-based-supersampling-ed7aadb47bec\n\t\t// per pixel partial derivatives\n\t\tvec2 dx = dFdx(vUv);\n\t\tvec2 dy = dFdy(vUv);\n\n\t\t// rotated grid uv offsets\n\t\tvec2 uvOffsets = vec2(0.125, 0.375);\n\t\tvec2 offsetUV = vec2(0.0, 0.0);\n\n\t\t// supersampled using 2x2 rotated grid\n\t\talpha = 0.0;\n\t\toffsetUV.xy = vUv + uvOffsets.x * dx + uvOffsets.y * dy;\n\t\talpha += tap(offsetUV);\n\t\toffsetUV.xy = vUv - uvOffsets.x * dx - uvOffsets.y * dy;\n\t\talpha += tap(offsetUV);\n\t\toffsetUV.xy = vUv + uvOffsets.y * dx - uvOffsets.x * dy;\n\t\talpha += tap(offsetUV);\n\t\toffsetUV.xy = vUv - uvOffsets.y * dx + uvOffsets.x * dy;\n\t\talpha += tap(offsetUV);\n\t\talpha *= 0.25;\n\n\t} else {\n\n\t\talpha = tap( vUv );\n\n\t}\n\n\n\t// apply the opacity\n\talpha *= u_opacity;\n\n\t// this is useful to avoid z-fighting when quads overlap because of kerning\n\tif ( alpha < 0.02) discard;\n\n\n\tgl_FragColor = vec4( u_color, alpha );\n\n\t#include <clipping_planes_fragment>\n\n}\n",Yce="\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvUv = uv;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <clipping_planes_vertex>\n\n}\n",Zce="\n\nuniform sampler2D u_texture;\nuniform vec3 u_color;\nuniform float u_opacity;\n\nuniform float u_borderRadiusTopLeft;\nuniform float u_borderRadiusTopRight;\nuniform float u_borderRadiusBottomLeft;\nuniform float u_borderRadiusBottomRight;\nuniform float u_borderWidth;\nuniform vec3 u_borderColor;\nuniform float u_borderOpacity;\nuniform vec2 u_size;\nuniform vec2 u_tSize;\nuniform int u_backgroundMapping;\n\nvarying vec2 vUv;\n\n#include <clipping_planes_pars_fragment>\n\nfloat getEdgeDist() {\n\tvec2 ndc = vec2( vUv.x * 2.0 - 1.0, vUv.y * 2.0 - 1.0 );\n\tvec2 planeSpaceCoord = vec2( u_size.x * 0.5 * ndc.x, u_size.y * 0.5 * ndc.y );\n\tvec2 corner = u_size * 0.5;\n\tvec2 offsetCorner = corner - abs( planeSpaceCoord );\n\tfloat innerRadDist = min( offsetCorner.x, offsetCorner.y ) * -1.0;\n\tif (vUv.x < 0.5 && vUv.y >= 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusTopLeft, 0.0 ) ) - u_borderRadiusTopLeft;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusTopLeft );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUv.x >= 0.5 && vUv.y >= 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusTopRight, 0.0 ) ) - u_borderRadiusTopRight;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusTopRight );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUv.x >= 0.5 && vUv.y < 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusBottomRight, 0.0 ) ) - u_borderRadiusBottomRight;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusBottomRight );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n\tif (vUv.x < 0.5 && vUv.y < 0.5) {\n\t\tfloat roundedDist = length( max( abs( planeSpaceCoord ) - u_size * 0.5 + u_borderRadiusBottomLeft, 0.0 ) ) - u_borderRadiusBottomLeft;\n\t\tfloat s = step( innerRadDist * -1.0, u_borderRadiusBottomLeft );\n\t\treturn mix( innerRadDist, roundedDist, s );\n\t}\n}\n\nvec4 sampleTexture() {\n\tfloat textureRatio = u_tSize.x / u_tSize.y;\n\tfloat panelRatio = u_size.x / u_size.y;\n\tvec2 uv = vUv;\n\tif ( u_backgroundMapping == 1 ) { // contain\n\t\tif ( textureRatio < panelRatio ) { // repeat on X\n\t\t\tfloat newX = uv.x * ( panelRatio / textureRatio );\n\t\t\tnewX += 0.5 - 0.5 * ( panelRatio / textureRatio );\n\t\t\tuv.x = newX;\n\t\t} else { // repeat on Y\n\t\t\tfloat newY = uv.y * ( textureRatio / panelRatio );\n\t\t\tnewY += 0.5 - 0.5 * ( textureRatio / panelRatio );\n\t\t\tuv.y = newY;\n\t\t}\n\t} else if ( u_backgroundMapping == 2 ) { // cover\n\t\tif ( textureRatio < panelRatio ) { // stretch on Y\n\t\t\tfloat newY = uv.y * ( textureRatio / panelRatio );\n\t\t\tnewY += 0.5 - 0.5 * ( textureRatio / panelRatio );\n\t\t\tuv.y = newY;\n\t\t} else { // stretch on X\n\t\t\tfloat newX = uv.x * ( panelRatio / textureRatio );\n\t\t\tnewX += 0.5 - 0.5 * ( panelRatio / textureRatio );\n\t\t\tuv.x = newX;\n\t\t}\n\t}\n\treturn texture2D( u_texture, uv ).rgba;\n}\n\nvoid main() {\n\n\tfloat edgeDist = getEdgeDist();\n\tfloat change = fwidth( edgeDist );\n\n\tvec4 textureSample = sampleTexture();\n\tvec3 blendedColor = textureSample.rgb * u_color;\n\n\tfloat alpha = smoothstep( change, 0.0, edgeDist );\n\tfloat blendedOpacity = u_opacity * textureSample.a * alpha;\n\n\tvec4 frameColor = vec4( blendedColor, blendedOpacity );\n\n\tif ( u_borderWidth <= 0.0 ) {\n\t\tgl_FragColor = frameColor;\n\t} else {\n\t\tvec4 borderColor = vec4( u_borderColor, u_borderOpacity * alpha );\n\t\tfloat stp = smoothstep( edgeDist + change, edgeDist, u_borderWidth * -1.0 );\n\t\tgl_FragColor = mix( frameColor, borderColor, stp );\n\t}\n\n\t#include <clipping_planes_fragment>\n}\n";class oG extends fn.Mesh{constructor(e){super(new fn.PlaneGeometry,e),this.castShadow=!0,this.receiveShadow=!0,this.name="MeshUI-Frame"}}let IS=null;function Eg(...n){if(!IS)throw new Error("Cannot use mixins with Base null");let e=IS;IS=null;let i,t=n.length;for(;--t>=0;)i=n[t],e=i(e);return e}Eg.withBase=n=>(IS=n,Eg);class T0 extends(Eg.withBase(fn.Object3D)(e2,rG,l2,DS)){constructor(e){super(e),this.isBlock=!0,this.size=new fn.Vector2(1,1),this.frame=new oG(this.getBackgroundMaterial()),this.frame.onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()},this.add(this.frame),this.set(e)}parseParams(){const e=this.getBestFit();"none"!=e&&this.childrenTexts.length?this.calculateBestFit(e):this.childrenTexts.forEach(t=>{t._fitFontSize=void 0})}updateLayout(){const e=this.getWidth(),t=this.getHeight();e&&t?(this.size.set(e,t),this.frame.scale.set(e,t,1),this.frame&&this.updateBackgroundMaterial(),this.frame.renderOrder=this.getParentsNumber(),this.autoLayout&&this.setPosFromParentRecords(),this.childrenInlines.length&&this.computeInlinesPosition(),this.computeChildrenPosition(),this.parentUI&&(this.position.z=this.getOffset())):console.warn("Block got no dimension from its parameters or from children parameters")}updateInner(){this.parentUI&&(this.position.z=this.getOffset()),this.frame&&this.updateBackgroundMaterial()}}function aG(n){return class extends n{constructor(t){super(t),this.isInline=!0}}}function lG(n){let e,t,i,r=0;for(let a=0;a<n.length;++a){const l=n[a];if(l.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=l.array.constructor),e!==l.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===t&&(t=l.itemSize),t!==l.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=l.normalized),i!==l.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=l.array.length}const s=new e(r);let o=0;for(let a=0;a<n.length;++a)s.set(n[a].array,o),o+=n[a].array.length;return new fn.BufferAttribute(s,t,i)}class Jce extends fn.PlaneGeometry{constructor(e,t){const i=e.glyph,r=e.fontSize;super(e.width,e.height),null===i.match(/\s/g)?(-1===t.info.charset.indexOf(i)&&console.error(`The character '${i}' is not included in the font characters set.`),this.mapUVs(t,i),this.transformGeometry(e)):(this.nullifyUVs(),this.scale(0,0,1),this.translate(0,r/2,0))}mapUVs(e,t){const i=e.chars.find(u=>u.char===t),r=e.common,s=i.x/r.scaleW,o=(i.x+i.width)/r.scaleW,a=1-(i.y+i.height)/r.scaleH,l=1-i.y/r.scaleH,c=this.attributes.uv;for(let u=0;u<c.count;u++){let d=c.getX(u),f=c.getY(u);[d,f]=(()=>{switch(u){case 0:return[s,l];case 1:return[o,l];case 2:return[s,a];case 3:return[o,a]}})(),c.setXY(u,d,f)}}nullifyUVs(){const e=this.attributes.uv;for(let t=0;t<e.count;t++)e.setXY(t,0,0)}transformGeometry(e){this.translate(e.width/2,e.height/2,0)}}const c2={getGlyphDimensions:function Qce(n){const e=n.font,t=n.fontSize,i=n.glyph,r=t/e.info.size,s=e.chars.find(d=>d.char===i);let o=s?s.width*r:t/3,a=s?s.height*r:0;return 0===o&&(o=s?s.xadvance*r:t),0===a&&(a=.7*t),"\n"===i&&(o=0),{width:o,height:a,anchor:s?s.yoffset*r:0,xadvance:s?s.xadvance*r:o,xoffset:s?s.xoffset*r:0}},getGlyphPairKerning:function eue(n,e){const t=n._kernings;return t[e]?t[e]:0},buildText:function tue(){const n=[];this.inlines.forEach((i,r)=>{n[r]=new Jce(i,this.getFontFamily()),n[r].translate(i.offsetX,i.offsetY,0)});const e=function Kce(n,e=!1){const t=null!==n[0].index,i=new Set(Object.keys(n[0].attributes)),r=new Set(Object.keys(n[0].morphAttributes)),s={},o={},a=n[0].morphTargetsRelative,l=new fn.BufferGeometry;let c=0;for(let u=0;u<n.length;++u){const d=n[u];let f=0;if(t!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const m in d.attributes){if(!i.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+'. All geometries must have compatible attributes; make sure "'+m+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[m]&&(s[m]=[]),s[m].push(d.attributes[m]),f++}if(f!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". Make sure all geometries have the same number of attributes."),null;if(a!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const m in d.morphAttributes){if(!r.has(m))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===o[m]&&(o[m]=[]),o[m].push(d.morphAttributes[m])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(d.userData),e){let m;if(t)m=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+u+". The geometry must have either an index or a position attribute"),null;m=d.attributes.position.count}l.addGroup(c,m,u),c+=m}}if(t){let u=0;const d=[];for(let f=0;f<n.length;++f){const m=n[f].index;for(let g=0;g<m.count;++g)d.push(m.getX(g)+u);u+=n[f].attributes.position.count}l.setIndex(d)}for(const u in s){const d=lG(s[u]);if(!d)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" attribute."),null;l.setAttribute(u,d)}for(const u in o){const d=o[u][0].length;if(0===d)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[u]=[];for(let f=0;f<d;++f){const m=[];for(let _=0;_<o[u].length;++_)m.push(o[u][_][f]);const g=lG(m);if(!g)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+u+" morphAttribute."),null;l.morphAttributes[u].push(g)}}return l}(n);return new fn.Mesh(e,this.getFontMaterial())}};function nue(n){return class extends n{createText(){const t=this,i=(()=>{if("MSDF"===this.getTextType())return c2.buildText.call(this);console.warn(`'${this.getTextType()}' is not a supported text type.\nSee https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type`)})();return i.renderOrder=1/0,i.onBeforeRender=function(){t.updateClippingPlanes&&t.updateClippingPlanes()},i}getGlyphDimensions(t){if("MSDF"===t.textType)return c2.getGlyphDimensions(t);console.warn(`'${t.textType}' is not a supported text type.\nSee https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type`)}getGlyphPairKerning(t,i,r){if("MSDF"===t)return c2.getGlyphPairKerning(i,r);console.warn(`'${t}' is not a supported text type.\nSee https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type`)}}}const iue=function uG(n){n.children.forEach(e=>{e.children.length>0&&uG(e),n.remove(e),M0.disposeOf(e),e.material&&e.material.dispose(),e.geometry&&e.geometry.dispose()}),n.children=[]};class u2 extends(Eg.withBase(fn.Object3D)(aG,nue,l2,DS)){constructor(e){super(e),this.isText=!0,this.set(e)}parseParams(){this.calculateInlines(this._fitFontSize||this.getFontSize())}updateLayout(){iue(this),this.inlines&&(this.textContent=this.createText(),this.updateTextMaterial(),this.add(this.textContent)),this.position.z=this.getOffset()}updateInner(){this.position.z=this.getOffset(),this.textContent&&this.updateTextMaterial()}calculateInlines(e){const t=this.content,i=this.getFontFamily(),r=this.getBreakOn(),s=this.getTextType(),o=this.getWhiteSpace();if(!i||"string"==typeof i)return void(E0.getFontOf(this)||console.warn("no font was found"));if(!this.content)return void(this.inlines=null);if(!s)return void console.error("You must provide a 'textType' attribute so three-mesh-ui knows how to render your text.\n See https://github.com/felixmariotto/three-mesh-ui/wiki/Using-a-custom-text-type");const a=$5(t,o),l=Array.from?Array.from(a):String(a).split(""),c=e/i.info.size,u=i.common.lineHeight*c,d=i.common.base*c,f=l.map(m=>{const g=this.getGlyphDimensions({textType:s,glyph:m,font:i,fontSize:e});let _=null;return o!==Cg&&(r.includes(m)||m.match(/\s/g))&&(_="possible"),m.match(/\n/g)&&(_=q5(o)),{height:g.height,width:g.width,anchor:g.anchor,xadvance:g.xadvance,xoffset:g.xoffset,lineBreak:_,glyph:m,fontSize:e,lineHeight:u,lineBase:d}});if("none"!==this.getFontKerning())for(let m=1;m<f.length;m++){const g=f[m],v=this.getGlyphPairKerning(s,i,f[m-1].glyph+f[m].glyph);g.kerning=v*(e/i.info.size)}this.inlines=f}}class h2 extends(Eg.withBase(fn.Object3D)(aG,e2,rG,l2,DS)){constructor(e){super(e),this.isInlineBlock=!0,this.size=new fn.Vector2(1,1),this.frame=new oG(this.getBackgroundMaterial()),this.frame.onBeforeRender=()=>{this.updateClippingPlanes&&this.updateClippingPlanes()},this.add(this.frame),this.set(e)}parseParams(){this.width||console.warn("inlineBlock has no width. Set to 0.3 by default"),this.height||console.warn("inlineBlock has no height. Set to 0.3 by default"),this.inlines=[{height:this.height||.3,width:this.width||.3,anchor:0,lineBreak:"possible"}]}updateLayout(){const e=this.getWidth(),t=this.getHeight();if(this.inlines){const i=this.inlines[0];this.position.set(i.width/2,i.height/2,0),this.position.x+=i.offsetX,this.position.y+=i.offsetY}this.size.set(e,t),this.frame.scale.set(e,t,1),this.frame&&this.updateBackgroundMaterial(),this.frame.renderOrder=this.getParentsNumber(),this.childrenInlines.length&&this.computeInlinesPosition(),this.computeChildrenPosition(),this.position.z=this.getOffset()}updateInner(){this.position.z=this.getOffset(),this.frame&&this.updateBackgroundMaterial()}}const ih_fr=[[[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]}],[{width:.2,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ih_eng=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ih_ru=[[[{width:1/12,chars:[{lowerCase:"\u0439",upperCase:"\u0419"},{lowerCase:"q",upperCase:"Q"}]},{width:1/12,chars:[{lowerCase:"\u0446",upperCase:"\u0426"},{lowerCase:"w",upperCase:"W"}]},{width:1/12,chars:[{lowerCase:"\u0443",upperCase:"\u0423"},{lowerCase:"e",upperCase:"E"}]},{width:1/12,chars:[{lowerCase:"\u043a",upperCase:"\u041a"},{lowerCase:"r",upperCase:"R"}]},{width:1/12,chars:[{lowerCase:"\u0435",upperCase:"\u0415"},{lowerCase:"t",upperCase:"T"}]},{width:1/12,chars:[{lowerCase:"\u043d",upperCase:"\u041d"},{lowerCase:"y",upperCase:"Y"}]},{width:1/12,chars:[{lowerCase:"\u0433",upperCase:"\u0413"},{lowerCase:"u",upperCase:"U"}]},{width:1/12,chars:[{lowerCase:"\u0448",upperCase:"\u0428"},{lowerCase:"i",upperCase:"I"}]},{width:1/12,chars:[{lowerCase:"\u0449",upperCase:"\u0429"},{lowerCase:"o",upperCase:"O"}]},{width:1/12,chars:[{lowerCase:"\u0437",upperCase:"\u0417"},{lowerCase:"p",upperCase:"P"}]},{width:1/12,chars:[{lowerCase:"\u0445",upperCase:"\u0425"},{lowerCase:"{",upperCase:"["}]},{width:1/12,chars:[{lowerCase:"\u044a",upperCase:"\u042a"},{lowerCase:"}",upperCase:"]"}]}],[{width:1/12,chars:[{lowerCase:"\u0444",upperCase:"\u0424"},{lowerCase:"a",upperCase:"A"}]},{width:1/12,chars:[{lowerCase:"\u044b",upperCase:"\u042b"},{lowerCase:"s",upperCase:"S"}]},{width:1/12,chars:[{lowerCase:"\u0432",upperCase:"\u0412"},{lowerCase:"d",upperCase:"D"}]},{width:1/12,chars:[{lowerCase:"\u0430",upperCase:"\u0410"},{lowerCase:"f",upperCase:"F"}]},{width:1/12,chars:[{lowerCase:"\u043f",upperCase:"\u041f"},{lowerCase:"g",upperCase:"G"}]},{width:1/12,chars:[{lowerCase:"\u0440",upperCase:"\u0420"},{lowerCase:"h",upperCase:"H"}]},{width:1/12,chars:[{lowerCase:"\u043e",upperCase:"\u041e"},{lowerCase:"j",upperCase:"J"}]},{width:1/12,chars:[{lowerCase:"\u043b",upperCase:"\u041b"},{lowerCase:"k",upperCase:"K"}]},{width:1/12,chars:[{lowerCase:"\u0434",upperCase:"\u0414"},{lowerCase:"l",upperCase:"L"}]},{width:1/12,chars:[{lowerCase:"\u0436",upperCase:"\u0416"},{lowerCase:":",upperCase:";"}]},{width:1/12,chars:[{lowerCase:"\u044d",upperCase:"\u042d"},{lowerCase:'"',upperCase:"'"}]},{width:1/12,chars:[{lowerCase:"\u0451",upperCase:"\u0401"},{lowerCase:"|",upperCase:"\\"}]}],[{width:.125,command:"shift",chars:[{icon:"shift"}]},{width:1/12,chars:[{lowerCase:"\u044f",upperCase:"\u042f"},{lowerCase:"z",upperCase:"Z"}]},{width:1/12,chars:[{lowerCase:"\u0447",upperCase:"\u0427"},{lowerCase:"x",upperCase:"X"}]},{width:1/12,chars:[{lowerCase:"\u0441",upperCase:"\u0421"},{lowerCase:"c",upperCase:"C"}]},{width:1/12,chars:[{lowerCase:"\u043c",upperCase:"\u041c"},{lowerCase:"v",upperCase:"V"}]},{width:1/12,chars:[{lowerCase:"\u0438",upperCase:"\u0418"},{lowerCase:"b",upperCase:"B"}]},{width:1/12,chars:[{lowerCase:"\u0442",upperCase:"\u0422"},{lowerCase:"n",upperCase:"N"}]},{width:1/12,chars:[{lowerCase:"\u044c",upperCase:"\u042c"},{lowerCase:"m",upperCase:"M"}]},{width:1/12,chars:[{lowerCase:"\u0431",upperCase:"\u0411"},{lowerCase:",",upperCase:""}]},{width:1/12,chars:[{lowerCase:"\u044e",upperCase:"\u042e"},{lowerCase:".",upperCase:""}]},{width:.125,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.3,command:"switch",chars:[{lowerCase:"\u0410\u0411\u0412"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ih_de=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"\xfc",upperCase:"\xdc"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"\xf6",upperCase:"\xd6"}]},{width:1/11,chars:[{lowerCase:"\xe4",upperCase:"\xc4"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ih_es=[[[{width:.1,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"l",upperCase:"L"}]},{width:.1,chars:[{lowerCase:"\xf1",upperCase:"\xd1"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ih_el=[[[{width:.1,chars:[{lowerCase:";",upperCase:":"},{lowerCase:"q",upperCase:"Q"}]},{width:.1,chars:[{lowerCase:"\u03c2",upperCase:"\u03c2"},{lowerCase:"w",upperCase:"W"}]},{width:.1,chars:[{lowerCase:"\u03b5",upperCase:"\u0395"},{lowerCase:"e",upperCase:"E"}]},{width:.1,chars:[{lowerCase:"\u03c1",upperCase:"\u03a1"},{lowerCase:"r",upperCase:"R"}]},{width:.1,chars:[{lowerCase:"\u03c4",upperCase:"\u03a4"},{lowerCase:"t",upperCase:"T"}]},{width:.1,chars:[{lowerCase:"\u03c5",upperCase:"\u03a5"},{lowerCase:"y",upperCase:"Y"}]},{width:.1,chars:[{lowerCase:"\u03b8",upperCase:"\u0398"},{lowerCase:"u",upperCase:"U"}]},{width:.1,chars:[{lowerCase:"\u03b9",upperCase:"\u0399"},{lowerCase:"i",upperCase:"I"}]},{width:.1,chars:[{lowerCase:"\u03bf",upperCase:"\u039f"},{lowerCase:"o",upperCase:"O"}]},{width:.1,chars:[{lowerCase:"\u03c0",upperCase:"\u03a0"},{lowerCase:"p",upperCase:"P"}]}],[{width:.1,chars:[{lowerCase:"\u03b1",upperCase:"\u0391"},{lowerCase:"a",upperCase:"A"}]},{width:.1,chars:[{lowerCase:"\u03c3",upperCase:"\u03a3"},{lowerCase:"s",upperCase:"S"}]},{width:.1,chars:[{lowerCase:"\u03b4",upperCase:"\u0394"},{lowerCase:"d",upperCase:"D"}]},{width:.1,chars:[{lowerCase:"\u03c6",upperCase:"\u03a6"},{lowerCase:"f",upperCase:"F"}]},{width:.1,chars:[{lowerCase:"\u03b3",upperCase:"\u0393"},{lowerCase:"g",upperCase:"G"}]},{width:.1,chars:[{lowerCase:"\u03b7",upperCase:"\u0397"},{lowerCase:"h",upperCase:"H"}]},{width:.1,chars:[{lowerCase:"\u03be",upperCase:"\u039e"},{lowerCase:"j",upperCase:"J"}]},{width:.1,chars:[{lowerCase:"\u03ba",upperCase:"\u039a"},{lowerCase:"k",upperCase:"K"}]},{width:.1,chars:[{lowerCase:"\u03bb",upperCase:"\u039b"},{lowerCase:"l",upperCase:"L"}]}],[{width:.15,command:"shift",chars:[{icon:"shift"}]},{width:.1,chars:[{lowerCase:"\u03b6",upperCase:"\u0396"},{lowerCase:"z",upperCase:"Z"}]},{width:.1,chars:[{lowerCase:"\u03c7",upperCase:"\u03a7"},{lowerCase:"x",upperCase:"X"}]},{width:.1,chars:[{lowerCase:"\u03c8",upperCase:"\u03a8"},{lowerCase:"c",upperCase:"C"}]},{width:.1,chars:[{lowerCase:"\u03c9",upperCase:"\u03a9"},{lowerCase:"v",upperCase:"V"}]},{width:.1,chars:[{lowerCase:"\u03b2",upperCase:"\u0392"},{lowerCase:"b",upperCase:"B"}]},{width:.1,chars:[{lowerCase:"\u03bd",upperCase:"\u039d"},{lowerCase:"n",upperCase:"N"}]},{width:.1,chars:[{lowerCase:"\u03bc",upperCase:"\u039c"},{lowerCase:"m",upperCase:"M"}]},{width:.15,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.15,command:"switch-set",chars:[{lowerCase:"eng"}]},{width:.15,command:"switch",chars:[{lowerCase:".?12"}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],ih_nord=[[[{width:1/11,chars:[{lowerCase:"q",upperCase:"Q"}]},{width:1/11,chars:[{lowerCase:"w",upperCase:"W"}]},{width:1/11,chars:[{lowerCase:"e",upperCase:"E"}]},{width:1/11,chars:[{lowerCase:"r",upperCase:"R"}]},{width:1/11,chars:[{lowerCase:"t",upperCase:"T"}]},{width:1/11,chars:[{lowerCase:"y",upperCase:"Y"}]},{width:1/11,chars:[{lowerCase:"u",upperCase:"U"}]},{width:1/11,chars:[{lowerCase:"i",upperCase:"I"}]},{width:1/11,chars:[{lowerCase:"o",upperCase:"O"}]},{width:1/11,chars:[{lowerCase:"p",upperCase:"P"}]},{width:1/11,chars:[{lowerCase:"\xe5",upperCase:"\xc5"}]}],[{width:1/11,chars:[{lowerCase:"a",upperCase:"A"}]},{width:1/11,chars:[{lowerCase:"s",upperCase:"S"}]},{width:1/11,chars:[{lowerCase:"d",upperCase:"D"}]},{width:1/11,chars:[{lowerCase:"f",upperCase:"F"}]},{width:1/11,chars:[{lowerCase:"g",upperCase:"G"}]},{width:1/11,chars:[{lowerCase:"h",upperCase:"H"}]},{width:1/11,chars:[{lowerCase:"j",upperCase:"J"}]},{width:1/11,chars:[{lowerCase:"k",upperCase:"K"}]},{width:1/11,chars:[{lowerCase:"l",upperCase:"L"}]},{width:1/11,chars:[{lowerCase:"\xe6",upperCase:"\xc6"}]},{width:1/11,chars:[{lowerCase:"\xf8",upperCase:"\xd8"}]}],[{width:2/11,command:"shift",chars:[{icon:"shift"}]},{width:1/11,chars:[{lowerCase:"z",upperCase:"Z"}]},{width:1/11,chars:[{lowerCase:"x",upperCase:"X"}]},{width:1/11,chars:[{lowerCase:"c",upperCase:"C"}]},{width:1/11,chars:[{lowerCase:"v",upperCase:"V"}]},{width:1/11,chars:[{lowerCase:"b",upperCase:"B"}]},{width:1/11,chars:[{lowerCase:"n",upperCase:"N"}]},{width:1/11,chars:[{lowerCase:"m",upperCase:"M"}]},{width:2/11,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]],[[{width:.1,chars:[{lowerCase:"1"}]},{width:.1,chars:[{lowerCase:"2"}]},{width:.1,chars:[{lowerCase:"3"}]},{width:.1,chars:[{lowerCase:"4"}]},{width:.1,chars:[{lowerCase:"5"}]},{width:.1,chars:[{lowerCase:"6"}]},{width:.1,chars:[{lowerCase:"7"}]},{width:.1,chars:[{lowerCase:"8"}]},{width:.1,chars:[{lowerCase:"9"}]},{width:.1,chars:[{lowerCase:"0"}]}],[{width:.1,chars:[{lowerCase:"@"}]},{width:.1,chars:[{lowerCase:"#"}]},{width:.1,chars:[{lowerCase:"|"}]},{width:.1,chars:[{lowerCase:"_"}]},{width:.1,chars:[{lowerCase:"&"}]},{width:.1,chars:[{lowerCase:"-"}]},{width:.1,chars:[{lowerCase:"+"}]},{width:.1,chars:[{lowerCase:"("}]},{width:.1,chars:[{lowerCase:")"}]},{width:.1,chars:[{lowerCase:"/"}]}],[{width:.1,chars:[{lowerCase:"="}]},{width:.1,chars:[{lowerCase:"*"}]},{width:.1,chars:[{lowerCase:'"'}]},{width:.1,chars:[{lowerCase:"'"}]},{width:.1,chars:[{lowerCase:":"}]},{width:.1,chars:[{lowerCase:";"}]},{width:.1,chars:[{lowerCase:"!"}]},{width:.1,chars:[{lowerCase:"?"}]},{width:.2,command:"backspace",chars:[{icon:"backspace"}]}],[{width:.2,command:"switch",chars:[{lowerCase:".?12"}]},{width:.1,chars:[{lowerCase:","}]},{width:.4,command:"space",chars:[{icon:"space"}]},{width:.1,chars:[{lowerCase:"."}]},{width:.2,command:"enter",chars:[{icon:"enter"}]}]]],rue=new fn.TextureLoader;class hG extends(Eg.withBase(fn.Object3D)(e2,DS)){constructor(e){let t;if(e||(e={}),e.width||(e.width=1),e.height||(e.height=.4),e.margin||(e.margin=.003),e.padding||(e.padding=.01),super(e),this.currentPanel=0,this.isLowerCase=!0,this.charsetCount=1,e.language||navigator.language)switch(e.language||navigator.language){case"fr":case"fr-CH":case"fr-CA":t=ih_fr;break;case"ru":this.charsetCount=2,t=ih_ru;break;case"de":case"de-DE":case"de-AT":case"de-LI":case"de-CH":t=ih_de;break;case"es":case"es-419":case"es-AR":case"es-CL":case"es-CO":case"es-ES":case"es-CR":case"es-US":case"es-HN":case"es-MX":case"es-PE":case"es-UY":case"es-VE":t=ih_es;break;case"el":this.charsetCount=2,t=ih_el;break;case"nord":t=ih_nord;break;default:t=ih_eng}else t=ih_eng;this.keys=[],this.panels=t.map(i=>{const r=e.height/i.length-2*e.margin,s=new T0({width:e.width+2*e.padding,height:e.height+2*e.padding,offset:0,padding:e.padding,fontFamily:e.fontFamily,fontTexture:e.fontTexture,backgroundColor:e.backgroundColor,backgroundOpacity:e.backgroundOpacity});return s.charset=0,s.add(...i.map(o=>{const a=new T0({width:e.width,height:r,margin:e.margin,contentDirection:"row",justifyContent:"center"});a.frame.visible=!1;const l=[];return o.forEach(c=>{const u=new T0({width:e.width*c.width-2*e.margin,height:r,margin:e.margin,justifyContent:"center",offset:0}),d=c.chars[s.charset].lowerCase||c.chars[s.charset].icon||"undif";if("enter"===d&&e.enterTexture||"shift"===d&&e.shiftTexture||"backspace"===d&&e.backspaceTexture){const f=(()=>{switch(d){case"backspace":return e.backspaceTexture;case"enter":return e.enterTexture;case"shift":return e.shiftTexture;default:console.warn("There is no icon image for this key")}})();rue.load(f,m=>{u.add(new h2({width:.65*u.width,height:.65*u.height,backgroundSize:"contain",backgroundTexture:m}))})}else u.add(new u2({content:d,offset:0}));u.type="Key",u.info=c,u.info.input=d,u.panel=s,l.push(u),this.keys.push(u)}),a.add(...l),a})),s}),this.add(this.panels[0]),this.set(e)}setNextPanel(){this.panels.forEach(e=>{this.remove(e)}),this.currentPanel=(this.currentPanel+1)%this.panels.length,this.add(this.panels[this.currentPanel]),this.update(!0,!0,!0)}setNextCharset(){this.panels[this.currentPanel].charset=(this.panels[this.currentPanel].charset+1)%this.charsetCount,this.keys.forEach(e=>{if(!this.panels[this.currentPanel].getObjectById(e.id))return;const i=e.info.chars[e.panel.charset]||e.info.chars[0],r=this.isLowerCase||!i.upperCase?i.lowerCase:i.upperCase;if(!e.childrenTexts.length)return;const s=e.childrenTexts[0];e.info.input=r,s.set({content:r}),s.update(!0,!0,!0)})}toggleCase(){this.isLowerCase=!this.isLowerCase,this.keys.forEach(e=>{const t=e.info.chars[e.panel.charset]||e.info.chars[0],i=this.isLowerCase||!t.upperCase?t.lowerCase:t.upperCase;if(!e.childrenTexts.length)return;const r=e.childrenTexts[0];e.info.input=i,r.set({content:i}),r.update(!0,!0,!0)})}parseParams(){}updateLayout(){}updateInner(){}}const dG=()=>M0.update(),fG={Block:T0,Text:u2,InlineBlock:h2,Keyboard:hG,FontLibrary:E0,update:dG,TextAlign:bS,Whitespace:wS,JustifyContent:vS,AlignItems:yS,ContentDirection:_S};typeof global<"u"&&(global.ThreeMeshUI=fG);const sue=fG;var n,oue=bo.gO,aue=bo.xv,lue=bo.Vx,Mg=Object.freeze({Linear:Object.freeze({None:function(n){return n},In:function(n){return this.None(n)},Out:function(n){return this.None(n)},InOut:function(n){return this.None(n)}}),Quadratic:Object.freeze({In:function(n){return n*n},Out:function(n){return n*(2-n)},InOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)}}),Cubic:Object.freeze({In:function(n){return n*n*n},Out:function(n){return--n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)}}),Quartic:Object.freeze({In:function(n){return n*n*n*n},Out:function(n){return 1- --n*n*n*n},InOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)}}),Quintic:Object.freeze({In:function(n){return n*n*n*n*n},Out:function(n){return--n*n*n*n*n+1},InOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)}}),Sinusoidal:Object.freeze({In:function(n){return 1-Math.sin((1-n)*Math.PI/2)},Out:function(n){return Math.sin(n*Math.PI/2)},InOut:function(n){return.5*(1-Math.sin(Math.PI*(.5-n)))}}),Exponential:Object.freeze({In:function(n){return 0===n?0:Math.pow(1024,n-1)},Out:function(n){return 1===n?1:1-Math.pow(2,-10*n)},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))}}),Circular:Object.freeze({In:function(n){return 1-Math.sqrt(1-n*n)},Out:function(n){return Math.sqrt(1- --n*n)},InOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)}}),Elastic:Object.freeze({In:function(n){return 0===n?0:1===n?1:-Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)},Out:function(n){return 0===n?0:1===n?1:Math.pow(2,-10*n)*Math.sin(5*(n-.1)*Math.PI)+1},InOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?-.5*Math.pow(2,10*(n-1))*Math.sin(5*(n-1.1)*Math.PI):.5*Math.pow(2,-10*(n-1))*Math.sin(5*(n-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(n){var e=1.70158;return 1===n?1:n*n*((e+1)*n-e)},Out:function(n){var e=1.70158;return 0===n?0:--n*n*((e+1)*n+e)+1},InOut:function(n){var e=2.5949095;return(n*=2)<1?n*n*((e+1)*n-e)*.5:.5*((n-=2)*n*((e+1)*n+e)+2)}}),Bounce:Object.freeze({In:function(n){return 1-Mg.Bounce.Out(1-n)},Out:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},InOut:function(n){return n<.5?.5*Mg.Bounce.In(2*n):.5*Mg.Bounce.Out(2*n-1)+.5}}),generatePow:function(n){return void 0===n&&(n=4),n=(n=n<Number.EPSILON?Number.EPSILON:n)>1e4?1e4:n,{In:function(e){return Math.pow(e,n)},Out:function(e){return 1-Math.pow(1-e,n)},InOut:function(e){return e<.5?Math.pow(2*e,n)/2:(1-Math.pow(2-2*e,n))/2+.5}}}}),Tg=function(){return performance.now()},pG=function(){function n(){this._tweens={},this._tweensAddedDuringUpdate={}}return n.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},n.prototype.removeAll=function(){this._tweens={}},n.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},n.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},n.prototype.update=function(e,t){void 0===e&&(e=Tg()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var s=this._tweens[i[r]];s&&!1===s.update(e,!t)&&!t&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},n}(),Kd={Linear:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=Kd.Utils.Linear;return e<0?s(n[0],n[1],i):e>1?s(n[t],n[t-1],t-i):s(n[r],n[r+1>t?t:r+1],i-r)},Bezier:function(n,e){for(var t=0,i=n.length-1,r=Math.pow,s=Kd.Utils.Bernstein,o=0;o<=i;o++)t+=r(1-e,i-o)*r(e,o)*n[o]*s(i,o);return t},CatmullRom:function(n,e){var t=n.length-1,i=t*e,r=Math.floor(i),s=Kd.Utils.CatmullRom;return n[0]===n[t]?(e<0&&(r=Math.floor(i=t*(1+e))),s(n[(r-1+t)%t],n[r],n[(r+1)%t],n[(r+2)%t],i-r)):e<0?n[0]-(s(n[0],n[0],n[1],n[1],-i)-n[0]):e>1?n[t]-(s(n[t],n[t],n[t-1],n[t-1],i-t)-n[t]):s(n[r?r-1:0],n[r],n[t<r+1?t:r+1],n[t<r+2?t:r+2],i-r)},Utils:{Linear:function(n,e,t){return(e-n)*t+n},Bernstein:function(n,e){var t=Kd.Utils.Factorial;return t(n)/t(e)/t(n-e)},Factorial:(n=[1],function(e){var t=1;if(n[e])return n[e];for(var i=e;i>1;i--)t*=i;return n[e]=t,t}),CatmullRom:function(n,e,t,i,r){var s=.5*(t-n),o=.5*(i-e),a=r*r;return(2*e-2*t+s+o)*(r*a)+(-3*e+3*t-2*s-o)*a+s*r+e}}},d2=function(){function n(){}return n.nextId=function(){return n._nextId++},n._nextId=0,n}(),f2=new pG,RS=function(){function n(e,t){void 0===t&&(t=f2),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Mg.Linear.None,this._interpolationFunction=Kd.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=d2.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return n.prototype.getId=function(){return this._id},n.prototype.isPlaying=function(){return this._isPlaying},n.prototype.isPaused=function(){return this._isPaused},n.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t,this},n.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e,this},n.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},n.prototype.start=function(e,t){if(void 0===e&&(e=Tg()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var i in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},n.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},n.prototype._setupProperties=function(e,t,i,r,s){for(var o in i){var a=e[o],l=Array.isArray(a),c=l?"array":typeof a,u=!l&&Array.isArray(i[o]);if("undefined"!==c&&"function"!==c){if(u){if(0===(d=i[o]).length)continue;for(var f=[a],m=0,g=d.length;m<g;m+=1){var _=this._handleRelativeValue(a,d[m]);if(isNaN(_)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}f.push(_)}u&&(i[o]=f)}if("object"!==c&&!l||!a||u)(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),r[o]=u?i[o].slice().reverse():t[o]||0;else{t[o]=l?[]:{};var v=a;for(var y in v)t[o][y]=v[y];r[o]=l?[]:{};var d=i[o];if(!this._isDynamic){var b={};for(var y in d)b[y]=d[y];i[o]=d=b}this._setupProperties(v,t[o],d,r[o],s)}}}},n.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},n.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},n.prototype.pause=function(e){return void 0===e&&(e=Tg()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},n.prototype.resume=function(e){return void 0===e&&(e=Tg()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},n.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},n.prototype.group=function(e){return void 0===e&&(e=f2),this._group=e,this},n.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},n.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},n.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},n.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},n.prototype.easing=function(e){return void 0===e&&(e=Mg.Linear.None),this._easingFunction=e,this},n.prototype.interpolation=function(e){return void 0===e&&(e=Kd.Linear),this._interpolationFunction=e,this},n.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},n.prototype.onStart=function(e){return this._onStartCallback=e,this},n.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},n.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},n.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},n.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},n.prototype.onStop=function(e){return this._onStopCallback=e,this},n.prototype.update=function(e,t){if(void 0===e&&(e=Tg()),void 0===t&&(t=!0),this._isPaused)return!0;var i,r;if(!this._goToEnd&&!this._isPlaying){if(e>this._startTime+this._duration)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(e-this._startTime)/this._duration;var o=this._easingFunction(r=0===this._duration||r>1?1:r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,o),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)!this._yoyo&&"string"==typeof this._valuesEnd[i]&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?e+this._repeatDelayTime:e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,l=this._chainedTweens.length;a<l;a++)this._chainedTweens[a].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},n.prototype._updateProperties=function(e,t,i,r){for(var s in i)if(void 0!==t[s]){var o=t[s]||0,a=i[s],l=Array.isArray(e[s]),c=Array.isArray(a);!l&&c?e[s]=this._interpolationFunction(a,r):"object"==typeof a&&a?this._updateProperties(e[s],o,a,r):"number"==typeof(a=this._handleRelativeValue(o,a))&&(e[s]=o+(a-o)*r)}},n.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},n.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},n}(),yl=f2,mG=(yl.getAll.bind(yl),yl.removeAll.bind(yl),yl.add.bind(yl),yl.remove.bind(yl),yl.update.bind(yl));const Ni={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};function gG(n){return p2.apply(this,arguments)}function p2(){return p2=zn(function*(n){const e=yield fetch(n);if(e.ok)return e.json();throw new Error(e.statusText)}),p2.apply(this,arguments)}function m2(){return m2=zn(function*(n){if(!n)throw new Error("No basePath supplied");return yield gG(`${n}/profilesList.json`)}),m2.apply(this,arguments)}function g2(){return g2=zn(function*(n,e,t=null,i=!0){if(!n)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const r=yield function mue(n){return m2.apply(this,arguments)}(e);let s;if(n.profiles.some(l=>{const c=r[l];return c&&(s={profileId:l,profilePath:`${e}/${c.path}`,deprecated:!!c.deprecated}),!!s}),!s){if(!t)throw new Error("No matching profile name found");const l=r[t];if(!l)throw new Error(`No matching profile name found and default profile "${t}" missing.`);s={profileId:t,profilePath:`${e}/${l.path}`,deprecated:!!l.deprecated}}const o=yield gG(s.profilePath);let a;if(i){let l;if(l="any"===n.handedness?o.layouts[Object.keys(o.layouts)[0]]:o.layouts[n.handedness],!l)throw new Error(`No matching handedness, ${n.handedness}, in profile ${s.profileId}`);l.assetPath&&(a=s.profilePath.replace("profile.json",l.assetPath))}return{profile:o,assetPath:a}}),g2.apply(this,arguments)}const _ue={xAxis:0,yAxis:0,button:0,state:Ni.ComponentState.DEFAULT};class vue{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===Ni.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(_ue)}updateFromComponent({xAxis:e,yAxis:t,button:i,state:r}){const{normalizedXAxis:s,normalizedYAxis:o}=function yue(n=0,e=0){let t=n,i=e;if(Math.sqrt(n*n+e*e)>1){const o=Math.atan2(e,n);t=Math.cos(o),i=Math.sin(o)}return{normalizedXAxis:.5*t+.5,normalizedYAxis:.5*i+.5}}(e,t);switch(this.componentProperty){case Ni.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?s:.5;break;case Ni.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?o:.5;break;case Ni.ComponentProperty.BUTTON:this.value=this.states.includes(r)?i:0;break;case Ni.ComponentProperty.STATE:this.value=this.valueNodeProperty===Ni.VisualResponseProperty.VISIBILITY?this.states.includes(r):this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class wue{constructor(e,t){if(!(e&&t&&t.visualResponses&&t.gamepadIndices&&0!==Object.keys(t.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(i=>{const r=new vue(t.visualResponses[i]);this.visualResponses[i]=r}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:Ni.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=Ni.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||1===this.values.button?this.values.state=Ni.ComponentState.PRESSED:(t.touched||this.values.button>Ni.ButtonTouchThreshold)&&(this.values.state=Ni.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===Ni.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>Ni.AxisTouchThreshold&&(this.values.state=Ni.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===Ni.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>Ni.AxisTouchThreshold&&(this.values.state=Ni.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class bue{constructor(e,t,i){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=i,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(r=>{this.components[r]=new wue(r,this.layoutDescription.components[r])}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(t=>{e.push(t.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}class Sue extends fi{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e||(this.envMap=e,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)})),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(i=>{const{valueNode:r,minNode:s,maxNode:o,value:a,valueNodeProperty:l}=i;r&&(l===Ni.VisualResponseProperty.VISIBILITY?r.visible=a:l===Ni.VisualResponseProperty.TRANSFORM&&(r.quaternion.slerpQuaternions(s.quaternion,o.quaternion,a),r.position.lerpVectors(s.position,o.position,a)))})}))}}function _G(n,e){(function Eue(n,e){Object.values(n.components).forEach(t=>{const{type:i,touchPointNodeName:r,visualResponses:s}=t;if(i===Ni.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(r),t.touchPointNode){const o=new pg(.001),a=new wi({color:255}),l=new Ae(o,a);t.touchPointNode.add(l)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(s).forEach(o=>{const{valueNodeName:a,minNodeName:l,maxNodeName:c,valueNodeProperty:u}=o;if(u===Ni.VisualResponseProperty.TRANSFORM){if(o.minNode=e.getObjectByName(l),o.maxNode=e.getObjectByName(c),!o.minNode)return void console.warn(`Could not find ${l} in the model`);if(!o.maxNode)return void console.warn(`Could not find ${c} in the model`)}o.valueNode=e.getObjectByName(a),o.valueNode||console.warn(`Could not find ${a} in the model`)})})})(n.motionController,e),n.envMap&&e.traverse(t=>{t.isMesh&&(t.material.envMap=n.envMap,t.material.needsUpdate=!0)}),n.add(e)}class Mue{constructor(e=null){this.gltfLoader=e,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new T5)}createControllerModel(e){const t=new Sue;let i=null;return e.addEventListener("connected",r=>{const s=r.data;"tracked-pointer"!==s.targetRayMode||!s.gamepad||function gue(n,e){return g2.apply(this,arguments)}(s,this.path,"generic-trigger").then(({profile:o,assetPath:a})=>{t.motionController=new bue(s,o,a);const l=this._assetCache[t.motionController.assetUrl];if(l)i=l.scene.clone(),_G(t,i);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,c=>{this._assetCache[t.motionController.assetUrl]=c,i=c.scene.clone(),_G(t,i)},null,()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)})}}).catch(o=>{console.warn(o)})}),e.addEventListener("disconnected",()=>{t.motionController=null,t.remove(i),i=null}),t}}class Tue{constructor(){this.interactionObjects=[],this.objectUnselectedColor="red",this.objectSelectedColor="blue",this.currentSession=null}initThree(e,t){this.rendererContainerElement=e,this.scene=new V1;const r=(new Z4).load(["assets/skyboxes/afterrain/afterrain_ft.jpg","assets/skyboxes/afterrain/afterrain_bk.jpg","assets/skyboxes/afterrain/afterrain_up.jpg","assets/skyboxes/afterrain/afterrain_dn.jpg","assets/skyboxes/afterrain/afterrain_rt.jpg","assets/skyboxes/afterrain/afterrain_lf.jpg"]);this.scene.background=r,this.camera=new fr(75,this.rendererContainerElement.clientWidth/this.rendererContainerElement.clientHeight,.1,5e3),this.audioListener=new _le,this.camera.add(this.audioListener),this.renderer=new $R({antialias:!0}),this.renderer.xr.enabled=!0,this.renderer.setSize(this.rendererContainerElement.clientWidth,this.rendererContainerElement.clientHeight),this.rendererContainerElement.appendChild(this.renderer.domElement),this.renderer.xr.addEventListener("sessionstart",()=>{this.renderer.xr.getCamera().position.copy(this.camera.position),this.renderer.xr.getCamera().lookAt(this.orbitControls.target)}),this.renderer.xr.addEventListener("sessionend",()=>{});const s=new zR(this.renderer);this.scene.environment=s.fromScene(new Rce,0).texture,this.orbitControls=new E5(this.camera,this.renderer.domElement),this.orbitControls.addEventListener("change",()=>{this.renderer.render(this.scene,this.camera)}),this.orbitControls.enableZoom=!0,this.orbitControls.update(),this.interactionManager=new Ice(this.renderer,this.camera,this.renderer.domElement),this.renderer.setAnimationLoop(()=>{lue(),this.controllers&&this.controllers.forEach(a=>{this.handleController(a)}),this.orbitControls.update(),this.interactionManager.update(),this.renderer.render(this.scene,this.camera),mG()}),this.gltfLoader=new T5,this.stlLoader=new vce,this.objLoader=new Ece,this.textureLoader=new CP,this.fontLoader=new Mce;const o=new Nle(100,100,16711680);this.scene.add(o),t()}handleController(e){if(e.userData.selectPressed)if(e.userData.selectPressedPrev){if(this.selectedObject){const t=e.getWorldDirection(new O).multiplyScalar(this.selectedObjectDistance).negate();this.selectedObject.position.copy(e.position.clone().add(t))}}else{e.children[0].scale.z=10;const t=new It;t.extractRotation(e.matrixWorld);const i=new PP;i.ray.origin.setFromMatrixPosition(e.matrixWorld),i.ray.direction.set(0,0,-1).applyMatrix4(t);const r=i.intersectObjects(this.interactionObjects);r.length>0&&(e.children[0].scale.z=r[0].distance,this.selectedObject=r[0].object,this.selectedObject.material.color=this.objectSelectedColor,this.selectedObjectDistance=this.selectedObject.position.distanceTo(e.position))}else e.userData.selectPressedPrev&&(e.children[0].scale.z=10,null!=this.selectedObject&&(this.selectedObject.material.color=this.objectUnselectedColor,this.selectedObject=null));e.userData.selectPressedPrev=e.userData.selectPressed}resizeCanvasToDisplaySize(){const e=this.renderer.domElement,t=e.clientWidth,i=e.clientHeight;this.renderer.setSize(t,i,!1),this.camera.aspect=t/i,this.camera.updateProjectionMatrix()}onSelectStart(e){console.log("onSelectStart",e)}onSelectEnd(e){console.log("onSelectEnd",e)}buildControllers(){const e=new Mue,t=(new Vt).setFromPoints([new O(0,0,0),new O(0,0,-1)]),i=new rs(t);i.scale.z=10;const r=[];for(let s=0;s<2;s++){const o=this.renderer.xr.getController(s);o.add(i.clone()),o.userData.selectPressed=!1,o.userData.selectPressedPrev=!1,this.scene.add(o),r.push(o);const a=this.renderer.xr.getControllerGrip(s);a.add(e.createControllerModel(a)),this.scene.add(a)}return r}startVr(){var e=this;this.controllers=this.buildControllers(),this.controllers.forEach(i=>{i.addEventListener("selectstart",this.onSelectStart),i.addEventListener("selectend",this.onSelectEnd)}),window.navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]}).then(function(){var i=zn(function*(r){yield e.renderer.xr.setSession(r),e.currentSession=r});return function(r){return i.apply(this,arguments)}}())}}class Aue extends oS{constructor(e,t={}){const i=t.font;if(void 0===i)super();else{const r=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}var Jd=hf(990);class rh{constructor(e,t,i){this.x=e,this.y=t,this.z=i}static FromJson(e){return new rh(e.x,e.y,e.z)}}let vl=(()=>{class n{static GenerateGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const i=16*Math.random()|0;return("x"===t?i:3&i|8).toString(16)})}randomIntFromInterval(t,i){return Math.random()*(i-t+1)+t}static deepEqual(t,i){const r=Object.keys(t),s=Object.keys(i);if(r.length!==s.length)return!1;for(const o of r){const a=t[o],l=i[o],c=this.isObject(a)&&this.isObject(l);if(c&&!this.deepEqual(a,l)||!c&&a!==l)return!1}return!0}static isObject(t){return null!=t&&"object"==typeof t}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Due=[0,2e3,1e4,3e4,null];class yG{constructor(e){this._retryDelays=void 0!==e?[...e,null]:Due}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}}let A0=(()=>{class n{}return n.Authorization="Authorization",n.Cookie="Cookie",n})();class vG{constructor(e,t,i){this.statusCode=e,this.statusText=t,this.content=i}}class PS{get(e,t){return this.send({...t,method:"GET",url:e})}post(e,t){return this.send({...t,method:"POST",url:e})}delete(e,t){return this.send({...t,method:"DELETE",url:e})}getCookieString(e){return""}}class Iue extends PS{constructor(e,t){super(),this._innerClient=e,this._accessTokenFactory=t}send(e){var t=this;return zn(function*(){let i=!0;t._accessTokenFactory&&(!t._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,t._accessToken=yield t._accessTokenFactory()),t._setAuthorizationHeader(e);const r=yield t._innerClient.send(e);return i&&401===r.statusCode&&t._accessTokenFactory?(t._accessToken=yield t._accessTokenFactory(),t._setAuthorizationHeader(e),yield t._innerClient.send(e)):r})()}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[A0.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[A0.Authorization]&&delete e.headers[A0.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}}class Ag extends Error{constructor(e,t){const i=new.target.prototype;super(`${e}: Status code '${t}'`),this.statusCode=t,this.__proto__=i}}class _2 extends Error{constructor(e="A timeout occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Oa extends Error{constructor(e="An abort occurred."){const t=new.target.prototype;super(e),this.__proto__=t}}class Rue extends Error{constructor(e,t){const i=new.target.prototype;super(e),this.transport=t,this.errorType="UnsupportedTransportError",this.__proto__=i}}class Pue extends Error{constructor(e,t){const i=new.target.prototype;super(e),this.transport=t,this.errorType="DisabledTransportError",this.__proto__=i}}class Oue extends Error{constructor(e,t){const i=new.target.prototype;super(e),this.transport=t,this.errorType="FailedToStartTransportError",this.__proto__=i}}class Lue extends Error{constructor(e){const t=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=t}}class Nue extends Error{constructor(e,t){const i=new.target.prototype;super(e),this.innerErrors=t,this.__proto__=i}}var _e=function(n){return n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None",n}(_e||{});class D0{constructor(){}log(e,t){}}D0.instance=new D0;const Fue="7.0.12";class Rr{static isRequired(e,t){if(null==e)throw new Error(`The '${t}' argument is required.`)}static isNotEmpty(e,t){if(!e||e.match(/^\s*$/))throw new Error(`The '${t}' argument should not be empty.`)}static isIn(e,t,i){if(!(e in t))throw new Error(`Unknown ${i} value: ${e}.`)}}class Pr{static get isBrowser(){return"object"==typeof window&&"object"==typeof window.document}static get isWebWorker(){return"object"==typeof self&&"importScripts"in self}static get isReactNative(){return"object"==typeof window&&typeof window.document>"u"}static get isNode(){return!this.isBrowser&&!this.isWebWorker&&!this.isReactNative}}function I0(n,e){let t="";return R0(n)?(t=`Binary data of length ${n.byteLength}`,e&&(t+=`. Content: '${function kue(n){const e=new Uint8Array(n);let t="";return e.forEach(i=>{t+=`0x${i<16?"0":""}${i.toString(16)} `}),t.substr(0,t.length-1)}(n)}'`)):"string"==typeof n&&(t=`String data of length ${n.length}`,e&&(t+=`. Content: '${n}'`)),t}function R0(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&"ArrayBuffer"===n.constructor.name)}function wG(n,e,t,i,r,s){return y2.apply(this,arguments)}function y2(){return y2=zn(function*(n,e,t,i,r,s){const o={},[a,l]=Dg();o[a]=l,n.log(_e.Trace,`(${e} transport) sending data. ${I0(r,s.logMessageContent)}.`);const c=R0(r)?"arraybuffer":"text",u=yield t.post(i,{content:r,headers:{...o,...s.headers},responseType:c,timeout:s.timeout,withCredentials:s.withCredentials});n.log(_e.Trace,`(${e} transport) request complete. Response status: ${u.statusCode}.`)}),y2.apply(this,arguments)}class Bue{constructor(e,t){this._subject=e,this._observer=t}dispose(){const e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),0===this._subject.observers.length&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(t=>{})}}class OS{constructor(e){this._minLevel=e,this.out=console}log(e,t){if(e>=this._minLevel){const i=`[${(new Date).toISOString()}] ${_e[e]}: ${t}`;switch(e){case _e.Critical:case _e.Error:this.out.error(i);break;case _e.Warning:this.out.warn(i);break;case _e.Information:this.out.info(i);break;default:this.out.log(i)}}}}function Dg(){let n="X-SignalR-User-Agent";return Pr.isNode&&(n="User-Agent"),[n,Vue(Fue,zue(),Pr.isNode?"NodeJS":"Browser",Hue())]}function Vue(n,e,t,i){let r="Microsoft SignalR/";const s=n.split(".");return r+=`${s[0]}.${s[1]}`,r+=` (${n}; `,r+=e&&""!==e?`${e}; `:"Unknown OS; ",r+=`${t}`,r+=i?`; ${i}`:"; Unknown Runtime Version",r+=")",r}function zue(){if(!Pr.isNode)return"";switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}}function Hue(){if(Pr.isNode)return process.versions.node}function bG(n){return n.stack?n.stack:n.message?n.message:`${n}`}class jue extends PS{constructor(e){if(super(),this._logger=e,typeof fetch>"u"){const t=require;this._jar=new(t("tough-cookie").CookieJar),this._fetchType=t("node-fetch"),this._fetchType=t("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(function Wue(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}());if(typeof AbortController>"u"){const t=require;this._abortControllerType=t("abort-controller")}else this._abortControllerType=AbortController}send(e){var t=this;return zn(function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new Oa;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");const i=new t._abortControllerType;let r;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),r=new Oa});let o,s=null;e.timeout&&(s=setTimeout(()=>{i.abort(),t._logger.log(_e.Warning,"Timeout from HTTP request."),r=new _2},e.timeout)),""===e.content&&(e.content=void 0),e.content&&(e.headers=e.headers||{},e.headers["Content-Type"]=R0(e.content)?"application/octet-stream":"text/plain;charset=UTF-8");try{o=yield t._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:!0===e.withCredentials?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...e.headers},method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(c){throw r||(t._logger.log(_e.Warning,`Error from HTTP request. ${c}.`),c)}finally{s&&clearTimeout(s),e.abortSignal&&(e.abortSignal.onabort=null)}if(!o.ok){const c=yield xG(o,"text");throw new Ag(c||o.statusText,o.status)}const l=yield xG(o,e.responseType);return new vG(o.status,o.statusText,l)})()}getCookieString(e){let t="";return Pr.isNode&&this._jar&&this._jar.getCookies(e,(i,r)=>t=r.join("; ")),t}}function xG(n,e){let t;switch(e){case"arraybuffer":t=n.arrayBuffer();break;case"text":default:t=n.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`)}return t}class $ue extends PS{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Oa):e.method?e.url?new Promise((t,i)=>{const r=new XMLHttpRequest;r.open(e.method,e.url,!0),r.withCredentials=void 0===e.withCredentials||e.withCredentials,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),""===e.content&&(e.content=void 0),e.content&&(R0(e.content)?r.setRequestHeader("Content-Type","application/octet-stream"):r.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const s=e.headers;s&&Object.keys(s).forEach(o=>{r.setRequestHeader(o,s[o])}),e.responseType&&(r.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{r.abort(),i(new Oa)}),e.timeout&&(r.timeout=e.timeout),r.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),r.status>=200&&r.status<300?t(new vG(r.status,r.statusText,r.response||r.responseText)):i(new Ag(r.response||r.responseText||r.statusText,r.status))},r.onerror=()=>{this._logger.log(_e.Warning,`Error from HTTP request. ${r.status}: ${r.statusText}.`),i(new Ag(r.statusText,r.status))},r.ontimeout=()=>{this._logger.log(_e.Warning,"Timeout from HTTP request."),i(new _2)},r.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class que extends PS{constructor(e){if(super(),typeof fetch<"u"||Pr.isNode)this._httpClient=new jue(e);else{if(!(typeof XMLHttpRequest<"u"))throw new Error("No usable HttpClient found.");this._httpClient=new $ue(e)}}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new Oa):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}}var Gr=function(n){return n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling",n}(Gr||{}),Rs=function(n){return n[n.Text=1]="Text",n[n.Binary=2]="Binary",n}(Rs||{});class Xue{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}}class CG{constructor(e,t,i){this._httpClient=e,this._logger=t,this._pollAbort=new Xue,this._options=i,this._running=!1,this.onreceive=null,this.onclose=null}get pollAborted(){return this._pollAbort.aborted}connect(e,t){var i=this;return zn(function*(){if(Rr.isRequired(e,"url"),Rr.isRequired(t,"transferFormat"),Rr.isIn(t,Rs,"transferFormat"),i._url=e,i._logger.log(_e.Trace,"(LongPolling transport) Connecting."),t===Rs.Binary&&typeof XMLHttpRequest<"u"&&"string"!=typeof(new XMLHttpRequest).responseType)throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[r,s]=Dg(),o={[r]:s,...i._options.headers},a={abortSignal:i._pollAbort.signal,headers:o,timeout:1e5,withCredentials:i._options.withCredentials};t===Rs.Binary&&(a.responseType="arraybuffer");const l=`${e}&_=${Date.now()}`;i._logger.log(_e.Trace,`(LongPolling transport) polling: ${l}.`);const c=yield i._httpClient.get(l,a);200!==c.statusCode?(i._logger.log(_e.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),i._closeError=new Ag(c.statusText||"",c.statusCode),i._running=!1):i._running=!0,i._receiving=i._poll(i._url,a)})()}_poll(e,t){var i=this;return zn(function*(){try{for(;i._running;)try{const r=`${e}&_=${Date.now()}`;i._logger.log(_e.Trace,`(LongPolling transport) polling: ${r}.`);const s=yield i._httpClient.get(r,t);204===s.statusCode?(i._logger.log(_e.Information,"(LongPolling transport) Poll terminated by server."),i._running=!1):200!==s.statusCode?(i._logger.log(_e.Error,`(LongPolling transport) Unexpected response code: ${s.statusCode}.`),i._closeError=new Ag(s.statusText||"",s.statusCode),i._running=!1):s.content?(i._logger.log(_e.Trace,`(LongPolling transport) data received. ${I0(s.content,i._options.logMessageContent)}.`),i.onreceive&&i.onreceive(s.content)):i._logger.log(_e.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(r){i._running?r instanceof _2?i._logger.log(_e.Trace,"(LongPolling transport) Poll timed out, reissuing."):(i._closeError=r,i._running=!1):i._logger.log(_e.Trace,`(LongPolling transport) Poll errored after shutdown: ${r.message}`)}}finally{i._logger.log(_e.Trace,"(LongPolling transport) Polling complete."),i.pollAborted||i._raiseOnClose()}})()}send(e){var t=this;return zn(function*(){return t._running?wG(t._logger,"LongPolling",t._httpClient,t._url,e,t._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){var e=this;return zn(function*(){e._logger.log(_e.Trace,"(LongPolling transport) Stopping polling."),e._running=!1,e._pollAbort.abort();try{yield e._receiving,e._logger.log(_e.Trace,`(LongPolling transport) sending DELETE request to ${e._url}.`);const t={},[i,r]=Dg();t[i]=r;const s={headers:{...t,...e._options.headers},timeout:e._options.timeout,withCredentials:e._options.withCredentials};yield e._httpClient.delete(e._url,s),e._logger.log(_e.Trace,"(LongPolling transport) DELETE request sent.")}finally{e._logger.log(_e.Trace,"(LongPolling transport) Stop finished."),e._raiseOnClose()}})()}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(_e.Trace,e),this.onclose(this._closeError)}}}class Yue{constructor(e,t,i,r){this._httpClient=e,this._accessToken=t,this._logger=i,this._options=r,this.onreceive=null,this.onclose=null}connect(e,t){var i=this;return zn(function*(){return Rr.isRequired(e,"url"),Rr.isRequired(t,"transferFormat"),Rr.isIn(t,Rs,"transferFormat"),i._logger.log(_e.Trace,"(SSE transport) Connecting."),i._url=e,i._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(i._accessToken)}`),new Promise((r,s)=>{let a,o=!1;if(t===Rs.Text){if(Pr.isBrowser||Pr.isWebWorker)a=new i._options.EventSource(e,{withCredentials:i._options.withCredentials});else{const l=i._httpClient.getCookieString(e),c={};c.Cookie=l;const[u,d]=Dg();c[u]=d,a=new i._options.EventSource(e,{withCredentials:i._options.withCredentials,headers:{...c,...i._options.headers}})}try{a.onmessage=l=>{if(i.onreceive)try{i._logger.log(_e.Trace,`(SSE transport) data received. ${I0(l.data,i._options.logMessageContent)}.`),i.onreceive(l.data)}catch(c){return void i._close(c)}},a.onerror=l=>{o?i._close():s(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},a.onopen=()=>{i._logger.log(_e.Information,`SSE connected to ${i._url}`),i._eventSource=a,o=!0,r()}}catch(l){return void s(l)}}else s(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"))})})()}send(e){var t=this;return zn(function*(){return t._eventSource?wG(t._logger,"SSE",t._httpClient,t._url,e,t._options):Promise.reject(new Error("Cannot send until the transport is connected"))})()}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}}class Zue{constructor(e,t,i,r,s,o){this._logger=i,this._accessTokenFactory=t,this._logMessageContent=r,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}connect(e,t){var i=this;return zn(function*(){let r;return Rr.isRequired(e,"url"),Rr.isRequired(t,"transferFormat"),Rr.isIn(t,Rs,"transferFormat"),i._logger.log(_e.Trace,"(WebSockets transport) Connecting."),i._accessTokenFactory&&(r=yield i._accessTokenFactory()),new Promise((s,o)=>{let a;e=e.replace(/^http/,"ws");const l=i._httpClient.getCookieString(e);let c=!1;if(Pr.isNode||Pr.isReactNative){const u={},[d,f]=Dg();u[d]=f,r&&(u[A0.Authorization]=`Bearer ${r}`),l&&(u[A0.Cookie]=l),a=new i._webSocketConstructor(e,void 0,{headers:{...u,...i._headers}})}else r&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(r)}`);a||(a=new i._webSocketConstructor(e)),t===Rs.Binary&&(a.binaryType="arraybuffer"),a.onopen=u=>{i._logger.log(_e.Information,`WebSocket connected to ${e}.`),i._webSocket=a,c=!0,s()},a.onerror=u=>{let d=null;d=typeof ErrorEvent<"u"&&u instanceof ErrorEvent?u.error:"There was an error with the transport",i._logger.log(_e.Information,`(WebSockets transport) ${d}.`)},a.onmessage=u=>{if(i._logger.log(_e.Trace,`(WebSockets transport) data received. ${I0(u.data,i._logMessageContent)}.`),i.onreceive)try{i.onreceive(u.data)}catch(d){return void i._close(d)}},a.onclose=u=>{if(c)i._close(u);else{let d=null;d=typeof ErrorEvent<"u"&&u instanceof ErrorEvent?u.error:"WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",o(new Error(d))}}})})()}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(_e.Trace,`(WebSockets transport) sending data. ${I0(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(_e.Trace,"(WebSockets transport) socket closed."),this.onclose&&(!this._isCloseEvent(e)||!1!==e.wasClean&&1e3===e.code?e instanceof Error?this.onclose(e):this.onclose():this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)))}_isCloseEvent(e){return e&&"boolean"==typeof e.wasClean&&"number"==typeof e.code}}class Kue{constructor(e,t={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Rr.isRequired(e,"url"),this._logger=function Uue(n){return void 0===n?new OS(_e.Information):null===n?D0.instance:void 0!==n.log?n:new OS(n)}(t.logger),this.baseUrl=this._resolveUrl(e),(t=t||{}).logMessageContent=void 0!==t.logMessageContent&&t.logMessageContent,"boolean"!=typeof t.withCredentials&&void 0!==t.withCredentials)throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");t.withCredentials=void 0===t.withCredentials||t.withCredentials,t.timeout=void 0===t.timeout?1e5:t.timeout;let i=null,r=null;if(Pr.isNode){const s=require;i=s("ws"),r=s("eventsource")}!Pr.isNode&&typeof WebSocket<"u"&&!t.WebSocket?t.WebSocket=WebSocket:Pr.isNode&&!t.WebSocket&&i&&(t.WebSocket=i),!Pr.isNode&&typeof EventSource<"u"&&!t.EventSource?t.EventSource=EventSource:Pr.isNode&&!t.EventSource&&typeof r<"u"&&(t.EventSource=r),this._httpClient=new Iue(t.httpClient||new que(this._logger),t.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=t,this.onreceive=null,this.onclose=null}start(e){var t=this;return zn(function*(){if(Rr.isIn(e=e||Rs.Binary,Rs,"transferFormat"),t._logger.log(_e.Debug,`Starting connection with transfer format '${Rs[e]}'.`),"Disconnected"!==t._connectionState)return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(t._connectionState="Connecting",t._startInternalPromise=t._startInternal(e),yield t._startInternalPromise,"Disconnecting"===t._connectionState){const i="Failed to start the HttpConnection before stop() was called.";return t._logger.log(_e.Error,i),yield t._stopPromise,Promise.reject(new Oa(i))}if("Connected"!==t._connectionState){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return t._logger.log(_e.Error,i),Promise.reject(new Oa(i))}t._connectionStarted=!0})()}send(e){return"Connected"!==this._connectionState?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new v2(this.transport)),this._sendQueue.send(e))}stop(e){var t=this;return zn(function*(){return"Disconnected"===t._connectionState?(t._logger.log(_e.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve()):"Disconnecting"===t._connectionState?(t._logger.log(_e.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),t._stopPromise):(t._connectionState="Disconnecting",t._stopPromise=new Promise(i=>{t._stopPromiseResolver=i}),yield t._stopInternal(e),void(yield t._stopPromise))})()}_stopInternal(e){var t=this;return zn(function*(){t._stopError=e;try{yield t._startInternalPromise}catch{}if(t.transport){try{yield t.transport.stop()}catch(i){t._logger.log(_e.Error,`HttpConnection.transport.stop() threw error '${i}'.`),t._stopConnection()}t.transport=void 0}else t._logger.log(_e.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})()}_startInternal(e){var t=this;return zn(function*(){let i=t.baseUrl;t._accessTokenFactory=t._options.accessTokenFactory,t._httpClient._accessTokenFactory=t._accessTokenFactory;try{if(t._options.skipNegotiation){if(t._options.transport!==Gr.WebSockets)throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");t.transport=t._constructTransport(Gr.WebSockets),yield t._startTransport(i,e)}else{let r=null,s=0;do{if(r=yield t._getNegotiationResponse(i),"Disconnecting"===t._connectionState||"Disconnected"===t._connectionState)throw new Oa("The connection was stopped during negotiation.");if(r.error)throw new Error(r.error);if(r.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(r.url&&(i=r.url),r.accessToken){const o=r.accessToken;t._accessTokenFactory=()=>o,t._httpClient._accessToken=o,t._httpClient._accessTokenFactory=void 0}s++}while(r.url&&s<100);if(100===s&&r.url)throw new Error("Negotiate redirection limit exceeded.");yield t._createTransport(i,t._options.transport,r,e)}t.transport instanceof CG&&(t.features.inherentKeepAlive=!0),"Connecting"===t._connectionState&&(t._logger.log(_e.Debug,"The HttpConnection connected successfully."),t._connectionState="Connected")}catch(r){return t._logger.log(_e.Error,"Failed to start the connection: "+r),t._connectionState="Disconnected",t.transport=void 0,t._stopPromiseResolver(),Promise.reject(r)}})()}_getNegotiationResponse(e){var t=this;return zn(function*(){const i={},[r,s]=Dg();i[r]=s;const o=t._resolveNegotiateUrl(e);t._logger.log(_e.Debug,`Sending negotiation request: ${o}.`);try{const a=yield t._httpClient.post(o,{content:"",headers:{...i,...t._options.headers},timeout:t._options.timeout,withCredentials:t._options.withCredentials});if(200!==a.statusCode)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${a.statusCode}'`));const l=JSON.parse(a.content);return(!l.negotiateVersion||l.negotiateVersion<1)&&(l.connectionToken=l.connectionId),l}catch(a){let l="Failed to complete negotiation with the server: "+a;return a instanceof Ag&&404===a.statusCode&&(l+=" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),t._logger.log(_e.Error,l),Promise.reject(new Lue(l))}})()}_createConnectUrl(e,t){return t?e+(-1===e.indexOf("?")?"?":"&")+`id=${t}`:e}_createTransport(e,t,i,r){var s=this;return zn(function*(){let o=s._createConnectUrl(e,i.connectionToken);if(s._isITransport(t))return s._logger.log(_e.Debug,"Connection was provided an instance of ITransport, using that directly."),s.transport=t,yield s._startTransport(o,r),void(s.connectionId=i.connectionId);const a=[],l=i.availableTransports||[];let c=i;for(const u of l){const d=s._resolveTransportOrError(u,t,r);if(d instanceof Error)a.push(`${u.transport} failed:`),a.push(d);else if(s._isITransport(d)){if(s.transport=d,!c){try{c=yield s._getNegotiationResponse(e)}catch(f){return Promise.reject(f)}o=s._createConnectUrl(e,c.connectionToken)}try{return yield s._startTransport(o,r),void(s.connectionId=c.connectionId)}catch(f){if(s._logger.log(_e.Error,`Failed to start the transport '${u.transport}': ${f}`),c=void 0,a.push(new Oue(`${u.transport} failed: ${f}`,Gr[u.transport])),"Connecting"!==s._connectionState){const m="Failed to select transport before stop() was called.";return s._logger.log(_e.Debug,m),Promise.reject(new Oa(m))}}}}return Promise.reject(a.length>0?new Nue(`Unable to connect to the server with any of the available transports. ${a.join(" ")}`,a):new Error("None of the transports supported by the client are supported by the server."))})()}_constructTransport(e){switch(e){case Gr.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Zue(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Gr.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Yue(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Gr.LongPolling:return new CG(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,t){return this.transport.onreceive=this.onreceive,this.transport.onclose=i=>this._stopConnection(i),this.transport.connect(e,t)}_resolveTransportOrError(e,t,i){const r=Gr[e.transport];if(null==r)return this._logger.log(_e.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(!function Jue(n,e){return!n||0!=(e&n)}(t,r))return this._logger.log(_e.Debug,`Skipping transport '${Gr[r]}' because it was disabled by the client.`),new Pue(`'${Gr[r]}' is disabled by the client.`,r);if(!(e.transferFormats.map(o=>Rs[o]).indexOf(i)>=0))return this._logger.log(_e.Debug,`Skipping transport '${Gr[r]}' because it does not support the requested transfer format '${Rs[i]}'.`),new Error(`'${Gr[r]}' does not support ${Rs[i]}.`);if(r===Gr.WebSockets&&!this._options.WebSocket||r===Gr.ServerSentEvents&&!this._options.EventSource)return this._logger.log(_e.Debug,`Skipping transport '${Gr[r]}' because it is not supported in your environment.'`),new Rue(`'${Gr[r]}' is not supported in your environment.`,r);this._logger.log(_e.Debug,`Selecting transport '${Gr[r]}'.`);try{return this._constructTransport(r)}catch(o){return o}}_isITransport(e){return e&&"object"==typeof e&&"connect"in e}_stopConnection(e){if(this._logger.log(_e.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,"Disconnected"!==this._connectionState){if("Connecting"===this._connectionState)throw this._logger.log(_e.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if("Disconnecting"===this._connectionState&&this._stopPromiseResolver(),e?this._logger.log(_e.Error,`Connection disconnected with error '${e}'.`):this._logger.log(_e.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(t=>{this._logger.log(_e.Error,`TransportSendQueue.stop() threw error '${t}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(t){this._logger.log(_e.Error,`HttpConnection.onclose(${e}) threw error '${t}'.`)}}}else this._logger.log(_e.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`)}_resolveUrl(e){if(0===e.lastIndexOf("https://",0)||0===e.lastIndexOf("http://",0))return e;if(!Pr.isBrowser)throw new Error(`Cannot resolve '${e}'.`);const t=window.document.createElement("a");return t.href=e,this._logger.log(_e.Information,`Normalizing '${e}' to '${t.href}'.`),t.href}_resolveNegotiateUrl(e){const t=e.indexOf("?");let i=e.substring(0,-1===t?e.length:t);return"/"!==i[i.length-1]&&(i+="/"),i+="negotiate",i+=-1===t?"":e.substring(t),-1===i.indexOf("negotiateVersion")&&(i+=-1===t?"?":"&",i+="negotiateVersion="+this._negotiateVersion),i}}class v2{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new LS,this._transportResult=new LS,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new LS),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){var e=this;return zn(function*(){for(;;){if(yield e._sendBufferedData.promise,!e._executing){e._transportResult&&e._transportResult.reject("Connection stopped.");break}e._sendBufferedData=new LS;const t=e._transportResult;e._transportResult=void 0;const i="string"==typeof e._buffer[0]?e._buffer.join(""):v2._concatBuffers(e._buffer);e._buffer.length=0;try{yield e._transport.send(i),t.resolve()}catch(r){t.reject(r)}}})()}static _concatBuffers(e){const t=e.map(s=>s.byteLength).reduce((s,o)=>s+o),i=new Uint8Array(t);let r=0;for(const s of e)i.set(new Uint8Array(s),r),r+=s.byteLength;return i.buffer}}class LS{constructor(){this.promise=new Promise((e,t)=>[this._resolver,this._rejecter]=[e,t])}resolve(){this._resolver()}reject(e){this._rejecter(e)}}class xo{static write(e){return`${e}${xo.RecordSeparator}`}static parse(e){if(e[e.length-1]!==xo.RecordSeparator)throw new Error("Message is incomplete.");const t=e.split(xo.RecordSeparator);return t.pop(),t}}xo.RecordSeparatorCode=30,xo.RecordSeparator=String.fromCharCode(xo.RecordSeparatorCode);class Que{writeHandshakeRequest(e){return xo.write(JSON.stringify(e))}parseHandshakeResponse(e){let t,i;if(R0(e)){const a=new Uint8Array(e),l=a.indexOf(xo.RecordSeparatorCode);if(-1===l)throw new Error("Message is incomplete.");const c=l+1;t=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),i=a.byteLength>c?a.slice(c).buffer:null}else{const a=e,l=a.indexOf(xo.RecordSeparator);if(-1===l)throw new Error("Message is incomplete.");const c=l+1;t=a.substring(0,c),i=a.length>c?a.substring(c):null}const r=xo.parse(t),s=JSON.parse(r[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[i,s]}}var pi=function(n){return n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n}(pi||{});class ehe{constructor(){this.observers=[]}next(e){for(const t of this.observers)t.next(e)}error(e){for(const t of this.observers)t.error&&t.error(e)}complete(){for(const e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new Bue(this,e)}}var Fi=function(n){return n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting",n}(Fi||{});class w2{constructor(e,t,i,r){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(_e.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://docs.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Rr.isRequired(e,"connection"),Rr.isRequired(t,"logger"),Rr.isRequired(i,"protocol"),this.serverTimeoutInMilliseconds=3e4,this.keepAliveIntervalInMilliseconds=15e3,this._logger=t,this._protocol=i,this.connection=e,this._reconnectPolicy=r,this._handshakeProtocol=new Que,this.connection.onreceive=s=>this._processIncomingData(s),this.connection.onclose=s=>this._connectionClosed(s),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=Fi.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:pi.Ping})}static create(e,t,i,r){return new w2(e,t,i,r)}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==Fi.Disconnected&&this._connectionState!==Fi.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){var e=this;return zn(function*(){if(e._connectionState!==Fi.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));e._connectionState=Fi.Connecting,e._logger.log(_e.Debug,"Starting HubConnection.");try{yield e._startInternal(),Pr.isBrowser&&window.document.addEventListener("freeze",e._freezeEventListener),e._connectionState=Fi.Connected,e._connectionStarted=!0,e._logger.log(_e.Debug,"HubConnection connected successfully.")}catch(t){return e._connectionState=Fi.Disconnected,e._logger.log(_e.Debug,`HubConnection failed to start successfully because of error '${t}'.`),Promise.reject(t)}})()}_startInternal(){var e=this;return zn(function*(){e._stopDuringStartError=void 0,e._receivedHandshakeResponse=!1;const t=new Promise((i,r)=>{e._handshakeResolver=i,e._handshakeRejecter=r});yield e.connection.start(e._protocol.transferFormat);try{const i={protocol:e._protocol.name,version:e._protocol.version};if(e._logger.log(_e.Debug,"Sending handshake request."),yield e._sendMessage(e._handshakeProtocol.writeHandshakeRequest(i)),e._logger.log(_e.Information,`Using HubProtocol '${e._protocol.name}'.`),e._cleanupTimeout(),e._resetTimeoutPeriod(),e._resetKeepAliveInterval(),yield t,e._stopDuringStartError)throw e._stopDuringStartError;e.connection.features.inherentKeepAlive||(yield e._sendMessage(e._cachedPingMessage))}catch(i){throw e._logger.log(_e.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),e._cleanupTimeout(),e._cleanupPingTimer(),yield e.connection.stop(i),i}})()}stop(){var e=this;return zn(function*(){const t=e._startPromise;e._stopPromise=e._stopInternal(),yield e._stopPromise;try{yield t}catch{}})()}_stopInternal(e){return this._connectionState===Fi.Disconnected?(this._logger.log(_e.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve()):this._connectionState===Fi.Disconnecting?(this._logger.log(_e.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise):(this._connectionState=Fi.Disconnecting,this._logger.log(_e.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(_e.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new Oa("The connection was stopped before the hub handshake could complete."),this.connection.stop(e)))}stream(e,...t){const[i,r]=this._replaceStreamingParams(t),s=this._createStreamInvocation(e,t,r);let o;const a=new ehe;return a.cancelCallback=()=>{const l=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[s.invocationId]=(l,c)=>{c?a.error(c):l&&(l.type===pi.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(s).catch(l=>{a.error(l),delete this._callbacks[s.invocationId]}),this._launchStreams(i,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._sendMessage(this._protocol.writeMessage(e))}send(e,...t){const[i,r]=this._replaceStreamingParams(t),s=this._sendWithProtocol(this._createInvocation(e,t,!0,r));return this._launchStreams(i,s),s}invoke(e,...t){const[i,r]=this._replaceStreamingParams(t),s=this._createInvocation(e,t,!1,r);return new Promise((a,l)=>{this._callbacks[s.invocationId]=(u,d)=>{d?l(d):u&&(u.type===pi.Completion?u.error?l(new Error(u.error)):a(u.result):l(new Error(`Unexpected message type: ${u.type}`)))};const c=this._sendWithProtocol(s).catch(u=>{l(u),delete this._callbacks[s.invocationId]});this._launchStreams(i,c)})}on(e,t){!e||!t||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),-1===this._methods[e].indexOf(t)&&this._methods[e].push(t))}off(e,t){if(!e)return;e=e.toLowerCase();const i=this._methods[e];if(i)if(t){const r=i.indexOf(t);-1!==r&&(i.splice(r,1),0===i.length&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){const t=this._protocol.parseMessages(e,this._logger);for(const i of t)switch(i.type){case pi.Invocation:this._invokeClientMethod(i);break;case pi.StreamItem:case pi.Completion:{const r=this._callbacks[i.invocationId];if(r){i.type===pi.Completion&&delete this._callbacks[i.invocationId];try{r(i)}catch(s){this._logger.log(_e.Error,`Stream callback threw error: ${bG(s)}`)}}break}case pi.Ping:break;case pi.Close:{this._logger.log(_e.Information,"Close message received from server.");const r=i.error?new Error("Server returned an error on close: "+i.error):void 0;!0===i.allowReconnect?this.connection.stop(r):this._stopPromise=this._stopInternal(r);break}default:this._logger.log(_e.Warning,`Invalid message type: ${i.type}.`)}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let t,i;try{[i,t]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(r){const s="Error parsing handshake response: "+r;this._logger.log(_e.Error,s);const o=new Error(s);throw this._handshakeRejecter(o),o}if(t.error){const r="Server returned handshake error: "+t.error;this._logger.log(_e.Error,r);const s=new Error(r);throw this._handshakeRejecter(s),s}return this._logger.log(_e.Debug,"Server handshake complete."),this._handshakeResolver(),i}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=(new Date).getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){var e=this;if(!(this.connection.features&&this.connection.features.inherentKeepAlive||(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),void 0!==this._pingServerHandle))){let t=this._nextKeepAlive-(new Date).getTime();t<0&&(t=0),this._pingServerHandle=setTimeout(zn(function*(){if(e._connectionState===Fi.Connected)try{yield e._sendMessage(e._cachedPingMessage)}catch{e._cleanupPingTimer()}}),t)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){var t=this;return zn(function*(){const i=e.target.toLowerCase(),r=t._methods[i];if(!r)return t._logger.log(_e.Warning,`No client method with the name '${i}' found.`),void(e.invocationId&&(t._logger.log(_e.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),yield t._sendWithProtocol(t._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null))));const s=r.slice(),o=!!e.invocationId;let a,l,c;for(const u of s)try{const d=a;a=yield u.apply(t,e.arguments),o&&a&&d&&(t._logger.log(_e.Error,`Multiple results provided for '${i}'. Sending error to server.`),c=t._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),l=void 0}catch(d){l=d,t._logger.log(_e.Error,`A callback for the method '${i}' threw error '${d}'.`)}c?yield t._sendWithProtocol(c):o?(l?c=t._createCompletionMessage(e.invocationId,`${l}`,null):void 0!==a?c=t._createCompletionMessage(e.invocationId,null,a):(t._logger.log(_e.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),c=t._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield t._sendWithProtocol(c)):a&&t._logger.log(_e.Error,`Result given for '${i}' method but server is not expecting a result.`)})()}_connectionClosed(e){this._logger.log(_e.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new Oa("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===Fi.Disconnecting?this._completeClose(e):this._connectionState===Fi.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===Fi.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=Fi.Disconnected,this._connectionStarted=!1,Pr.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(t=>t.apply(this,[e]))}catch(t){this._logger.log(_e.Error,`An onclose callback called with error '${e}' threw error '${t}'.`)}}}_reconnect(e){var t=this;return zn(function*(){const i=Date.now();let r=0,s=void 0!==e?e:new Error("Attempting to reconnect due to a unknown error."),o=t._getNextRetryDelay(r++,0,s);if(null===o)return t._logger.log(_e.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),void t._completeClose(e);if(t._connectionState=Fi.Reconnecting,t._logger.log(_e.Information,e?`Connection reconnecting because of error '${e}'.`:"Connection reconnecting."),0!==t._reconnectingCallbacks.length){try{t._reconnectingCallbacks.forEach(a=>a.apply(t,[e]))}catch(a){t._logger.log(_e.Error,`An onreconnecting callback called with error '${e}' threw error '${a}'.`)}if(t._connectionState!==Fi.Reconnecting)return void t._logger.log(_e.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.")}for(;null!==o;){if(t._logger.log(_e.Information,`Reconnect attempt number ${r} will start in ${o} ms.`),yield new Promise(a=>{t._reconnectDelayHandle=setTimeout(a,o)}),t._reconnectDelayHandle=void 0,t._connectionState!==Fi.Reconnecting)return void t._logger.log(_e.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");try{if(yield t._startInternal(),t._connectionState=Fi.Connected,t._logger.log(_e.Information,"HubConnection reconnected successfully."),0!==t._reconnectedCallbacks.length)try{t._reconnectedCallbacks.forEach(a=>a.apply(t,[t.connection.connectionId]))}catch(a){t._logger.log(_e.Error,`An onreconnected callback called with connectionId '${t.connection.connectionId}; threw error '${a}'.`)}return}catch(a){if(t._logger.log(_e.Information,`Reconnect attempt failed because of error '${a}'.`),t._connectionState!==Fi.Reconnecting)return t._logger.log(_e.Debug,`Connection moved to the '${t._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),void(t._connectionState===Fi.Disconnecting&&t._completeClose());s=a instanceof Error?a:new Error(a.toString()),o=t._getNextRetryDelay(r++,Date.now()-i,s)}}t._logger.log(_e.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${r} failed attempts. Connection disconnecting.`),t._completeClose()})()}_getNextRetryDelay(e,t,i){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:t,previousRetryCount:e,retryReason:i})}catch(r){return this._logger.log(_e.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${t}) threw error '${r}'.`),null}}_cancelCallbacksWithError(e){const t=this._callbacks;this._callbacks={},Object.keys(t).forEach(i=>{const r=t[i];try{r(null,e)}catch(s){this._logger.log(_e.Error,`Stream 'error' callback called with '${e}' threw error: ${bG(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,t,i,r){if(i)return 0!==r.length?{arguments:t,streamIds:r,target:e,type:pi.Invocation}:{arguments:t,target:e,type:pi.Invocation};{const s=this._invocationId;return this._invocationId++,0!==r.length?{arguments:t,invocationId:s.toString(),streamIds:r,target:e,type:pi.Invocation}:{arguments:t,invocationId:s.toString(),target:e,type:pi.Invocation}}}_launchStreams(e,t){if(0!==e.length){t||(t=Promise.resolve());for(const i in e)e[i].subscribe({complete:()=>{t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(i)))},error:r=>{let s;s=r instanceof Error?r.message:r&&r.toString?r.toString():"Unknown error",t=t.then(()=>this._sendWithProtocol(this._createCompletionMessage(i,s)))},next:r=>{t=t.then(()=>this._sendWithProtocol(this._createStreamItemMessage(i,r)))}})}}_replaceStreamingParams(e){const t=[],i=[];for(let r=0;r<e.length;r++){const s=e[r];if(this._isObservable(s)){const o=this._invocationId;this._invocationId++,t[o]=s,i.push(o.toString()),e.splice(r,1)}}return[t,i]}_isObservable(e){return e&&e.subscribe&&"function"==typeof e.subscribe}_createStreamInvocation(e,t,i){const r=this._invocationId;return this._invocationId++,0!==i.length?{arguments:t,invocationId:r.toString(),streamIds:i,target:e,type:pi.StreamInvocation}:{arguments:t,invocationId:r.toString(),target:e,type:pi.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:pi.CancelInvocation}}_createStreamItemMessage(e,t){return{invocationId:e,item:t,type:pi.StreamItem}}_createCompletionMessage(e,t,i){return t?{error:t,invocationId:e,type:pi.Completion}:{invocationId:e,result:i,type:pi.Completion}}}class rhe{constructor(){this.name="json",this.version=1,this.transferFormat=Rs.Text}parseMessages(e,t){if("string"!=typeof e)throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];null===t&&(t=D0.instance);const i=xo.parse(e),r=[];for(const s of i){const o=JSON.parse(s);if("number"!=typeof o.type)throw new Error("Invalid payload.");switch(o.type){case pi.Invocation:this._isInvocationMessage(o);break;case pi.StreamItem:this._isStreamItemMessage(o);break;case pi.Completion:this._isCompletionMessage(o);break;case pi.Ping:case pi.Close:break;default:t.log(_e.Information,"Unknown message type '"+o.type+"' ignored.");continue}r.push(o)}return r}writeMessage(e){return xo.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),void 0!==e.invocationId&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),void 0===e.item)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_assertNotEmptyString(e,t){if("string"!=typeof e||""===e)throw new Error(t)}}const she={trace:_e.Trace,debug:_e.Debug,info:_e.Information,information:_e.Information,warn:_e.Warning,warning:_e.Warning,error:_e.Error,critical:_e.Critical,none:_e.None};class ahe{configureLogging(e){if(Rr.isRequired(e,"logging"),function lhe(n){return void 0!==n.log}(e))this.logger=e;else if("string"==typeof e){const t=function ohe(n){const e=she[n.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${n}`)}(e);this.logger=new OS(t)}else this.logger=new OS(e);return this}withUrl(e,t){return Rr.isRequired(e,"url"),Rr.isNotEmpty(e,"url"),this.url=e,this.httpConnectionOptions="object"==typeof t?{...this.httpConnectionOptions,...t}:{...this.httpConnectionOptions,transport:t},this}withHubProtocol(e){return Rr.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return this.reconnectPolicy=e?Array.isArray(e)?new yG(e):e:new yG,this}build(){const e=this.httpConnectionOptions||{};if(void 0===e.logger&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const t=new Kue(this.url,e);return w2.create(t,this.logger||D0.instance,this.protocol||new rhe,this.reconnectPolicy)}}const P0={appVersion:hf(147).i8,production:!0,serverURL:""};let Ig=(()=>{class n{constructor(){n.singletone=this}startConnection(t){this.hubConnection=(new ahe).withUrl(P0.serverURL+"/notifications").withAutomaticReconnect().build(),this.hubConnection.start().then(()=>{console.log("Connection started"),this.hubConnection.send("SetConnectionIDUser",t)}).catch(i=>console.log("Error while starting connection: "+i))}executeAction(t,i,r,s,o,a){this.hubConnection.send("ExecuteAction",{gameId:t,playerId:i,itemId:r,actionId:s,dragTargetItemId:o,point:a})}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const os=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];function Tc(n,e,t){return Math.max(e,Math.min(t,n))}Math,Math;class O0{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],d=i[r+3];const f=s[o+0],m=s[o+1],g=s[o+2],_=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=d);if(1===a)return e[t+0]=f,e[t+1]=m,e[t+2]=g,void(e[t+3]=_);if(d!==_||l!==f||c!==m||u!==g){let v=1-a;const y=l*f+c*m+u*g+d*_,b=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const E=Math.sqrt(x),A=Math.atan2(E,y*b);v=Math.sin(v*A)/E,a=Math.sin(a*A)/E}const S=a*b;if(l=l*v+f*S,c=c*v+m*S,u=u*v+g*S,d=d*v+_*S,v===1-a){const E=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=E,c*=E,u*=E,d*=E}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],d=s[o],f=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*d+l*m-c*f,e[t+1]=l*g+u*f+c*d-a*m,e[t+2]=c*g+u*m+a*f-l*d,e[t+3]=u*g-a*d-l*f-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),d=a(s/2),f=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=f*u*d+c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d-f*m*g;break;case"YXZ":this._x=f*u*d+c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d+f*m*g;break;case"ZXY":this._x=f*u*d-c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d-f*m*g;break;case"ZYX":this._x=f*u*d-c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d+f*m*g;break;case"YZX":this._x=f*u*d+c*m*g,this._y=c*m*d+f*u*g,this._z=c*u*g-f*m*d,this._w=c*u*d-f*m*g;break;case"XZY":this._x=f*u*d-c*m*g,this._y=c*m*d-f*u*g,this._z=c*u*g+f*m*d,this._w=c*u*d+f*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],f=i+a+d;if(f>0){const m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>d){const m=2*Math.sqrt(1+i-a-d);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>d){const m=2*Math.sqrt(1+a-i-d);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+d-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Tc(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,f=Math.sin(t*u)/c;return this._w=o*d+this._w*f,this._x=i*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class _r{constructor(e=0,t=0,i=0){_r.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(RG.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(RG.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*i,u=l*i+a*t-s*r,d=l*r+s*i-o*t,f=-s*t-o*i-a*r;return this.x=c*l+f*-s+u*-a-d*-o,this.y=u*l+f*-o+d*-s-c*-a,this.z=d*l+f*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return b2.copy(this).projectOnVector(e),this.sub(b2)}reflect(e){return this.sub(b2.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Tc(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const b2=new _r,RG=new O0;class Ac{constructor(e,t,i,r,s,o,a,l,c,u,d,f,m,g,_,v){Ac.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c,u,d,f,m,g,_,v)}set(e,t,i,r,s,o,a,l,c,u,d,f,m,g,_,v){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=f,y[3]=m,y[7]=g,y[11]=_,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ac).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Rg.setFromMatrixColumn(e,0).length(),s=1/Rg.setFromMatrixColumn(e,1).length(),o=1/Rg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),d=Math.sin(s);if("XYZ"===e.order){const f=o*u,m=o*d,g=a*u,_=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=m+g*c,t[5]=f-_*c,t[9]=-a*l,t[2]=_-f*c,t[6]=g+m*c,t[10]=o*l}else if("YXZ"===e.order){const f=l*u,m=l*d,g=c*u,_=c*d;t[0]=f+_*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=_+f*a,t[10]=o*l}else if("ZXY"===e.order){const f=l*u,m=l*d,g=c*u,_=c*d;t[0]=f-_*a,t[4]=-o*d,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=_-f*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const f=o*u,m=o*d,g=a*u,_=a*d;t[0]=l*u,t[4]=g*c-m,t[8]=f*c+_,t[1]=l*d,t[5]=_*c+f,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const f=o*l,m=o*c,g=a*l,_=a*c;t[0]=l*u,t[4]=_-f*d,t[8]=g*d+m,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*d+g,t[10]=f-_*d}else if("XZY"===e.order){const f=o*l,m=o*c,g=a*l,_=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=f*d+_,t[5]=o*u,t[9]=m*d-g,t[2]=g*d-m,t[6]=a*u,t[10]=_*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(The,e,Ahe)}lookAt(e,t,i){const r=this.elements;return Co.subVectors(e,t),0===Co.lengthSq()&&(Co.z=1),Co.normalize(),sh.crossVectors(i,Co),0===sh.lengthSq()&&(1===Math.abs(i.z)?Co.x+=1e-4:Co.z+=1e-4,Co.normalize(),sh.crossVectors(i,Co)),sh.normalize(),FS.crossVectors(Co,sh),r[0]=sh.x,r[4]=FS.x,r[8]=Co.x,r[1]=sh.y,r[5]=FS.y,r[9]=Co.y,r[2]=sh.z,r[6]=FS.z,r[10]=Co.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],f=i[9],m=i[13],g=i[2],_=i[6],v=i[10],y=i[14],b=i[3],x=i[7],S=i[11],E=i[15],A=r[0],M=r[4],N=r[8],T=r[12],R=r[1],$=r[5],ee=r[9],ie=r[13],V=r[2],K=r[6],G=r[10],X=r[14],Q=r[3],Z=r[7],ce=r[11],q=r[15];return s[0]=o*A+a*R+l*V+c*Q,s[4]=o*M+a*$+l*K+c*Z,s[8]=o*N+a*ee+l*G+c*ce,s[12]=o*T+a*ie+l*X+c*q,s[1]=u*A+d*R+f*V+m*Q,s[5]=u*M+d*$+f*K+m*Z,s[9]=u*N+d*ee+f*G+m*ce,s[13]=u*T+d*ie+f*X+m*q,s[2]=g*A+_*R+v*V+y*Q,s[6]=g*M+_*$+v*K+y*Z,s[10]=g*N+_*ee+v*G+y*ce,s[14]=g*T+_*ie+v*X+y*q,s[3]=b*A+x*R+S*V+E*Q,s[7]=b*M+x*$+S*K+E*Z,s[11]=b*N+x*ee+S*G+E*ce,s[15]=b*T+x*ie+S*X+E*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],f=e[10],m=e[14];return e[3]*(+s*l*d-r*c*d-s*a*f+i*c*f+r*a*m-i*l*m)+e[7]*(+t*l*m-t*c*f+s*o*f-r*o*m+r*c*u-s*l*u)+e[11]*(+t*c*d-t*a*m-s*o*d+i*o*m+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*d+t*a*f+r*o*d-i*o*f+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],f=e[10],m=e[11],g=e[12],_=e[13],v=e[14],y=e[15],b=d*v*c-_*f*c+_*l*m-a*v*m-d*l*y+a*f*y,x=g*f*c-u*v*c-g*l*m+o*v*m+u*l*y-o*f*y,S=u*_*c-g*d*c+g*a*m-o*_*m-u*a*y+o*d*y,E=g*d*l-u*_*l-g*a*f+o*_*f+u*a*v-o*d*v,A=t*b+i*x+r*S+s*E;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/A;return e[0]=b*M,e[1]=(_*f*s-d*v*s-_*r*m+i*v*m+d*r*y-i*f*y)*M,e[2]=(a*v*s-_*l*s+_*r*c-i*v*c-a*r*y+i*l*y)*M,e[3]=(d*l*s-a*f*s-d*r*c+i*f*c+a*r*m-i*l*m)*M,e[4]=x*M,e[5]=(u*v*s-g*f*s+g*r*m-t*v*m-u*r*y+t*f*y)*M,e[6]=(g*l*s-o*v*s-g*r*c+t*v*c+o*r*y-t*l*y)*M,e[7]=(o*f*s-u*l*s+u*r*c-t*f*c-o*r*m+t*l*m)*M,e[8]=S*M,e[9]=(g*d*s-u*_*s-g*i*m+t*_*m+u*i*y-t*d*y)*M,e[10]=(o*_*s-g*a*s+g*i*c-t*_*c-o*i*y+t*a*y)*M,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*m-t*a*m)*M,e[12]=E*M,e[13]=(u*_*r-g*d*r+g*i*f-t*_*f-u*i*v+t*d*v)*M,e[14]=(g*a*r-o*_*r-g*i*l+t*_*l+o*i*v-t*a*v)*M,e[15]=(o*d*r-u*a*r+u*i*l-t*d*l-o*i*f+t*a*f)*M,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,f=s*c,m=s*u,g=s*d,_=o*u,v=o*d,y=a*d,b=l*c,x=l*u,S=l*d,E=i.x,A=i.y,M=i.z;return r[0]=(1-(_+y))*E,r[1]=(m+S)*E,r[2]=(g-x)*E,r[3]=0,r[4]=(m-S)*A,r[5]=(1-(f+y))*A,r[6]=(v+b)*A,r[7]=0,r[8]=(g+x)*M,r[9]=(v-b)*M,r[10]=(1-(f+_))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Rg.set(r[0],r[1],r[2]).length();const o=Rg.set(r[4],r[5],r[6]).length(),a=Rg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],La.copy(this);const c=1/s,u=1/o,d=1/a;return La.elements[0]*=c,La.elements[1]*=c,La.elements[2]*=c,La.elements[4]*=u,La.elements[5]*=u,La.elements[6]*=u,La.elements[8]*=d,La.elements[9]*=d,La.elements[10]*=d,t.setFromRotationMatrix(La),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=2e3){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),d=(t+e)/(t-e),f=(i+r)/(i-r);let m,g;if(2e3===a)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);m=-o/(o-s),g=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=2e3){const l=this.elements,c=1/(t-e),u=1/(i-r),d=1/(o-s),f=(t+e)*c,m=(i+r)*u;let g,_;if(2e3===a)g=(o+s)*d,_=-2*d;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);g=s*d,_=-1*d}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=_,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Rg=new _r,La=new Ac,The=new _r(0,0,0),Ahe=new _r(1,1,1),sh=new _r,FS=new _r,Co=new _r;class Dhe{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const OG=new Ac,LG=new O0;let Ihe=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],d=s[9],f=s[2],m=s[6],g=s[10];switch(i){case"XYZ":this._y=Math.asin(Tc(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Tc(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-f,o),this._z=0);break;case"ZXY":this._x=Math.asin(Tc(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Tc(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Tc(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Tc(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return OG.makeRotationFromQuaternion(t),this.setFromRotationMatrix(OG,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return LG.setFromEuler(this),this.setFromQuaternion(LG,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class Rhe{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}class kS{constructor(e,t,i,r,s,o,a,l,c){kS.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],f=i[2],m=i[5],g=i[8],_=r[0],v=r[3],y=r[6],b=r[1],x=r[4],S=r[7],E=r[2],A=r[5],M=r[8];return s[0]=o*_+a*b+l*E,s[3]=o*v+a*x+l*A,s[6]=o*y+a*S+l*M,s[1]=c*_+u*b+d*E,s[4]=c*v+u*x+d*A,s[7]=c*y+u*S+d*M,s[2]=f*_+m*b+g*E,s[5]=f*v+m*x+g*A,s[8]=f*y+m*S+g*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,f=a*l-u*s,m=c*s-o*l,g=t*d+i*f+r*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const _=1/g;return e[0]=d*_,e[1]=(r*c-u*i)*_,e[2]=(a*i-r*o)*_,e[3]=f*_,e[4]=(u*t-r*l)*_,e[5]=(r*s-a*t)*_,e[6]=m*_,e[7]=(i*l-c*t)*_,e[8]=(o*t-i*s)*_,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(x2.makeScale(e,t)),this}rotate(e){return this.premultiply(x2.makeRotation(-e)),this}translate(e,t){return this.premultiply(x2.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const x2=new kS;let Phe=0;const NG=new _r,Pg=new O0,Dc=new Ac,US=new _r,L0=new _r,Ohe=new _r,Lhe=new O0,FG=new _r(1,0,0),kG=new _r(0,1,0),UG=new _r(0,0,1),Nhe={type:"added"},Fhe={type:"removed"};let khe=(()=>{class n extends Dhe{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Phe++}),this.uuid=function AG(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(os[255&n]+os[n>>8&255]+os[n>>16&255]+os[n>>24&255]+"-"+os[255&e]+os[e>>8&255]+"-"+os[e>>16&15|64]+os[e>>24&255]+"-"+os[63&t|128]+os[t>>8&255]+"-"+os[t>>16&255]+os[t>>24&255]+os[255&i]+os[i>>8&255]+os[i>>16&255]+os[i>>24&255]).toLowerCase()}(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new _r,i=new Ihe,r=new O0,s=new _r(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ac},normalMatrix:{value:new kS}}),this.matrix=new Ac,this.matrixWorld=new Ac,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Rhe,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Pg.setFromAxisAngle(t,i),this.quaternion.multiply(Pg),this}rotateOnWorldAxis(t,i){return Pg.setFromAxisAngle(t,i),this.quaternion.premultiply(Pg),this}rotateX(t){return this.rotateOnAxis(FG,t)}rotateY(t){return this.rotateOnAxis(kG,t)}rotateZ(t){return this.rotateOnAxis(UG,t)}translateOnAxis(t,i){return NG.copy(t).applyQuaternion(this.quaternion),this.position.add(NG.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(FG,t)}translateY(t){return this.translateOnAxis(kG,t)}translateZ(t){return this.translateOnAxis(UG,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Dc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?US.copy(t):US.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),L0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dc.lookAt(L0,US,this.up):Dc.lookAt(US,L0,this.up),this.quaternion.setFromRotationMatrix(Dc),s&&(Dc.extractRotation(s.matrixWorld),Pg.setFromRotationMatrix(Dc),this.quaternion.premultiply(Pg.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Nhe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Fhe)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Dc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Dc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Dc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i){let r=[];this[t]===i&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,i);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(L0,t,Ohe),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(L0,Lhe,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,d=c.length;u<d;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),d=a(t.images),f=a(t.shapes),m=a(t.skeletons),g=a(t.animations),_=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),f.length>0&&(r.shapes=f),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),_.length>0&&(r.nodes=_)}return r.object=s,r;function a(l){const c=[];for(const u in l){const d=l[u];delete d.metadata,c.push(d)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new _r(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();class BG extends khe{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Uhe{constructor(){this.allItems={},this.onMeshClickFunc=this.MeshClickFunc.bind(this),this.onMeshMouseOverFunc=this.MeshMouseOverFunc.bind(this),this.onMeshMouseOutFunc=this.MeshMouseOutFunc.bind(this)}getPlayerByUserId(e){return(0,Jd.find)(this.gameData.players,t=>t.user?.id==e)}loadGame(e,t){this.mgThree=e,this.playerData=this.getPlayerByUserId(t.id),console.log("loadGame"),this.createItem(this.gameData.table,null),this.addPlayers(),this.playerData?this.mgThree.camera.position.set(this.playerData.camera.position.x,this.playerData.camera.position.y,this.playerData.camera.position.z):this.mgThree.camera.position.set(this.gameData.observer.position.x,this.gameData.observer.position.y,this.gameData.observer.position.z)}addPlayers(){(0,Jd.forEach)(this.gameData.players,e=>{let t=new wo;t.name="PLAYER",e.avatar.mesh=t,t.position.set(e.avatar.position.x,e.avatar.position.y,e.avatar.position.z),t.lookAt(0,0,0),this.mgThree.scene.add(t),this.mgThree.gltfLoader.load("\\assets\\heads\\suzanne.glb",s=>{const o=s.scene;this.mgThree.textureLoader.load("\\assets\\heads\\metallic.png",a=>{a.flipY=!1,o.traverse(function(l){l.isMesh&&(l.material.map=a,l.material.side=2,l.material.needsUpdate=!0)})}),this.playerData&&this.playerData.id==e.id||e.avatar.mesh.add(o)});const i=new Ae(new ri(.1,.01,.1),new wi({color:65280}));i.name="PLAYER TABLE",e.avatar.mesh?.add(i),i.position.set(0,-1.5,1.5),this.createItem(e.table,i);const r=new Ae(new ri(.1,.01,.1),new wi({color:65535}));r.name="PLAYER HAND",e.avatar.mesh?.add(r),r.rotation.x=-Math.PI/2,r.position.set(0,0,1.5),this.createItem(e.hand,r)})}createItem(e,t){if(e.asset){const i="\\assets\\games\\"+this.gameData.assets[e.asset].frontURL,r="\\assets\\games\\"+(this.gameData.assets[e.asset].backURL||this.gameData.assets[e.asset].frontURL),s=this.gameData.assets[e.asset],o=s.type;if("OBJECT"==o&&((i.toLowerCase().endsWith("glb")||i.toLowerCase().endsWith("gltf"))&&this.mgThree.gltfLoader.load(i,a=>{const l=a.scene,c=new go;c.setFromObject(l);let u=Math.abs(c.min.x)+Math.abs(c.max.x),d=Math.abs(c.min.z)+Math.abs(c.max.z),f=s.scale.x/Math.max(u,d),m=s.scale.y/Math.max(u,d),g=s.scale.z/Math.max(u,d);l.scale.set(f,m,g);let _=new BG;_.add(l),this.processItem(e,_,t)}),i.toLowerCase().endsWith("stl")&&this.mgThree.stlLoader.load(i,a=>{const l=new Ae(a);l.rotation.x=-Math.PI/2;let c=new wo;c.add(l);const u=new go;u.setFromObject(l);let d=Math.abs(u.min.x)+Math.abs(u.max.x),f=Math.abs(u.min.z)+Math.abs(u.max.z),m=1/Math.max(d,f);l.scale.set(m,m,m),this.processItem(e,c,t)}),i.toLowerCase().endsWith("obj")&&this.mgThree.objLoader.load(i,a=>{const l=new go;l.setFromObject(a);let c=Math.abs(l.min.x)+Math.abs(l.max.x),u=Math.abs(l.min.z)+Math.abs(l.max.z),d=1/Math.max(c,u);a.scale.set(d,d,d);let f=new BG;f.add(a),this.processItem(e,f,t)})),"TOKEN"==o&&this.mgThree.textureLoader.load(i,a=>{let l=a.image.width/a.image.height,c=1,u=1/l;l<1&&(u=1,c=l);var d=[new wi({color:16777215,opacity:.5,transparent:!0}),new wi({color:16777215,opacity:.5,transparent:!0}),new wi({map:a,transparent:!0}),new wi({map:this.mgThree.textureLoader.load(r),transparent:!0}),new wi({color:16777215,opacity:.5,transparent:!0}),new wi({color:16777215,opacity:.5,transparent:!0})];let f=new Ae(new ri(c,c/100,u),d);this.processItem(e,f,t)}),"TEXT3D"==o&&this.mgThree.fontLoader.load("https://threejs.org/examples/fonts/helvetiker_regular.typeface.json",a=>{const l=new Aue(e.text,{font:a,size:.5,height:.2,curveSegments:12,bevelEnabled:!0,bevelThickness:.03,bevelSize:.02,bevelOffset:0,bevelSegments:5});var c=new wP({color:16711680,specular:16777215});let u=new Ae(l,c);this.processItem(e,u,t)}),"TEXTBLOCK"==o){const a=new oue({bestFit:"auto",width:100,height:100,justifyContent:"center",textAlign:"center",fontFamily:"assets/fonts/Roboto-msdf.json",fontTexture:"assets/fonts/Roboto-msdf.png",fontColor:new Ye(0),backgroundOpacity:0}),l=new aue({content:e.text});a.add(l),this.processItem(e,a,t)}if("SOUND"==o){const a=new wle(this.mgThree.audioListener);(new ple).load(i,function(u){a.setBuffer(u),a.setLoop("LOOP"==e.playType),a.setVolume(1),a.play()});let c=new wo;c.add(a),this.processItem(e,c,t)}}else{const i=new wo;this.processItem(e,i,t)}}updateItem(e,t){let i=this.allItems[e.id];i?(i.markForDelete=!1,i.clickActions=e.clickActions,i.visible=e.visible,i.hoverActions=e.hoverActions,this.updateItemPosition(i,rh.FromJson(e.position)),this.updateItemScale(i,rh.FromJson(e.scale)),this.updateItemRotation(i,rh.FromJson(e.rotation)),this.updateItemText(i,e.text),(0,Jd.forEach)(e.items,r=>{this.updateItem(r,i.mesh)}),this.handleItemClickActions(i),this.handleItemVisibility(i)):this.createItem(e,t)}updateGame(e){(0,Jd.forEach)(this.allItems,(t,i)=>{t.markForDelete=!0}),this.updateItem(e.table,null),(0,Jd.forEach)(this.allItems,(t,i)=>{t.markForDelete&&(this.removeAction(t),t.playType&&t.mesh.children[0].stop(),t.mesh?.parent?.remove(t.mesh),delete this.allItems[t.id])})}updateItemPosition(e,t){e.position=t,vl.deepEqual(t,e.mesh.position)||new RS(e.mesh.position).to(t,300).start()}updateItemScale(e,t){e.scale=t,vl.deepEqual(t,e.mesh.scale)||new RS(e.mesh.scale).to(t,300).start()}updateItemRotation(e,t){e.rotation=t;let i={x:ju_degToRad(t.x),y:ju_degToRad(t.y),z:ju_degToRad(t.z)};vl.deepEqual(i,{x:e.mesh.rotation.x,y:e.mesh.rotation.y,z:e.mesh.rotation.z})||new RS(e.mesh.rotation).to(i,300).start()}updateItemText(e,t){"TEXTBLOCK"==e.asset&&(e.text=t,e.mesh.childrenTexts[0].set({content:t}))}processItem(e,t,i){t.name=e.asset||e.name||"",t.position.set(e.position.x,e.position.y,e.position.z),t.rotation.set(ju_degToRad(e.rotation.x),ju_degToRad(e.rotation.y),ju_degToRad(e.rotation.z)),t.scale.set(e.scale.x,e.scale.y,e.scale.z),i?i.add(t):this.mgThree.scene.add(t);let r=new Fle(t,new Ye(16711680));this.mgThree.scene.add(r),t.userData.ItemData=e,e.mesh=t,(0,Jd.forEach)(e.items,s=>{this.createItem(s,t)}),this.handleItemClickActions(e),this.handleItemVisibility(e),this.allItems[e.id]=e}handleItemClickActions(e){let t=null;this.playerData&&(t=e.clickActions[this.playerData.id]||e.clickActions[""]),t?this.addClickAction(e,t):this.removeAction(e)}handleItemVisibility(e){let t=0==(0,Jd.keys)(e.visible).length;this.playerData&&(t=t||1==e.visible[this.playerData.id]),e.mesh.visible=t,t||this.removeAction(e)}MeshClickFunc(e){this.playerData&&Ig.singletone.executeAction(this.gameData.id,this.playerData.id,e.target.userData.ItemData.id,e.target.userData.ItemData.clickActions[this.playerData.id]||e.target.userData.ItemData.clickActions[""],"",e.point)}MeshMouseOverFunc(e){document.body.style.cursor="pointer",this.mgThree.orbitControls.enabled=!1}MeshMouseOutFunc(e){document.body.style.cursor="default",this.mgThree.orbitControls.enabled=!0}addClickAction(e,t){this.removeAction(e),e.mesh.addEventListener("click",this.onMeshClickFunc),e.mesh.addEventListener("mouseover",this.onMeshMouseOverFunc),e.mesh.addEventListener("mouseout",this.onMeshMouseOutFunc),this.mgThree.interactionManager.add(e.mesh)}removeAction(e){e.mesh.removeEventListener("click",this.onMeshClickFunc),e.mesh.removeEventListener("click",this.onMeshMouseOverFunc),this.mgThree.interactionManager.remove(e.mesh)}}class BS{}class VS{}class wl{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof wl?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new wl;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof wl?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Bhe{encodeKey(e){return VG(e)}encodeValue(e){return VG(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zhe=/%(\d[a-f0-9])/gi,Hhe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function VG(n){return encodeURIComponent(n).replace(zhe,(e,t)=>Hhe[t]??e)}function zS(n){return`${n}`}class oh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Bhe,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Vhe(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(zS):[zS(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new oh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(zS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(zS(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Ghe{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zG(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function HG(n){return typeof Blob<"u"&&n instanceof Blob}function GG(n){return typeof FormData<"u"&&n instanceof FormData}class N0{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Whe(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new wl),this.context||(this.context=new Ghe),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new oh,this.urlWithParams=t}serializeBody(){return null===this.body?null:zG(this.body)||HG(this.body)||GG(this.body)||function jhe(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof oh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||GG(this.body)?null:HG(this.body)?this.body.type||null:zG(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof oh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((d,f)=>d.set(f,e.setHeaders[f]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,f)=>d.set(f,e.setParams[f]),c)),new N0(t,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var Og=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Og||{});class C2{constructor(e,t=200,i="OK"){this.headers=e.headers||new wl,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class S2 extends C2{constructor(e={}){super(e),this.type=Og.ResponseHeader}clone(e={}){return new S2({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Lg extends C2{constructor(e={}){super(e),this.type=Og.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Lg({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class WG extends C2{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function E2(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let jG=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof N0)s=t;else{let l,c;l=r.headers instanceof wl?r.headers:new wl(r.headers),r.params&&(c=r.params instanceof oh?r.params:new oh({fromObject:r.params})),s=new N0(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Mt(s).pipe(ym(l=>this.handler.handle(l)));if(t instanceof N0||"events"===r.observe)return o;const a=o.pipe(oc(l=>l instanceof Lg));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(ln(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(ln(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(ln(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(ln(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new oh).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,E2(r,i))}post(t,i,r={}){return this.request("POST",t,E2(r,i))}put(t,i,r={}){return this.request("PUT",t,E2(r,i))}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(BS))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();function XG(n,e){return e(n)}function qhe(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const Yhe=new tt(""),F0=new tt(""),YG=new tt("");function Zhe(){let n=null;return(e,t)=>{null===n&&(n=(qe(Yhe,{optional:!0})??[]).reduceRight(qhe,XG));const i=qe($x),r=i.add();return n(e,t).pipe(Av(()=>i.remove(r)))}}let ZG=(()=>{class n extends BS{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=qe($x)}handle(t){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(F0),...this.injector.get(YG,[])]));this.chain=r.reduceRight((s,o)=>function Xhe(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(s,o,this.injector),XG)}const i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(Av(()=>this.pendingTasks.remove(i)))}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(VS),Ve(bs))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const ede=/^\)\]\}',?\n/;let JG=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new le(-2800,!1);const i=this.xhrFactory;return(i.\u0275loadImpl?Di(i.\u0275loadImpl()):Mt(null)).pipe(Ls(()=>new Pn(s=>{const o=i.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((_,v)=>o.setRequestHeader(_,v.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const _=t.detectContentTypeHeader();null!==_&&o.setRequestHeader("Content-Type",_)}if(t.responseType){const _=t.responseType.toLowerCase();o.responseType="json"!==_?_:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const _=o.statusText||"OK",v=new wl(o.getAllResponseHeaders()),y=function tde(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new S2({headers:v,status:o.status,statusText:_,url:y}),l},u=()=>{let{headers:_,status:v,statusText:y,url:b}=c(),x=null;204!==v&&(x=typeof o.response>"u"?o.responseText:o.response),0===v&&(v=x?200:0);let S=v>=200&&v<300;if("json"===t.responseType&&"string"==typeof x){const E=x;x=x.replace(ede,"");try{x=""!==x?JSON.parse(x):null}catch(A){x=E,S&&(S=!1,x={error:A,text:x})}}S?(s.next(new Lg({body:x,headers:_,status:v,statusText:y,url:b||void 0})),s.complete()):s.error(new WG({error:x,headers:_,status:v,statusText:y,url:b||void 0}))},d=_=>{const{url:v}=c(),y=new WG({error:_,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});s.error(y)};let f=!1;const m=_=>{f||(s.next(c()),f=!0);let v={type:Og.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(v.total=_.total),"text"===t.responseType&&o.responseText&&(v.partialText=o.responseText),s.next(v)},g=_=>{let v={type:Og.UploadProgress,loaded:_.loaded};_.lengthComputable&&(v.total=_.total),s.next(v)};return o.addEventListener("load",u),o.addEventListener("error",d),o.addEventListener("timeout",d),o.addEventListener("abort",d),t.reportProgress&&(o.addEventListener("progress",m),null!==a&&o.upload&&o.upload.addEventListener("progress",g)),o.send(a),s.next({type:Og.Sent}),()=>{o.removeEventListener("error",d),o.removeEventListener("abort",d),o.removeEventListener("load",u),o.removeEventListener("timeout",d),t.reportProgress&&(o.removeEventListener("progress",m),null!==a&&o.upload&&o.upload.removeEventListener("progress",g)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Q3))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();const M2=new tt("XSRF_ENABLED"),QG=new tt("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),e8=new tt("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class t8{}let rde=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=z3(t,this.cookieName),this.lastCookieString=t),this.lastToken}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Ar),Ve(wa),Ve(QG))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac})}return n})();function sde(n,e){const t=n.url.toLowerCase();if(!qe(M2)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=qe(t8).getToken(),r=qe(e8);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var ah=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ah||{});function ode(...n){const e=[jG,JG,ZG,{provide:BS,useExisting:ZG},{provide:VS,useExisting:JG},{provide:F0,useValue:sde,multi:!0},{provide:M2,useValue:!0},{provide:t8,useClass:rde}];for(const t of n)e.push(...t.\u0275providers);return function xy(n){return{\u0275providers:n}}(e)}const n8=new tt("LEGACY_INTERCEPTOR_FN");function ade(){return function Qd(n,e){return{\u0275kind:n,\u0275providers:e}}(ah.LegacyInterceptors,[{provide:n8,useFactory:Zhe},{provide:F0,useExisting:n8,multi:!0}])}let lde=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({providers:[ode(ade())]})}return n})(),GS=(()=>{class n{constructor(t){this.http=t,this.baseGameUrl=P0.serverURL+"/api/Game",this.baseUserUrl=P0.serverURL+"/api/User"}login(t){return this.http.post(this.baseUserUrl+"/Login",{name:t})}getGameById(t){return this.http.get(this.baseGameUrl+`/GetGameByID?GameId=${t}`)}getGamesList(){return this.http.get(this.baseGameUrl+"/GetGamesList")}createGame(t,i){return this.http.post(this.baseGameUrl+"/CreateGame",{userId:t,gameType:i})}setupGame(t,i){return this.http.post(this.baseGameUrl+"/SetupGame",{gameId:t,userId:i})}startGame(t){return this.http.post(this.baseGameUrl+"/StartGame",{gameId:t})}deleteGame(t){return this.http.post(this.baseGameUrl+"/DeleteGame",{gameId:t})}executeAction(t,i,r,s,o,a){return this.http.post(this.baseGameUrl+"/ExecuteAction",{GameId:t,PlayerId:i,ActionId:r,ItemId:s,ClientX:o,ClientY:a})}joinGame(t,i,r,s){return this.http.post(this.baseGameUrl+"/JoinGame",{gameId:t,playerId:i,user:r,type:s})}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(jG))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class pde{}let Ot=(()=>{class n{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(t,i){t&&i&&(t.classList?t.classList.add(i):t.className+=" "+i)}static addMultipleClasses(t,i){if(t&&i)if(t.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)t.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)t.className+=" "+r[s]}}static removeClass(t,i){t&&i&&(t.classList?t.classList.remove(i):t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,i){return!(!t||!i)&&(t.classList?t.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(i){return i!==t})}static find(t,i){return Array.from(t.querySelectorAll(i))}static findSingle(t,i){return this.isElement(t)?t.querySelector(i):null}static index(t){let i=t.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==t)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(t,i){let r=t.parentNode?t.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==t)return s;r[o].attributes&&r[o].attributes[i]&&1==r[o].nodeType&&s++}return-1}static appendOverlay(t,i,r="self"){"self"!==r&&t&&i&&this.appendChild(t,i)}static alignOverlay(t,i,r="self",s=!0){t&&i&&(s&&(t.style.minWidth=`${n.getOuterWidth(i)}px`),"self"===r?this.relativePosition(t,i):this.absolutePosition(t,i))}static relativePosition(t,i){const r=y=>{if(y)return"relative"===getComputedStyle(y).getPropertyValue("position")?y:r(y.parentElement)},s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=i.offsetHeight,a=i.getBoundingClientRect(),l=this.getWindowScrollTop(),c=this.getWindowScrollLeft(),u=this.getViewport(),f=r(t)?.getBoundingClientRect()||{top:-1*l,left:-1*c};let m,g;a.top+o+s.height>u.height?(m=a.top-f.top-s.height,t.style.transformOrigin="bottom",a.top+m<0&&(m=-1*a.top)):(m=o+a.top-f.top,t.style.transformOrigin="top");const _=a.left+s.width-u.width;g=s.width>u.width?-1*(a.left-f.left):_>0?a.left-f.left-_:a.left-f.left,t.style.top=m+"px",t.style.left=g+"px"}static absolutePosition(t,i){const r=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),s=r.height,o=r.width,a=i.offsetHeight,l=i.offsetWidth,c=i.getBoundingClientRect(),u=this.getWindowScrollTop(),d=this.getWindowScrollLeft(),f=this.getViewport();let m,g;c.top+a+s>f.height?(m=c.top+u-s,t.style.transformOrigin="bottom",m<0&&(m=u)):(m=a+c.top+u,t.style.transformOrigin="top"),g=c.left+o>f.width?Math.max(0,c.left+d+l-o):c.left+d,t.style.top=m+"px",t.style.left=g+"px"}static getParents(t,i=[]){return null===t.parentNode?i:this.getParents(t.parentNode,i.concat([t.parentNode]))}static getScrollableParents(t){let i=[];if(t){let r=this.getParents(t);const s=/(auto|scroll)/,o=a=>{let l=window.getComputedStyle(a,null);return s.test(l.getPropertyValue("overflow"))||s.test(l.getPropertyValue("overflowX"))||s.test(l.getPropertyValue("overflowY"))};for(let a of r){let l=1===a.nodeType&&a.dataset.scrollselectors;if(l){let c=l.split(",");for(let u of c){let d=this.findSingle(a,u);d&&o(d)&&i.push(d)}}9!==a.nodeType&&o(a)&&i.push(a)}}return i}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementDimensions(t){let i={};return t.style.visibility="hidden",t.style.display="block",i.width=t.offsetWidth,i.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",i}static scrollInView(t,i){let r=getComputedStyle(t).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(t).getPropertyValue("paddingTop"),a=o?parseFloat(o):0,l=t.getBoundingClientRect(),u=i.getBoundingClientRect().top+document.body.scrollTop-(l.top+document.body.scrollTop)-s-a,d=t.scrollTop,f=t.clientHeight,m=this.getOuterHeight(i);u<0?t.scrollTop=d+u:u+m>f&&(t.scrollTop=d+u-f+m)}static fadeIn(t,i){t.style.opacity=0;let r=+new Date,s=0,o=function(){s=+t.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,t.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(t,i){var r=1,a=50/i;let l=setInterval(()=>{(r-=a)<=0&&(r=0,clearInterval(l)),t.style.opacity=r},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(t,i)}static getOuterWidth(t,i){let r=t.offsetWidth;if(i){let s=getComputedStyle(t);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(t){let i=getComputedStyle(t);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(t){let i=getComputedStyle(t);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(t,i){let r=t.offsetHeight;if(i){let s=getComputedStyle(t);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let t=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:t.innerWidth||r.clientWidth||s.clientWidth,height:t.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(t){var i=t.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,i){let r=t.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,t)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,i){if(this.isElement(i))i.appendChild(t);else{if(!(i&&i.el&&i.el.nativeElement))throw"Cannot append "+i+" to "+t;i.el.nativeElement.appendChild(t)}}static removeChild(t,i){if(this.isElement(i))i.removeChild(t);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+t+" from "+i;i.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let i=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let i=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(t,i,r){t[i].apply(t,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,i){t&&document.activeElement!==t&&t.focus(i)}static getFocusableElements(t){let i=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)(s.offsetWidth||s.offsetHeight||s.getClientRects().length)&&r.push(s);return r}static getNextFocusableElement(t,i=!1){const r=n.getFocusableElements(t);let s=0;if(r&&r.length>0){const o=r.indexOf(r[0].ownerDocument.activeElement);i?s=-1==o||0===o?r.length-1:o-1:-1!=o&&o!==r.length-1&&(s=o+1)}return r[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,i){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof t;if("string"===r)return document.querySelector(t);if("object"===r&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const o=(a=t)&&a.constructor&&a.call&&a.apply?t():t;return o&&9===o.nodeType||this.isExist(o)?o:null}var a}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(t,i){if(t){const r=t.getAttribute(i);return isNaN(r)?"true"===r||"false"===r?"true"===r:r:+r}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(t="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,t)}static unblockBodyScroll(t="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,t)}}return n})();class mde{element;listener;scrollableParents;constructor(e,t=(()=>{})){this.element=e,this.listener=t}bindScrollListener(){this.scrollableParents=Ot.getScrollableParents(this.element);for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}class ef{static equals(e,t,i){return i?this.resolveFieldData(e,i)===this.resolveFieldData(t,i):this.equalsByValue(e,t)}static equalsByValue(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var s,o,a,i=Array.isArray(e),r=Array.isArray(t);if(i&&r){if((o=e.length)!=t.length)return!1;for(s=o;0!=s--;)if(!this.equalsByValue(e[s],t[s]))return!1;return!0}if(i!=r)return!1;var l=this.isDate(e),c=this.isDate(t);if(l!=c)return!1;if(l&&c)return e.getTime()==t.getTime();var u=e instanceof RegExp,d=t instanceof RegExp;if(u!=d)return!1;if(u&&d)return e.toString()==t.toString();var f=Object.keys(e);if((o=f.length)!==Object.keys(t).length)return!1;for(s=o;0!=s--;)if(!Object.prototype.hasOwnProperty.call(t,f[s]))return!1;for(s=o;0!=s--;)if(!this.equalsByValue(e[a=f[s]],t[a]))return!1;return!0}return e!=e&&t!=t}static resolveFieldData(e,t){if(e&&t){if(this.isFunction(t))return t(e);if(-1==t.indexOf("."))return e[t];{let i=t.split("."),r=e;for(let s=0,o=i.length;s<o;++s){if(null==r)return null;r=r[i[s]]}return r}}return null}static isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)}static reorderArray(e,t,i){e&&t!==i&&(i>=e.length&&(i%=e.length,t%=e.length),e.splice(i,0,e.splice(t,1)[0]))}static insertIntoOrderedArray(e,t,i,r){if(i.length>0){let s=!1;for(let o=0;o<i.length;o++)if(this.findIndexInList(i[o],r)>t){i.splice(o,0,e),s=!0;break}s||i.push(e)}else i.push(e)}static findIndexInList(e,t){let i=-1;if(t)for(let r=0;r<t.length;r++)if(t[r]==e){i=r;break}return i}static contains(e,t){if(null!=e&&t&&t.length)for(let i of t)if(this.equals(e,i))return!0;return!1}static removeAccents(e){return e&&e.search(/[\xC0-\xFF]/g)>-1&&(e=e.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),e}static isDate(e){return"[object Date]"===Object.prototype.toString.call(e)}static isEmpty(e){return null==e||""===e||Array.isArray(e)&&0===e.length||!this.isDate(e)&&"object"==typeof e&&0===Object.keys(e).length}static isNotEmpty(e){return!this.isEmpty(e)}static compare(e,t,i,r=1){let s=-1;const o=this.isEmpty(e),a=this.isEmpty(t);return s=o&&a?0:o?r:a?-r:"string"==typeof e&&"string"==typeof t?e.localeCompare(t,i,{numeric:!0}):e<t?-1:e>t?1:0,s}static sort(e,t,i=1,r,s=1){return(1===s?i:s)*ef.compare(e,t,r,i)}static merge(e,t){if(null!=e||null!=t)return null!=e&&"object"!=typeof e||null!=t&&"object"!=typeof t?null!=e&&"string"!=typeof e||null!=t&&"string"!=typeof t?t||e:[e||"",t||""].join(" "):{...e||{},...t||{}}}static isPrintableCharacter(e=""){return this.isNotEmpty(e)&&1===e.length&&e.match(/\S| /)}static getItemValue(e,...t){return this.isFunction(e)?e(...t):e}static findLastIndex(e,t){let i=-1;if(this.isNotEmpty(e))try{i=e.findLastIndex(t)}catch{i=e.lastIndexOf([...e].reverse().find(t))}return i}static findLast(e,t){let i;if(this.isNotEmpty(e))try{i=e.findLast(t)}catch{i=[...e].reverse().find(t)}return i}}var i8=0;function r8(n="pn_id_"){return`${n}${++i8}`}var T2=function gde(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,a)=>{o&&(o.style.zIndex=String(((s,o)=>{let a=n.length>0?n[n.length-1]:{key:s,value:o},l=a.value+(a.key===s?0:o)+2;return n.push({key:s,value:l}),l})(s,a)))},clear:s=>{s&&((s=>{n=n.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();let as=(()=>class n{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"})(),s8=(()=>{class n{ripple=!1;overlayOptions={};filterMatchModeOptions={text:[as.STARTS_WITH,as.CONTAINS,as.NOT_CONTAINS,as.ENDS_WITH,as.EQUALS,as.NOT_EQUALS],numeric:[as.EQUALS,as.NOT_EQUALS,as.LESS_THAN,as.LESS_THAN_OR_EQUAL_TO,as.GREATER_THAN,as.GREATER_THAN_OR_EQUAL_TO],date:[as.DATE_IS,as.DATE_IS_NOT,as.DATE_BEFORE,as.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"{0} results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new hs;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A2=(()=>{class n{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(i){return new(i||n)(re(ul))};static \u0275dir=wt({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}})}return n})(),WS=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc]})}return n})(),yde=(()=>{class n{platformId;el;zone;config;renderer;changeDetector;id;tooltipPosition;tooltipEvent="hover";appendTo;positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;text;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.deactivate()}tooltipOptions;_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0,id:null};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;scrollHandler;resizeListener;constructor(t,i,r,s,o,a){this.platformId=t,this.el=i,this.zone=r,this.config=s,this.renderer=o,this.changeDetector=a}ngAfterViewInit(){this.id=this.id||r8()+"_tooltip",K3(this.platformId)&&this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let t=this.getTarget(this.el.nativeElement);t.addEventListener("focus",this.focusListener),t.addEventListener("blur",this.blurListener)}})}ngOnChanges(t){t.tooltipPosition&&this.setOption({tooltipPosition:t.tooltipPosition.currentValue}),t.tooltipEvent&&this.setOption({tooltipEvent:t.tooltipEvent.currentValue}),t.appendTo&&this.setOption({appendTo:t.appendTo.currentValue}),t.positionStyle&&this.setOption({positionStyle:t.positionStyle.currentValue}),t.tooltipStyleClass&&this.setOption({tooltipStyleClass:t.tooltipStyleClass.currentValue}),t.tooltipZIndex&&this.setOption({tooltipZIndex:t.tooltipZIndex.currentValue}),t.escape&&this.setOption({escape:t.escape.currentValue}),t.showDelay&&this.setOption({showDelay:t.showDelay.currentValue}),t.hideDelay&&this.setOption({hideDelay:t.hideDelay.currentValue}),t.life&&this.setOption({life:t.life.currentValue}),t.positionTop&&this.setOption({positionTop:t.positionTop.currentValue}),t.positionLeft&&this.setOption({positionLeft:t.positionLeft.currentValue}),t.disabled&&this.setOption({disabled:t.disabled.currentValue}),t.text&&(this.setOption({tooltipLabel:t.text.currentValue}),this.active&&(t.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),t.id&&(console.log("e"),this.setOption({id:t.text.currentValue})),t.autoHide&&this.setOption({autoHide:t.autoHide.currentValue}),t.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...t.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(t){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(t){(this.isAutoHide()||!(Ot.hasClass(t.target,"p-tooltip")||Ot.hasClass(t.target,"p-tooltip-arrow")||Ot.hasClass(t.target,"p-tooltip-text")||Ot.hasClass(t.relatedTarget,"p-tooltip")))&&this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onInputClick(t){this.deactivate()}onPressEscape(){this.hideOnEscape&&this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let t=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},t)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div"),this.container.setAttribute("id",this.getOption("id")||this.id),this.container.setAttribute("role","tooltip");let t=document.createElement("div");t.className="p-tooltip-arrow",this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?Ot.appendChild(this.container,this.el.nativeElement):Ot.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()?this.container.style.pointerEvents="none":(this.container.style.pointerEvents="unset",this.bindContainerMouseleaveListener())}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",i=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),Ot.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?T2.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&T2.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+Ot.getWindowScrollLeft(),top:t.top+Ot.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let t=this.getHostOffset(),i=t.left+Ot.getOuterWidth(this.el.nativeElement),r=t.top+(Ot.getOuterHeight(this.el.nativeElement)-Ot.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let t=this.getHostOffset(),i=t.left-Ot.getOuterWidth(this.container),r=t.top+(Ot.getOuterHeight(this.el.nativeElement)-Ot.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let t=this.getHostOffset(),i=t.left+(Ot.getOuterWidth(this.el.nativeElement)-Ot.getOuterWidth(this.container))/2,r=t.top-Ot.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let t=this.getHostOffset(),i=t.left+(Ot.getOuterWidth(this.el.nativeElement)-Ot.getOuterWidth(this.container))/2,r=t.top+Ot.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(t){this._tooltipOptions={...this._tooltipOptions,...t}}getOption(t){return this._tooltipOptions[t]}getTarget(t){return Ot.hasClass(t,"p-inputwrapper")?Ot.findSingle(t,"input"):t}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+t;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let t=this.container.getBoundingClientRect(),i=t.top,r=t.left,s=Ot.getOuterWidth(this.container),o=Ot.getOuterHeight(this.container),a=Ot.getViewport();return r+s>a.width||r<0||i<0||i+o>a.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new mde(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let t=this.getTarget(this.el.nativeElement);t.removeEventListener("focus",this.focusListener),t.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):Ot.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&T2.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}static \u0275fac=function(i){return new(i||n)(re(wa),re(vn),re(In),re(s8),re(Ei),re(Iu))};static \u0275dir=wt({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],hostBindings:function(i,r){1&i&&ct("keydown.escape",function(o){return r.onPressEscape(o)},0,PL)},inputs:{id:"id",tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",autoHide:"autoHide",fitContent:"fitContent",hideOnEscape:"hideOnEscape",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Ii]})}return n})(),vde=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc]})}return n})();const wde=["*"];let k0=(()=>{class n{label;spin=!1;styleClass;role;ariaLabel;ariaHidden;ngOnInit(){this.getAttributes()}getAttributes(){const t=ef.isEmpty(this.label);this.role=t?void 0:"img",this.ariaLabel=t?void 0:this.label,this.ariaHidden=t}getClassNames(){return`p-icon ${this.styleClass?this.styleClass+" ":""}${this.spin?"p-icon-spin":""}`}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=yi({type:n,selectors:[["ng-component"]],hostAttrs:[1,"p-element","p-icon-wrapper"],inputs:{label:"label",spin:"spin",styleClass:"styleClass"},standalone:!0,features:[Mu],ngContentSelectors:wde,decls:1,vars:0,template:function(i,r){1&i&&(mA(),gA(0))},encapsulation:2,changeDetection:0})}return n})(),o8=(()=>{class n extends k0{pathId;ngOnInit(){this.pathId="url(#"+r8()+")"}static \u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static \u0275cmp=yi({type:n,selectors:[["SpinnerIcon"]],standalone:!0,features:[wn,Mu],decls:6,vars:7,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(i,r){1&i&&(kl(),Le(0,"svg",0)(1,"g"),Bn(2,"path",1),Ie(),Le(3,"defs")(4,"clipPath",2),Bn(5,"rect",3),Ie()()()),2&i&&(Tr(r.getClassNames()),Un("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role),Se(1),Un("clip-path",r.pathId),Se(3),we("id",r.pathId))},encapsulation:2})}return n})(),bde=(()=>{class n{document;platformId;renderer;el;zone;config;constructor(t,i,r,s,o,a){this.document=t,this.platformId=i,this.renderer=r,this.el=s,this.zone=o,this.config=a}animationListener;mouseDownListener;timeout;ngAfterViewInit(){K3(this.platformId)&&this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))})}onMouseDown(t){let i=this.getInk();if(!i||"none"===this.document.defaultView?.getComputedStyle(i,null).display)return;if(Ot.removeClass(i,"p-ink-active"),!Ot.getHeight(i)&&!Ot.getWidth(i)){let a=Math.max(Ot.getOuterWidth(this.el.nativeElement),Ot.getOuterHeight(this.el.nativeElement));i.style.height=a+"px",i.style.width=a+"px"}let r=Ot.getOffset(this.el.nativeElement),s=t.pageX-r.left+this.document.body.scrollTop-Ot.getWidth(i)/2,o=t.pageY-r.top+this.document.body.scrollLeft-Ot.getHeight(i)/2;this.renderer.setStyle(i,"top",o+"px"),this.renderer.setStyle(i,"left",s+"px"),Ot.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let a=this.getInk();a&&Ot.removeClass(a,"p-ink-active")},401)}getInk(){const t=this.el.nativeElement.children;for(let i=0;i<t.length;i++)if("string"==typeof t[i].className&&-1!==t[i].className.indexOf("p-ink"))return t[i];return null}resetInk(){let t=this.getInk();t&&Ot.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Ot.removeClass(t.currentTarget,"p-ink-active")}create(){let t=this.renderer.createElement("span");this.renderer.addClass(t,"p-ink"),this.renderer.appendChild(this.el.nativeElement,t),this.renderer.setAttribute(t,"aria-hidden","true"),this.renderer.setAttribute(t,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(t,"animationend",this.onAnimationEnd.bind(this)))}remove(){let t=this.getInk();t&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,Ot.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}static \u0275fac=function(i){return new(i||n)(re(Ar),re(wa),re(Ei),re(vn),re(In),re(s8,8))};static \u0275dir=wt({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]})}return n})(),xde=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc]})}return n})();function Cde(n,e){1&n&&sm(0)}function Sde(n,e){if(1&n&&Bn(0,"span",8),2&n){const t=Te(3);Tr("p-button-loading-icon pi-spin "+t.loadingIcon),we("ngClass",t.iconClass()),Un("aria-hidden",!0)("data-pc-section","loadingicon")}}function Ede(n,e){1&n&&Bn(0,"SpinnerIcon",9),2&n&&(we("styleClass",Te(3).spinnerIconClass())("spin",!0),Un("aria-hidden",!0)("data-pc-section","loadingicon"))}function Mde(n,e){if(1&n&&(co(0),Qe(1,Sde,1,5,"span",6),Qe(2,Ede,1,4,"SpinnerIcon",7),uo()),2&n){const t=Te(2);Se(1),we("ngIf",t.loadingIcon),Se(1),we("ngIf",!t.loadingIcon)}}function Tde(n,e){}function Ade(n,e){1&n&&Qe(0,Tde,0,0,"ng-template")}function Dde(n,e){if(1&n&&(Le(0,"span",10),Qe(1,Ade,1,0,null,1),Ie()),2&n){const t=Te(2);we("ngClass",t.iconClass()),Un("aria-hidden",!0)("data-pc-section","loadingicon"),Se(1),we("ngTemplateOutlet",t.loadingIconTemplate)}}function Ide(n,e){if(1&n&&(co(0),Qe(1,Mde,3,2,"ng-container",2),Qe(2,Dde,2,4,"span",5),uo()),2&n){const t=Te();Se(1),we("ngIf",!t.loadingIconTemplate),Se(1),we("ngIf",t.loadingIconTemplate)}}function Rde(n,e){if(1&n&&Bn(0,"span",8),2&n){const t=Te(2);Tr(t.icon),we("ngClass",t.iconClass()),Un("data-pc-section","icon")}}function Pde(n,e){}function Ode(n,e){1&n&&Qe(0,Pde,0,0,"ng-template",12),2&n&&we("ngIf",!Te(3).icon)}function Lde(n,e){if(1&n&&(Le(0,"span",8),Qe(1,Ode,1,1,null,1),Ie()),2&n){const t=Te(2);we("ngClass",t.iconClass()),Un("data-pc-section","icon"),Se(1),we("ngTemplateOutlet",t.iconTemplate)}}function Nde(n,e){if(1&n&&(co(0),Qe(1,Rde,1,4,"span",6),Qe(2,Lde,2,3,"span",11),uo()),2&n){const t=Te();Se(1),we("ngIf",t.icon&&!t.iconTemplate),Se(1),we("ngIf",!t.icon&&t.iconTemplate)}}function Fde(n,e){if(1&n&&(Le(0,"span",13),Qt(1),Ie()),2&n){const t=Te();Un("aria-hidden",t.icon&&!t.label)("data-pc-section","label"),Se(1),Sa(t.label)}}function kde(n,e){if(1&n&&(Le(0,"span",8),Qt(1),Ie()),2&n){const t=Te();Tr(t.badgeClass),we("ngClass",t.badgeStyleClass()),Un("data-pc-section","badge"),Se(1),Sa(t.badge)}}const Ude=["*"],lh={button:"p-button",component:"p-component",iconOnly:"p-button-icon-only",disabled:"p-disabled",loading:"p-button-loading",labelOnly:"p-button-loading-label-only"};let Bde=(()=>{class n{el;document;iconPos="left";loadingIcon;get label(){return this._label}set label(t){this._label=t,this.initialized&&(this.updateLabel(),this.updateIcon(),this.setStyleClass())}get icon(){return this._icon}set icon(t){this._icon=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}get loading(){return this._loading}set loading(t){this._loading=t,this.initialized&&(this.updateIcon(),this.setStyleClass())}_label;_icon;_loading=!1;initialized;get htmlElement(){return this.el.nativeElement}_internalClasses=Object.values(lh);spinnerIcon='<svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg" class="p-icon-spin">\n        <g clip-path="url(#clip0_417_21408)">\n            <path\n                d="M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z"\n                fill="currentColor"\n            />\n        </g>\n        <defs>\n            <clipPath id="clip0_417_21408">\n                <rect width="14" height="14" fill="white" />\n            </clipPath>\n        </defs>\n    </svg>';constructor(t,i){this.el=t,this.document=i}ngAfterViewInit(){Ot.addMultipleClasses(this.htmlElement,this.getStyleClass().join(" ")),this.createIcon(),this.createLabel(),this.initialized=!0}getStyleClass(){const t=[lh.button,lh.component];return this.icon&&!this.label&&ef.isEmpty(this.htmlElement.textContent)&&t.push(lh.iconOnly),this.loading&&(t.push(lh.disabled,lh.loading),!this.icon&&this.label&&t.push(lh.labelOnly),this.icon&&!this.label&&!ef.isEmpty(this.htmlElement.textContent)&&t.push(lh.iconOnly)),t}setStyleClass(){const t=this.getStyleClass();this.htmlElement.classList.remove(...this._internalClasses),this.htmlElement.classList.add(...t)}createLabel(){if(this.label){let t=this.document.createElement("span");this.icon&&!this.label&&t.setAttribute("aria-hidden","true"),t.className="p-button-label",t.appendChild(this.document.createTextNode(this.label)),this.htmlElement.appendChild(t)}}createIcon(){if(this.icon||this.loading){let t=this.document.createElement("span");t.className="p-button-icon",t.setAttribute("aria-hidden","true");let i=this.label?"p-button-icon-"+this.iconPos:null;i&&Ot.addClass(t,i);let r=this.getIconClass();r&&Ot.addMultipleClasses(t,r),!this.loadingIcon&&this.loading&&(t.innerHTML=this.spinnerIcon),this.htmlElement.insertBefore(t,this.htmlElement.firstChild)}}updateLabel(){let t=Ot.findSingle(this.htmlElement,".p-button-label");this.label?t?t.textContent=this.label:this.createLabel():t&&this.htmlElement.removeChild(t)}updateIcon(){let t=Ot.findSingle(this.htmlElement,".p-button-icon"),i=Ot.findSingle(this.htmlElement,".p-button-label");this.loading&&!this.loadingIcon&&t?t.innerHTML=this.spinnerIcon:t?.innerHTML&&(t.innerHTML=""),t?t.className=this.iconPos?"p-button-icon "+(i?"p-button-icon-"+this.iconPos:"")+" "+this.getIconClass():"p-button-icon "+this.getIconClass():this.createIcon()}getIconClass(){return this.loading?"p-button-loading-icon "+(this.loadingIcon?this.loadingIcon:"p-icon"):this.icon}ngOnDestroy(){this.initialized=!1}static \u0275fac=function(i){return new(i||n)(re(vn),re(Ar))};static \u0275dir=wt({type:n,selectors:[["","pButton",""]],hostAttrs:[1,"p-element"],inputs:{iconPos:"iconPos",loadingIcon:"loadingIcon",label:"label",icon:"icon",loading:"loading"}})}return n})(),D2=(()=>{class n{type="button";iconPos="left";icon;badge;label;disabled;loading=!1;loadingIcon;raised=!1;rounded=!1;text=!1;plain=!1;severity;outlined=!1;link=!1;size;style;styleClass;badgeClass;ariaLabel;onClick=new Mn;onFocus=new Mn;onBlur=new Mn;contentTemplate;loadingIconTemplate;iconTemplate;templates;spinnerIconClass(){return Object.entries(this.iconClass()).filter(([,t])=>!!t).reduce((t,[i])=>t+` ${i}`,"p-button-loading-icon")}iconClass(){return{"p-button-icon":!0,"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}}buttonClass(){return{"p-button p-component":!0,"p-button-icon-only":(this.icon||this.iconTemplate||this.loadingIcon||this.loadingIconTemplate)&&!this.label,"p-button-vertical":("top"===this.iconPos||"bottom"===this.iconPos)&&this.label,"p-disabled":this.disabled||this.loading,"p-button-loading":this.loading,"p-button-loading-label-only":this.loading&&!this.icon&&this.label&&!this.loadingIcon&&"left"===this.iconPos,"p-button-link":this.link,[`p-button-${this.severity}`]:this.severity,"p-button-raised":this.raised,"p-button-rounded":this.rounded,"p-button-text":this.text,"p-button-outlined":this.outlined,"p-button-sm":"small"===this.size,"p-button-lg":"large"===this.size,"p-button-plain":this.plain}}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":default:this.contentTemplate=t.template;break;case"icon":this.iconTemplate=t.template;break;case"loadingicon":this.loadingIconTemplate=t.template}})}badgeStyleClass(){return{"p-badge p-component":!0,"p-badge-no-gutter":this.badge&&1===String(this.badge).length}}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=yi({type:n,selectors:[["p-button"]],contentQueries:function(i,r,s){if(1&i&&sv(s,A2,4),2&i){let o;Tu(o=Au())&&(r.templates=o)}},hostAttrs:[1,"p-element"],hostVars:2,hostBindings:function(i,r){2&i&&cd("p-disabled",r.disabled)},inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:"disabled",loading:"loading",loadingIcon:"loadingIcon",raised:"raised",rounded:"rounded",text:"text",plain:"plain",severity:"severity",outlined:"outlined",link:"link",size:"size",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",ariaLabel:"ariaLabel"},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},ngContentSelectors:Ude,decls:7,vars:14,consts:[["pRipple","",3,"ngStyle","disabled","ngClass","click","focus","blur"],[4,"ngTemplateOutlet"],[4,"ngIf"],["class","p-button-label",4,"ngIf"],[3,"ngClass","class",4,"ngIf"],["class","p-button-loading-icon",3,"ngClass",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],[3,"styleClass","spin",4,"ngIf"],[3,"ngClass"],[3,"styleClass","spin"],[1,"p-button-loading-icon",3,"ngClass"],[3,"ngClass",4,"ngIf"],[3,"ngIf"],[1,"p-button-label"]],template:function(i,r){1&i&&(mA(),Le(0,"button",0),ct("click",function(o){return r.onClick.emit(o)})("focus",function(o){return r.onFocus.emit(o)})("blur",function(o){return r.onBlur.emit(o)}),gA(1),Qe(2,Cde,1,0,"ng-container",1),Qe(3,Ide,3,2,"ng-container",2),Qe(4,Nde,3,2,"ng-container",2),Qe(5,Fde,2,3,"span",3),Qe(6,kde,2,5,"span",4),Ie()),2&i&&(Tr(r.styleClass),we("ngStyle",r.style)("disabled",r.disabled||r.loading)("ngClass",r.buttonClass()),Un("type",r.type)("aria-label",r.ariaLabel)("data-pc-name","button")("data-pc-section","root"),Se(2),we("ngTemplateOutlet",r.contentTemplate),Se(1),we("ngIf",r.loading),Se(1),we("ngIf",!r.loading),Se(1),we("ngIf",!r.contentTemplate&&r.label),Se(1),we("ngIf",!r.contentTemplate&&r.badge))},dependencies:function(){return[hv,Pu,fv,uC,bde,o8]},encapsulation:2,changeDetection:0})}return n})(),a8=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc,xde,WS,o8,WS]})}return n})(),Vde=(()=>{class n{el;ngModel;cd;filled;constructor(t,i,r){this.el=t,this.ngModel=i,this.cd=r}ngAfterViewInit(){this.updateFilledState(),this.cd.detectChanges()}ngDoCheck(){this.updateFilledState()}onInput(){this.updateFilledState()}updateFilledState(){this.filled=this.el.nativeElement.value&&this.el.nativeElement.value.length||this.ngModel&&this.ngModel.model}static \u0275fac=function(i){return new(i||n)(re(vn),re(Mv,8),re(Iu))};static \u0275dir=wt({type:n,selectors:[["","pInputText",""]],hostAttrs:[1,"p-inputtext","p-component","p-element"],hostVars:2,hostBindings:function(i,r){1&i&&ct("input",function(o){return r.onInput(o)}),2&i&&cd("p-filled",r.filled)}})}return n})(),zde=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc]})}return n})(),l8=(()=>{class n extends k0{static \u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static \u0275cmp=yi({type:n,selectors:[["TimesIcon"]],standalone:!0,features:[wn,Mu],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M8.01186 7.00933L12.27 2.75116C12.341 2.68501 12.398 2.60524 12.4375 2.51661C12.4769 2.42798 12.4982 2.3323 12.4999 2.23529C12.5016 2.13827 12.4838 2.0419 12.4474 1.95194C12.4111 1.86197 12.357 1.78024 12.2884 1.71163C12.2198 1.64302 12.138 1.58893 12.0481 1.55259C11.9581 1.51625 11.8617 1.4984 11.7647 1.50011C11.6677 1.50182 11.572 1.52306 11.4834 1.56255C11.3948 1.60204 11.315 1.65898 11.2488 1.72997L6.99067 5.98814L2.7325 1.72997C2.59553 1.60234 2.41437 1.53286 2.22718 1.53616C2.03999 1.53946 1.8614 1.61529 1.72901 1.74767C1.59663 1.88006 1.5208 2.05865 1.5175 2.24584C1.5142 2.43303 1.58368 2.61419 1.71131 2.75116L5.96948 7.00933L1.71131 11.2675C1.576 11.403 1.5 11.5866 1.5 11.7781C1.5 11.9696 1.576 12.1532 1.71131 12.2887C1.84679 12.424 2.03043 12.5 2.2219 12.5C2.41338 12.5 2.59702 12.424 2.7325 12.2887L6.99067 8.03052L11.2488 12.2887C11.3843 12.424 11.568 12.5 11.7594 12.5C11.9509 12.5 12.1346 12.424 12.27 12.2887C12.4053 12.1532 12.4813 11.9696 12.4813 11.7781C12.4813 11.5866 12.4053 11.403 12.27 11.2675L8.01186 7.00933Z","fill","currentColor"]],template:function(i,r){1&i&&(kl(),Le(0,"svg",0),Bn(1,"path",1),Ie()),2&i&&(Tr(r.getClassNames()),Un("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})(),c8=(()=>{class n extends k0{static \u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static \u0275cmp=yi({type:n,selectors:[["AngleUpIcon"]],standalone:!0,features:[wn,Mu],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M10.4134 9.49931C10.3148 9.49977 10.2172 9.48055 10.1262 9.44278C10.0352 9.405 9.95263 9.34942 9.88338 9.27931L6.88338 6.27931L3.88338 9.27931C3.73811 9.34946 3.57409 9.3709 3.41567 9.34044C3.25724 9.30999 3.11286 9.22926 3.00395 9.11025C2.89504 8.99124 2.82741 8.84028 2.8111 8.67978C2.79478 8.51928 2.83065 8.35781 2.91338 8.21931L6.41338 4.71931C6.55401 4.57886 6.74463 4.49997 6.94338 4.49997C7.14213 4.49997 7.33276 4.57886 7.47338 4.71931L10.9734 8.21931C11.1138 8.35994 11.1927 8.55056 11.1927 8.74931C11.1927 8.94806 11.1138 9.13868 10.9734 9.27931C10.9007 9.35315 10.8132 9.41089 10.7168 9.44879C10.6203 9.48669 10.5169 9.5039 10.4134 9.49931Z","fill","currentColor"]],template:function(i,r){1&i&&(kl(),Le(0,"svg",0),Bn(1,"path",1),Ie()),2&i&&(Tr(r.getClassNames()),Un("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})(),u8=(()=>{class n extends k0{static \u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static \u0275cmp=yi({type:n,selectors:[["AngleDownIcon"]],standalone:!0,features:[wn,Mu],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M3.58659 4.5007C3.68513 4.50023 3.78277 4.51945 3.87379 4.55723C3.9648 4.59501 4.04735 4.65058 4.11659 4.7207L7.11659 7.7207L10.1166 4.7207C10.2619 4.65055 10.4259 4.62911 10.5843 4.65956C10.7427 4.69002 10.8871 4.77074 10.996 4.88976C11.1049 5.00877 11.1726 5.15973 11.1889 5.32022C11.2052 5.48072 11.1693 5.6422 11.0866 5.7807L7.58659 9.2807C7.44597 9.42115 7.25534 9.50004 7.05659 9.50004C6.85784 9.50004 6.66722 9.42115 6.52659 9.2807L3.02659 5.7807C2.88614 5.64007 2.80725 5.44945 2.80725 5.2507C2.80725 5.05195 2.88614 4.86132 3.02659 4.7207C3.09932 4.64685 3.18675 4.58911 3.28322 4.55121C3.37969 4.51331 3.48305 4.4961 3.58659 4.5007Z","fill","currentColor"]],template:function(i,r){1&i&&(kl(),Le(0,"svg",0),Bn(1,"path",1),Ie()),2&i&&(Tr(r.getClassNames()),Un("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();const Hde=["input"];function Gde(n,e){if(1&n){const t=nr();Le(0,"TimesIcon",8),ct("click",function(){return mt(t),ht(Te(2).clear())}),Ie()}2&n&&we("ngClass","p-inputnumber-clear-icon")}function Wde(n,e){}function jde(n,e){1&n&&Qe(0,Wde,0,0,"ng-template")}function $de(n,e){if(1&n){const t=nr();Le(0,"span",9),ct("click",function(){return mt(t),ht(Te(2).clear())}),Qe(1,jde,1,0,null,10),Ie()}if(2&n){const t=Te(2);Se(1),we("ngTemplateOutlet",t.clearIconTemplate)}}function qde(n,e){if(1&n&&(co(0),Qe(1,Gde,1,1,"TimesIcon",6),Qe(2,$de,2,1,"span",7),uo()),2&n){const t=Te();Se(1),we("ngIf",!t.clearIconTemplate),Se(1),we("ngIf",t.clearIconTemplate)}}function Xde(n,e){1&n&&Bn(0,"span",14),2&n&&we("ngClass",Te(2).incrementButtonIcon)}function Yde(n,e){1&n&&Bn(0,"AngleUpIcon")}function Zde(n,e){}function Kde(n,e){1&n&&Qe(0,Zde,0,0,"ng-template")}function Jde(n,e){if(1&n&&(co(0),Qe(1,Yde,1,0,"AngleUpIcon",3),Qe(2,Kde,1,0,null,10),uo()),2&n){const t=Te(2);Se(1),we("ngIf",!t.incrementButtonIconTemplate),Se(1),we("ngTemplateOutlet",t.incrementButtonIconTemplate)}}function Qde(n,e){1&n&&Bn(0,"span",14),2&n&&we("ngClass",Te(2).decrementButtonIcon)}function efe(n,e){1&n&&Bn(0,"AngleDownIcon")}function tfe(n,e){}function nfe(n,e){1&n&&Qe(0,tfe,0,0,"ng-template")}function ife(n,e){if(1&n&&(co(0),Qe(1,efe,1,0,"AngleDownIcon",3),Qe(2,nfe,1,0,null,10),uo()),2&n){const t=Te(2);Se(1),we("ngIf",!t.decrementButtonIconTemplate),Se(1),we("ngTemplateOutlet",t.decrementButtonIconTemplate)}}const h8=function(){return{"p-inputnumber-button p-inputnumber-button-up":!0}},d8=function(){return{"p-inputnumber-button p-inputnumber-button-down":!0}};function rfe(n,e){if(1&n){const t=nr();Le(0,"span",11)(1,"button",12),ct("mousedown",function(r){return mt(t),ht(Te().onUpButtonMouseDown(r))})("mouseup",function(){return mt(t),ht(Te().onUpButtonMouseUp())})("mouseleave",function(){return mt(t),ht(Te().onUpButtonMouseLeave())})("keydown",function(r){return mt(t),ht(Te().onUpButtonKeyDown(r))})("keyup",function(){return mt(t),ht(Te().onUpButtonKeyUp())}),Qe(2,Xde,1,1,"span",13),Qe(3,Jde,3,2,"ng-container",3),Ie(),Le(4,"button",12),ct("mousedown",function(r){return mt(t),ht(Te().onDownButtonMouseDown(r))})("mouseup",function(){return mt(t),ht(Te().onDownButtonMouseUp())})("mouseleave",function(){return mt(t),ht(Te().onDownButtonMouseLeave())})("keydown",function(r){return mt(t),ht(Te().onDownButtonKeyDown(r))})("keyup",function(){return mt(t),ht(Te().onDownButtonKeyUp())}),Qe(5,Qde,1,1,"span",13),Qe(6,ife,3,2,"ng-container",3),Ie()()}if(2&n){const t=Te();Se(1),Tr(t.incrementButtonClass),we("ngClass",ev(12,h8))("disabled",t.disabled),Se(1),we("ngIf",t.incrementButtonIcon),Se(1),we("ngIf",!t.incrementButtonIcon),Se(1),Tr(t.decrementButtonClass),we("ngClass",ev(13,d8))("disabled",t.disabled),Se(1),we("ngIf",t.decrementButtonIcon),Se(1),we("ngIf",!t.decrementButtonIcon)}}function sfe(n,e){1&n&&Bn(0,"span",14),2&n&&we("ngClass",Te(2).incrementButtonIcon)}function ofe(n,e){1&n&&Bn(0,"AngleUpIcon")}function afe(n,e){}function lfe(n,e){1&n&&Qe(0,afe,0,0,"ng-template")}function cfe(n,e){if(1&n&&(co(0),Qe(1,ofe,1,0,"AngleUpIcon",3),Qe(2,lfe,1,0,null,10),uo()),2&n){const t=Te(2);Se(1),we("ngIf",!t.incrementButtonIconTemplate),Se(1),we("ngTemplateOutlet",t.incrementButtonIconTemplate)}}function ufe(n,e){if(1&n){const t=nr();Le(0,"button",12),ct("mousedown",function(r){return mt(t),ht(Te().onUpButtonMouseDown(r))})("mouseup",function(){return mt(t),ht(Te().onUpButtonMouseUp())})("mouseleave",function(){return mt(t),ht(Te().onUpButtonMouseLeave())})("keydown",function(r){return mt(t),ht(Te().onUpButtonKeyDown(r))})("keyup",function(){return mt(t),ht(Te().onUpButtonKeyUp())}),Qe(1,sfe,1,1,"span",13),Qe(2,cfe,3,2,"ng-container",3),Ie()}if(2&n){const t=Te();Tr(t.incrementButtonClass),we("ngClass",ev(6,h8))("disabled",t.disabled),Se(1),we("ngIf",t.incrementButtonIcon),Se(1),we("ngIf",!t.incrementButtonIcon)}}function hfe(n,e){1&n&&Bn(0,"span",14),2&n&&we("ngClass",Te(2).decrementButtonIcon)}function dfe(n,e){1&n&&Bn(0,"AngleDownIcon")}function ffe(n,e){}function pfe(n,e){1&n&&Qe(0,ffe,0,0,"ng-template")}function mfe(n,e){if(1&n&&(co(0),Qe(1,dfe,1,0,"AngleDownIcon",3),Qe(2,pfe,1,0,null,10),uo()),2&n){const t=Te(2);Se(1),we("ngIf",!t.decrementButtonIconTemplate),Se(1),we("ngTemplateOutlet",t.decrementButtonIconTemplate)}}function gfe(n,e){if(1&n){const t=nr();Le(0,"button",12),ct("mousedown",function(r){return mt(t),ht(Te().onDownButtonMouseDown(r))})("mouseup",function(){return mt(t),ht(Te().onDownButtonMouseUp())})("mouseleave",function(){return mt(t),ht(Te().onDownButtonMouseLeave())})("keydown",function(r){return mt(t),ht(Te().onDownButtonKeyDown(r))})("keyup",function(){return mt(t),ht(Te().onDownButtonKeyUp())}),Qe(1,hfe,1,1,"span",13),Qe(2,mfe,3,2,"ng-container",3),Ie()}if(2&n){const t=Te();Tr(t.decrementButtonClass),we("ngClass",ev(6,d8))("disabled",t.disabled),Se(1),we("ngIf",t.decrementButtonIcon),Se(1),we("ngIf",!t.decrementButtonIcon)}}const _fe=function(n,e,t){return{"p-inputnumber p-component":!0,"p-inputnumber-buttons-stacked":n,"p-inputnumber-buttons-horizontal":e,"p-inputnumber-buttons-vertical":t}},yfe={provide:jo,useExisting:xn(()=>f8),multi:!0};let f8=(()=>{class n{document;el;cd;injector;showButtons=!1;format=!0;buttonLayout="stacked";inputId;styleClass;style;placeholder;size;maxlength;tabindex;title;ariaLabel;ariaRequired;name;required;autocomplete;min;max;incrementButtonClass;decrementButtonClass;incrementButtonIcon;decrementButtonIcon;readonly=!1;step=1;allowEmpty=!0;locale;localeMatcher;mode="decimal";currency;currencyDisplay;useGrouping=!0;minFractionDigits;maxFractionDigits;prefix;suffix;inputStyle;inputStyleClass;showClear=!1;get disabled(){return this._disabled}set disabled(t){t&&(this.focused=!1),this._disabled=t,this.timer&&this.clearTimer()}onInput=new Mn;onFocus=new Mn;onBlur=new Mn;onKeyDown=new Mn;onClear=new Mn;input;templates;clearIconTemplate;incrementButtonIconTemplate;decrementButtonIconTemplate;value;onModelChange=()=>{};onModelTouched=()=>{};focused;initialized;groupChar="";prefixChar="";suffixChar="";isSpecialChar;timer;lastValue;_numeral;numberFormat;_decimal;_group;_minusSign;_currency;_prefix;_suffix;_index;_disabled;ngControl=null;constructor(t,i,r,s){this.document=t,this.el=i,this.cd=r,this.injector=s}ngOnChanges(t){["locale","localeMatcher","mode","currency","currencyDisplay","useGrouping","minFractionDigits","maxFractionDigits","prefix","suffix"].some(r=>!!t[r])&&this.updateConstructParser()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"clearicon":this.clearIconTemplate=t.template;break;case"incrementbuttonicon":this.incrementButtonIconTemplate=t.template;break;case"decrementbuttonicon":this.decrementButtonIconTemplate=t.template}})}ngOnInit(){this.ngControl=this.injector.get(sc,null,{optional:!0}),this.constructParser(),this.initialized=!0}getOptions(){return{localeMatcher:this.localeMatcher,style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,useGrouping:this.useGrouping,minimumFractionDigits:this.minFractionDigits,maximumFractionDigits:this.maxFractionDigits}}constructParser(){this.numberFormat=new Intl.NumberFormat(this.locale,this.getOptions());const t=[...new Intl.NumberFormat(this.locale,{useGrouping:!1}).format(9876543210)].reverse(),i=new Map(t.map((r,s)=>[r,s]));this._numeral=new RegExp(`[${t.join("")}]`,"g"),this._group=this.getGroupingExpression(),this._minusSign=this.getMinusSignExpression(),this._currency=this.getCurrencyExpression(),this._decimal=this.getDecimalExpression(),this._suffix=this.getSuffixExpression(),this._prefix=this.getPrefixExpression(),this._index=r=>i.get(r)}updateConstructParser(){this.initialized&&this.constructParser()}escapeRegExp(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}getDecimalExpression(){const t=new Intl.NumberFormat(this.locale,{...this.getOptions(),useGrouping:!1});return new RegExp(`[${t.format(1.1).replace(this._currency,"").trim().replace(this._numeral,"")}]`,"g")}getGroupingExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!0});return this.groupChar=t.format(1e6).trim().replace(this._numeral,"").charAt(0),new RegExp(`[${this.groupChar}]`,"g")}getMinusSignExpression(){const t=new Intl.NumberFormat(this.locale,{useGrouping:!1});return new RegExp(`[${t.format(-1).trim().replace(this._numeral,"")}]`,"g")}getCurrencyExpression(){if(this.currency){const t=new Intl.NumberFormat(this.locale,{style:"currency",currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});return new RegExp(`[${t.format(1).replace(/\s/g,"").replace(this._numeral,"").replace(this._group,"")}]`,"g")}return new RegExp("[]","g")}getPrefixExpression(){if(this.prefix)this.prefixChar=this.prefix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay});this.prefixChar=t.format(1).split("1")[0]}return new RegExp(`${this.escapeRegExp(this.prefixChar||"")}`,"g")}getSuffixExpression(){if(this.suffix)this.suffixChar=this.suffix;else{const t=new Intl.NumberFormat(this.locale,{style:this.mode,currency:this.currency,currencyDisplay:this.currencyDisplay,minimumFractionDigits:0,maximumFractionDigits:0});this.suffixChar=t.format(1).split("1")[1]}return new RegExp(`${this.escapeRegExp(this.suffixChar||"")}`,"g")}formatValue(t){if(null!=t){if("-"===t)return t;if(this.format){let r=new Intl.NumberFormat(this.locale,this.getOptions()).format(t);return this.prefix&&(r=this.prefix+r),this.suffix&&(r+=this.suffix),r}return t.toString()}return""}parseValue(t){let i=t.replace(this._suffix,"").replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").replace(this._group,"").replace(this._minusSign,"-").replace(this._decimal,".").replace(this._numeral,this._index);if(i){if("-"===i)return i;let r=+i;return isNaN(r)?null:r}return null}repeat(t,i,r){if(this.readonly)return;let s=i||500;this.clearTimer(),this.timer=setTimeout(()=>{this.repeat(t,40,r)},s),this.spin(t,r)}spin(t,i){let r=this.step*i,s=this.parseValue(this.input?.nativeElement.value)||0,o=this.validateValue(s+r);this.maxlength&&this.maxlength<this.formatValue(o).length||(this.updateInput(o,null,"spin",null),this.updateModel(t,o),this.handleOnInput(t,s,o))}clear(){this.value=null,this.onModelChange(this.value),this.onClear.emit()}onUpButtonMouseDown(t){2!==t.button?(this.input?.nativeElement.focus(),this.repeat(t,null,1),t.preventDefault()):this.clearTimer()}onUpButtonMouseUp(){this.clearTimer()}onUpButtonMouseLeave(){this.clearTimer()}onUpButtonKeyDown(t){(32===t.keyCode||13===t.keyCode)&&this.repeat(t,null,1)}onUpButtonKeyUp(){this.clearTimer()}onDownButtonMouseDown(t){2!==t.button?(this.input?.nativeElement.focus(),this.repeat(t,null,-1),t.preventDefault()):this.clearTimer()}onDownButtonMouseUp(){this.clearTimer()}onDownButtonMouseLeave(){this.clearTimer()}onDownButtonKeyUp(){this.clearTimer()}onDownButtonKeyDown(t){(32===t.keyCode||13===t.keyCode)&&this.repeat(t,null,-1)}onUserInput(t){this.readonly||(this.isSpecialChar&&(t.target.value=this.lastValue),this.isSpecialChar=!1)}onInputKeyDown(t){if(this.readonly)return;if(this.lastValue=t.target.value,t.shiftKey||t.altKey)return void(this.isSpecialChar=!0);let i=t.target.selectionStart,r=t.target.selectionEnd,s=t.target.value,o=null;switch(t.altKey&&t.preventDefault(),t.which){case 38:this.spin(t,1),t.preventDefault();break;case 40:this.spin(t,-1),t.preventDefault();break;case 37:this.isNumeralChar(s.charAt(i-1))||t.preventDefault();break;case 39:this.isNumeralChar(s.charAt(i))||t.preventDefault();break;case 13:o=this.validateValue(this.parseValue(this.input.nativeElement.value)),this.input.nativeElement.value=this.formatValue(o),this.input.nativeElement.setAttribute("aria-valuenow",o),this.updateModel(t,o);break;case 8:if(t.preventDefault(),i===r){const a=s.charAt(i-1),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(a)){const u=this.getDecimalLength(s);if(this._group.test(a))this._group.lastIndex=0,o=s.slice(0,i-2)+s.slice(i-1);else if(this._decimal.test(a))this._decimal.lastIndex=0,u?this.input?.nativeElement.setSelectionRange(i-1,i-1):o=s.slice(0,i-1)+s.slice(i);else if(l>0&&i>l){const d=this.isDecimalMode()&&(this.minFractionDigits||0)<u?"":"0";o=s.slice(0,i-1)+d+s.slice(i)}else 1===c?(o=s.slice(0,i-1)+"0"+s.slice(i),o=this.parseValue(o)>0?o:""):o=s.slice(0,i-1)+s.slice(i)}this.updateValue(t,o,null,"delete-single")}else o=this.deleteRange(s,i,r),this.updateValue(t,o,null,"delete-range");break;case 46:if(t.preventDefault(),i===r){const a=s.charAt(i),{decimalCharIndex:l,decimalCharIndexWithoutPrefix:c}=this.getDecimalCharIndexes(s);if(this.isNumeralChar(a)){const u=this.getDecimalLength(s);if(this._group.test(a))this._group.lastIndex=0,o=s.slice(0,i)+s.slice(i+2);else if(this._decimal.test(a))this._decimal.lastIndex=0,u?this.input?.nativeElement.setSelectionRange(i+1,i+1):o=s.slice(0,i)+s.slice(i+1);else if(l>0&&i>l){const d=this.isDecimalMode()&&(this.minFractionDigits||0)<u?"":"0";o=s.slice(0,i)+d+s.slice(i+1)}else 1===c?(o=s.slice(0,i)+"0"+s.slice(i+1),o=this.parseValue(o)>0?o:""):o=s.slice(0,i)+s.slice(i+1)}this.updateValue(t,o,null,"delete-back-single")}else o=this.deleteRange(s,i,r),this.updateValue(t,o,null,"delete-range")}this.onKeyDown.emit(t)}onInputKeyPress(t){if(this.readonly)return;let i=t.which||t.keyCode,r=String.fromCharCode(i);const s=this.isDecimalSign(r),o=this.isMinusSign(r);13!=i&&t.preventDefault();const a=this.parseValue(this.input.nativeElement.value+r),l=null!=a?a.toString():"";this.maxlength&&l.length>this.maxlength||(48<=i&&i<=57||o||s)&&this.insert(t,r,{isDecimalSign:s,isMinusSign:o})}onPaste(t){if(!this.disabled&&!this.readonly){t.preventDefault();let i=(t.clipboardData||this.document.defaultView.clipboardData).getData("Text");if(i){this.maxlength&&(i=i.toString().substring(0,this.maxlength));let r=this.parseValue(i);null!=r&&this.insert(t,r.toString())}}}allowMinusSign(){return null==this.min||this.min<0}isMinusSign(t){return!(!this._minusSign.test(t)&&"-"!==t||(this._minusSign.lastIndex=0,0))}isDecimalSign(t){return!!this._decimal.test(t)&&(this._decimal.lastIndex=0,!0)}isDecimalMode(){return"decimal"===this.mode}getDecimalCharIndexes(t){let i=t.search(this._decimal);this._decimal.lastIndex=0;const s=t.replace(this._prefix,"").trim().replace(/\s/g,"").replace(this._currency,"").search(this._decimal);return this._decimal.lastIndex=0,{decimalCharIndex:i,decimalCharIndexWithoutPrefix:s}}getCharIndexes(t){const i=t.search(this._decimal);this._decimal.lastIndex=0;const r=t.search(this._minusSign);this._minusSign.lastIndex=0;const s=t.search(this._suffix);this._suffix.lastIndex=0;const o=t.search(this._currency);return this._currency.lastIndex=0,{decimalCharIndex:i,minusCharIndex:r,suffixCharIndex:s,currencyCharIndex:o}}insert(t,i,r={isDecimalSign:!1,isMinusSign:!1}){const s=i.search(this._minusSign);if(this._minusSign.lastIndex=0,!this.allowMinusSign()&&-1!==s)return;let o=this.input?.nativeElement.selectionStart,a=this.input?.nativeElement.selectionEnd,l=this.input?.nativeElement.value.trim();const{decimalCharIndex:c,minusCharIndex:u,suffixCharIndex:d,currencyCharIndex:f}=this.getCharIndexes(l);let m;if(r.isMinusSign)0===o&&(m=l,(-1===u||0!==a)&&(m=this.insertText(l,i,0,a)),this.updateValue(t,m,i,"insert"));else if(r.isDecimalSign)c>0&&o===c?this.updateValue(t,l,i,"insert"):(c>o&&c<a||-1===c&&this.maxFractionDigits)&&(m=this.insertText(l,i,o,a),this.updateValue(t,m,i,"insert"));else{const g=this.numberFormat.resolvedOptions().maximumFractionDigits,_=o!==a?"range-insert":"insert";if(c>0&&o>c){if(o+i.length-(c+1)<=g){const v=f>=o?f-1:d>=o?d:l.length;m=l.slice(0,o)+i+l.slice(o+i.length,v)+l.slice(v),this.updateValue(t,m,i,_)}}else m=this.insertText(l,i,o,a),this.updateValue(t,m,i,_)}}insertText(t,i,r,s){if(2===("."===i?i:i.split(".")).length){const a=t.slice(r,s).search(this._decimal);return this._decimal.lastIndex=0,a>0?t.slice(0,r)+this.formatValue(i)+t.slice(s):t||this.formatValue(i)}return s-r===t.length?this.formatValue(i):0===r?i+t.slice(s):s===t.length?t.slice(0,r)+i:t.slice(0,r)+i+t.slice(s)}deleteRange(t,i,r){let s;return s=r-i===t.length?"":0===i?t.slice(r):r===t.length?t.slice(0,i):t.slice(0,i)+t.slice(r),s}initCursor(){let t=this.input?.nativeElement.selectionStart,i=this.input?.nativeElement.value,r=i.length,s=null,o=(this.prefixChar||"").length;i=i.replace(this._prefix,""),t-=o;let a=i.charAt(t);if(this.isNumeralChar(a))return t+o;let l=t-1;for(;l>=0;){if(a=i.charAt(l),this.isNumeralChar(a)){s=l+o;break}l--}if(null!==s)this.input?.nativeElement.setSelectionRange(s+1,s+1);else{for(l=t;l<r;){if(a=i.charAt(l),this.isNumeralChar(a)){s=l+o;break}l++}null!==s&&this.input?.nativeElement.setSelectionRange(s,s)}return s||0}onInputClick(){const t=this.input?.nativeElement.value;!this.readonly&&t!==Ot.getSelection()&&this.initCursor()}isNumeralChar(t){return!(1!==t.length||!(this._numeral.test(t)||this._decimal.test(t)||this._group.test(t)||this._minusSign.test(t))||(this.resetRegex(),0))}resetRegex(){this._numeral.lastIndex=0,this._decimal.lastIndex=0,this._group.lastIndex=0,this._minusSign.lastIndex=0}updateValue(t,i,r,s){let o=this.input?.nativeElement.value,a=null;null!=i&&(a=this.parseValue(i),a=a||this.allowEmpty?a:0,this.updateInput(a,r,s,i),this.handleOnInput(t,o,a))}handleOnInput(t,i,r){this.isValueChanged(i,r)&&(this.input.nativeElement.value=this.formatValue(r),this.input?.nativeElement.setAttribute("aria-valuenow",r),this.updateModel(t,r),this.onInput.emit({originalEvent:t,value:r,formattedValue:i}))}isValueChanged(t,i){return null===i&&null!==t||null!=i&&i!==("string"==typeof t?this.parseValue(t):t)}validateValue(t){return"-"===t||null==t?null:null!=this.min&&t<this.min?this.min:null!=this.max&&t>this.max?this.max:t}updateInput(t,i,r,s){i=i||"";let o=this.input?.nativeElement.value,a=this.formatValue(t),l=o.length;if(a!==s&&(a=this.concatValues(a,s)),0===l){this.input.nativeElement.value=a,this.input.nativeElement.setSelectionRange(0,0);const u=this.initCursor()+i.length;this.input.nativeElement.setSelectionRange(u,u)}else{let c=this.input.nativeElement.selectionStart,u=this.input.nativeElement.selectionEnd;if(this.maxlength&&a.length>this.maxlength&&(a=a.slice(0,this.maxlength),c=Math.min(c,this.maxlength),u=Math.min(u,this.maxlength)),this.maxlength&&this.maxlength<a.length)return;this.input.nativeElement.value=a;let d=a.length;if("range-insert"===r){const f=this.parseValue((o||"").slice(0,c)),g=(null!==f?f.toString():"").split("").join(`(${this.groupChar})?`),_=new RegExp(g,"g");_.test(a);const v=i.split("").join(`(${this.groupChar})?`),y=new RegExp(v,"g");y.test(a.slice(_.lastIndex)),u=_.lastIndex+y.lastIndex,this.input.nativeElement.setSelectionRange(u,u)}else if(d===l)"insert"===r||"delete-back-single"===r?this.input.nativeElement.setSelectionRange(u+1,u+1):"delete-single"===r?this.input.nativeElement.setSelectionRange(u-1,u-1):("delete-range"===r||"spin"===r)&&this.input.nativeElement.setSelectionRange(u,u);else if("delete-back-single"===r){let f=o.charAt(u-1),m=o.charAt(u),g=l-d,_=this._group.test(m);_&&1===g?u+=1:!_&&this.isNumeralChar(f)&&(u+=-1*g+1),this._group.lastIndex=0,this.input.nativeElement.setSelectionRange(u,u)}else if("-"===o&&"insert"===r){this.input.nativeElement.setSelectionRange(0,0);const m=this.initCursor()+i.length+1;this.input.nativeElement.setSelectionRange(m,m)}else u+=d-l,this.input.nativeElement.setSelectionRange(u,u)}this.input.nativeElement.setAttribute("aria-valuenow",t)}concatValues(t,i){if(t&&i){let r=i.search(this._decimal);return this._decimal.lastIndex=0,this.suffixChar?t.replace(this.suffixChar,"").split(this._decimal)[0]+i.replace(this.suffixChar,"").slice(r)+this.suffixChar:-1!==r?t.split(this._decimal)[0]+i.slice(r):t}return t}getDecimalLength(t){if(t){const i=t.split(this._decimal);if(2===i.length)return i[1].replace(this._suffix,"").trim().replace(/\s/g,"").replace(this._currency,"").length}return 0}onInputFocus(t){this.focused=!0,this.onFocus.emit(t)}onInputBlur(t){this.focused=!1;let i=this.validateValue(this.parseValue(this.input.nativeElement.value));this.input.nativeElement.value=this.formatValue(i),this.input.nativeElement.setAttribute("aria-valuenow",i),this.updateModel(t,i),this.onBlur.emit(t)}formattedValue(){return this.formatValue(this.value||this.allowEmpty?this.value:0)}updateModel(t,i){const r="blur"===this.ngControl?.control?.updateOn;this.value!==i?(this.value=i,r&&this.focused||this.onModelChange(i)):r&&this.onModelChange(i),this.onModelTouched()}writeValue(t){this.value=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}get filled(){return null!=this.value&&this.value.toString().length>0}clearTimer(){this.timer&&clearInterval(this.timer)}getFormatter(){return this.numberFormat}static \u0275fac=function(i){return new(i||n)(re(Ar),re(vn),re(Iu),re(Ws))};static \u0275cmp=yi({type:n,selectors:[["p-inputNumber"]],contentQueries:function(i,r,s){if(1&i&&sv(s,A2,4),2&i){let o;Tu(o=Au())&&(r.templates=o)}},viewQuery:function(i,r){if(1&i&&Wx(Hde,5),2&i){let s;Tu(s=Au())&&(r.input=s.first)}},hostAttrs:[1,"p-element","p-inputwrapper"],hostVars:6,hostBindings:function(i,r){2&i&&cd("p-inputwrapper-filled",r.filled)("p-inputwrapper-focus",r.focused)("p-inputnumber-clearable",r.showClear&&"vertical"!=r.buttonLayout)},inputs:{showButtons:"showButtons",format:"format",buttonLayout:"buttonLayout",inputId:"inputId",styleClass:"styleClass",style:"style",placeholder:"placeholder",size:"size",maxlength:"maxlength",tabindex:"tabindex",title:"title",ariaLabel:"ariaLabel",ariaRequired:"ariaRequired",name:"name",required:"required",autocomplete:"autocomplete",min:"min",max:"max",incrementButtonClass:"incrementButtonClass",decrementButtonClass:"decrementButtonClass",incrementButtonIcon:"incrementButtonIcon",decrementButtonIcon:"decrementButtonIcon",readonly:"readonly",step:"step",allowEmpty:"allowEmpty",locale:"locale",localeMatcher:"localeMatcher",mode:"mode",currency:"currency",currencyDisplay:"currencyDisplay",useGrouping:"useGrouping",minFractionDigits:"minFractionDigits",maxFractionDigits:"maxFractionDigits",prefix:"prefix",suffix:"suffix",inputStyle:"inputStyle",inputStyleClass:"inputStyleClass",showClear:"showClear",disabled:"disabled"},outputs:{onInput:"onInput",onFocus:"onFocus",onBlur:"onBlur",onKeyDown:"onKeyDown",onClear:"onClear"},features:[Vn([yfe]),Ii],decls:7,vars:32,consts:[[3,"ngClass","ngStyle"],["pInputText","","inputmode","decimal",3,"ngClass","ngStyle","value","disabled","readonly","input","keydown","keypress","paste","click","focus","blur"],["input",""],[4,"ngIf"],["class","p-inputnumber-button-group",4,"ngIf"],["type","button","pButton","","class","p-button-icon-only","tabindex","-1",3,"ngClass","class","disabled","mousedown","mouseup","mouseleave","keydown","keyup",4,"ngIf"],[3,"ngClass","click",4,"ngIf"],["class","p-inputnumber-clear-icon",3,"click",4,"ngIf"],[3,"ngClass","click"],[1,"p-inputnumber-clear-icon",3,"click"],[4,"ngTemplateOutlet"],[1,"p-inputnumber-button-group"],["type","button","pButton","","tabindex","-1",1,"p-button-icon-only",3,"ngClass","disabled","mousedown","mouseup","mouseleave","keydown","keyup"],[3,"ngClass",4,"ngIf"],[3,"ngClass"]],template:function(i,r){1&i&&(Le(0,"span",0)(1,"input",1,2),ct("input",function(o){return r.onUserInput(o)})("keydown",function(o){return r.onInputKeyDown(o)})("keypress",function(o){return r.onInputKeyPress(o)})("paste",function(o){return r.onPaste(o)})("click",function(){return r.onInputClick()})("focus",function(o){return r.onInputFocus(o)})("blur",function(o){return r.onInputBlur(o)}),Ie(),Qe(3,qde,3,2,"ng-container",3),Qe(4,rfe,7,14,"span",4),Qe(5,ufe,3,7,"button",5),Qe(6,gfe,3,7,"button",5),Ie()),2&i&&(Tr(r.styleClass),we("ngClass",nv(28,_fe,r.showButtons&&"stacked"===r.buttonLayout,r.showButtons&&"horizontal"===r.buttonLayout,r.showButtons&&"vertical"===r.buttonLayout))("ngStyle",r.style),Se(1),Tr(r.inputStyleClass),we("ngClass","p-inputnumber-input")("ngStyle",r.inputStyle)("value",r.formattedValue())("disabled",r.disabled)("readonly",r.readonly),Un("placeholder",r.placeholder)("title",r.title)("id",r.inputId)("size",r.size)("name",r.name)("autocomplete",r.autocomplete)("maxlength",r.maxlength)("tabindex",r.tabindex)("aria-label",r.ariaLabel)("aria-required",r.ariaRequired)("required",r.required)("min",r.min)("max",r.max),Se(2),we("ngIf","vertical"!=r.buttonLayout&&r.showClear&&(r.value||0===r.value)),Se(1),we("ngIf",r.showButtons&&"stacked"===r.buttonLayout),Se(1),we("ngIf",r.showButtons&&"stacked"!==r.buttonLayout),Se(1),we("ngIf",r.showButtons&&"stacked"!==r.buttonLayout))},dependencies:function(){return[hv,Pu,fv,uC,Vde,Bde,l8,c8,u8]},styles:["@layer primeng{p-inputnumber,.p-inputnumber{display:inline-flex}.p-inputnumber-button{display:flex;align-items:center;justify-content:center;flex:0 0 auto}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button .p-button-label,.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button .p-button-label{display:none}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-up{border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-input{border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-stacked .p-button.p-inputnumber-button-down{border-top-left-radius:0;border-top-right-radius:0;border-bottom-left-radius:0;padding:0}.p-inputnumber-buttons-stacked .p-inputnumber-button-group{display:flex;flex-direction:column}.p-inputnumber-buttons-stacked .p-inputnumber-button-group .p-button.p-inputnumber-button{flex:1 1 auto}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-up{order:3;border-top-left-radius:0;border-bottom-left-radius:0}.p-inputnumber-buttons-horizontal .p-inputnumber-input{order:2;border-radius:0}.p-inputnumber-buttons-horizontal .p-button.p-inputnumber-button-down{order:1;border-top-right-radius:0;border-bottom-right-radius:0}.p-inputnumber-buttons-vertical{flex-direction:column}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-up{order:1;border-bottom-left-radius:0;border-bottom-right-radius:0;width:100%}.p-inputnumber-buttons-vertical .p-inputnumber-input{order:2;border-radius:0;text-align:center}.p-inputnumber-buttons-vertical .p-button.p-inputnumber-button-down{order:3;border-top-left-radius:0;border-top-right-radius:0;width:100%}.p-inputnumber-input{flex:1 1 auto}.p-fluid p-inputnumber,.p-fluid .p-inputnumber{width:100%}.p-fluid .p-inputnumber .p-inputnumber-input{width:1%}.p-fluid .p-inputnumber-buttons-vertical .p-inputnumber-input{width:100%}.p-inputnumber-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputnumber-clearable{position:relative}}\n"],encapsulation:2,changeDetection:0})}return n})(),vfe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc,zde,a8,l8,c8,u8,WS]})}return n})();function wfe(n,e){if(1&n){const t=nr();Le(0,"div",3)(1,"button",4),ct("click",function(){return mt(t),ht(Te().showDebug())}),Qt(2,"DEBUG"),Ie()()}}function bfe(n,e){1&n&&sm(0)}function xfe(n,e){1&n&&sm(0)}const I2=function(n){return{$implicit:n}};function Cfe(n,e){if(1&n){const t=nr();Le(0,"div",5)(1,"button",6),ct("click",function(){return mt(t),ht(Te().showDebugWindow=!1)}),Qt(2,"X"),Ie(),Le(3,"input",7),ct("ngModelChange",function(r){return mt(t),ht(Te().debugSearchModel=r)}),Ie(),Le(4,"button"),Qt(5,"Export"),Ie(),Le(6,"button",8),ct("click",function(){return mt(t),ht(Te().showAssets=!0)}),Qt(7,"Assets"),Ie(),Qe(8,bfe,1,0,"ng-container",9),Qe(9,xfe,1,0,"ng-container",9),Ie()}if(2&n){const t=Te(),i=$y(4);Se(3),we("ngModel",t.debugSearchModel),Se(5),we("ngTemplateOutlet",i)("ngTemplateOutletContext",tv(5,I2,t.mgThree.camera)),Se(1),we("ngTemplateOutlet",i)("ngTemplateOutletContext",tv(7,I2,t.mgThree.scene))}}function Sfe(n,e){if(1&n){const t=nr();Le(0,"div")(1,"button",8),ct("click",function(){const s=mt(t).$implicit;return ht(Te(2).addAsset(s.value))}),Qt(2),Ie()()}if(2&n){const t=e.$implicit;Se(2),Sa(t.key)}}function Efe(n,e){if(1&n){const t=nr();Le(0,"div",5)(1,"button",6),ct("click",function(){return mt(t),ht(Te().showAssets=!1)}),Qt(2,"X"),Ie(),Le(3,"div",10)(4,"div"),Qt(5,"ASSETS"),Ie(),Qe(6,Sfe,3,1,"div",11),OA(7,"keyvalue"),Ie()()}if(2&n){const t=Te();Se(6),we("ngForOf",LA(7,1,t.mgGame.gameData.assets))}}function Mfe(n,e){if(1&n){const t=nr();Le(0,"div",23)(1,"div",24),Qt(2,"Position"),Ie(),Le(3,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.position.x=r)}),Ie(),Le(4,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.position.y=r)}),Ie(),Le(5,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.position.z=r)}),Ie()()}if(2&n){const t=Te(2).$implicit;Se(3),we("ngModel",t.position.x)("showButtons",!0)("step",.1),Se(1),we("ngModel",t.position.y)("showButtons",!0)("step",.1),Se(1),we("ngModel",t.position.z)("showButtons",!0)("step",.1)}}function Tfe(n,e){if(1&n){const t=nr();Le(0,"div",23)(1,"div",24),Qt(2,"Rotation:"),Ie(),Le(3,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.rotation.x=r)}),Ie(),Le(4,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.rotation.y=r)}),Ie(),Le(5,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.rotation.z=r)}),Ie()()}if(2&n){const t=Te(2).$implicit;Se(3),we("ngModel",t.rotation.x)("showButtons",!0)("step",.1),Se(1),we("ngModel",t.rotation.y)("showButtons",!0)("step",.1),Se(1),we("ngModel",t.rotation.z)("showButtons",!0)("step",.1)}}function Afe(n,e){if(1&n){const t=nr();Le(0,"div",23)(1,"div",24),Qt(2,"Scale:"),Ie(),Le(3,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.scale.x=r)}),Ie(),Le(4,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.scale.y=r)}),Ie(),Le(5,"p-inputNumber",25),ct("ngModelChange",function(r){return mt(t),ht(Te(2).$implicit.scale.z=r)}),Ie()()}if(2&n){const t=Te(2).$implicit;Se(3),we("ngModel",t.scale.x)("showButtons",!0)("step",.1),Se(1),we("ngModel",t.scale.y)("showButtons",!0)("step",.1),Se(1),we("ngModel",t.scale.z)("showButtons",!0)("step",.1)}}function Dfe(n,e){if(1&n){const t=nr();Le(0,"div")(1,"div",15)(2,"div",16),Qt(3),Ie(),Le(4,"i",17),ct("click",function(){mt(t);const r=Te().$implicit;return ht(r.showDebugPosition=!r.showDebugPosition)}),OA(5,"json"),Ie(),Le(6,"i",18),ct("click",function(){mt(t);const r=Te().$implicit;return ht(r.showDebugRotation=!r.showDebugRotation)}),Ie(),Le(7,"i",19),ct("click",function(){mt(t);const r=Te().$implicit;return ht(r.showDebugScale=!r.showDebugScale)}),Ie(),Le(8,"i",20),ct("click",function(){mt(t);const r=Te().$implicit;return ht(r.visible=!r.visible)}),Ie(),Le(9,"i",21),ct("click",function(){mt(t);const r=Te().$implicit;return ht(Te().onRemoveClick(r))}),Ie()(),Qe(10,Mfe,6,9,"div",22),Qe(11,Tfe,6,9,"div",22),Qe(12,Afe,6,9,"div",22),Ie()}if(2&n){const t=Te().$implicit,i=Te();Se(3),xA(" ",i.getAnyClass(t)," ",t.name,""),Se(1),am("background-color",t.showDebugPosition?"gray":""),we("pTooltip","Position:"+LA(5,14,t.position)),Se(2),am("background-color",t.showDebugRotation?"gray":""),Se(1),am("background-color",t.showDebugScale?"gray":""),Se(1),am("background-color",t.visible?"":"gray"),Se(2),we("ngIf",t.showDebugPosition),Se(1),we("ngIf",t.showDebugRotation),Se(1),we("ngIf",t.showDebugScale)}}function Ife(n,e){1&n&&sm(0)}function Rfe(n,e){if(1&n&&(Le(0,"div",26),Qe(1,Ife,1,0,"ng-container",9),Ie()),2&n){const t=e.$implicit;Te(2);const i=$y(4);Se(1),we("ngTemplateOutlet",i)("ngTemplateOutletContext",tv(2,I2,t))}}function Pfe(n,e){if(1&n&&(Le(0,"div",12),Qe(1,Dfe,13,16,"div",13),Qe(2,Rfe,2,4,"div",14),Ie()),2&n){const t=e.$implicit,i=Te();Se(1),we("ngIf",t.name.toUpperCase().indexOf(i.debugSearchModel.toUpperCase())>-1),Se(1),we("ngForOf",t.children)}}let Ofe=(()=>{class n{constructor(){this.showDebugWindow=!1,this.debugSearchModel="",this.showAssets=!1}ngAfterViewInit(){}ngOnChanges(t){}ngOnDestroy(){}ngOnInit(){}getAnyClass(t){return typeof t>"u"?"undefined":null===t?"null":t.type}onRemoveClick(t){t.removeFromParent()}showDebug(){this.showDebugWindow=!0}addAsset(t){this.showAssets=!1;let i=new pde;i.id=vl.GenerateGuid(),i.asset=t.name,i.items=[],i.position=new rh(0,0,0),i.rotation=new rh(0,0,0),i.scale=new rh(1,1,1),i.visible={},i.clickActions={},i.hoverActions={},this.mgGame.createItem(i,this.mgGame.gameData.table.mesh)}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-debug-view"]],inputs:{mgThree:"mgThree",mgGame:"mgGame"},features:[Ii],decls:5,vars:3,consts:[["style","position: absolute;top: 0px;right: 0px;",4,"ngIf"],["style","position: absolute;top: 0px;right: 0px;width: 500px;height: 600px;background: red;overflow: auto;padding: 10px",4,"ngIf"],["tmpl",""],[2,"position","absolute","top","0px","right","0px"],[2,"width","100px","height","30px",3,"click"],[2,"position","absolute","top","0px","right","0px","width","500px","height","600px","background","red","overflow","auto","padding","10px"],[2,"position","absolute","top","0px","right","0px",3,"click"],[3,"ngModel","ngModelChange"],[3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mg-col"],[4,"ngFor","ngForOf"],[2,"padding","5px 0px 5px 0px","border-top","1px solid blue","border-bottom","1px solid blue","border-left","1px solid blue"],[4,"ngIf"],["style","padding-left: 20px;",4,"ngFor","ngForOf"],[1,"mg-row-center",2,"border-bottom","1px solid blue"],[2,"flex-grow","1"],[1,"fa-solid","fa-crosshairs","debug-icon",3,"pTooltip","click"],["pTooltip","Rotation",1,"fa-solid","fa-rotate","debug-icon",3,"click"],["pTooltip","Scale",1,"fa-solid","fa-up-right-and-down-left-from-center","debug-icon",3,"click"],["pTooltip","Visible",1,"fa-solid","fa-eye","debug-icon",3,"click"],[1,"fa-solid","fa-trash-can","debug-icon",3,"click"],["class","mg-row-center",4,"ngIf"],[1,"mg-row-center"],[2,"margin-right","20px"],["mode","decimal","buttonLayout","vertical","spinnerMode","vertical","inputStyleClass","xxx",3,"ngModel","showButtons","step","ngModelChange"],[2,"padding-left","20px"]],template:function(i,r){1&i&&(Qe(0,wfe,3,0,"div",0),Qe(1,Cfe,10,9,"div",1),Qe(2,Efe,8,3,"div",1),Qe(3,Pfe,3,2,"ng-template",null,2,Ik)),2&i&&(we("ngIf",r.mgThree.scene),Se(1),we("ngIf",r.showDebugWindow&&r.mgThree.scene&&r.mgThree.camera),Se(1),we("ngIf",r.mgGame.gameData&&r.showAssets))},dependencies:[dv,Pu,fv,bv,hI,Mv,yde,f8,q3,X3],styles:[".debug-icon[_ngcontent-%COMP%]{color:#000;cursor:pointer;background:white;margin:1px;padding:5px;border-radius:7px}.debug-icon[_ngcontent-%COMP%]:hover{color:#fff;background:gray}  .p-inputtext.p-component.p-element.p-inputnumber-input{width:100px;padding:0;margin:0}  .p-element.p-button-icon-only.p-inputnumber-button.p-button.p-component{padding:0;margin:0}"]})}return n})();const Lfe=["rendererContainer"];function Nfe(n,e){if(1&n&&Bn(0,"app-debug-view",7),2&n){const t=Te();we("mgThree",t.mgThree)("mgGame",t.mgGame)}}let Ffe=(()=>{class n{constructor(t,i,r,s,o,a){this.signalRService=t,this.router=i,this.generalService=r,this.activatedRoute=s,this.unsubscriberService=o,this.dalService=a,this.gameId=""}ngOnInit(){this.gameId=this.activatedRoute.snapshot.paramMap.get("id"),console.log("ngOnInit",this.gameId),this.signalRService.hubConnection.off("GameUpdated"),this.signalRService.hubConnection.on("GameUpdated",t=>{console.log("GameUpdated",t),this.mgGame.updateGame(t)})}ngOnDestroy(){this.signalRService.hubConnection.off("GameUpdated")}ngAfterViewInit(){this.dalService.getGameById(this.gameId).subscribe(t=>{t?(this.mgGame=new Uhe,this.mgGame.gameData=t,this.mgThree=new Tue,this.mgThree.initThree(this.rendererContainer.nativeElement,()=>{this.mgGame.loadGame(this.mgThree,this.generalService.User)})):this.router.navigate([Wr.GamesList])})}onVrClick(){this.mgThree.startVr()}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ig),re(Br),re(vl),re(lc),re(n1),re(GS))};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-game-play"]],viewQuery:function(i,r){if(1&i&&Wx(Lfe,7),2&i){let s;Tu(s=Au())&&(r.rendererContainer=s.first)}},features:[Vn([n1])],decls:8,vars:1,consts:[[1,"main-div"],[2,"flex-shrink","0"],[2,"flex-grow","1","border","1px dashed red"],["rendererContainer",""],[2,"position","absolute","bottom","0","right","0"],[2,"width","100px","height","30px",3,"click"],[3,"mgThree","mgGame",4,"ngIf"],[3,"mgThree","mgGame"]],template:function(i,r){1&i&&(Le(0,"div",0),Bn(1,"div",1)(2,"div",2,3),Ie(),Le(4,"div",4)(5,"button",5),ct("click",function(){return r.onVrClick()}),Qt(6,"VR"),Ie()(),Qe(7,Nfe,1,2,"app-debug-view",6)),2&i&&(Se(7),we("ngIf",r.mgThree&&r.mgGame&&r.mgGame.gameData))},dependencies:[Pu,Ofe],styles:[".main-div[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;background:yellow}"]})}return n})(),jS=(()=>{class n{constructor(t,i){this.router=t,this.generalService=i}canActivate(){return!!this.generalService.User||(this.router.navigate([Wr.Home]),!1)}static#e=this.\u0275fac=function(i){return new(i||n)(Ve(Br),Ve(vl))};static#t=this.\u0275prov=st({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kfe=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.generalService=i,this.signalRService=r,this.activatedRoute=s,this.dalService=o,this.usernameModel="",this.usernameModel=i.User?i.User.name:""}ngAfterViewInit(){}ngOnChanges(t){}ngOnDestroy(){}ngOnInit(){}login(){this.dalService.login(this.usernameModel).subscribe(t=>{this.generalService.User=t,this.signalRService.startConnection(this.generalService.User.id),localStorage.setItem("user",JSON.stringify(t)),this.router.navigate([Wr.GamesList])})}static#e=this.\u0275fac=function(i){return new(i||n)(re(Br),re(vl),re(Ig),re(lc),re(GS))};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-home-view"]],features:[Ii],decls:5,vars:1,consts:[[1,"home-view"],[1,"title"],[1,"username-input",3,"ngModel","ngModelChange"],["styleClass","p-button-lg","icon","pi pi-user","label","LOGIN",3,"onClick"]],template:function(i,r){1&i&&(Le(0,"div",0)(1,"div",1),Qt(2,"MG X"),Ie(),Le(3,"input",2),ct("ngModelChange",function(o){return r.usernameModel=o}),Ie(),Le(4,"p-button",3),ct("onClick",function(){return r.login()}),Ie()()),2&i&&(Se(3),we("ngModel",r.usernameModel))},dependencies:[bv,hI,Mv,D2],styles:[".home-view[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.home-view[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:70px;margin-bottom:30px;font-weight:700}.home-view[_ngcontent-%COMP%]   .username-input[_ngcontent-%COMP%]{font-size:45px;margin-bottom:30px;width:300px}"]})}return n})();function Ufe(n,e){if(1&n){const t=nr();Le(0,"div",6)(1,"div"),Qt(2),Ie(),Le(3,"div"),Qt(4),Ie(),Le(5,"div"),Qt(6),Ie(),Le(7,"p-button",7),ct("onClick",function(){const s=mt(t).$implicit;return ht(Te().setup(s))}),Qt(8,"settings"),Ie(),Le(9,"p-button",8),ct("onClick",function(){const s=mt(t).$implicit;return ht(Te().delete(s))}),Qt(10,"DELETE"),Ie()()}if(2&n){const t=e.$implicit;Se(2),Eu("",t.name," "),Se(2),Eu("",t.gameStatus," "),Se(2),Eu("",t.gameType," ")}}let Bfe=(()=>{class n{constructor(t,i,r,s){this.signalRService=t,this.router=i,this.generalService=r,this.dalService=s,this.games=[]}ngOnInit(){this.user=this.generalService.User,this.updateGamesList(),this.signalRService.hubConnection.on("GamesUpdated",t=>{console.log("GamesUpdated",t),this.updateGamesList()}),this.signalRService.hubConnection.on("GameDeleted",t=>{console.log("GameDeleted",t),this.updateGamesList()})}ngAfterViewInit(){}ngOnChanges(t){}ngOnDestroy(){}updateGamesList(){this.dalService.getGamesList().subscribe(t=>{this.games=t})}createGame(t){this.dalService.createGame(this.user.id,t).subscribe(i=>{this.router.navigate([Wr.GameSetup,i.id])})}setup(t){this.router.navigate([Wr.GameSetup,t.id])}delete(t){this.dalService.deleteGame(t.id).subscribe()}backClick(){this.router.navigate([Wr.Home])}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ig),re(Br),re(vl),re(GS))};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-games-list"]],features:[Ii],decls:15,vars:2,consts:[[1,"mg-row-center"],["icon","fa-solid fa-chevron-left","severity","secondary",3,"onClick"],[2,"font-size","40px","margin-left","20px"],["class","mg-row-center","style","margin:10px;column-gap: 10px;border: 1px solid black;",4,"ngFor","ngForOf"],[1,"mg-row-center",2,"column-gap","10px"],["severity","secondary",3,"onClick"],[1,"mg-row-center",2,"margin","10px","column-gap","10px","border","1px solid black"],["severity","warning",3,"onClick"],["severity","danger",3,"onClick"]],template:function(i,r){1&i&&(Le(0,"div")(1,"div",0)(2,"p-button",1),ct("onClick",function(){return r.backClick()}),Ie(),Le(3,"div",2),Qt(4,"Hello "),Le(5,"b"),Qt(6),Ie()()(),Qe(7,Ufe,11,3,"div",3),Le(8,"div",4)(9,"p-button",5),ct("onClick",function(){return r.createGame("TIK_TAK_TOE")}),Qt(10,"create game TIK_TAK_TOE"),Ie(),Le(11,"p-button",5),ct("onClick",function(){return r.createGame("CHESS")}),Qt(12,"create game CHESS"),Ie(),Le(13,"p-button",5),ct("onClick",function(){return r.createGame("DND")}),Qt(14,"create game DnD"),Ie()()()),2&i&&(Se(6),Sa(r.user.name),Se(1),we("ngForOf",r.games))},dependencies:[dv,D2]})}return n})();function Vfe(n,e){1&n&&Bn(0,"div",9)}function zfe(n,e){if(1&n&&(Le(0,"span",10),Qt(1),Ie()),2&n){const t=Te().$implicit;Se(1),Sa(t.description)}}function Hfe(n,e){if(1&n&&(Le(0,"section",11),Bn(1,"ngx-json-viewer",12),Ie()),2&n){const t=Te().$implicit,i=Te();Se(1),we("json",t.value)("expanded",i.expanded)("depth",i.depth)("_currentDepth",i._currentDepth+1)}}const Gfe=function(n){return["segment",n]},Wfe=function(n,e){return{"segment-main":!0,expandable:n,expanded:e}};function jfe(n,e){if(1&n){const t=nr();Le(0,"section",2)(1,"section",3),ct("click",function(){const s=mt(t).$implicit;return ht(Te().toggle(s))}),Qe(2,Vfe,1,0,"div",4),Le(3,"span",5),Qt(4),Ie(),Le(5,"span",6),Qt(6,": "),Ie(),Qe(7,zfe,2,1,"span",7),Ie(),Qe(8,Hfe,2,4,"section",8),Ie()}if(2&n){const t=e.$implicit,i=Te();we("ngClass",tv(6,Gfe,"segment-type-"+t.type)),Se(1),we("ngClass",uk(8,Wfe,i.isExpandable(t),t.expanded)),Se(1),we("ngIf",i.isExpandable(t)),Se(2),Sa(t.key),Se(3),we("ngIf",!t.expanded||!i.isExpandable(t)),Se(1),we("ngIf",t.expanded&&i.isExpandable(t))}}let $fe=(()=>{class n{constructor(){this.expanded=!0,this.depth=-1,this._currentDepth=0,this.segments=[]}ngOnChanges(){this.segments=[],this.json=this.decycle(this.json),"object"==typeof this.json?Object.keys(this.json).forEach(t=>{this.segments.push(this.parseKeyValue(t,this.json[t]))}):this.segments.push(this.parseKeyValue(`(${typeof this.json})`,this.json))}isExpandable(t){return"object"===t.type||"array"===t.type}toggle(t){this.isExpandable(t)&&(t.expanded=!t.expanded)}parseKeyValue(t,i){const r={key:t,value:i,type:void 0,description:""+i,expanded:this.isExpanded()};switch(typeof r.value){case"number":r.type="number";break;case"boolean":r.type="boolean";break;case"function":r.type="function";break;case"string":r.type="string",r.description='"'+r.value+'"';break;case"undefined":r.type="undefined",r.description="undefined";break;case"object":null===r.value?(r.type="null",r.description="null"):Array.isArray(r.value)?(r.type="array",r.description="Array["+r.value.length+"] "+JSON.stringify(r.value)):r.value instanceof Date?r.type="date":(r.type="object",r.description="Object "+JSON.stringify(r.value))}return r}isExpanded(){return this.expanded&&!(this.depth>-1&&this._currentDepth>=this.depth)}decycle(t){const i=new WeakMap;return function r(s,o){let a,l;return"object"!=typeof s||null===s||s instanceof Boolean||s instanceof Date||s instanceof Number||s instanceof RegExp||s instanceof String?s:(a=i.get(s),void 0!==a?{$ref:a}:(i.set(s,o),Array.isArray(s)?(l=[],s.forEach(function(c,u){l[u]=r(c,o+"["+u+"]")})):(l={},Object.keys(s).forEach(function(c){l[c]=r(s[c],o+"["+JSON.stringify(c)+"]")})),l))}(t,"$")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=yi({type:n,selectors:[["ngx-json-viewer"]],inputs:{json:"json",expanded:"expanded",depth:"depth",_currentDepth:"_currentDepth"},features:[Ii],decls:2,vars:1,consts:[[1,"ngx-json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler"],[1,"segment-value"],[1,"children"],[3,"json","expanded","depth","_currentDepth"]],template:function(t,i){1&t&&(Le(0,"section",0),Qe(1,jfe,9,11,"section",1),Ie()),2&t&&(Se(1),we("ngForOf",i.segments))},dependencies:[hv,dv,Pu,n],styles:['@charset "UTF-8";.ngx-json-viewer[_ngcontent-%COMP%]{font-family:var(--ngx-json-font-family, monospace);font-size:var(--ngx-json-font-size, 1em);width:100%;height:100%;overflow:hidden;position:relative}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{padding:2px;margin:1px 1px 1px 12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{position:absolute;margin-left:-14px;margin-top:3px;font-size:.8em;line-height:1.2em;vertical-align:middle;color:var(--ngx-json-toggler, #787878)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]:after{display:inline-block;content:"\\25ba";transition:transform .1s ease-in}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:var(--ngx-json-key, #4E187C)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:var(--ngx-json-separator, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-value, #000)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-string, #FF6B6B)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-number, #009688)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-boolean, #B938A4)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-date, #05668D)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-array, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-object, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-function, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-null, #fff)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:var(--ngx-json-undefined, #fff)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:var(--ngx-json-null-bg, red)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:var(--ngx-json-undefined-key, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:var(--ngx-json-undefined-key, #999)}.ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.ngx-json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .ngx-json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),n})(),qfe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=vi({type:n}),n.\u0275inj=ai({imports:[nc]}),n})();function Xfe(n,e){if(1&n){const t=nr();Le(0,"div",2)(1,"div",13),Qt(2),Ie(),Le(3,"div")(4,"p-button",8),ct("onClick",function(){const s=mt(t).$implicit;return ht(Te(2).join_game(s))}),Qt(5,"JOIN"),Ie()(),Le(6,"div")(7,"p-button",7),ct("onClick",function(){const s=mt(t).$implicit;return ht(Te(2).set_ai(s))}),Qt(8,"AI"),Ie()(),Le(9,"div")(10,"p-button",14),ct("onClick",function(){const s=mt(t).$implicit;return ht(Te(2).leave(s))}),Qt(11,"LEAVE"),Ie()()()}if(2&n){const t=e.$implicit;Se(2),Sa(t.type)}}function Yfe(n,e){if(1&n){const t=nr();Le(0,"div",1)(1,"div",2)(2,"p-button",3),ct("onClick",function(){return mt(t),ht(Te().backClick())}),Ie(),Le(3,"div",4),Qt(4),Le(5,"b"),Qt(6),Ie(),Qt(7),Ie()(),Le(8,"div",5)(9,"p-button",6),ct("onClick",function(){return mt(t),ht(Te().setup())}),Qt(10,"SETUP"),Ie(),Le(11,"p-button",7),ct("onClick",function(){return mt(t),ht(Te().start())}),Qt(12,"START"),Ie(),Le(13,"p-button",8),ct("onClick",function(){return mt(t),ht(Te().open())}),Qt(14,"OPEN"),Ie()(),Le(15,"div",9)(16,"div",10),Qt(17,"Players"),Ie(),Qe(18,Xfe,12,1,"div",11),Ie(),Le(19,"div"),Bn(20,"ngx-json-viewer",12),Ie()()}if(2&n){const t=Te();Se(4),Eu("",t.gameData.gameType," - "),Se(2),Sa(t.gameData.gameStatus),Se(1),Eu(" - ",t.gameData.name,""),Se(11),we("ngForOf",t.gameData.players),Se(2),we("json",t.gameData)("depth",1)}}let Zfe=(()=>{class n{constructor(t,i,r,s,o,a){this.signalRService=t,this.router=i,this.unsubscriberService=r,this.activatedRoute=s,this.generalService=o,this.dalService=a,this.gameId=""}ngOnInit(){this.user=this.generalService.User,this.gameId=this.activatedRoute.snapshot.paramMap.get("id"),this.updateGame(),this.signalRService.hubConnection.off("GameUpdated"),this.signalRService.hubConnection.on("GameUpdated",t=>{console.log("GameUpdated",t),this.gameData=t}),this.signalRService.hubConnection.off("GameDeleted"),this.signalRService.hubConnection.on("GameDeleted",t=>{console.log("GameDeleted",t)})}ngOnDestroy(){this.signalRService.hubConnection.off("GameUpdated"),this.signalRService.hubConnection.off("GamesUpdated"),this.signalRService.hubConnection.off("GameDeleted")}updateGame(){this.dalService.getGameById(this.gameId).subscribe(t=>{t?this.gameData?this.iterate(this.gameData,t):this.gameData=t:this.router.navigate([Wr.GamesList])})}iterate(t,i){for(let r in t)i.hasOwnProperty(r)&&("object"==typeof t[r]?this.iterate(t[r],i[r]):t[r]=i[r])}ngAfterViewInit(){}ngOnChanges(t){}start(){this.dalService.startGame(this.gameId).subscribe()}leave(t){this.dalService.joinGame(this.gameId,t.id,null,"EMPTY_SEAT").subscribe()}set_ai(t){this.dalService.joinGame(this.gameId,t.id,null,"AI").subscribe()}join_game(t){this.dalService.joinGame(this.gameId,t.id,this.user,"HUMAN").subscribe()}setup(){this.dalService.setupGame(this.gameId,this.user.id).subscribe()}open(){this.router.navigate([Wr.GamePlay,this.gameId])}backClick(){this.router.navigate([Wr.GamesList])}static#e=this.\u0275fac=function(i){return new(i||n)(re(Ig),re(Br),re(n1),re(lc),re(vl),re(GS))};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-game-setup"]],features:[Vn([n1]),Ii],decls:1,vars:1,consts:[["style","overflow: auto;width: 100%;height: 100%;padding: 20px;",4,"ngIf"],[2,"overflow","auto","width","100%","height","100%","padding","20px"],[1,"mg-row-center"],["icon","fa-solid fa-chevron-left","severity","secondary",3,"onClick"],[2,"font-size","40px","margin-left","20px"],[1,"mg-row-center",2,"margin-top","20px"],["severity","secondary",3,"onClick"],["severity","warning",3,"onClick"],["severity","success",3,"onClick"],[1,"mg-col"],[2,"margin-top","20px","font-size","20px"],["class","mg-row-center",4,"ngFor","ngForOf"],[3,"json","depth"],[2,"width","100px"],["severity","danger",3,"onClick"]],template:function(i,r){1&i&&Qe(0,Yfe,21,6,"div",0),2&i&&we("ngIf",r.gameData)},dependencies:[dv,Pu,D2,$fe]})}return n})();const tf=new PP,Ks=new O,ch=new O,bi=new Xn,p8={X:new O(1,0,0),Y:new O(0,1,0),Z:new O(0,0,1)},R2={type:"change"},m8={type:"mouseDown"},g8={type:"mouseUp",mode:null},_8={type:"objectChange"};class Kfe extends fi{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new ipe;this._gizmo=i,this.add(i);const r=new rpe;this._plane=r,this.add(r);const s=this;function o(b,x){let S=x;Object.defineProperty(s,b,{get:function(){return void 0!==S?S:x},set:function(E){S!==E&&(S=E,r[b]=E,i[b]=E,s.dispatchEvent({type:b+"-changed",value:E}),s.dispatchEvent(R2))}}),s[b]=x,r[b]=x,i[b]=x}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new O,l=new O,c=new Xn,u=new Xn,d=new O,f=new Xn,m=new O,g=new O,_=new O,y=new O;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",c),o("worldQuaternionStart",u),o("cameraPosition",d),o("cameraQuaternion",f),o("pointStart",m),o("pointEnd",g),o("rotationAxis",_),o("rotationAngle",0),o("eye",y),this._offset=new O,this._startNorm=new O,this._endNorm=new O,this._cameraScale=new O,this._parentPosition=new O,this._parentQuaternion=new Xn,this._parentQuaternionInv=new Xn,this._parentScale=new O,this._worldScaleStart=new O,this._worldQuaternionInv=new Xn,this._worldScale=new O,this._positionStart=new O,this._quaternionStart=new Xn,this._scaleStart=new O,this._getPointer=Jfe.bind(this),this._onPointerDown=epe.bind(this),this._onPointerHover=Qfe.bind(this),this._onPointerMove=tpe.bind(this),this._onPointerUp=npe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;tf.setFromCamera(e,this.camera);const t=P2(this._gizmo.picker[this.mode],tf);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){tf.setFromCamera(e,this.camera);const t=P2(this._plane,tf,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,m8.mode=this.mode,this.dispatchEvent(m8)}}pointerMove(e){const t=this.axis,i=this.mode,r=this.object;let s=this.space;if("scale"===i?s="local":("E"===t||"XYZE"===t||"XYZ"===t)&&(s="world"),void 0===r||null===t||!1===this.dragging||-1!==e.button)return;tf.setFromCamera(e,this.camera);const o=P2(this._plane,tf,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),"translate"===i)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===s&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===s&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===s&&(r.position.applyQuaternion(bi.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===s&&(r.parent&&r.position.add(Ks.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(Ks.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===i){if(-1!==t.search("XYZ")){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),ch.set(a,a,a)}else Ks.copy(this.pointStart),ch.copy(this.pointEnd),Ks.applyQuaternion(this._worldQuaternionInv),ch.applyQuaternion(this._worldQuaternionInv),ch.divide(Ks),-1===t.search("X")&&(ch.x=1),-1===t.search("Y")&&(ch.y=1),-1===t.search("Z")&&(ch.z=1);r.scale.copy(this._scaleStart).multiply(ch),this.scaleSnap&&(-1!==t.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===i){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(Ks.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Ks.copy(this.rotationAxis).cross(this.eye))*a):("X"===t||"Y"===t||"Z"===t)&&(this.rotationAxis.copy(p8[t]),Ks.copy(p8[t]),"local"===s&&Ks.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Ks.cross(this.eye).normalize())*a),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===s&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(bi.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(bi.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(R2),this.dispatchEvent(_8)}}pointerUp(e){0===e.button&&(this.dragging&&null!==this.axis&&(g8.mode=this.mode,this.dispatchEvent(g8)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(R2),this.dispatchEvent(_8),this.pointStart.copy(this.pointEnd))}getRaycaster(){return tf}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function Jfe(n){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:n.button};{const e=this.domElement.getBoundingClientRect();return{x:(n.clientX-e.left)/e.width*2-1,y:-(n.clientY-e.top)/e.height*2+1,button:n.button}}}function Qfe(n){if(this.enabled)switch(n.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(n))}}function epe(n){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(n.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(n)),this.pointerDown(this._getPointer(n)))}function tpe(n){this.enabled&&this.pointerMove(this._getPointer(n))}function npe(n){this.enabled&&(this.domElement.releasePointerCapture(n.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(n)))}function P2(n,e,t){const i=e.intersectObject(n,!0);for(let r=0;r<i.length;r++)if(i[r].object.visible||t)return i[r];return!1}const $S=new yH,Yn=new O(0,1,0),y8=new O(0,0,0),v8=new It,qS=new Xn,XS=new Xn,bl=new O,w8=new It,U0=new O(1,0,0),nf=new O(0,1,0),B0=new O(0,0,1),YS=new O,V0=new O,z0=new O;class ipe extends fi{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new wi({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Ir({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const r=t.clone();r.opacity=.5;const s=e.clone();s.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const u=e.clone();u.color.setHex(255),u.opacity=.5;const d=e.clone();d.opacity=.25;const f=e.clone();f.color.setHex(16776960),f.opacity=.25,e.clone().color.setHex(16776960);const g=e.clone();g.color.setHex(7895160);const _=new gr(0,.04,.1,12);_.translate(0,.05,0);const v=new ri(.08,.08,.08);v.translate(0,.04,0);const y=new Vt;y.setAttribute("position",new nt([0,0,0,1,0,0],3));const b=new gr(.0075,.0075,.5,3);function x(K,G){const X=new Qu(K,.0075,3,64,G*Math.PI*2);return X.rotateY(Math.PI/2),X.rotateX(Math.PI/2),X}b.translate(0,.25,0);const E={X:[[new Ae(_,s),[.5,0,0],[0,0,-Math.PI/2]],[new Ae(_,s),[-.5,0,0],[0,0,Math.PI/2]],[new Ae(b,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Ae(_,o),[0,.5,0]],[new Ae(_,o),[0,-.5,0],[Math.PI,0,0]],[new Ae(b,o)]],Z:[[new Ae(_,a),[0,0,.5],[Math.PI/2,0,0]],[new Ae(_,a),[0,0,-.5],[-Math.PI/2,0,0]],[new Ae(b,a),null,[Math.PI/2,0,0]]],XYZ:[[new Ae(new Ju(.1,0),d.clone()),[0,0,0]]],XY:[[new Ae(new ri(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new Ae(new ri(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ae(new ri(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},A={X:[[new Ae(new gr(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Ae(new gr(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Ae(new gr(.2,0,.6,4),i),[0,.3,0]],[new Ae(new gr(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Ae(new gr(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Ae(new gr(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Ae(new Ju(.2,0),i)]],XY:[[new Ae(new ri(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Ae(new ri(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ae(new ri(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},M={START:[[new Ae(new Ju(.01,2),r),null,null,null,"helper"]],END:[[new Ae(new Ju(.01,2),r),null,null,null,"helper"]],DELTA:[[new rs(function S(){const K=new Vt;return K.setAttribute("position",new nt([0,0,0,1,1,1],3)),K}(),r),null,null,null,"helper"]],X:[[new rs(y,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new rs(y,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new rs(y,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},N={XYZE:[[new Ae(x(.5,1),g),null,[0,Math.PI/2,0]]],X:[[new Ae(x(.5,.5),s)]],Y:[[new Ae(x(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new Ae(x(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new Ae(x(.75,1),f),null,[0,Math.PI/2,0]]]},T={AXIS:[[new rs(y,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},R={XYZE:[[new Ae(new pg(.25,10,8),i)]],X:[[new Ae(new Qu(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Ae(new Qu(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Ae(new Qu(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Ae(new Qu(.75,.1,2,24),i)]]},$={X:[[new Ae(v,s),[.5,0,0],[0,0,-Math.PI/2]],[new Ae(b,s),[0,0,0],[0,0,-Math.PI/2]],[new Ae(v,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Ae(v,o),[0,.5,0]],[new Ae(b,o)],[new Ae(v,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Ae(v,a),[0,0,.5],[Math.PI/2,0,0]],[new Ae(b,a),[0,0,0],[Math.PI/2,0,0]],[new Ae(v,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Ae(new ri(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new Ae(new ri(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ae(new ri(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Ae(new ri(.1,.1,.1),d.clone())]]},ee={X:[[new Ae(new gr(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new Ae(new gr(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Ae(new gr(.2,0,.6,4),i),[0,.3,0]],[new Ae(new gr(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Ae(new gr(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new Ae(new gr(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Ae(new ri(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new Ae(new ri(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Ae(new ri(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Ae(new ri(.2,.2,.2),i),[0,0,0]]]},ie={X:[[new rs(y,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new rs(y,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new rs(y,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function V(K){const G=new fi;for(const X in K)for(let Q=K[X].length;Q--;){const Z=K[X][Q][0].clone(),ce=K[X][Q][1],q=K[X][Q][2],ae=K[X][Q][3],Ee=K[X][Q][4];Z.name=X,Z.tag=Ee,ce&&Z.position.set(ce[0],ce[1],ce[2]),q&&Z.rotation.set(q[0],q[1],q[2]),ae&&Z.scale.set(ae[0],ae[1],ae[2]),Z.updateMatrix();const ve=Z.geometry.clone();ve.applyMatrix4(Z.matrix),Z.geometry=ve,Z.renderOrder=1/0,Z.position.set(0,0,0),Z.rotation.set(0,0,0),Z.scale.set(1,1,1),G.add(Z)}return G}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=V(E)),this.add(this.gizmo.rotate=V(N)),this.add(this.gizmo.scale=V($)),this.add(this.picker.translate=V(A)),this.add(this.picker.rotate=V(R)),this.add(this.picker.scale=V(ee)),this.add(this.helper.translate=V(M)),this.add(this.helper.rotate=V(T)),this.add(this.helper.scale=V(ie)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const i="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:XS;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let s=0;s<r.length;s++){const o=r[s];let a;o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition),a=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(a*this.size/4),"helper"!==o.tag?(o.quaternion.copy(i),"translate"===this.mode||"scale"===this.mode?("X"===o.name&&Math.abs(Yn.copy(U0).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Y"===o.name&&Math.abs(Yn.copy(nf).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Z"===o.name&&Math.abs(Yn.copy(B0).applyQuaternion(i).dot(this.eye))>.99&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XY"===o.name&&Math.abs(Yn.copy(B0).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"YZ"===o.name&&Math.abs(Yn.copy(U0).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XZ"===o.name&&Math.abs(Yn.copy(nf).applyQuaternion(i).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1)):"rotate"===this.mode&&(qS.copy(i),Yn.copy(this.eye).applyQuaternion(bi.copy(i).invert()),-1!==o.name.search("E")&&o.quaternion.setFromRotationMatrix(v8.lookAt(this.eye,y8,nf)),"X"===o.name&&(bi.setFromAxisAngle(U0,Math.atan2(-Yn.y,Yn.z)),bi.multiplyQuaternions(qS,bi),o.quaternion.copy(bi)),"Y"===o.name&&(bi.setFromAxisAngle(nf,Math.atan2(Yn.x,Yn.z)),bi.multiplyQuaternions(qS,bi),o.quaternion.copy(bi)),"Z"===o.name&&(bi.setFromAxisAngle(B0,Math.atan2(Yn.y,Yn.x)),bi.multiplyQuaternions(qS,bi),o.quaternion.copy(bi))),o.visible=o.visible&&(-1===o.name.indexOf("X")||this.showX),o.visible=o.visible&&(-1===o.name.indexOf("Y")||this.showY),o.visible=o.visible&&(-1===o.name.indexOf("Z")||this.showZ),o.visible=o.visible&&(-1===o.name.indexOf("E")||this.showX&&this.showY&&this.showZ),o.material._color=o.material._color||o.material.color.clone(),o.material._opacity=o.material._opacity||o.material.opacity,o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled&&this.axis&&(o.name===this.axis||this.axis.split("").some(function(l){return o.name===l}))&&(o.material.color.setHex(16776960),o.material.opacity=1)):(o.visible=!1,"AXIS"===o.name?(o.visible=!!this.axis,"X"===this.axis&&(bi.setFromEuler($S.set(0,0,0)),o.quaternion.copy(i).multiply(bi),Math.abs(Yn.copy(U0).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),"Y"===this.axis&&(bi.setFromEuler($S.set(0,0,Math.PI/2)),o.quaternion.copy(i).multiply(bi),Math.abs(Yn.copy(nf).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),"Z"===this.axis&&(bi.setFromEuler($S.set(0,Math.PI/2,0)),o.quaternion.copy(i).multiply(bi),Math.abs(Yn.copy(B0).applyQuaternion(i).dot(this.eye))>.9&&(o.visible=!1)),"XYZE"===this.axis&&(bi.setFromEuler($S.set(0,Math.PI/2,0)),Yn.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(v8.lookAt(y8,Yn,nf)),o.quaternion.multiply(bi),o.visible=this.dragging),"E"===this.axis&&(o.visible=!1)):"START"===o.name?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):"END"===o.name?(o.position.copy(this.worldPosition),o.visible=this.dragging):"DELTA"===o.name?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),Ks.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Ks.applyQuaternion(this.worldQuaternionStart.clone().invert()),o.scale.copy(Ks),o.visible=this.dragging):(o.quaternion.copy(i),o.position.copy(this.dragging?this.worldPositionStart:this.worldPosition),this.axis&&(o.visible=-1!==this.axis.search(o.name))))}super.updateMatrixWorld(e)}}class rpe extends Ae{constructor(){super(new ng(1e5,1e5,2,2),new wi({visible:!1,wireframe:!0,side:2,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),YS.copy(U0).applyQuaternion("local"===t?this.worldQuaternion:XS),V0.copy(nf).applyQuaternion("local"===t?this.worldQuaternion:XS),z0.copy(B0).applyQuaternion("local"===t?this.worldQuaternion:XS),Yn.copy(V0),this.mode){case"translate":case"scale":switch(this.axis){case"X":Yn.copy(this.eye).cross(YS),bl.copy(YS).cross(Yn);break;case"Y":Yn.copy(this.eye).cross(V0),bl.copy(V0).cross(Yn);break;case"Z":Yn.copy(this.eye).cross(z0),bl.copy(z0).cross(Yn);break;case"XY":bl.copy(z0);break;case"YZ":bl.copy(YS);break;case"XZ":Yn.copy(z0),bl.copy(V0);break;case"XYZ":case"E":bl.set(0,0,0)}break;default:bl.set(0,0,0)}0===bl.length()?this.quaternion.copy(this.cameraQuaternion):(w8.lookAt(Ks.set(0,0,0),bl,Yn),this.quaternion.setFromRotationMatrix(w8)),super.updateMatrixWorld(e)}}let spe=(()=>{class n{ngAfterViewInit(){const t=new V1;t.add(new kle(5));const i=new fr(75,window.innerWidth/window.innerHeight,.1,1e3);i.position.z=2;const r=new $R;r.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(r.domElement);const s=new ri,o=new W4({transparent:!0}),a=new Ae(s,o);t.add(a);const l=new E5(i,r.domElement),c=new Kfe(i,r.domElement);c.attach(a),c.setMode("rotate"),t.add(c),c.addEventListener("dragging-changed",function(g){l.enabled=!g.value}),window.addEventListener("keydown",function(g){switch(g.key){case"g":c.setMode("translate");break;case"r":c.setMode("rotate");break;case"s":c.setMode("scale")}});const u=(new Z4).load(["img/px_eso0932a.jpg","img/nx_eso0932a.jpg","img/py_eso0932a.jpg","img/ny_eso0932a.jpg","img/pz_eso0932a.jpg","img/nz_eso0932a.jpg"]);function m(){r.render(t,i)}t.background=u,window.addEventListener("resize",function d(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),r.setSize(window.innerWidth,window.innerHeight),m()},!1),function f(){requestAnimationFrame(f),m()}()}ngOnChanges(t){}ngOnDestroy(){}ngOnInit(){}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-editor"]],features:[Ii],decls:0,vars:0,template:function(i,r){}})}return n})();var Wr=function(n){return n.Home="home",n.GamesList="games-list",n.GameSetup="game-setup",n.GamePlay="game-play",n.Editor="editor",n}(Wr||{});const ope=[{path:"",redirectTo:`/${Wr.Home}`,pathMatch:"full"},{path:Wr.Home,component:kfe},{path:Wr.Editor,component:spe,canActivate:[jS]},{path:Wr.GamesList,component:Bfe,canActivate:[jS]},{path:`${Wr.GameSetup}/:id`,component:Zfe,canActivate:[jS]},{path:`${Wr.GamePlay}/:id`,component:Ffe,canActivate:[jS]},{path:"**",redirectTo:`/${Wr.Home}`}];let ape=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({imports:[pz.forRoot(ope),pz]})}return n})(),lpe=(()=>{class n{constructor(t,i,r){this.generalService=t,this.titleService=i,this.signalRService=r,this.appVersionAttr=P0.appVersion,this.titleService.setTitle("MGx - v"+P0.appVersion);let s=localStorage.getItem("user");try{s=JSON.parse(s),this.generalService.User=s,this.signalRService.startConnection(this.generalService.User.id)}catch{this.generalService.User=void 0}}static#e=this.\u0275fac=function(i){return new(i||n)(re(vl),re(FD),re(Ig))};static#t=this.\u0275cmp=yi({type:n,selectors:[["app-root"]],hostVars:1,hostBindings:function(i,r){2&i&&Un("app-version",r.appVersionAttr)},decls:1,vars:0,template:function(i,r){1&i&&Bn(0,"router-outlet")},dependencies:[WI]})}return n})(),b8=(()=>{class n extends k0{static \u0275fac=function(){let t;return function(r){return(t||(t=ci(n)))(r||n)}}();static \u0275cmp=yi({type:n,selectors:[["CheckIcon"]],standalone:!0,features:[wn,Mu],decls:2,vars:5,consts:[["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M4.86199 11.5948C4.78717 11.5923 4.71366 11.5745 4.64596 11.5426C4.57826 11.5107 4.51779 11.4652 4.46827 11.4091L0.753985 7.69483C0.683167 7.64891 0.623706 7.58751 0.580092 7.51525C0.536478 7.44299 0.509851 7.36177 0.502221 7.27771C0.49459 7.19366 0.506156 7.10897 0.536046 7.03004C0.565935 6.95111 0.613367 6.88 0.674759 6.82208C0.736151 6.76416 0.8099 6.72095 0.890436 6.69571C0.970973 6.67046 1.05619 6.66385 1.13966 6.67635C1.22313 6.68886 1.30266 6.72017 1.37226 6.76792C1.44186 6.81567 1.4997 6.8786 1.54141 6.95197L4.86199 10.2503L12.6397 2.49483C12.7444 2.42694 12.8689 2.39617 12.9932 2.40745C13.1174 2.41873 13.2343 2.47141 13.3251 2.55705C13.4159 2.64268 13.4753 2.75632 13.4938 2.87973C13.5123 3.00315 13.4888 3.1292 13.4271 3.23768L5.2557 11.4091C5.20618 11.4652 5.14571 11.5107 5.07801 11.5426C5.01031 11.5745 4.9368 11.5923 4.86199 11.5948Z","fill","currentColor"]],template:function(i,r){1&i&&(kl(),Le(0,"svg",0),Bn(1,"path",1),Ie()),2&i&&(Tr(r.getClassNames()),Un("aria-label",r.ariaLabel)("aria-hidden",r.ariaHidden)("role",r.role))},encapsulation:2})}return n})();const cpe=["cb"];function upe(n,e){1&n&&Bn(0,"span",10),2&n&&we("ngClass",Te(3).checkboxIcon)}function hpe(n,e){1&n&&Bn(0,"CheckIcon",11),2&n&&we("styleClass","p-checkbox-icon")}function dpe(n,e){if(1&n&&(co(0),Qe(1,upe,1,1,"span",8),Qe(2,hpe,1,1,"CheckIcon",9),uo()),2&n){const t=Te(2);Se(1),we("ngIf",t.checkboxIcon),Se(1),we("ngIf",!t.checkboxIcon)}}function fpe(n,e){}function ppe(n,e){1&n&&Qe(0,fpe,0,0,"ng-template")}function mpe(n,e){if(1&n&&(Le(0,"span",12),Qe(1,ppe,1,0,null,13),Ie()),2&n){const t=Te(2);Se(1),we("ngTemplateOutlet",t.checkboxIconTemplate)}}function gpe(n,e){if(1&n&&(co(0),Qe(1,dpe,3,2,"ng-container",5),Qe(2,mpe,2,1,"span",7),uo()),2&n){const t=Te();Se(1),we("ngIf",!t.checkboxIconTemplate),Se(1),we("ngIf",t.checkboxIconTemplate)}}const _pe=function(n,e,t){return{"p-checkbox-label":!0,"p-checkbox-label-active":n,"p-disabled":e,"p-checkbox-label-focus":t}};function ype(n,e){if(1&n){const t=nr();Le(0,"label",14),ct("click",function(r){mt(t);const s=Te(),o=$y(3);return ht(s.onClick(r,o,!0))}),Qt(1),Ie()}if(2&n){const t=Te();Tr(t.labelStyleClass),we("ngClass",nv(5,_pe,t.checked(),t.disabled,t.focused)),Un("for",t.inputId),Se(1),Sa(t.label)}}const vpe=function(n,e,t){return{"p-checkbox p-component":!0,"p-checkbox-checked":n,"p-checkbox-disabled":e,"p-checkbox-focused":t}},wpe=function(n,e,t){return{"p-highlight":n,"p-disabled":e,"p-focus":t}},bpe={provide:jo,useExisting:xn(()=>xpe),multi:!0};let xpe=(()=>{class n{cd;value;name;disabled;binary;label;ariaLabelledBy;ariaLabel;tabindex;inputId;style;styleClass;labelStyleClass;formControl;checkboxIcon;readonly;required;trueValue=!0;falseValue=!1;onChange=new Mn;inputViewChild;templates;checkboxIconTemplate;model;onModelChange=()=>{};onModelTouched=()=>{};focused=!1;constructor(t){this.cd=t}ngAfterContentInit(){this.templates.forEach(t=>{"icon"===t.getType()&&(this.checkboxIconTemplate=t.template)})}onClick(t,i,r){t.preventDefault(),!this.disabled&&!this.readonly&&(this.updateModel(t),r&&i.focus())}updateModel(t){let i;this.binary?(i=this.checked()?this.falseValue:this.trueValue,this.model=i,this.onModelChange(i)):(i=this.checked()?this.model.filter(r=>!ef.equals(r,this.value)):this.model?[...this.model,this.value]:[this.value],this.onModelChange(i),this.model=i,this.formControl&&this.formControl.setValue(i)),this.onChange.emit({checked:i,originalEvent:t})}handleChange(t){this.readonly||this.updateModel(t)}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}focus(){this.inputViewChild?.nativeElement.focus()}writeValue(t){this.model=t,this.cd.markForCheck()}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}checked(){return this.binary?this.model===this.trueValue:ef.contains(this.value,this.model)}static \u0275fac=function(i){return new(i||n)(re(Iu))};static \u0275cmp=yi({type:n,selectors:[["p-checkbox"]],contentQueries:function(i,r,s){if(1&i&&sv(s,A2,4),2&i){let o;Tu(o=Au())&&(r.templates=o)}},viewQuery:function(i,r){if(1&i&&Wx(cpe,5),2&i){let s;Tu(s=Au())&&(r.inputViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{value:"value",name:"name",disabled:"disabled",binary:"binary",label:"label",ariaLabelledBy:"ariaLabelledBy",ariaLabel:"ariaLabel",tabindex:"tabindex",inputId:"inputId",style:"style",styleClass:"styleClass",labelStyleClass:"labelStyleClass",formControl:"formControl",checkboxIcon:"checkboxIcon",readonly:"readonly",required:"required",trueValue:"trueValue",falseValue:"falseValue"},outputs:{onChange:"onChange"},features:[Vn([bpe])],decls:7,vars:26,consts:[[3,"ngStyle","ngClass"],[1,"p-hidden-accessible"],["type","checkbox",3,"readonly","value","checked","disabled","focus","blur","change"],["cb",""],[1,"p-checkbox-box",3,"ngClass","click"],[4,"ngIf"],[3,"class","ngClass","click",4,"ngIf"],["class","p-checkbox-icon",4,"ngIf"],["class","p-checkbox-icon",3,"ngClass",4,"ngIf"],[3,"styleClass",4,"ngIf"],[1,"p-checkbox-icon",3,"ngClass"],[3,"styleClass"],[1,"p-checkbox-icon"],[4,"ngTemplateOutlet"],[3,"ngClass","click"]],template:function(i,r){if(1&i){const s=nr();Le(0,"div",0)(1,"div",1)(2,"input",2,3),ct("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()})("change",function(a){return r.handleChange(a)}),Ie()(),Le(4,"div",4),ct("click",function(a){mt(s);const l=$y(3);return ht(r.onClick(a,l,!0))}),Qe(5,gpe,3,2,"ng-container",5),Ie()(),Qe(6,ype,2,9,"label",6)}2&i&&(Tr(r.styleClass),we("ngStyle",r.style)("ngClass",nv(18,vpe,r.checked(),r.disabled,r.focused)),Se(2),we("readonly",r.readonly)("value",r.value)("checked",r.checked())("disabled",r.disabled),Un("id",r.inputId)("name",r.name)("tabindex",r.tabindex)("aria-labelledby",r.ariaLabelledBy)("aria-label",r.ariaLabel)("aria-checked",r.checked())("required",r.required),Se(2),we("ngClass",nv(22,wpe,r.checked(),r.disabled,r.focused)),Se(1),we("ngIf",r.checked()),Se(1),we("ngIf",r.label))},dependencies:function(){return[hv,Pu,fv,uC,b8]},styles:["@layer primeng{.p-checkbox{display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:bottom;position:relative}.p-checkbox-disabled{cursor:default!important;pointer-events:none}.p-checkbox-box{display:flex;justify-content:center;align-items:center}p-checkbox{display:inline-flex;vertical-align:bottom;align-items:center}.p-checkbox-label{line-height:1}}\n"],encapsulation:2,changeDetection:0})}return n})(),Cpe=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=vi({type:n});static \u0275inj=ai({imports:[nc,b8,WS]})}return n})();function x8(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?x8(Object(t),!0).forEach(function(i){yr(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):x8(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function ZS(n){return ZS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ZS(n)}function C8(n,e){for(var t=0;t<e.length;t++){var i=e[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}function yr(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function O2(n,e){return function Ape(n){if(Array.isArray(n))return n}(n)||function Ipe(n,e){var t=null==n?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,i=[],r=!0,s=!1;try{for(t=t.call(n);!(r=(o=t.next()).done)&&(i.push(o.value),!e||i.length!==e);r=!0);}catch(l){s=!0,a=l}finally{try{!r&&null!=t.return&&t.return()}finally{if(s)throw a}}return i}}(n,e)||S8(n,e)||function Ppe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G0(n){return function Tpe(n){if(Array.isArray(n))return L2(n)}(n)||function Dpe(n){if(typeof Symbol<"u"&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||S8(n)||function Rpe(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S8(n,e){if(n){if("string"==typeof n)return L2(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if("Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t)return Array.from(n);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return L2(n,e)}}function L2(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var E8=function(){},N2={},M8={},T8=null,A8={mark:E8,measure:E8};try{typeof window<"u"&&(N2=window),typeof document<"u"&&(M8=document),typeof MutationObserver<"u"&&(T8=MutationObserver),typeof performance<"u"&&(A8=performance)}catch{}var QS,eE,tE,nE,iE,D8=(N2.navigator||{}).userAgent,I8=void 0===D8?"":D8,uh=N2,mi=M8,R8=T8,JS=A8,Ic=!!mi.documentElement&&!!mi.head&&"function"==typeof mi.addEventListener&&"function"==typeof mi.createElement,P8=~I8.indexOf("MSIE")||~I8.indexOf("Trident/"),Rc="___FONT_AWESOME___",O8="fa",L8="svg-inline--fa",rf="data-fa-i2svg",k2="data-fa-pseudo-element",Lpe="data-fa-pseudo-element-pending",U2="data-prefix",B2="data-icon",N8="fontawesome-i2svg",Npe="async",Fpe=["HTML","HEAD","STYLE","SCRIPT"],F8=function(){try{return!0}catch{return!1}}(),gi="classic",ki="sharp",V2=[gi,ki];function W0(n){return new Proxy(n,{get:function(t,i){return i in t?t[i]:t[gi]}})}var j0=W0((yr(QS={},gi,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),yr(QS,ki,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),QS)),$0=W0((yr(eE={},gi,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),yr(eE,ki,{solid:"fass",regular:"fasr",light:"fasl"}),eE)),q0=W0((yr(tE={},gi,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),yr(tE,ki,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),tE)),kpe=W0((yr(nE={},gi,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),yr(nE,ki,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),nE)),Upe=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,k8="fa-layers-text",Bpe=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,Vpe=W0((yr(iE={},gi,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),yr(iE,ki,{900:"fass",400:"fasr",300:"fasl"}),iE)),U8=[1,2,3,4,5,6,7,8,9,10],zpe=U8.concat([11,12,13,14,15,16,17,18,19,20]),Hpe=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],sf={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},X0=new Set;Object.keys($0[gi]).map(X0.add.bind(X0)),Object.keys($0[ki]).map(X0.add.bind(X0));var Gpe=[].concat(V2,G0(X0),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",sf.GROUP,sf.SWAP_OPACITY,sf.PRIMARY,sf.SECONDARY]).concat(U8.map(function(n){return"".concat(n,"x")})).concat(zpe.map(function(n){return"w-".concat(n)})),Y0=uh.FontAwesomeConfig||{};mi&&"function"==typeof mi.querySelector&&[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(n){var e=O2(n,2),i=e[1],r=function jpe(n){return""===n||"false"!==n&&("true"===n||n)}(function Wpe(n){var e=mi.querySelector("script["+n+"]");if(e)return e.getAttribute(n)}(e[0]));null!=r&&(Y0[i]=r)});var B8={styleDefault:"solid",familyDefault:"classic",cssPrefix:O8,replacementClass:L8,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Y0.familyPrefix&&(Y0.cssPrefix=Y0.familyPrefix);var Ng=rt(rt({},B8),Y0);Ng.autoReplaceSvg||(Ng.observeMutations=!1);var dt={};Object.keys(B8).forEach(function(n){Object.defineProperty(dt,n,{enumerable:!0,set:function(t){Ng[n]=t,Z0.forEach(function(i){return i(dt)})},get:function(){return Ng[n]}})}),Object.defineProperty(dt,"familyPrefix",{enumerable:!0,set:function(e){Ng.cssPrefix=e,Z0.forEach(function(t){return t(dt)})},get:function(){return Ng.cssPrefix}}),uh.FontAwesomeConfig=dt;var Z0=[],xl={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1},Ype="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function K0(){for(var n=12,e="";n-- >0;)e+=Ype[62*Math.random()|0];return e}function Fg(n){for(var e=[],t=(n||[]).length>>>0;t--;)e[t]=n[t];return e}function z2(n){return n.classList?Fg(n.classList):(n.getAttribute("class")||"").split(" ").filter(function(e){return e})}function V8(n){return"".concat(n).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function rE(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,": ").concat(n[t].trim(),";")},"")}function H2(n){return n.size!==xl.size||n.x!==xl.x||n.y!==xl.y||n.rotate!==xl.rotate||n.flipX||n.flipY}var Qpe=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, none));\n          transform: rotate(var(--fa-rotate-angle, none));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function z8(){var n=O8,e=L8,t=dt.cssPrefix,i=dt.replacementClass,r=Qpe;if(t!==n||i!==e){var s=new RegExp("\\.".concat(n,"\\-"),"g"),o=new RegExp("\\--".concat(n,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");r=r.replace(s,".".concat(t,"-")).replace(o,"--".concat(t,"-")).replace(a,".".concat(i))}return r}var H8=!1;function G2(){dt.autoAddCss&&!H8&&(function Xpe(n){if(n&&Ic){var e=mi.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=n;for(var t=mi.head.childNodes,i=null,r=t.length-1;r>-1;r--){var s=t[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}mi.head.insertBefore(e,i)}}(z8()),H8=!0)}var eme={mixout:function(){return{dom:{css:z8,insertCss:G2}}},hooks:function(){return{beforeDOMElementCreation:function(){G2()},beforeI2svg:function(){G2()}}}},Pc=uh||{};Pc[Rc]||(Pc[Rc]={}),Pc[Rc].styles||(Pc[Rc].styles={}),Pc[Rc].hooks||(Pc[Rc].hooks={}),Pc[Rc].shims||(Pc[Rc].shims=[]);var Na=Pc[Rc],G8=[],sE=!1;function J0(n){var e=n.tag,t=n.attributes,i=void 0===t?{}:t,r=n.children,s=void 0===r?[]:r;return"string"==typeof n?V8(n):"<".concat(e," ").concat(function Zpe(n){return Object.keys(n||{}).reduce(function(e,t){return e+"".concat(t,'="').concat(V8(n[t]),'" ')},"").trim()}(i),">").concat(s.map(J0).join(""),"</").concat(e,">")}function W8(n,e,t){if(n&&n[e]&&n[e][t])return{prefix:e,iconName:t,icon:n[e][t]}}Ic&&((sE=(mi.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(mi.readyState))||mi.addEventListener("DOMContentLoaded",function n(){mi.removeEventListener("DOMContentLoaded",n),sE=1,G8.map(function(e){return e()})}));var W2=function(e,t,i,r){var l,c,u,s=Object.keys(e),o=s.length,a=void 0!==r?function(e,t){return function(i,r,s,o){return e.call(t,i,r,s,o)}}(t,r):t;for(void 0===i?(l=1,u=e[s[0]]):(l=0,u=i);l<o;l++)u=a(u,e[c=s[l]],c,e);return u};function j2(n){var e=function rme(n){for(var e=[],t=0,i=n.length;t<i;){var r=n.charCodeAt(t++);if(r>=55296&&r<=56319&&t<i){var s=n.charCodeAt(t++);56320==(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),t--)}else e.push(r)}return e}(n);return 1===e.length?e[0].toString(16):null}function j8(n){return Object.keys(n).reduce(function(e,t){var i=n[t];return i.icon?e[i.iconName]=i.icon:e[t]=i,e},{})}function $2(n,e){var i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,r=void 0!==i&&i,s=j8(e);"function"!=typeof Na.hooks.addPack||r?Na.styles[n]=rt(rt({},Na.styles[n]||{}),s):Na.hooks.addPack(n,j8(e)),"fas"===n&&$2("fa",e)}var oE,aE,lE,kg=Na.styles,ome=Na.shims,ame=(yr(oE={},gi,Object.values(q0[gi])),yr(oE,ki,Object.values(q0[ki])),oE),q2=null,$8={},q8={},X8={},Y8={},Z8={},lme=(yr(aE={},gi,Object.keys(j0[gi])),yr(aE,ki,Object.keys(j0[ki])),aE);var K8=function(){var e=function(s){return W2(kg,function(o,a,l){return o[l]=W2(a,s,{}),o},{})};$8=e(function(r,s,o){return s[3]&&(r[s[3]]=o),s[2]&&s[2].filter(function(l){return"number"==typeof l}).forEach(function(l){r[l.toString(16)]=o}),r}),q8=e(function(r,s,o){return r[o]=o,s[2]&&s[2].filter(function(l){return"string"==typeof l}).forEach(function(l){r[l]=o}),r}),Z8=e(function(r,s,o){var a=s[2];return r[o]=o,a.forEach(function(l){r[l]=o}),r});var t="far"in kg||dt.autoFetchSvg,i=W2(ome,function(r,s){var o=s[0],a=s[1],l=s[2];return"far"===a&&!t&&(a="fas"),"string"==typeof o&&(r.names[o]={prefix:a,iconName:l}),"number"==typeof o&&(r.unicodes[o.toString(16)]={prefix:a,iconName:l}),r},{names:{},unicodes:{}});X8=i.names,Y8=i.unicodes,q2=cE(dt.styleDefault,{family:dt.familyDefault})};function X2(n,e){return($8[n]||{})[e]}function af(n,e){return(Z8[n]||{})[e]}function J8(n){return X8[n]||{prefix:null,iconName:null}}function dh(){return q2}(function qpe(n){Z0.push(n)})(function(n){q2=cE(n.styleDefault,{family:dt.familyDefault})}),K8();var Y2=function(){return{prefix:null,iconName:null,rest:[]}};function cE(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,i=void 0===t?gi:t;return $0[i][n]||$0[i][j0[i][n]]||(n in Na.styles?n:null)||null}var Q8=(yr(lE={},gi,Object.keys(q0[gi])),yr(lE,ki,Object.keys(q0[ki])),lE);function uE(n){var e,i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,r=void 0!==i&&i,s=(yr(e={},gi,"".concat(dt.cssPrefix,"-").concat(gi)),yr(e,ki,"".concat(dt.cssPrefix,"-").concat(ki)),e),o=null,a=gi;(n.includes(s[gi])||n.some(function(c){return Q8[gi].includes(c)}))&&(a=gi),(n.includes(s[ki])||n.some(function(c){return Q8[ki].includes(c)}))&&(a=ki);var l=n.reduce(function(c,u){var d=function ume(n,e){var t=e.split("-"),i=t[0],r=t.slice(1).join("-");return i!==n||""===r||function cme(n){return~Gpe.indexOf(n)}(r)?null:r}(dt.cssPrefix,u);if(kg[u]?(u=ame[a].includes(u)?kpe[a][u]:u,o=u,c.prefix=u):lme[a].indexOf(u)>-1?(o=u,c.prefix=cE(u,{family:a})):d?c.iconName=d:u!==dt.replacementClass&&u!==s[gi]&&u!==s[ki]&&c.rest.push(u),!r&&c.prefix&&c.iconName){var f="fa"===o?J8(c.iconName):{},m=af(c.prefix,c.iconName);f.prefix&&(o=null),c.iconName=f.iconName||m||c.iconName,c.prefix=f.prefix||c.prefix,"far"===c.prefix&&!kg.far&&kg.fas&&!dt.autoFetchSvg&&(c.prefix="fas")}return c},Y2());return(n.includes("fa-brands")||n.includes("fab"))&&(l.prefix="fab"),(n.includes("fa-duotone")||n.includes("fad"))&&(l.prefix="fad"),!l.prefix&&a===ki&&(kg.fass||dt.autoFetchSvg)&&(l.prefix="fass",l.iconName=af(l.prefix,l.iconName)||l.iconName),("fa"===l.prefix||"fa"===o)&&(l.prefix=dh()||"fas"),l}var fme=function(){function n(){(function Spe(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.definitions={}}return function Epe(n,e,t){e&&C8(n.prototype,e),t&&C8(n,t),Object.defineProperty(n,"prototype",{writable:!1})}(n,[{key:"add",value:function(){for(var t=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var o=r.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){t.definitions[a]=rt(rt({},t.definitions[a]||{}),o[a]),$2(a,o[a]);var l=q0[gi][a];l&&$2(l,o[a]),K8()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(t,i){var r=i.prefix&&i.iconName&&i.icon?{0:i}:i;return Object.keys(r).map(function(s){var o=r[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];t[a]||(t[a]={}),u.length>0&&u.forEach(function(d){"string"==typeof d&&(t[a][d]=c)}),t[a][l]=c}),t}}]),n}(),eW=[],Ug={},Bg={},pme=Object.keys(Bg);function Z2(n,e){for(var t=arguments.length,i=new Array(t>2?t-2:0),r=2;r<t;r++)i[r-2]=arguments[r];return(Ug[n]||[]).forEach(function(o){e=o.apply(null,[e].concat(i))}),e}function lf(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];(Ug[n]||[]).forEach(function(s){s.apply(null,t)})}function Oc(){var n=arguments[0],e=Array.prototype.slice.call(arguments,1);return Bg[n]?Bg[n].apply(null,e):void 0}function K2(n){"fa"===n.prefix&&(n.prefix="fas");var e=n.iconName,t=n.prefix||dh();if(e)return e=af(t,e)||e,W8(tW.definitions,t,e)||W8(Na.styles,t,e)}var tW=new fme,_me={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Ic?(lf("beforeI2svg",e),Oc("pseudoElements2svg",e),Oc("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.autoReplaceSvgRoot;!1===dt.autoReplaceSvg&&(dt.autoReplaceSvg=!0),dt.observeMutations=!0,function nme(n){Ic&&(sE?setTimeout(n,0):G8.push(n))}(function(){vme({autoReplaceSvgRoot:t}),lf("watch",e)})}},yme={icon:function(e){if(null===e)return null;if("object"===ZS(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:af(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],i=cE(e[0]);return{prefix:i,iconName:af(i,t)||t}}if("string"==typeof e&&(e.indexOf("".concat(dt.cssPrefix,"-"))>-1||e.match(Upe))){var r=uE(e.split(" "),{skipLookups:!0});return{prefix:r.prefix||dh(),iconName:af(r.prefix,r.iconName)||r.iconName}}if("string"==typeof e){var s=dh();return{prefix:s,iconName:af(s,e)||e}}}},So={noAuto:function(){dt.autoReplaceSvg=!1,dt.observeMutations=!1,lf("noAuto")},config:dt,dom:_me,parse:yme,library:tW,findIconDefinition:K2,toHtml:J0},vme=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,i=void 0===t?mi:t;(Object.keys(Na.styles).length>0||dt.autoFetchSvg)&&Ic&&dt.autoReplaceSvg&&So.dom.i2svg({node:i})};function hE(n,e){return Object.defineProperty(n,"abstract",{get:e}),Object.defineProperty(n,"html",{get:function(){return n.abstract.map(function(i){return J0(i)})}}),Object.defineProperty(n,"node",{get:function(){if(Ic){var i=mi.createElement("div");return i.innerHTML=n.html,i.children}}}),n}function J2(n){var e=n.icons,t=e.main,i=e.mask,r=n.prefix,s=n.iconName,o=n.transform,a=n.symbol,l=n.title,c=n.maskId,u=n.titleId,d=n.extra,f=n.watchable,m=void 0!==f&&f,g=i.found?i:t,_=g.width,v=g.height,y="fak"===r,b=[dt.replacementClass,s?"".concat(dt.cssPrefix,"-").concat(s):""].filter(function(T){return-1===d.classes.indexOf(T)}).filter(function(T){return""!==T||!!T}).concat(d.classes).join(" "),x={children:[],attributes:rt(rt({},d.attributes),{},{"data-prefix":r,"data-icon":s,class:b,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(_," ").concat(v)})},S=y&&!~d.classes.indexOf("fa-fw")?{width:"".concat(_/v*16*.0625,"em")}:{};m&&(x.attributes[rf]=""),l&&(x.children.push({tag:"title",attributes:{id:x.attributes["aria-labelledby"]||"title-".concat(u||K0())},children:[l]}),delete x.attributes.title);var E=rt(rt({},x),{},{prefix:r,iconName:s,main:t,mask:i,maskId:c,transform:o,symbol:a,styles:rt(rt({},S),d.styles)}),A=i.found&&t.found?Oc("generateAbstractMask",E)||{children:[],attributes:{}}:Oc("generateAbstractIcon",E)||{children:[],attributes:{}},N=A.attributes;return E.children=A.children,E.attributes=N,a?function bme(n){var t=n.iconName,i=n.children,r=n.attributes,s=n.symbol,o=!0===s?"".concat(n.prefix,"-").concat(dt.cssPrefix,"-").concat(t):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:rt(rt({},r),{},{id:o}),children:i}]}]}(E):function wme(n){var e=n.children,t=n.main,i=n.mask,r=n.attributes,s=n.styles,o=n.transform;if(H2(o)&&t.found&&!i.found){var c={x:t.width/t.height/2,y:.5};r.style=rE(rt(rt({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:e}]}(E)}function nW(n){var e=n.content,t=n.width,i=n.height,r=n.transform,s=n.title,o=n.extra,a=n.watchable,l=void 0!==a&&a,c=rt(rt(rt({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[rf]="");var u=rt({},o.styles);H2(r)&&(u.transform=function Jpe(n){var e=n.transform,t=n.width,r=n.height,s=void 0===r?16:r,o=n.startCentered,a=void 0!==o&&o,l="";return l+=a&&P8?"translate(".concat(e.x/16-(void 0===t?16:t)/2,"em, ").concat(e.y/16-s/2,"em) "):a?"translate(calc(-50% + ".concat(e.x/16,"em), calc(-50% + ").concat(e.y/16,"em)) "):"translate(".concat(e.x/16,"em, ").concat(e.y/16,"em) "),(l+="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "))+"rotate(".concat(e.rotate,"deg) ")}({transform:r,startCentered:!0,width:t,height:i}),u["-webkit-transform"]=u.transform);var d=rE(u);d.length>0&&(c.style=d);var f=[];return f.push({tag:"span",attributes:c,children:[e]}),s&&f.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),f}var Q2=Na.styles;function eO(n){var e=n[0],t=n[1],s=O2(n.slice(4),1)[0];return{found:!0,width:e,height:t,icon:Array.isArray(s)?{tag:"g",attributes:{class:"".concat(dt.cssPrefix,"-").concat(sf.GROUP)},children:[{tag:"path",attributes:{class:"".concat(dt.cssPrefix,"-").concat(sf.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(dt.cssPrefix,"-").concat(sf.PRIMARY),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}}}}var Cme={found:!1,width:512,height:512};function tO(n,e){var t=e;return"fa"===e&&null!==dt.styleDefault&&(e=dh()),new Promise(function(i,r){if(Oc("missingIconAbstract"),"fa"===t){var o=J8(n)||{};n=o.iconName||n,e=o.prefix||e}if(n&&e&&Q2[e]&&Q2[e][n])return i(eO(Q2[e][n]));(function Sme(n,e){!F8&&!dt.showMissingIcons&&n&&console.error('Icon with name "'.concat(n,'" and prefix "').concat(e,'" is missing.'))})(n,e),i(rt(rt({},Cme),{},{icon:dt.showMissingIcons&&n&&Oc("missingIconAbstract")||{}}))})}var iW=function(){},nO=dt.measurePerformance&&JS&&JS.mark&&JS.measure?JS:{mark:iW,measure:iW},Q0='FA "6.4.2"',rW=function(e){nO.mark("".concat(Q0," ").concat(e," ends")),nO.measure("".concat(Q0," ").concat(e),"".concat(Q0," ").concat(e," begins"),"".concat(Q0," ").concat(e," ends"))},iO={begin:function(e){return nO.mark("".concat(Q0," ").concat(e," begins")),function(){return rW(e)}},end:rW},dE=function(){};function sW(n){return"string"==typeof(n.getAttribute?n.getAttribute(rf):null)}function Dme(n){return mi.createElementNS("http://www.w3.org/2000/svg",n)}function Ime(n){return mi.createElement(n)}function oW(n){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,i=void 0===t?"svg"===n.tag?Dme:Ime:t;if("string"==typeof n)return mi.createTextNode(n);var r=i(n.tag);return Object.keys(n.attributes||[]).forEach(function(o){r.setAttribute(o,n.attributes[o])}),(n.children||[]).forEach(function(o){r.appendChild(oW(o,{ceFn:i}))}),r}var fE={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach(function(r){t.parentNode.insertBefore(oW(r),t)}),null===t.getAttribute(rf)&&dt.keepOriginalSource){var i=mi.createComment(function Rme(n){var e=" ".concat(n.outerHTML," ");return"".concat(e,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(i,t)}else t.remove()},nest:function(e){var t=e[0],i=e[1];if(~z2(t).indexOf(dt.replacementClass))return fE.replace(e);var r=new RegExp("".concat(dt.cssPrefix,"-.*"));if(delete i[0].attributes.id,i[0].attributes.class){var s=i[0].attributes.class.split(" ").reduce(function(a,l){return l===dt.replacementClass||l.match(r)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});i[0].attributes.class=s.toSvg.join(" "),0===s.toNode.length?t.removeAttribute("class"):t.setAttribute("class",s.toNode.join(" "))}var o=i.map(function(a){return J0(a)}).join("\n");t.setAttribute(rf,""),t.innerHTML=o}};function aW(n){n()}function lW(n,e){var t="function"==typeof e?e:dE;if(0===n.length)t();else{var i=aW;dt.mutateApproach===Npe&&(i=uh.requestAnimationFrame||aW),i(function(){var r=function Ame(){return!0===dt.autoReplaceSvg?fE.replace:fE[dt.autoReplaceSvg]||fE.replace}(),s=iO.begin("mutate");n.map(r),s(),t()})}}var rO=!1;function cW(){rO=!0}function sO(){rO=!1}var pE=null;function uW(n){if(R8&&dt.observeMutations){var e=n.treeCallback,t=void 0===e?dE:e,i=n.nodeCallback,r=void 0===i?dE:i,s=n.pseudoElementsCallback,o=void 0===s?dE:s,a=n.observeMutationsRoot,l=void 0===a?mi:a;pE=new R8(function(c){if(!rO){var u=dh();Fg(c).forEach(function(d){if("childList"===d.type&&d.addedNodes.length>0&&!sW(d.addedNodes[0])&&(dt.searchPseudoElements&&o(d.target),t(d.target)),"attributes"===d.type&&d.target.parentNode&&dt.searchPseudoElements&&o(d.target.parentNode),"attributes"===d.type&&sW(d.target)&&~Hpe.indexOf(d.attributeName))if("class"===d.attributeName&&function Mme(n){var e=n.getAttribute?n.getAttribute(U2):null,t=n.getAttribute?n.getAttribute(B2):null;return e&&t}(d.target)){var f=uE(z2(d.target)),g=f.iconName;d.target.setAttribute(U2,f.prefix||u),g&&d.target.setAttribute(B2,g)}else(function Tme(n){return n&&n.classList&&n.classList.contains&&n.classList.contains(dt.replacementClass)})(d.target)&&r(d.target)})}}),Ic&&pE.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function hW(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},t=function Lme(n){var e=n.getAttribute("data-prefix"),t=n.getAttribute("data-icon"),i=void 0!==n.innerText?n.innerText.trim():"",r=uE(z2(n));return r.prefix||(r.prefix=dh()),e&&t&&(r.prefix=e,r.iconName=t),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function hme(n,e){return(q8[n]||{})[e]}(r.prefix,n.innerText)||X2(r.prefix,j2(n.innerText))),!r.iconName&&dt.autoFetchSvg&&n.firstChild&&n.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=n.firstChild.data)),r}(n),i=t.iconName,r=t.prefix,s=t.rest,o=function Nme(n){var e=Fg(n.attributes).reduce(function(r,s){return"class"!==r.name&&"style"!==r.name&&(r[s.name]=s.value),r},{}),t=n.getAttribute("title"),i=n.getAttribute("data-fa-title-id");return dt.autoA11y&&(t?e["aria-labelledby"]="".concat(dt.replacementClass,"-title-").concat(i||K0()):(e["aria-hidden"]="true",e.focusable="false")),e}(n),a=Z2("parseNodeAttributes",{},n),l=e.styleParser?function Ome(n){var e=n.getAttribute("style"),t=[];return e&&(t=e.split(";").reduce(function(i,r){var s=r.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(i[o]=a.join(":").trim()),i},{})),t}(n):[];return rt({iconName:i,title:n.getAttribute("title"),titleId:n.getAttribute("data-fa-title-id"),prefix:r,transform:xl,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var kme=Na.styles;function dW(n){var e="nest"===dt.autoReplaceSvg?hW(n,{styleParser:!1}):hW(n);return~e.extra.classes.indexOf(k8)?Oc("generateLayersText",n,e):Oc("generateSvgReplacementMutation",n,e)}var fh=new Set;function fW(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Ic)return Promise.resolve();var t=mi.documentElement.classList,i=function(d){return t.add("".concat(N8,"-").concat(d))},r=function(d){return t.remove("".concat(N8,"-").concat(d))},s=dt.autoFetchSvg?fh:V2.map(function(u){return"fa-".concat(u)}).concat(Object.keys(kme));s.includes("fa")||s.push("fa");var o=[".".concat(k8,":not([").concat(rf,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(rf,"])")})).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=Fg(n.querySelectorAll(o))}catch{}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var l=iO.begin("onTree"),c=a.reduce(function(u,d){try{var f=dW(d);f&&u.push(f)}catch(m){F8||"MissingIcon"===m.name&&console.error(m)}return u},[]);return new Promise(function(u,d){Promise.all(c).then(function(f){lW(f,function(){i("active"),i("complete"),r("pending"),"function"==typeof e&&e(),l(),u()})}).catch(function(f){l(),d(f)})})}function Ume(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;dW(n).then(function(t){t&&lW([t],e)})}function Bme(n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||{}).icon?e:K2(e||{}),r=t.mask;return r&&(r=(r||{}).icon?r:K2(r||{})),n(i,rt(rt({},t),{},{mask:r}))}}V2.map(function(n){fh.add("fa-".concat(n))}),Object.keys(j0[gi]).map(fh.add.bind(fh)),Object.keys(j0[ki]).map(fh.add.bind(fh)),fh=G0(fh);var Vme=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.transform,r=void 0===i?xl:i,s=t.symbol,o=void 0!==s&&s,a=t.mask,l=void 0===a?null:a,c=t.maskId,u=void 0===c?null:c,d=t.title,f=void 0===d?null:d,m=t.titleId,g=void 0===m?null:m,_=t.classes,v=void 0===_?[]:_,y=t.attributes,b=void 0===y?{}:y,x=t.styles,S=void 0===x?{}:x;if(e){var E=e.prefix,A=e.iconName,M=e.icon;return hE(rt({type:"icon"},e),function(){return lf("beforeDOMElementCreation",{iconDefinition:e,params:t}),dt.autoA11y&&(f?b["aria-labelledby"]="".concat(dt.replacementClass,"-title-").concat(g||K0()):(b["aria-hidden"]="true",b.focusable="false")),J2({icons:{main:eO(M),mask:l?eO(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:A,transform:rt(rt({},xl),r),symbol:o,title:f,maskId:u,titleId:g,extra:{attributes:b,styles:S,classes:v}})})}},zme={mixout:function(){return{icon:Bme(Vme)}},hooks:function(){return{mutationObserverCallbacks:function(t){return t.treeCallback=fW,t.nodeCallback=Ume,t}}},provides:function(e){e.i2svg=function(t){var i=t.node,s=t.callback;return fW(void 0===i?mi:i,void 0===s?function(){}:s)},e.generateSvgReplacementMutation=function(t,i){var r=i.iconName,s=i.title,o=i.titleId,a=i.prefix,l=i.transform,c=i.symbol,u=i.mask,d=i.maskId,f=i.extra;return new Promise(function(m,g){Promise.all([tO(r,a),u.iconName?tO(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(_){var v=O2(_,2);m([t,J2({icons:{main:v[0],mask:v[1]},prefix:a,iconName:r,transform:l,symbol:c,maskId:d,title:s,titleId:o,extra:f,watchable:!0})])}).catch(g)})},e.generateAbstractIcon=function(t){var c,i=t.children,r=t.attributes,s=t.main,o=t.transform,l=rE(t.styles);return l.length>0&&(r.style=l),H2(o)&&(c=Oc("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),i.push(c||s.icon),{children:i,attributes:r}}}},Hme={mixout:function(){return{layer:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.classes,s=void 0===r?[]:r;return hE({type:"layer"},function(){lf("beforeDOMElementCreation",{assembler:t,params:i});var o=[];return t(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(dt.cssPrefix,"-layers")].concat(G0(s)).join(" ")},children:o}]})}}}},Gme={mixout:function(){return{counter:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.title,s=void 0===r?null:r,o=i.classes,a=void 0===o?[]:o,l=i.attributes,c=void 0===l?{}:l,u=i.styles,d=void 0===u?{}:u;return hE({type:"counter",content:t},function(){return lf("beforeDOMElementCreation",{content:t,params:i}),function xme(n){var e=n.content,t=n.title,i=n.extra,r=rt(rt(rt({},i.attributes),t?{title:t}:{}),{},{class:i.classes.join(" ")}),s=rE(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[e]}),t&&o.push({tag:"span",attributes:{class:"sr-only"},children:[t]}),o}({content:t.toString(),title:s,extra:{attributes:c,styles:d,classes:["".concat(dt.cssPrefix,"-layers-counter")].concat(G0(a))}})})}}}},Wme={mixout:function(){return{text:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.transform,s=void 0===r?xl:r,o=i.title,a=void 0===o?null:o,l=i.classes,c=void 0===l?[]:l,u=i.attributes,d=void 0===u?{}:u,f=i.styles,m=void 0===f?{}:f;return hE({type:"text",content:t},function(){return lf("beforeDOMElementCreation",{content:t,params:i}),nW({content:t,transform:rt(rt({},xl),s),title:a,extra:{attributes:d,styles:m,classes:["".concat(dt.cssPrefix,"-layers-text")].concat(G0(c))}})})}}},provides:function(e){e.generateLayersText=function(t,i){var r=i.title,s=i.transform,o=i.extra,a=null,l=null;if(P8){var c=parseInt(getComputedStyle(t).fontSize,10),u=t.getBoundingClientRect();a=u.width/c,l=u.height/c}return dt.autoA11y&&!r&&(o.attributes["aria-hidden"]="true"),Promise.resolve([t,nW({content:t.innerHTML,width:a,height:l,transform:s,title:r,extra:o,watchable:!0})])}}},jme=new RegExp('"',"ug"),pW=[1105920,1112319];function mW(n,e){var t="".concat(Lpe).concat(e.replace(":","-"));return new Promise(function(i,r){if(null!==n.getAttribute(t))return i();var o=Fg(n.children).filter(function(M){return M.getAttribute(k2)===e})[0],a=uh.getComputedStyle(n,e),l=a.getPropertyValue("font-family").match(Bpe),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return n.removeChild(o),i();if(l&&"none"!==u&&""!==u){var d=a.getPropertyValue("content"),f=~["Sharp"].indexOf(l[2])?ki:gi,m=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?$0[f][l[2].toLowerCase()]:Vpe[f][c],g=function $me(n){var e=n.replace(jme,""),t=function sme(n,e){var r,t=n.length,i=n.charCodeAt(e);return i>=55296&&i<=56319&&t>e+1&&(r=n.charCodeAt(e+1))>=56320&&r<=57343?1024*(i-55296)+r-56320+65536:i}(e,0),i=t>=pW[0]&&t<=pW[1],r=2===e.length&&e[0]===e[1];return{value:j2(r?e[0]:e),isSecondary:i||r}}(d),_=g.value,v=g.isSecondary,y=l[0].startsWith("FontAwesome"),b=X2(m,_),x=b;if(y){var S=function dme(n){var e=Y8[n],t=X2("fas",n);return e||(t?{prefix:"fas",iconName:t}:null)||{prefix:null,iconName:null}}(_);S.iconName&&S.prefix&&(b=S.iconName,m=S.prefix)}if(!b||v||o&&o.getAttribute(U2)===m&&o.getAttribute(B2)===x)i();else{n.setAttribute(t,x),o&&n.removeChild(o);var E=function Fme(){return{iconName:null,title:null,titleId:null,prefix:null,transform:xl,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}(),A=E.extra;A.attributes[k2]=e,tO(b,m).then(function(M){var N=J2(rt(rt({},E),{},{icons:{main:M,mask:Y2()},prefix:m,iconName:x,extra:A,watchable:!0})),T=mi.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===e?n.insertBefore(T,n.firstChild):n.appendChild(T),T.outerHTML=N.map(function(R){return J0(R)}).join("\n"),n.removeAttribute(t),i()}).catch(r)}}else i()})}function qme(n){return Promise.all([mW(n,"::before"),mW(n,"::after")])}function Xme(n){return!(n.parentNode===document.head||~Fpe.indexOf(n.tagName.toUpperCase())||n.getAttribute(k2)||n.parentNode&&"svg"===n.parentNode.tagName)}function gW(n){if(Ic)return new Promise(function(e,t){var i=Fg(n.querySelectorAll("*")).filter(Xme).map(qme),r=iO.begin("searchPseudoElements");cW(),Promise.all(i).then(function(){r(),sO(),e()}).catch(function(){r(),sO(),t()})})}var Yme={hooks:function(){return{mutationObserverCallbacks:function(t){return t.pseudoElementsCallback=gW,t}}},provides:function(e){e.pseudoElements2svg=function(t){var i=t.node;dt.searchPseudoElements&&gW(void 0===i?mi:i)}}},_W=!1,yW=function(e){return e.toLowerCase().split(" ").reduce(function(i,r){var s=r.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&"h"===a)return i.flipX=!0,i;if(o&&"v"===a)return i.flipY=!0,i;if(a=parseFloat(a),isNaN(a))return i;switch(o){case"grow":i.size=i.size+a;break;case"shrink":i.size=i.size-a;break;case"left":i.x=i.x-a;break;case"right":i.x=i.x+a;break;case"up":i.y=i.y-a;break;case"down":i.y=i.y+a;break;case"rotate":i.rotate=i.rotate+a}return i},{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},Kme={mixout:function(){return{parse:{transform:function(t){return yW(t)}}}},hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-transform");return r&&(t.transform=yW(r)),t}}},provides:function(e){e.generateAbstractTransformGrouping=function(t){var i=t.main,r=t.transform,o=t.iconWidth,a={transform:"translate(".concat(t.containerWidth/2," 256)")},l="translate(".concat(32*r.x,", ").concat(32*r.y,") "),c="scale(".concat(r.size/16*(r.flipX?-1:1),", ").concat(r.size/16*(r.flipY?-1:1),") "),u="rotate(".concat(r.rotate," 0 0)"),m={outer:a,inner:{transform:"".concat(l," ").concat(c," ").concat(u)},path:{transform:"translate(".concat(o/2*-1," -256)")}};return{tag:"g",attributes:rt({},m.outer),children:[{tag:"g",attributes:rt({},m.inner),children:[{tag:i.icon.tag,children:i.icon.children,attributes:rt(rt({},i.icon.attributes),m.path)}]}]}}}},oO={x:0,y:0,width:"100%",height:"100%"};function vW(n){return n.attributes&&(n.attributes.fill||!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(n.attributes.fill="black"),n}function Jme(n){return"g"===n.tag?n.children:[n]}var Qme={hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-mask"),s=r?uE(r.split(" ").map(function(o){return o.trim()})):Y2();return s.prefix||(s.prefix=dh()),t.mask=s,t.maskId=i.getAttribute("data-fa-mask-id"),t}}},provides:function(e){e.generateAbstractMask=function(t){var i=t.children,r=t.attributes,s=t.main,o=t.mask,a=t.maskId,u=s.icon,f=o.icon,m=function Kpe(n){var e=n.transform,i=n.iconWidth,r={transform:"translate(".concat(n.containerWidth/2," 256)")},s="translate(".concat(32*e.x,", ").concat(32*e.y,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:t.transform,containerWidth:o.width,iconWidth:s.width}),g={tag:"rect",attributes:rt(rt({},oO),{},{fill:"white"})},_=u.children?{children:u.children.map(vW)}:{},v={tag:"g",attributes:rt({},m.inner),children:[vW(rt({tag:u.tag,attributes:rt(rt({},u.attributes),m.path)},_))]},y={tag:"g",attributes:rt({},m.outer),children:[v]},b="mask-".concat(a||K0()),x="clip-".concat(a||K0()),S={tag:"mask",attributes:rt(rt({},oO),{},{id:b,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g,y]},E={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:Jme(f)},S]};return i.push(E,{tag:"rect",attributes:rt({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(b,")")},oO)}),{children:i,attributes:r}}}},ege={provides:function(e){var t=!1;uh.matchMedia&&(t=uh.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var i=[],r={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};i.push({tag:"path",attributes:rt(rt({},r),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=rt(rt({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:rt(rt({},r),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||a.children.push({tag:"animate",attributes:rt(rt({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:rt(rt({},o),{},{values:"1;0;1;1;0;1;"})}),i.push(a),i.push({tag:"path",attributes:rt(rt({},r),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:rt(rt({},o),{},{values:"1;0;0;0;0;1;"})}]}),t||i.push({tag:"path",attributes:rt(rt({},r),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:rt(rt({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:i}}}};!function mme(n,e){var t=e.mixoutsTo;eW=n,Ug={},Object.keys(Bg).forEach(function(i){-1===pme.indexOf(i)&&delete Bg[i]}),eW.forEach(function(i){var r=i.mixout?i.mixout():{};if(Object.keys(r).forEach(function(o){"function"==typeof r[o]&&(t[o]=r[o]),"object"===ZS(r[o])&&Object.keys(r[o]).forEach(function(a){t[o]||(t[o]={}),t[o][a]=r[o][a]})}),i.hooks){var s=i.hooks();Object.keys(s).forEach(function(o){Ug[o]||(Ug[o]=[]),Ug[o].push(s[o])})}i.provides&&i.provides(Bg)})}([eme,zme,Hme,Gme,Wme,Yme,{mixout:function(){return{dom:{unwatch:function(){cW(),_W=!0}}}},hooks:function(){return{bootstrap:function(){uW(Z2("mutationObserverCallbacks",{}))},noAuto:function(){!function Pme(){pE&&pE.disconnect()}()},watch:function(t){var i=t.observeMutationsRoot;_W?sO():uW(Z2("mutationObserverCallbacks",{observeMutationsRoot:i}))}}}},Kme,Qme,ege,{hooks:function(){return{parseNodeAttributes:function(t,i){var r=i.getAttribute("data-fa-symbol");return t.symbol=null!==r&&(""===r||r),t}}}}],{mixoutsTo:So});let rge=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n});static#n=this.\u0275inj=ai({})}return n})(),sge=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=vi({type:n,bootstrap:[lpe]});static#n=this.\u0275inj=ai({imports:[gU,HK,XJ,ape,a8,Cpe,lde,qfe,vde,rge,vfe]})}return n})();BY().bootstrapModule(sge).catch(n=>console.error(n))},990:function(Js,Nc,hf){var Sn;Js=hf.nmd(Js),function(){var B,cs="Expected a function",df="__lodash_hash_undefined__",El="__lodash_placeholder__",Pn=1/0,ra=9007199254740991,Ao=4294967295,rw=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Zn="[object Arguments]",oi="[object Array]",ln="[object Boolean]",Ml="[object Date]",Bc="[object Error]",gf="[object Function]",sw="[object GeneratorFunction]",Qs="[object Map]",_f="[object Number]",Ua="[object Object]",CE="[object Promise]",Vc="[object RegExp]",eo="[object Set]",Tl="[object String]",yf="[object Symbol]",zc="[object WeakMap]",gh="[object ArrayBuffer]",Hc="[object DataView]",Do="[object Float32Array]",vf="[object Float64Array]",Wg="[object Int8Array]",wf="[object Int16Array]",jg="[object Int32Array]",$g="[object Uint8Array]",qg="[object Uint8ClampedArray]",Xg="[object Uint16Array]",Yg="[object Uint32Array]",ME=/\b__p \+= '';/g,TE=/\b(__p \+=) '' \+/g,AE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ow=/&(?:amp|lt|gt|quot|#39);/g,aw=/[&<>"']/g,dO=RegExp(ow.source),lw=RegExp(aw.source),cw=/<%-([\s\S]+?)%>/g,uw=/<%([\s\S]+?)%>/g,Zg=/<%=([\s\S]+?)%>/g,hw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DE=/^\w*$/,dw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bf=/[\\^$.*+?()[\]{}|]/g,fw=RegExp(bf.source),xf=/^\s+/,ds=/\s/,IE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,RE=/\{\n\/\* \[wrapped with (.+)\] \*/,PE=/,? & /,OE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pw=/[()=,{}\[\]\/\s]/,LE=/\\(\\)?/g,NE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Io=/\w*$/,FE=/^[-+]0x[0-9a-f]+$/i,lr=/^0b[01]+$/i,Gc=/^\[object .+?Constructor\]$/,Ro=/^0o[0-7]+$/i,fO=/^(?:0|[1-9]\d*)$/,kE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Cf=/($^)/,Kg=/['\n\r\u2028\u2029\\]/g,_h="\\ud800-\\udfff",Jg="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",gw="\\u2700-\\u27bf",_w="a-z\\xdf-\\xf6\\xf8-\\xff",vw="A-Z\\xc0-\\xd6\\xd8-\\xde",Di="\\ufe0e\\ufe0f",ww="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="["+_h+"]",Qg="["+ww+"]",Wc="["+Jg+"]",Ls="\\d+",HE="["+gw+"]",bw="["+_w+"]",bn="[^"+_h+ww+Ls+gw+_w+vw+"]",jc="\\ud83c[\\udffb-\\udfff]",Sf="[^"+_h+"]",e_="(?:\\ud83c[\\udde6-\\uddff]){2}",xn="[\\ud800-\\udbff][\\udc00-\\udfff]",vt="["+vw+"]",Mf="(?:"+bw+"|"+bn+")",pO="(?:"+vt+"|"+bn+")",t_="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",le="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",vh="(?:"+Wc+"|"+jc+")?",Pt="["+Di+"]?",xw=Pt+vh+"(?:\\u200d(?:"+[Sf,e_,xn].join("|")+")"+Pt+vh+")*",n_="(?:"+[HE,e_,xn].join("|")+")"+xw,fs="(?:"+[Sf+Wc+"?",Wc,e_,xn,Mt].join("|")+")",gO=RegExp("['\u2019]","g"),WE=RegExp(Wc,"g"),Cw=RegExp(jc+"(?="+jc+")|"+fs+xw,"g"),Al=RegExp([vt+"?"+bw+"+"+t_+"(?="+[Qg,vt,"$"].join("|")+")",pO+"+"+le+"(?="+[Qg,vt+Mf,"$"].join("|")+")",vt+"?"+Mf+"+"+t_,vt+"+"+le,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ls,n_].join("|"),"g"),_O=RegExp("[\\u200d"+_h+Jg+Di+"]"),yO=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,vO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wO=-1,Gn={};Gn[Do]=Gn[vf]=Gn[Wg]=Gn[wf]=Gn[jg]=Gn[$g]=Gn[qg]=Gn[Xg]=Gn[Yg]=!0,Gn[Zn]=Gn[oi]=Gn[gh]=Gn[ln]=Gn[Hc]=Gn[Ml]=Gn[Bc]=Gn[gf]=Gn[Qs]=Gn[_f]=Gn[Ua]=Gn[Vc]=Gn[eo]=Gn[Tl]=Gn[zc]=!1;var Wn={};Wn[Zn]=Wn[oi]=Wn[gh]=Wn[Hc]=Wn[ln]=Wn[Ml]=Wn[Do]=Wn[vf]=Wn[Wg]=Wn[wf]=Wn[jg]=Wn[Qs]=Wn[_f]=Wn[Ua]=Wn[Vc]=Wn[eo]=Wn[Tl]=Wn[yf]=Wn[$g]=Wn[qg]=Wn[Xg]=Wn[Yg]=!0,Wn[Bc]=Wn[gf]=Wn[zc]=!1;var Tt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},xO=parseFloat,CO=parseInt,$E="object"==typeof global&&global&&global.Object===Object&&global,st="object"==typeof self&&self&&self.Object===Object&&self,vr=$E||st||Function("return this")(),ai=Nc&&!Nc.nodeType&&Nc,Ba=ai&&Js&&!Js.nodeType&&Js,Sw=Ba&&Ba.exports===ai,Tf=Sw&&$E.process,Fs=function(){try{return Ba&&Ba.require&&Ba.require("util").types||Tf&&Tf.binding&&Tf.binding("util")}catch{}}(),wh=Fs&&Fs.isArrayBuffer,bh=Fs&&Fs.isDate,Af=Fs&&Fs.isMap,i_=Fs&&Fs.isRegExp,Ew=Fs&&Fs.isSet,tn=Fs&&Fs.isTypedArray;function Or(Y,ue,oe){switch(oe.length){case 0:return Y.call(ue);case 1:return Y.call(ue,oe[0]);case 2:return Y.call(ue,oe[0],oe[1]);case 3:return Y.call(ue,oe[0],oe[1],oe[2])}return Y.apply(ue,oe)}function Mw(Y,ue,oe,Ge){for(var Ut=-1,yn=null==Y?0:Y.length;++Ut<yn;){var Vi=Y[Ut];ue(Ge,Vi,oe(Vi),Y)}return Ge}function jn(Y,ue){for(var oe=-1,Ge=null==Y?0:Y.length;++oe<Ge&&!1!==ue(Y[oe],oe,Y););return Y}function Tw(Y,ue){for(var oe=null==Y?0:Y.length;oe--&&!1!==ue(Y[oe],oe,Y););return Y}function qE(Y,ue){for(var oe=-1,Ge=null==Y?0:Y.length;++oe<Ge;)if(!ue(Y[oe],oe,Y))return!1;return!0}function mn(Y,ue){for(var oe=-1,Ge=null==Y?0:Y.length,Ut=0,yn=[];++oe<Ge;){var Vi=Y[oe];ue(Vi,oe,Y)&&(yn[Ut++]=Vi)}return yn}function r_(Y,ue){return!(null==Y||!Y.length)&&xh(Y,ue,0)>-1}function Aw(Y,ue,oe){for(var Ge=-1,Ut=null==Y?0:Y.length;++Ge<Ut;)if(oe(ue,Y[Ge]))return!0;return!1}function Nn(Y,ue){for(var oe=-1,Ge=null==Y?0:Y.length,Ut=Array(Ge);++oe<Ge;)Ut[oe]=ue(Y[oe],oe,Y);return Ut}function Po(Y,ue){for(var oe=-1,Ge=ue.length,Ut=Y.length;++oe<Ge;)Y[Ut+oe]=ue[oe];return Y}function Df(Y,ue,oe,Ge){var Ut=-1,yn=null==Y?0:Y.length;for(Ge&&yn&&(oe=Y[++Ut]);++Ut<yn;)oe=ue(oe,Y[Ut],Ut,Y);return oe}function s_(Y,ue,oe,Ge){var Ut=null==Y?0:Y.length;for(Ge&&Ut&&(oe=Y[--Ut]);Ut--;)oe=ue(oe,Y[Ut],Ut,Y);return oe}function o_(Y,ue){for(var oe=-1,Ge=null==Y?0:Y.length;++oe<Ge;)if(ue(Y[oe],oe,Y))return!0;return!1}var a_=c_("length");function XE(Y,ue,oe){var Ge;return oe(Y,function(Ut,yn,Vi){if(ue(Ut,yn,Vi))return Ge=yn,!1}),Ge}function l_(Y,ue,oe,Ge){for(var Ut=Y.length,yn=oe+(Ge?1:-1);Ge?yn--:++yn<Ut;)if(ue(Y[yn],yn,Y))return yn;return-1}function xh(Y,ue,oe){return ue==ue?function aa(Y,ue,oe){for(var Ge=oe-1,Ut=Y.length;++Ge<Ut;)if(Y[Ge]===ue)return Ge;return-1}(Y,ue,oe):l_(Y,If,oe)}function Ch(Y,ue,oe,Ge){for(var Ut=oe-1,yn=Y.length;++Ut<yn;)if(Ge(Y[Ut],ue))return Ut;return-1}function If(Y){return Y!=Y}function Sh(Y,ue){var oe=null==Y?0:Y.length;return oe?Va(Y,ue)/oe:NaN}function c_(Y){return function(ue){return null==ue?B:ue[Y]}}function u_(Y){return function(ue){return null==Y?B:Y[ue]}}function Dw(Y,ue,oe,Ge,Ut){return Ut(Y,function(yn,Vi,On){oe=Ge?(Ge=!1,yn):ue(oe,yn,Vi,On)}),oe}function Va(Y,ue){for(var oe,Ge=-1,Ut=Y.length;++Ge<Ut;){var yn=ue(Y[Ge]);yn!==B&&(oe=oe===B?yn:oe+yn)}return oe}function h_(Y,ue){for(var oe=-1,Ge=Array(Y);++oe<Y;)Ge[oe]=ue(oe);return Ge}function Rw(Y){return Y&&Y.slice(0,Of(Y)+1).replace(xf,"")}function Ve(Y){return function(ue){return Y(ue)}}function Rf(Y,ue){return Nn(ue,function(oe){return Y[oe]})}function qe(Y,ue){return Y.has(ue)}function Eh(Y,ue){for(var oe=-1,Ge=Y.length;++oe<Ge&&xh(ue,Y[oe],0)>-1;);return oe}function Pf(Y,ue){for(var oe=Y.length;oe--&&xh(ue,Y[oe],0)>-1;);return oe}var YE=u_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),ZE=u_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function KE(Y){return"\\"+Tt[Y]}function oa(Y){return _O.test(Y)}function dn(Y){var ue=-1,oe=Array(Y.size);return Y.forEach(function(Ge,Ut){oe[++ue]=[Ut,Ge]}),oe}function Th(Y,ue){return function(oe){return Y(ue(oe))}}function Lo(Y,ue){for(var oe=-1,Ge=Y.length,Ut=0,yn=[];++oe<Ge;){var Vi=Y[oe];(Vi===ue||Vi===El)&&(Y[oe]=El,yn[Ut++]=oe)}return yn}function $c(Y){var ue=-1,oe=Array(Y.size);return Y.forEach(function(Ge){oe[++ue]=Ge}),oe}function Dl(Y){return oa(Y)?function Lw(Y){for(var ue=Cw.lastIndex=0;Cw.test(Y);)++ue;return ue}(Y):a_(Y)}function Us(Y){return oa(Y)?function Dh(Y){return Y.match(Cw)||[]}(Y):function SO(Y){return Y.split("")}(Y)}function Of(Y){for(var ue=Y.length;ue--&&ds.test(Y.charAt(ue)););return ue}var Ow=u_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Lf=function Y(ue){var h,oe=(ue=null==ue?vr:Lf.defaults(vr.Object(),ue,Lf.pick(vr,vO))).Array,Ge=ue.Date,Ut=ue.Error,yn=ue.Function,Vi=ue.Math,On=ue.Object,d_=ue.RegExp,JE=ue.String,ps=ue.TypeError,Nf=oe.prototype,qc=On.prototype,yi=ue["__core-js_shared__"],Ff=yn.prototype.toString,En=qc.hasOwnProperty,eM=0,vi=(h=/[^.]+$/.exec(yi&&yi.keys&&yi.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",kf=qc.toString,kw=Ff.call(On),wt=vr._,qr=d_("^"+Ff.call(En).replace(bf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sn=Sw?ue.Buffer:B,Kn=ue.Symbol,Yi=ue.Uint8Array,Il=sn?sn.allocUnsafe:B,wr=Th(On.getPrototypeOf,On),f_=On.create,p_=qc.propertyIsEnumerable,Rl=Nf.splice,Uw=Kn?Kn.isConcatSpreadable:B,Ih=Kn?Kn.iterator:B,Dn=Kn?Kn.toStringTag:B,je=function(){try{var h=so(On,"defineProperty");return h({},"",{}),h}catch{}}(),Ht=ue.clearTimeout!==vr.clearTimeout&&ue.clearTimeout,Jn=Ge&&Ge.now!==vr.Date.now&&Ge.now,to=ue.setTimeout!==vr.setTimeout&&ue.setTimeout,Ha=Vi.ceil,zi=Vi.floor,Ga=On.getOwnPropertySymbols,Ci=sn?sn.isBuffer:B,la=ue.isFinite,Xc=Nf.join,Ft=Th(On.keys,On),li=Vi.max,cr=Vi.min,Yc=Ge.now,Si=ue.parseInt,Zc=Vi.random,Kc=Nf.reverse,Bs=so(ue,"DataView"),ca=so(ue,"Map"),Uf=so(ue,"Promise"),ms=so(ue,"Set"),gs=so(ue,"WeakMap"),ua=so(On,"create"),Wa=gs&&new gs,jt={},MO=tl(Bs),m_=tl(ca),Bw=tl(Uf),No=tl(ms),Bf=tl(gs),ha=Kn?Kn.prototype:B,da=ha?ha.valueOf:B,Zi=ha?ha.toString:B;function I(h){if(hi(h)&&!Bt(h)&&!(h instanceof $t)){if(h instanceof Xr)return h;if(En.call(h,"__wrapped__"))return Gl(h)}return new Xr(h)}var Hi=function(){function h(){}return function(p){if(!ei(p))return{};if(f_)return f_(p);h.prototype=p;var w=new h;return h.prototype=B,w}}();function Ki(){}function Xr(h,p){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=B}function $t(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ao,this.__views__=[]}function Pl(h){var p=-1,w=null==h?0:h.length;for(this.clear();++p<w;){var C=h[p];this.set(C[0],C[1])}}function ja(h){var p=-1,w=null==h?0:h.length;for(this.clear();++p<w;){var C=h[p];this.set(C[0],C[1])}}function $a(h){var p=-1,w=null==h?0:h.length;for(this.clear();++p<w;){var C=h[p];this.set(C[0],C[1])}}function qa(h){var p=-1,w=null==h?0:h.length;for(this.__data__=new $a;++p<w;)this.add(h[p])}function Fo(h){var p=this.__data__=new ja(h);this.size=p.size}function Rh(h,p){var w=Bt(h),C=!w&&Wl(h),D=!w&&!C&&il(h),L=!w&&!C&&!D&&_u(h),U=w||C||D||L,j=U?h_(h.length,JE):[],J=j.length;for(var pe in h)(p||En.call(h,pe))&&(!U||!("length"==pe||D&&("offset"==pe||"parent"==pe)||L&&("buffer"==pe||"byteLength"==pe||"byteOffset"==pe)||Vo(pe,J)))&&j.push(pe);return j}function _s(h){var p=h.length;return p?h[Qf(0,p-1)]:B}function zw(h,p){return _a(xr(h),Ya(p,0,h.length))}function Hw(h){return _a(xr(h))}function zf(h,p,w){(w!==B&&!ao(h[p],w)||w===B&&!(p in h))&&ko(h,p,w)}function Jc(h,p,w){var C=h[p];(!En.call(h,p)||!ao(C,w)||w===B&&!(p in h))&&ko(h,p,w)}function Qc(h,p){for(var w=h.length;w--;)if(ao(h[w][0],p))return w;return-1}function Gw(h,p,w,C){return Nl(h,function(D,L,U){p(C,D,w(D),U)}),C}function Hf(h,p){return h&&ro(p,er(p),h)}function ko(h,p,w){"__proto__"==p&&je?je(h,p,{configurable:!0,enumerable:!0,value:w,writable:!0}):h[p]=w}function Gf(h,p){for(var w=-1,C=p.length,D=oe(C),L=null==h;++w<C;)D[w]=L?B:nx(h,p[w]);return D}function Ya(h,p,w){return h==h&&(w!==B&&(h=h<=w?h:w),p!==B&&(h=h>=p?h:p)),h}function Lr(h,p,w,C,D,L){var U,j=1&p,J=2&p,pe=4&p;if(w&&(U=D?w(h,C,D,L):w(h)),U!==B)return U;if(!ei(h))return h;var me=Bt(h);if(me){if(U=function vM(h){var p=h.length,w=new h.constructor(p);return p&&"string"==typeof h[0]&&En.call(h,"index")&&(w.index=h.index,w.input=h.input),w}(h),!j)return xr(h,U)}else{var xe=Wi(h),$e=xe==gf||xe==sw;if(il(h))return br(h,j);if(xe==Ua||xe==Zn||$e&&!D){if(U=J||$e?{}:oo(h),!j)return J?function gM(h,p){return ro(h,up(h),p)}(h,function __(h,p){return h&&ro(p,Er(p),h)}(U,h)):function A_(h,p){return ro(h,Bl(h),p)}(h,Hf(U,h))}else{if(!Wn[xe])return D?h:{};U=function wM(h,p,w){var C=h.constructor;switch(p){case gh:return io(h);case ln:case Ml:return new C(+h);case Hc:return function sb(h,p){var w=p?io(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.byteLength)}(h,w);case Do:case vf:case Wg:case wf:case jg:case $g:case qg:case Xg:case Yg:return ob(h,w);case Qs:return new C;case _f:case Tl:return new C(h);case Vc:return function iu(h){var p=new h.constructor(h.source,Io.exec(h));return p.lastIndex=h.lastIndex,p}(h);case eo:return new C;case yf:return function pa(h){return da?On(da.call(h)):{}}(h)}}(h,xe,j)}}L||(L=new Fo);var lt=L.get(h);if(lt)return lt;L.set(h,U),dy(h)?h.forEach(function(Ct){U.add(Lr(Ct,p,w,Ct,h,L))}):Rp(h)&&h.forEach(function(Ct,Yt){U.set(Yt,Lr(Ct,p,w,Yt,h,L))});var Jt=me?B:(pe?J?Hh:db:J?Er:er)(h);return jn(Jt||h,function(Ct,Yt){Jt&&(Ct=h[Yt=Ct]),Jc(U,Yt,Lr(Ct,p,w,Yt,h,L))}),U}function Ll(h,p,w){var C=w.length;if(null==h)return!C;for(h=On(h);C--;){var D=w[C],U=h[D];if(U===B&&!(D in h)||!(0,p[D])(U))return!1}return!0}function y_(h,p,w){if("function"!=typeof h)throw new ps(cs);return zl(function(){h.apply(B,w)},p)}function Wf(h,p,w,C){var D=-1,L=r_,U=!0,j=h.length,J=[],pe=p.length;if(!j)return J;w&&(p=Nn(p,Ve(w))),C?(L=Aw,U=!1):p.length>=200&&(L=qe,U=!1,p=new qa(p));e:for(;++D<j;){var me=h[D],xe=null==w?me:w(me);if(me=C||0!==me?me:0,U&&xe==xe){for(var $e=pe;$e--;)if(p[$e]===xe)continue e;J.push(me)}else L(p,xe,C)||J.push(me)}return J}I.templateSettings={escape:cw,evaluate:uw,interpolate:Zg,variable:"",imports:{_:I}},(I.prototype=Ki.prototype).constructor=I,(Xr.prototype=Hi(Ki.prototype)).constructor=Xr,($t.prototype=Hi(Ki.prototype)).constructor=$t,Pl.prototype.clear=function tM(){this.__data__=ua?ua(null):{},this.size=0},Pl.prototype.delete=function TO(h){var p=this.has(h)&&delete this.__data__[h];return this.size-=p?1:0,p},Pl.prototype.get=function nM(h){var p=this.__data__;if(ua){var w=p[h];return w===df?B:w}return En.call(p,h)?p[h]:B},Pl.prototype.has=function iM(h){var p=this.__data__;return ua?p[h]!==B:En.call(p,h)},Pl.prototype.set=function AO(h,p){var w=this.__data__;return this.size+=this.has(h)?0:1,w[h]=ua&&p===B?df:p,this},ja.prototype.clear=function DO(){this.__data__=[],this.size=0},ja.prototype.delete=function IO(h){var p=this.__data__,w=Qc(p,h);return!(w<0||(w==p.length-1?p.pop():Rl.call(p,w,1),--this.size,0))},ja.prototype.get=function RO(h){var p=this.__data__,w=Qc(p,h);return w<0?B:p[w][1]},ja.prototype.has=function PO(h){return Qc(this.__data__,h)>-1},ja.prototype.set=function OO(h,p){var w=this.__data__,C=Qc(w,h);return C<0?(++this.size,w.push([h,p])):w[C][1]=p,this},$a.prototype.clear=function LO(){this.size=0,this.__data__={hash:new Pl,map:new(ca||ja),string:new Pl}},$a.prototype.delete=function NO(h){var p=F_(this,h).delete(h);return this.size-=p?1:0,p},$a.prototype.get=function FO(h){return F_(this,h).get(h)},$a.prototype.has=function kO(h){return F_(this,h).has(h)},$a.prototype.set=function Vw(h,p){var w=F_(this,h),C=w.size;return w.set(h,p),this.size+=w.size==C?0:1,this},qa.prototype.add=qa.prototype.push=function UO(h){return this.__data__.set(h,df),this},qa.prototype.has=function BO(h){return this.__data__.has(h)},Fo.prototype.clear=function Ol(){this.__data__=new ja,this.size=0},Fo.prototype.delete=function Xa(h){var p=this.__data__,w=p.delete(h);return this.size=p.size,w},Fo.prototype.get=function VO(h){return this.__data__.get(h)},Fo.prototype.has=function zO(h){return this.__data__.has(h)},Fo.prototype.set=function ur(h,p){var w=this.__data__;if(w instanceof ja){var C=w.__data__;if(!ca||C.length<199)return C.push([h,p]),this.size=++w.size,this;w=this.__data__=new $a(C)}return w.set(h,p),this.size=w.size,this};var Nl=D_(fa),rM=D_(Ww,!0);function sM(h,p){var w=!0;return Nl(h,function(C,D,L){return w=!!p(C,D,L)}),w}function jf(h,p,w){for(var C=-1,D=h.length;++C<D;){var L=h[C],U=p(L);if(null!=U&&(j===B?U==U&&!ws(U):w(U,j)))var j=U,J=L}return J}function v_(h,p){var w=[];return Nl(h,function(C,D,L){p(C,D,L)&&w.push(C)}),w}function Gi(h,p,w,C,D){var L=-1,U=h.length;for(w||(w=U_),D||(D=[]);++L<U;){var j=h[L];p>0&&w(j)?p>1?Gi(j,p-1,w,C,D):Po(D,j):C||(D[D.length]=j)}return D}var w_=I_(),$f=I_(!0);function fa(h,p){return h&&w_(h,p,er)}function Ww(h,p){return h&&$f(h,p,er)}function qf(h,p){return mn(p,function(w){return Gs(h[w])})}function Za(h,p){for(var w=0,C=(p=Bo(p,h)).length;null!=h&&w<C;)h=h[Ur(p[w++])];return w&&w==C?h:B}function b_(h,p,w){var C=p(h);return Bt(h)?C:Po(C,w(h))}function Nr(h){return null==h?h===B?"[object Undefined]":"[object Null]":Dn&&Dn in On(h)?function yM(h){var p=En.call(h,Dn),w=h[Dn];try{h[Dn]=B;var C=!0}catch{}var D=kf.call(h);return C&&(p?h[Dn]=w:delete h[Dn]),D}(h):function vb(h){return kf.call(h)}(h)}function x_(h,p){return h>p}function oM(h,p){return null!=h&&En.call(h,p)}function jw(h,p){return null!=h&&p in On(h)}function Xf(h,p,w){for(var C=w?Aw:r_,D=h[0].length,L=h.length,U=L,j=oe(L),J=1/0,pe=[];U--;){var me=h[U];U&&p&&(me=Nn(me,Ve(p))),J=cr(me.length,J),j[U]=!w&&(p||D>=120&&me.length>=120)?new qa(U&&me):B}me=h[0];var xe=-1,$e=j[0];e:for(;++xe<D&&pe.length<J;){var lt=me[xe],bt=p?p(lt):lt;if(lt=w||0!==lt?lt:0,!($e?qe($e,bt):C(pe,bt,w))){for(U=L;--U;){var Jt=j[U];if(!(Jt?qe(Jt,bt):C(h[U],bt,w)))continue e}$e&&$e.push(bt),pe.push(lt)}}return pe}function Yf(h,p,w){var C=null==(h=wb(h,p=Bo(p,h)))?h:h[Ur(Qn(p))];return null==C?B:Or(C,h,w)}function $w(h){return hi(h)&&Nr(h)==Zn}function Oh(h,p,w,C,D){return h===p||(null==h||null==p||!hi(h)&&!hi(p)?h!=h&&p!=p:function cM(h,p,w,C,D,L){var U=Bt(h),j=Bt(p),J=U?oi:Wi(h),pe=j?oi:Wi(p),me=(J=J==Zn?Ua:J)==Ua,xe=(pe=pe==Zn?Ua:pe)==Ua,$e=J==pe;if($e&&il(h)){if(!il(p))return!1;U=!0,me=!1}if($e&&!me)return L||(L=new Fo),U||_u(h)?hb(h,p,w,C,D,L):function ru(h,p,w,C,D,L,U){switch(w){case Hc:if(h.byteLength!=p.byteLength||h.byteOffset!=p.byteOffset)return!1;h=h.buffer,p=p.buffer;case gh:return!(h.byteLength!=p.byteLength||!L(new Yi(h),new Yi(p)));case ln:case Ml:case _f:return ao(+h,+p);case Bc:return h.name==p.name&&h.message==p.message;case Vc:case Tl:return h==p+"";case Qs:var j=dn;case eo:if(j||(j=$c),h.size!=p.size&&!(1&C))return!1;var pe=U.get(h);if(pe)return pe==p;C|=2,U.set(h,p);var me=hb(j(h),j(p),C,D,L,U);return U.delete(h),me;case yf:if(da)return da.call(h)==da.call(p)}return!1}(h,p,J,w,C,D,L);if(!(1&w)){var lt=me&&En.call(h,"__wrapped__"),bt=xe&&En.call(p,"__wrapped__");if(lt||bt){var Jt=lt?h.value():h,Ct=bt?p.value():p;return L||(L=new Fo),D(Jt,Ct,w,C,L)}}return!!$e&&(L||(L=new Fo),function zh(h,p,w,C,D,L){var U=1&w,j=db(h),J=j.length;if(J!=db(p).length&&!U)return!1;for(var xe=J;xe--;){var $e=j[xe];if(!(U?$e in p:En.call(p,$e)))return!1}var lt=L.get(h),bt=L.get(p);if(lt&&bt)return lt==p&&bt==h;var Jt=!0;L.set(h,p),L.set(p,h);for(var Ct=U;++xe<J;){var Yt=h[$e=j[xe]],cn=p[$e];if(C)var tr=U?C(cn,Yt,$e,p,h,L):C(Yt,cn,$e,h,p,L);if(!(tr===B?Yt===cn||D(Yt,cn,w,C,L):tr)){Jt=!1;break}Ct||(Ct="constructor"==$e)}if(Jt&&!Ct){var vn=h.constructor,xs=p.constructor;vn!=xs&&"constructor"in h&&"constructor"in p&&!("function"==typeof vn&&vn instanceof vn&&"function"==typeof xs&&xs instanceof xs)&&(Jt=!1)}return L.delete(h),L.delete(p),Jt}(h,p,w,C,D,L))}(h,p,w,C,Oh,D))}function Zf(h,p,w,C){var D=w.length,L=D,U=!C;if(null==h)return!L;for(h=On(h);D--;){var j=w[D];if(U&&j[2]?j[1]!==h[j[0]]:!(j[0]in h))return!1}for(;++D<L;){var J=(j=w[D])[0],pe=h[J],me=j[1];if(U&&j[2]){if(pe===B&&!(J in h))return!1}else{var xe=new Fo;if(C)var $e=C(pe,me,J,h,p,xe);if(!($e===B?Oh(me,pe,3,C,xe):$e))return!1}}return!0}function Yw(h){return!(!ei(h)||function mb(h){return!!vi&&vi in h}(h))&&(Gs(h)?qr:Gc).test(tl(h))}function S_(h){return"function"==typeof h?h:null==h?Mr:"object"==typeof h?Bt(h)?Zw(h[0],h[1]):Fr(h):kT(h)}function Kf(h){if(!ou(h))return Ft(h);var p=[];for(var w in On(h))En.call(h,w)&&"constructor"!=w&&p.push(w);return p}function Lh(h,p){return h<p}function Nh(h,p){var w=-1,C=Sr(h)?oe(h.length):[];return Nl(h,function(D,L,U){C[++w]=p(D,L,U)}),C}function Fr(h){var p=Gh(h);return 1==p.length&&p[0][2]?jh(p[0][0],p[0][1]):function(w){return w===h||Zf(w,h,p)}}function Zw(h,p){return Wh(h)&&_b(p)?jh(Ur(h),p):function(w){var C=nx(w,h);return C===B&&C===p?Fp(w,h):Oh(p,C,3)}}function Fh(h,p,w,C,D){h!==p&&w_(p,function(L,U){if(D||(D=new Fo),ei(L))!function eu(h,p,w,C,D,L,U){var j=B_(h,w),J=B_(p,w),pe=U.get(J);if(pe)zf(h,w,pe);else{var me=L?L(j,J,w+"",h,p,U):B,xe=me===B;if(xe){var $e=Bt(J),lt=!$e&&il(J),bt=!$e&&!lt&&_u(J);me=J,$e||lt||bt?Bt(j)?me=j:ui(j)?me=xr(j):lt?(xe=!1,me=br(J,!0)):bt?(xe=!1,me=ob(J,!0)):me=[]:$l(J)||Wl(J)?(me=j,Wl(j)?me=Qb(j):(!ei(j)||Gs(j))&&(me=oo(J))):xe=!1}xe&&(U.set(J,me),D(me,J,C,L,U),U.delete(J)),zf(h,w,me)}}(h,p,U,w,Fh,C,D);else{var j=C?C(B_(h,U),L,U+"",h,p,D):B;j===B&&(j=L),zf(h,U,j)}},Er)}function Yr(h,p){var w=h.length;if(w)return Vo(p+=p<0?w:0,w)?h[p]:B}function Kw(h,p,w){p=p.length?Nn(p,function(L){return Bt(L)?function(U){return Za(U,1===L.length?L[0]:L)}:L}):[Mr];var C=-1;return p=Nn(p,Ve(xt())),function Iw(Y,ue){var oe=Y.length;for(Y.sort(ue);oe--;)Y[oe]=Y[oe].value;return Y}(Nh(h,function(L,U,j){return{criteria:Nn(p,function(pe){return pe(L)}),index:++C,value:L}}),function(L,U){return function mM(h,p,w){for(var C=-1,D=h.criteria,L=p.criteria,U=D.length,j=w.length;++C<U;){var J=T_(D[C],L[C]);if(J)return C>=j?J:J*("desc"==w[C]?-1:1)}return h.index-p.index}(L,U,w)})}function Jw(h,p,w){for(var C=-1,D=p.length,L={};++C<D;){var U=p[C],j=Za(h,U);w(j,U)&&tp(L,Bo(U,h),j)}return L}function Jf(h,p,w,C){var D=C?Ch:xh,L=-1,U=p.length,j=h;for(h===p&&(p=xr(p)),w&&(j=Nn(h,Ve(w)));++L<U;)for(var J=0,pe=p[L],me=w?w(pe):pe;(J=D(j,me,J,C))>-1;)j!==h&&Rl.call(j,J,1),Rl.call(h,J,1);return h}function Qw(h,p){for(var w=h?p.length:0,C=w-1;w--;){var D=p[w];if(w==C||D!==L){var L=D;Vo(D)?Rl.call(h,D,1):an(h,D)}}return h}function Qf(h,p){return h+zi(Zc()*(p-h+1))}function ep(h,p){var w="";if(!h||p<1||p>ra)return w;do{p%2&&(w+=h),(p=zi(p/2))&&(h+=h)}while(p);return w}function Kt(h,p){return V_(au(h,p,Mr),h+"")}function At(h){return _s(Xl(h))}function tb(h,p){var w=Xl(h);return _a(w,Ya(p,0,w.length))}function tp(h,p,w,C){if(!ei(h))return h;for(var D=-1,L=(p=Bo(p,h)).length,U=L-1,j=h;null!=j&&++D<L;){var J=Ur(p[D]),pe=w;if("__proto__"===J||"constructor"===J||"prototype"===J)return h;if(D!=U){var me=j[J];(pe=C?C(me,J,j):B)===B&&(pe=ei(me)?me:Vo(p[D+1])?[]:{})}Jc(j,J,pe),j=j[J]}return h}var nb=Wa?function(h,p){return Wa.set(h,p),h}:Mr,dM=je?function(h,p){return je(h,"toString",{configurable:!0,enumerable:!1,value:id(p),writable:!0})}:Mr;function fM(h){return _a(Xl(h))}function ys(h,p,w){var C=-1,D=h.length;p<0&&(p=-p>D?0:D+p),(w=w>D?D:w)<0&&(w+=D),D=p>w?0:w-p>>>0,p>>>=0;for(var L=oe(D);++C<D;)L[C]=h[C+p];return L}function tu(h,p){var w;return Nl(h,function(C,D,L){return!(w=p(C,D,L))}),!!w}function np(h,p,w){var C=0,D=null==h?C:h.length;if("number"==typeof p&&p==p&&D<=2147483647){for(;C<D;){var L=C+D>>>1,U=h[L];null!==U&&!ws(U)&&(w?U<=p:U<p)?C=L+1:D=L}return D}return E_(h,p,Mr,w)}function E_(h,p,w,C){var D=0,L=null==h?0:h.length;if(0===L)return 0;for(var U=(p=w(p))!=p,j=null===p,J=ws(p),pe=p===B;D<L;){var me=zi((D+L)/2),xe=w(h[me]),$e=xe!==B,lt=null===xe,bt=xe==xe,Jt=ws(xe);if(U)var Ct=C||bt;else Ct=pe?bt&&(C||$e):j?bt&&$e&&(C||!lt):J?bt&&$e&&!lt&&(C||!Jt):!lt&&!Jt&&(C?xe<=p:xe<p);Ct?D=me+1:L=me}return cr(L,4294967294)}function ib(h,p){for(var w=-1,C=h.length,D=0,L=[];++w<C;){var U=h[w],j=p?p(U):U;if(!w||!ao(j,J)){var J=j;L[D++]=0===U?0:U}}return L}function rb(h){return"number"==typeof h?h:ws(h)?NaN:+h}function vs(h){if("string"==typeof h)return h;if(Bt(h))return Nn(h,vs)+"";if(ws(h))return Zi?Zi.call(h):"";var p=h+"";return"0"==p&&1/h==-Pn?"-0":p}function ge(h,p,w){var C=-1,D=r_,L=h.length,U=!0,j=[],J=j;if(w)U=!1,D=Aw;else if(L>=200){var pe=p?null:ap(h);if(pe)return $c(pe);U=!1,D=qe,J=new qa}else J=p?[]:j;e:for(;++C<L;){var me=h[C],xe=p?p(me):me;if(me=w||0!==me?me:0,U&&xe==xe){for(var $e=J.length;$e--;)if(J[$e]===xe)continue e;p&&J.push(xe),j.push(me)}else D(J,xe,w)||(J!==j&&J.push(xe),j.push(me))}return j}function an(h,p){return null==(h=wb(h,p=Bo(p,h)))||delete h[Ur(Qn(p))]}function mt(h,p,w,C){return tp(h,p,w(Za(h,p)),C)}function ht(h,p,w,C){for(var D=h.length,L=C?D:-1;(C?L--:++L<D)&&p(h[L],L,h););return w?ys(h,C?0:L,C?L+1:D):ys(h,C?L+1:0,C?D:L)}function Ji(h,p){var w=h;return w instanceof $t&&(w=w.value()),Df(p,function(C,D){return D.func.apply(D.thisArg,Po([C],D.args))},w)}function ip(h,p,w){var C=h.length;if(C<2)return C?ge(h[0]):[];for(var D=-1,L=oe(C);++D<C;)for(var U=h[D],j=-1;++j<C;)j!=D&&(L[D]=Wf(L[D]||U,h[j],p,w));return ge(Gi(L,1),p,w)}function nu(h,p,w){for(var C=-1,D=h.length,L=p.length,U={};++C<D;)w(U,h[C],C<L?p[C]:B);return U}function Vs(h){return ui(h)?h:[]}function kh(h){return"function"==typeof h?h:Mr}function Bo(h,p){return Bt(h)?h:Wh(h,p)?[h]:Hl(gn(h))}var pM=Kt;function Fl(h,p,w){var C=h.length;return w=w===B?C:w,!p&&w>=C?h:ys(h,p,w)}var M_=Ht||function(h){return vr.clearTimeout(h)};function br(h,p){if(p)return h.slice();var w=h.length,C=Il?Il(w):new h.constructor(w);return h.copy(C),C}function io(h){var p=new h.constructor(h.byteLength);return new Yi(p).set(new Yi(h)),p}function ob(h,p){var w=p?io(h.buffer):h.buffer;return new h.constructor(w,h.byteOffset,h.length)}function T_(h,p){if(h!==p){var w=h!==B,C=null===h,D=h==h,L=ws(h),U=p!==B,j=null===p,J=p==p,pe=ws(p);if(!j&&!pe&&!L&&h>p||L&&U&&J&&!j&&!pe||C&&U&&J||!w&&J||!D)return 1;if(!C&&!L&&!pe&&h<p||pe&&w&&D&&!C&&!L||j&&w&&D||!U&&D||!J)return-1}return 0}function ab(h,p,w,C){for(var D=-1,L=h.length,U=w.length,j=-1,J=p.length,pe=li(L-U,0),me=oe(J+pe),xe=!C;++j<J;)me[j]=p[j];for(;++D<U;)(xe||D<L)&&(me[w[D]]=h[D]);for(;pe--;)me[j++]=h[D++];return me}function rp(h,p,w,C){for(var D=-1,L=h.length,U=-1,j=w.length,J=-1,pe=p.length,me=li(L-j,0),xe=oe(me+pe),$e=!C;++D<me;)xe[D]=h[D];for(var lt=D;++J<pe;)xe[lt+J]=p[J];for(;++U<j;)($e||D<L)&&(xe[lt+w[U]]=h[D++]);return xe}function xr(h,p){var w=-1,C=h.length;for(p||(p=oe(C));++w<C;)p[w]=h[w];return p}function ro(h,p,w,C){var D=!w;w||(w={});for(var L=-1,U=p.length;++L<U;){var j=p[L],J=C?C(w[j],h[j],j,w,h):B;J===B&&(J=h[j]),D?ko(w,j,J):Jc(w,j,J)}return w}function Uh(h,p){return function(w,C){var D=Bt(w)?Mw:Gw,L=p?p():{};return D(w,h,xt(C,2),L)}}function Ja(h){return Kt(function(p,w){var C=-1,D=w.length,L=D>1?w[D-1]:B,U=D>2?w[2]:B;for(L=h.length>3&&"function"==typeof L?(D--,L):B,U&&Qi(w[0],w[1],U)&&(L=D<3?B:L,D=1),p=On(p);++C<D;){var j=w[C];j&&h(p,j,C,L)}return p})}function D_(h,p){return function(w,C){if(null==w)return w;if(!Sr(w))return h(w,C);for(var D=w.length,L=p?D:-1,U=On(w);(p?L--:++L<D)&&!1!==C(U[L],L,U););return w}}function I_(h){return function(p,w,C){for(var D=-1,L=On(p),U=C(p),j=U.length;j--;){var J=U[h?j:++D];if(!1===w(L[J],J,L))break}return p}}function R_(h){return function(p){var w=oa(p=gn(p))?Us(p):B,C=w?w[0]:p.charAt(0),D=w?Fl(w,1).join(""):p.slice(1);return C[h]()+D}}function Qa(h){return function(p){return Df(sl(ox(p).replace(gO,"")),h,"")}}function Bh(h){return function(){var p=arguments;switch(p.length){case 0:return new h;case 1:return new h(p[0]);case 2:return new h(p[0],p[1]);case 3:return new h(p[0],p[1],p[2]);case 4:return new h(p[0],p[1],p[2],p[3]);case 5:return new h(p[0],p[1],p[2],p[3],p[4]);case 6:return new h(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new h(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var w=Hi(h.prototype),C=h.apply(w,p);return ei(C)?C:w}}function Cr(h){return function(p,w,C){var D=On(p);if(!Sr(p)){var L=xt(w,3);p=er(p),w=function(j){return L(D[j],j,D)}}var U=h(p,w,C);return U>-1?D[L?p[U]:U]:B}}function el(h){return ga(function(p){var w=p.length,C=w,D=Xr.prototype.thru;for(h&&p.reverse();C--;){var L=p[C];if("function"!=typeof L)throw new ps(cs);if(D&&!U&&"wrapper"==cp(L))var U=new Xr([],!0)}for(C=U?C:w;++C<w;){var j=cp(L=p[C]),J="wrapper"==j?fb(L):B;U=J&&dp(J[0])&&424==J[1]&&!J[4].length&&1==J[9]?U[cp(J[0])].apply(U,J[3]):1==L.length&&dp(L)?U[j]():U.thru(L)}return function(){var pe=arguments,me=pe[0];if(U&&1==pe.length&&Bt(me))return U.plant(me).value();for(var xe=0,$e=w?p[xe].apply(this,pe):me;++xe<w;)$e=p[xe].call(this,$e);return $e}})}function kn(h,p,w,C,D,L,U,j,J,pe){var me=128&p,xe=1&p,$e=2&p,lt=24&p,bt=512&p,Jt=$e?B:Bh(h);return function Ct(){for(var Yt=arguments.length,cn=oe(Yt),tr=Yt;tr--;)cn[tr]=arguments[tr];if(lt)var vn=su(Ct),xs=function Mh(Y,ue){for(var oe=Y.length,Ge=0;oe--;)Y[oe]===ue&&++Ge;return Ge}(cn,vn);if(C&&(cn=ab(cn,C,D,lt)),L&&(cn=rp(cn,L,U,lt)),Yt-=xs,lt&&Yt<pe){var $n=Lo(cn,vn);return ma(h,p,kn,Ct.placeholder,w,cn,$n,j,J,pe-Yt)}var Ei=xe?w:this,ba=$e?Ei[h]:h;return Yt=cn.length,j?cn=function kr(h,p){for(var w=h.length,C=cr(p.length,w),D=xr(h);C--;){var L=p[C];h[C]=Vo(L,w)?D[L]:B}return h}(cn,j):bt&&Yt>1&&cn.reverse(),me&&J<Yt&&(cn.length=J),this&&this!==vr&&this instanceof Ct&&(ba=Jt||Bh(ba)),ba.apply(Ei,cn)}}function kl(h,p){return function(w,C){return function lM(h,p,w,C){return fa(h,function(D,L,U){p(C,w(D),L,U)}),C}(w,h,p(C),{})}}function sp(h,p){return function(w,C){var D;if(w===B&&C===B)return p;if(w!==B&&(D=w),C!==B){if(D===B)return C;"string"==typeof w||"string"==typeof C?(w=vs(w),C=vs(C)):(w=rb(w),C=rb(C)),D=h(w,C)}return D}}function P_(h){return ga(function(p){return p=Nn(p,Ve(xt())),Kt(function(w){var C=this;return h(p,function(D){return Or(D,C,w)})})})}function op(h,p){var w=(p=p===B?" ":vs(p)).length;if(w<2)return w?ep(p,h):p;var C=ep(p,Ha(h/Dl(p)));return oa(p)?Fl(Us(C),0,h).join(""):C.slice(0,h)}function O_(h){return function(p,w,C){return C&&"number"!=typeof C&&Qi(p,w,C)&&(w=C=B),p=ya(p),w===B?(w=p,p=0):w=ya(w),function eb(h,p,w,C){for(var D=-1,L=li(Ha((p-h)/(w||1)),0),U=oe(L);L--;)U[C?L:++D]=h,h+=w;return U}(p,w,C=C===B?p<w?1:-1:ya(C),h)}}function Ul(h){return function(p,w){return"string"==typeof p&&"string"==typeof w||(p=Kr(p),w=Kr(w)),h(p,w)}}function ma(h,p,w,C,D,L,U,j,J,pe){var me=8&p;p|=me?32:64,4&(p&=~(me?64:32))||(p&=-4);var Jt=[h,p,D,me?L:B,me?U:B,me?B:L,me?B:U,j,J,pe],Ct=w.apply(B,Jt);return dp(h)&&ci(Ct,Jt),Ct.placeholder=C,z_(Ct,h,p)}function L_(h){var p=Vi[h];return function(w,C){if(w=Kr(w),(C=null==C?0:cr(Xt(C),292))&&la(w)){var D=(gn(w)+"e").split("e");return+((D=(gn(p(D[0]+"e"+(+D[1]+C)))+"e").split("e"))[0]+"e"+(+D[1]-C))}return p(w)}}var ap=ms&&1/$c(new ms([,-0]))[1]==Pn?function(h){return new ms(h)}:rd;function Vh(h){return function(p){var w=Wi(p);return w==Qs?dn(p):w==eo?function Pw(Y){var ue=-1,oe=Array(Y.size);return Y.forEach(function(Ge){oe[++ue]=[Ge,Ge]}),oe}(p):function za(Y,ue){return Nn(ue,function(oe){return[oe,Y[oe]]})}(p,h(p))}}function zs(h,p,w,C,D,L,U,j){var J=2&p;if(!J&&"function"!=typeof h)throw new ps(cs);var pe=C?C.length:0;if(pe||(p&=-97,C=D=B),U=U===B?U:li(Xt(U),0),j=j===B?j:Xt(j),pe-=D?D.length:0,64&p){var me=C,xe=D;C=D=B}var $e=J?B:fb(h),lt=[h,p,w,C,D,me,xe,L,U,j];if($e&&function xM(h,p){var w=h[1],C=p[1],D=w|C;if(!(D<131)&&!(128==C&&8==w||128==C&&256==w&&h[7].length<=p[8]||384==C&&p[7].length<=p[8]&&8==w))return h;1&C&&(h[2]=p[2],D|=1&w?0:4);var j=p[3];if(j){var J=h[3];h[3]=J?ab(J,j,p[4]):j,h[4]=J?Lo(h[3],El):p[4]}(j=p[5])&&(h[5]=(J=h[5])?rp(J,j,p[6]):j,h[6]=J?Lo(h[5],El):p[6]),(j=p[7])&&(h[7]=j),128&C&&(h[8]=null==h[8]?p[8]:cr(h[8],p[8])),null==h[9]&&(h[9]=p[9]),h[0]=p[0],h[1]=D}(lt,$e),h=lt[0],p=lt[1],w=lt[2],C=lt[3],D=lt[4],!(j=lt[9]=lt[9]===B?J?0:h.length:li(lt[9]-pe,0))&&24&p&&(p&=-25),p&&1!=p)bt=8==p||16==p?function _M(h,p,w){var C=Bh(h);return function D(){for(var L=arguments.length,U=oe(L),j=L,J=su(D);j--;)U[j]=arguments[j];var pe=L<3&&U[0]!==J&&U[L-1]!==J?[]:Lo(U,J);return(L-=pe.length)<w?ma(h,p,kn,D.placeholder,B,U,pe,B,B,w-L):Or(this&&this!==vr&&this instanceof D?C:h,this,U)}}(h,p,j):32!=p&&33!=p||D.length?kn.apply(B,lt):function cb(h,p,w,C){var D=1&p,L=Bh(h);return function U(){for(var j=-1,J=arguments.length,pe=-1,me=C.length,xe=oe(me+J),$e=this&&this!==vr&&this instanceof U?L:h;++pe<me;)xe[pe]=C[pe];for(;J--;)xe[pe++]=arguments[++j];return Or($e,D?w:this,xe)}}(h,p,w,C);else var bt=function lb(h,p,w){var C=1&p,D=Bh(h);return function L(){return(this&&this!==vr&&this instanceof L?D:h).apply(C?w:this,arguments)}}(h,p,w);return z_(($e?nb:ci)(bt,lt),h,p)}function lp(h,p,w,C){return h===B||ao(h,qc[w])&&!En.call(C,w)?p:h}function N_(h,p,w,C,D,L){return ei(h)&&ei(p)&&(L.set(p,h),Fh(h,p,B,N_,L),L.delete(p)),h}function ub(h){return $l(h)?B:h}function hb(h,p,w,C,D,L){var U=1&w,j=h.length,J=p.length;if(j!=J&&!(U&&J>j))return!1;var pe=L.get(h),me=L.get(p);if(pe&&me)return pe==p&&me==h;var xe=-1,$e=!0,lt=2&w?new qa:B;for(L.set(h,p),L.set(p,h);++xe<j;){var bt=h[xe],Jt=p[xe];if(C)var Ct=U?C(Jt,bt,xe,p,h,L):C(bt,Jt,xe,h,p,L);if(Ct!==B){if(Ct)continue;$e=!1;break}if(lt){if(!o_(p,function(Yt,cn){if(!qe(lt,cn)&&(bt===Yt||D(bt,Yt,w,C,L)))return lt.push(cn)})){$e=!1;break}}else if(bt!==Jt&&!D(bt,Jt,w,C,L)){$e=!1;break}}return L.delete(h),L.delete(p),$e}function ga(h){return V_(au(h,B,cu),h+"")}function db(h){return b_(h,er,Bl)}function Hh(h){return b_(h,Er,up)}var fb=Wa?function(h){return Wa.get(h)}:rd;function cp(h){for(var p=h.name+"",w=jt[p],C=En.call(jt,p)?w.length:0;C--;){var D=w[C],L=D.func;if(null==L||L==h)return D.name}return p}function su(h){return(En.call(I,"placeholder")?I:h).placeholder}function xt(){var h=I.iteratee||My;return h=h===My?S_:h,arguments.length?h(arguments[0],arguments[1]):h}function F_(h,p){var w=h.__data__;return function bM(h){var p=typeof h;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==h:null===h}(p)?w["string"==typeof p?"string":"hash"]:w.map}function Gh(h){for(var p=er(h),w=p.length;w--;){var C=p[w],D=h[C];p[w]=[C,D,_b(D)]}return p}function so(h,p){var w=function sa(Y,ue){return null==Y?B:Y[ue]}(h,p);return Yw(w)?w:B}var Bl=Ga?function(h){return null==h?[]:(h=On(h),mn(Ga(h),function(p){return p_.call(h,p)}))}:wx,up=Ga?function(h){for(var p=[];h;)Po(p,Bl(h)),h=wr(h);return p}:wx,Wi=Nr;function k_(h,p,w){for(var C=-1,D=(p=Bo(p,h)).length,L=!1;++C<D;){var U=Ur(p[C]);if(!(L=null!=h&&w(h,U)))break;h=h[U]}return L||++C!=D?L:!!(D=null==h?0:h.length)&&Zh(D)&&Vo(U,D)&&(Bt(h)||Wl(h))}function oo(h){return"function"!=typeof h.constructor||ou(h)?{}:Hi(wr(h))}function U_(h){return Bt(h)||Wl(h)||!!(Uw&&h&&h[Uw])}function Vo(h,p){var w=typeof h;return!!(p=p??ra)&&("number"==w||"symbol"!=w&&fO.test(h))&&h>-1&&h%1==0&&h<p}function Qi(h,p,w){if(!ei(w))return!1;var C=typeof p;return!!("number"==C?Sr(w)&&Vo(p,w.length):"string"==C&&p in w)&&ao(w[p],h)}function Wh(h,p){if(Bt(h))return!1;var w=typeof h;return!("number"!=w&&"symbol"!=w&&"boolean"!=w&&null!=h&&!ws(h))||DE.test(h)||!hw.test(h)||null!=p&&h in On(p)}function dp(h){var p=cp(h),w=I[p];if("function"!=typeof w||!(p in $t.prototype))return!1;if(h===w)return!0;var C=fb(w);return!!C&&h===C[0]}(Bs&&Wi(new Bs(new ArrayBuffer(1)))!=Hc||ca&&Wi(new ca)!=Qs||Uf&&Wi(Uf.resolve())!=CE||ms&&Wi(new ms)!=eo||gs&&Wi(new gs)!=zc)&&(Wi=function(h){var p=Nr(h),w=p==Ua?h.constructor:B,C=w?tl(w):"";if(C)switch(C){case MO:return Hc;case m_:return Qs;case Bw:return CE;case No:return eo;case Bf:return zc}return p});var gb=yi?Gs:bx;function ou(h){var p=h&&h.constructor;return h===("function"==typeof p&&p.prototype||qc)}function _b(h){return h==h&&!ei(h)}function jh(h,p){return function(w){return null!=w&&w[h]===p&&(p!==B||h in On(w))}}function au(h,p,w){return p=li(p===B?h.length-1:p,0),function(){for(var C=arguments,D=-1,L=li(C.length-p,0),U=oe(L);++D<L;)U[D]=C[p+D];D=-1;for(var j=oe(p+1);++D<p;)j[D]=C[D];return j[p]=w(U),Or(h,this,j)}}function wb(h,p){return p.length<2?h:Za(h,ys(p,0,-1))}function B_(h,p){if(("constructor"!==p||"function"!=typeof h[p])&&"__proto__"!=p)return h[p]}var ci=$h(nb),zl=to||function(h,p){return vr.setTimeout(h,p)},V_=$h(dM);function z_(h,p,w){var C=p+"";return V_(h,function hp(h,p){var w=p.length;if(!w)return h;var C=w-1;return p[C]=(w>1?"& ":"")+p[C],p=p.join(w>2?", ":" "),h.replace(IE,"{\n/* [wrapped with "+p+"] */\n")}(C,function H_(h,p){return jn(rw,function(w){var C="_."+w[0];p&w[1]&&!r_(h,C)&&h.push(C)}),h.sort()}(function pb(h){var p=h.match(RE);return p?p[1].split(PE):[]}(C),w)))}function $h(h){var p=0,w=0;return function(){var C=Yc(),D=16-(C-w);if(w=C,D>0){if(++p>=800)return arguments[0]}else p=0;return h.apply(B,arguments)}}function _a(h,p){var w=-1,C=h.length,D=C-1;for(p=p===B?C:p;++w<p;){var L=Qf(w,D),U=h[L];h[L]=h[w],h[w]=U}return h.length=p,h}var Hl=function Vl(h){var p=Mp(h,function(C){return 500===w.size&&w.clear(),C}),w=p.cache;return p}(function(h){var p=[];return 46===h.charCodeAt(0)&&p.push(""),h.replace(dw,function(w,C,D,L){p.push(D?L.replace(LE,"$1"):C||w)}),p});function Ur(h){if("string"==typeof h||ws(h))return h;var p=h+"";return"0"==p&&1/h==-Pn?"-0":p}function tl(h){if(null!=h){try{return Ff.call(h)}catch{}try{return h+""}catch{}}return""}function Gl(h){if(h instanceof $t)return h.clone();var p=new Xr(h.__wrapped__,h.__chain__);return p.__actions__=xr(h.__actions__),p.__index__=h.__index__,p.__values__=h.__values__,p}var $O=Kt(function(h,p){return ui(h)?Wf(h,Gi(p,1,ui,!0)):[]}),qO=Kt(function(h,p){var w=Qn(p);return ui(w)&&(w=B),ui(h)?Wf(h,Gi(p,1,ui,!0),xt(w,2)):[]}),XO=Kt(function(h,p){var w=Qn(p);return ui(w)&&(w=B),ui(h)?Wf(h,Gi(p,1,ui,!0),B,w):[]});function Ri(h,p,w){var C=null==h?0:h.length;if(!C)return-1;var D=null==w?0:Xt(w);return D<0&&(D=li(C+D,0)),l_(h,xt(p,3),D)}function bb(h,p,w){var C=null==h?0:h.length;if(!C)return-1;var D=C-1;return w!==B&&(D=Xt(w),D=w<0?li(C+D,0):cr(D,C-1)),l_(h,xt(p,3),D,!0)}function cu(h){return null!=h&&h.length?Gi(h,1):[]}function G_(h){return h&&h.length?h[0]:B}var TM=Kt(function(h){var p=Nn(h,Vs);return p.length&&p[0]===h[0]?Xf(p):[]}),KO=Kt(function(h){var p=Qn(h),w=Nn(h,Vs);return p===Qn(w)?p=B:w.pop(),w.length&&w[0]===h[0]?Xf(w,xt(p,2)):[]}),AM=Kt(function(h){var p=Qn(h),w=Nn(h,Vs);return(p="function"==typeof p?p:B)&&w.pop(),w.length&&w[0]===h[0]?Xf(w,B,p):[]});function Qn(h){var p=null==h?0:h.length;return p?h[p-1]:B}var QO=Kt(j_);function j_(h,p){return h&&h.length&&p&&p.length?Jf(h,p):h}var RM=ga(function(h,p){var w=null==h?0:h.length,C=Gf(h,p);return Qw(h,Nn(p,function(D){return Vo(D,w)?+D:D}).sort(T_)),C});function $_(h){return null==h?h:Kc.call(h)}var du=Kt(function(h){return ge(Gi(h,1,ui,!0))}),Xh=Kt(function(h){var p=Qn(h);return ui(p)&&(p=B),ge(Gi(h,1,ui,!0),xt(p,2))}),BM=Kt(function(h){var p=Qn(h);return p="function"==typeof p?p:B,ge(Gi(h,1,ui,!0),B,p)});function Eb(h){if(!h||!h.length)return[];var p=0;return h=mn(h,function(w){if(ui(w))return p=li(w.length,p),!0}),h_(p,function(w){return Nn(h,c_(w))})}function Mb(h,p){if(!h||!h.length)return[];var w=Eb(h);return null==p?w:Nn(w,function(C){return Or(p,B,C)})}var zM=Kt(function(h,p){return ui(h)?Wf(h,p):[]}),HM=Kt(function(h){return ip(mn(h,ui))}),yp=Kt(function(h){var p=Qn(h);return ui(p)&&(p=B),ip(mn(h,ui),xt(p,2))}),Tb=Kt(function(h){var p=Qn(h);return p="function"==typeof p?p:B,ip(mn(h,ui),B,p)}),GM=Kt(Eb),Db=Kt(function(h){var p=h.length,w=p>1?h[p-1]:B;return w="function"==typeof w?(h.pop(),w):B,Mb(h,w)});function WM(h){var p=I(h);return p.__chain__=!0,p}function vp(h,p){return p(h)}var Y_=ga(function(h){var p=h.length,w=p?h[0]:0,C=this.__wrapped__,D=function(L){return Gf(L,h)};return!(p>1||this.__actions__.length)&&C instanceof $t&&Vo(w)?((C=C.slice(w,+w+(p?1:0))).__actions__.push({func:vp,args:[D],thisArg:B}),new Xr(C,this.__chain__).thru(function(L){return p&&!L.length&&L.push(B),L})):this.thru(D)}),lL=Uh(function(h,p,w){En.call(h,w)?++h[w]:ko(h,w,1)}),bp=Cr(Ri),Ib=Cr(bb);function K_(h,p){return(Bt(h)?jn:Nl)(h,xt(p,3))}function J_(h,p){return(Bt(h)?Tw:rM)(h,xt(p,3))}var xp=Uh(function(h,p,w){En.call(h,w)?h[w].push(p):ko(h,w,[p])}),nl=Kt(function(h,p,w){var C=-1,D="function"==typeof p,L=Sr(h)?oe(h.length):[];return Nl(h,function(U){L[++C]=D?Or(p,U,w):Yf(U,p,w)}),L}),qM=Uh(function(h,p,w){ko(h,w,p)});function Sp(h,p){return(Bt(h)?Nn:Nh)(h,xt(p,3))}var Ob=Uh(function(h,p,w){h[w?0:1].push(p)},function(){return[[],[]]}),ey=Kt(function(h,p){if(null==h)return[];var w=p.length;return w>1&&Qi(h,p[0],p[1])?p=[]:w>2&&Qi(p[0],p[1],p[2])&&(p=[p[0]]),Kw(h,Gi(p,1),[])}),Yh=Jn||function(){return vr.Date.now()};function hr(h,p,w){return p=w?B:p,zs(h,128,B,B,B,B,p=h&&null==p?h.length:p)}function pu(h,p){var w;if("function"!=typeof p)throw new ps(cs);return h=Xt(h),function(){return--h>0&&(w=p.apply(this,arguments)),h<=1&&(p=B),w}}var Ep=Kt(function(h,p,w){var C=1;if(w.length){var D=Lo(w,su(Ep));C|=32}return zs(h,C,p,w,D)}),ny=Kt(function(h,p,w){var C=3;if(w.length){var D=Lo(w,su(ny));C|=32}return zs(p,C,h,w,D)});function Fb(h,p,w){var C,D,L,U,j,J,pe=0,me=!1,xe=!1,$e=!0;if("function"!=typeof h)throw new ps(cs);function lt($n){var Ei=C,ba=D;return C=D=B,pe=$n,U=h.apply(ba,Ei)}function Ct($n){var Ei=$n-J;return J===B||Ei>=p||Ei<0||xe&&$n-pe>=L}function Yt(){var $n=Yh();if(Ct($n))return cn($n);j=zl(Yt,function Jt($n){var Cx=p-($n-J);return xe?cr(Cx,L-($n-pe)):Cx}($n))}function cn($n){return j=B,$e&&C?lt($n):(C=D=B,U)}function xs(){var $n=Yh(),Ei=Ct($n);if(C=arguments,D=this,J=$n,Ei){if(j===B)return function bt($n){return pe=$n,j=zl(Yt,p),me?lt($n):U}(J);if(xe)return M_(j),j=zl(Yt,p),lt(J)}return j===B&&(j=zl(Yt,p)),U}return p=Kr(p)||0,ei(w)&&(me=!!w.leading,L=(xe="maxWait"in w)?li(Kr(w.maxWait)||0,p):L,$e="trailing"in w?!!w.trailing:$e),xs.cancel=function tr(){j!==B&&M_(j),pe=0,C=J=D=j=B},xs.flush=function vn(){return j===B?U:cn(Yh())},xs}var kb=Kt(function(h,p){return y_(h,1,p)}),eT=Kt(function(h,p,w){return y_(h,Kr(p)||0,w)});function Mp(h,p){if("function"!=typeof h||null!=p&&"function"!=typeof p)throw new ps(cs);var w=function(){var C=arguments,D=p?p.apply(this,C):C[0],L=w.cache;if(L.has(D))return L.get(D);var U=h.apply(this,C);return w.cache=L.set(D,U)||L,U};return w.cache=new(Mp.Cache||$a),w}function Tp(h){if("function"!=typeof h)throw new ps(cs);return function(){var p=arguments;switch(p.length){case 0:return!h.call(this);case 1:return!h.call(this,p[0]);case 2:return!h.call(this,p[0],p[1]);case 3:return!h.call(this,p[0],p[1],p[2])}return!h.apply(this,p)}}Mp.Cache=$a;var sy=pM(function(h,p){var w=(p=1==p.length&&Bt(p[0])?Nn(p[0],Ve(xt())):Nn(Gi(p,1),Ve(xt()))).length;return Kt(function(C){for(var D=-1,L=cr(C.length,w);++D<L;)C[D]=p[D].call(this,C[D]);return Or(h,this,C)})}),oy=Kt(function(h,p){var w=Lo(p,su(oy));return zs(h,32,B,p,w)}),mu=Kt(function(h,p){var w=Lo(p,su(mu));return zs(h,64,B,p,w)}),tT=ga(function(h,p){return zs(h,256,B,B,B,p)});function ao(h,p){return h===p||h!=h&&p!=p}var sT=Ul(x_),oT=Ul(function(h,p){return h>=p}),Wl=$w(function(){return arguments}())?$w:function(h){return hi(h)&&En.call(h,"callee")&&!p_.call(h,"callee")},Bt=oe.isArray,Ip=wh?Ve(wh):function Ii(h){return hi(h)&&Nr(h)==gh};function Sr(h){return null!=h&&Zh(h.length)&&!Gs(h)}function ui(h){return hi(h)&&Sr(h)}var il=Ci||bx,ly=bh?Ve(bh):function qw(h){return hi(h)&&Nr(h)==Ml};function cy(h){if(!hi(h))return!1;var p=Nr(h);return p==Bc||"[object DOMException]"==p||"string"==typeof h.message&&"string"==typeof h.name&&!$l(h)}function Gs(h){if(!ei(h))return!1;var p=Nr(h);return p==gf||p==sw||"[object AsyncFunction]"==p||"[object Proxy]"==p}function $b(h){return"number"==typeof h&&h==Xt(h)}function Zh(h){return"number"==typeof h&&h>-1&&h%1==0&&h<=ra}function ei(h){var p=typeof h;return null!=h&&("object"==p||"function"==p)}function hi(h){return null!=h&&"object"==typeof h}var Rp=Af?Ve(Af):function Xw(h){return hi(h)&&Wi(h)==Qs};function hy(h){return"number"==typeof h||hi(h)&&Nr(h)==_f}function $l(h){if(!hi(h)||Nr(h)!=Ua)return!1;var p=wr(h);if(null===p)return!0;var w=En.call(p,"constructor")&&p.constructor;return"function"==typeof w&&w instanceof w&&Ff.call(w)==kw}var ql=i_?Ve(i_):function C_(h){return hi(h)&&Nr(h)==Vc},dy=Ew?Ve(Ew):function uM(h){return hi(h)&&Wi(h)==eo};function Lp(h){return"string"==typeof h||!Bt(h)&&hi(h)&&Nr(h)==Tl}function ws(h){return"symbol"==typeof h||hi(h)&&Nr(h)==yf}var _u=tn?Ve(tn):function Uo(h){return hi(h)&&Zh(h.length)&&!!Gn[Nr(h)]},fy=Ul(Lh),yu=Ul(function(h,p){return h<=p});function Kb(h){if(!h)return[];if(Sr(h))return Lp(h)?Us(h):xr(h);if(Ih&&h[Ih])return function Oo(Y){for(var ue,oe=[];!(ue=Y.next()).done;)oe.push(ue.value);return oe}(h[Ih]());var p=Wi(h);return(p==Qs?dn:p==eo?$c:Xl)(h)}function ya(h){return h?(h=Kr(h))===Pn||h===-Pn?17976931348623157e292*(h<0?-1:1):h==h?h:0:0===h?h:0}function Xt(h){var p=ya(h),w=p%1;return p==p?w?p-w:p:0}function Jb(h){return h?Ya(Xt(h),0,Ao):0}function Kr(h){if("number"==typeof h)return h;if(ws(h))return NaN;if(ei(h)){var p="function"==typeof h.valueOf?h.valueOf():h;h=ei(p)?p+"":p}if("string"!=typeof h)return 0===h?h:+h;h=Rw(h);var w=lr.test(h);return w||Ro.test(h)?CO(h.slice(2),w?2:8):FE.test(h)?NaN:+h}function Qb(h){return ro(h,Er(h))}function gn(h){return null==h?"":vs(h)}var py=Ja(function(h,p){if(ou(p)||Sr(p))ro(p,er(p),h);else for(var w in p)En.call(p,w)&&Jc(h,w,p[w])}),my=Ja(function(h,p){ro(p,Er(p),h)}),Jh=Ja(function(h,p,w,C){ro(p,Er(p),h,C)}),ex=Ja(function(h,p,w,C){ro(p,er(p),h,C)}),tx=ga(Gf),uT=Kt(function(h,p){h=On(h);var w=-1,C=p.length,D=C>2?p[2]:B;for(D&&Qi(p[0],p[1],D)&&(C=1);++w<C;)for(var L=p[w],U=Er(L),j=-1,J=U.length;++j<J;){var pe=U[j],me=h[pe];(me===B||ao(me,qc[pe])&&!En.call(h,pe))&&(h[pe]=L[pe])}return h}),hT=Kt(function(h){return h.push(B,N_),Or(gy,B,h)});function nx(h,p,w){var C=null==h?B:Za(h,p);return C===B?w:C}function Fp(h,p){return null!=h&&k_(h,p,jw)}var mT=kl(function(h,p,w){null!=p&&"function"!=typeof p.toString&&(p=kf.call(p)),h[p]=w},id(Mr)),gT=kl(function(h,p,w){null!=p&&"function"!=typeof p.toString&&(p=kf.call(p)),En.call(h,p)?h[p].push(w):h[p]=[w]},xt),_T=Kt(Yf);function er(h){return Sr(h)?Rh(h):Kf(h)}function Er(h){return Sr(h)?Rh(h,!0):function Fn(h){if(!ei(h))return function yb(h){var p=[];if(null!=h)for(var w in On(h))p.push(w);return p}(h);var p=ou(h),w=[];for(var C in h)"constructor"==C&&(p||!En.call(h,C))||w.push(C);return w}(h)}var ix=Ja(function(h,p,w){Fh(h,p,w)}),gy=Ja(function(h,p,w,C){Fh(h,p,w,C)}),rx=ga(function(h,p){var w={};if(null==h)return w;var C=!1;p=Nn(p,function(L){return L=Bo(L,h),C||(C=L.length>1),L}),ro(h,Hh(h),w),C&&(w=Lr(w,7,ub));for(var D=p.length;D--;)an(w,p[D]);return w}),mL=ga(function(h,p){return null==h?{}:function hM(h,p){return Jw(h,p,function(w,C){return Fp(h,C)})}(h,p)});function yT(h,p){if(null==h)return{};var w=Nn(Hh(h),function(C){return[C]});return p=xt(p),Jw(h,w,function(C,D){return p(C,D[0])})}var vT=Vh(er),vy=Vh(Er);function Xl(h){return null==h?[]:Rf(h,er(h))}var wu=Qa(function(h,p,w){return p=p.toLowerCase(),h+(w?sx(p):p)});function sx(h){return Bp(gn(h).toLowerCase())}function ox(h){return(h=gn(h))&&h.replace(kE,YE).replace(WE,"")}var TT=Qa(function(h,p,w){return h+(w?"-":"")+p.toLowerCase()}),AT=Qa(function(h,p,w){return h+(w?" ":"")+p.toLowerCase()}),DT=R_("toLowerCase"),ux=Qa(function(h,p,w){return h+(w?"_":"")+p.toLowerCase()}),by=Qa(function(h,p,w){return h+(w?" ":"")+Bp(p)}),px=Qa(function(h,p,w){return h+(w?" ":"")+p.toUpperCase()}),Bp=R_("toUpperCase");function sl(h,p,w){return h=gn(h),(p=w?B:p)===B?function ks(Y){return yO.test(Y)}(h)?function Nw(Y){return Y.match(Al)||[]}(h):function EO(Y){return Y.match(OE)||[]}(h):h.match(p)||[]}var mx=Kt(function(h,p){try{return Or(h,B,p)}catch(w){return cy(w)?w:new Ut(w)}}),Ey=ga(function(h,p){return jn(p,function(w){w=Ur(w),ko(h,w,Ep(h[w],h))}),h});function id(h){return function(){return h}}var bs=el(),Hp=el(!0);function Mr(h){return h}function My(h){return S_("function"==typeof h?h:Lr(h,1))}var bu=Kt(function(h,p){return function(w){return Yf(w,h,p)}}),LT=Kt(function(h,p){return function(w){return Yf(h,w,p)}});function Ty(h,p,w){var C=er(p),D=qf(p,C);null==w&&(!ei(p)||!D.length&&C.length)&&(w=p,p=h,h=this,D=qf(p,er(p)));var L=!(ei(w)&&"chain"in w&&!w.chain),U=Gs(h);return jn(D,function(j){var J=p[j];h[j]=J,U&&(h.prototype[j]=function(){var pe=this.__chain__;if(L||pe){var me=h(this.__wrapped__);return(me.__actions__=xr(this.__actions__)).push({func:J,args:arguments,thisArg:h}),me.__chain__=pe,me}return J.apply(h,Po([this.value()],arguments))})}),h}function rd(){}var FT=P_(Nn),_x=P_(qE),wa=P_(o_);function kT(h){return Wh(h)?c_(Ur(h)):function Ka(h){return function(p){return Za(p,h)}}(h)}var vx=O_(),UT=O_(!0);function wx(){return[]}function bx(){return!1}var Ry=sp(function(h,p){return h+p},0),sd=L_("ceil"),jp=sp(function(h,p){return h/p},1),Cu=L_("floor"),VT=sp(function(h,p){return h*p},1),xx=L_("round"),zT=sp(function(h,p){return h-p},0);return I.after=function ty(h,p){if("function"!=typeof p)throw new ps(cs);return h=Xt(h),function(){if(--h<1)return p.apply(this,arguments)}},I.ary=hr,I.assign=py,I.assignIn=my,I.assignInWith=Jh,I.assignWith=ex,I.at=tx,I.before=pu,I.bind=Ep,I.bindAll=Ey,I.bindKey=ny,I.castArray=function Ap(){if(!arguments.length)return[];var h=arguments[0];return Bt(h)?h:[h]},I.chain=WM,I.chunk=function WO(h,p,w){p=(w?Qi(h,p,w):p===B)?1:li(Xt(p),0);var C=null==h?0:h.length;if(!C||p<1)return[];for(var D=0,L=0,U=oe(Ha(C/p));D<C;)U[L++]=ys(h,D,D+=p);return U},I.compact=function CM(h){for(var p=-1,w=null==h?0:h.length,C=0,D=[];++p<w;){var L=h[p];L&&(D[C++]=L)}return D},I.concat=function jO(){var h=arguments.length;if(!h)return[];for(var p=oe(h-1),w=arguments[0],C=h;C--;)p[C-1]=arguments[C];return Po(Bt(w)?xr(w):[w],Gi(p,1))},I.cond=function Vp(h){var p=null==h?0:h.length,w=xt();return h=p?Nn(h,function(C){if("function"!=typeof C[1])throw new ps(cs);return[w(C[0]),C[1]]}):[],Kt(function(C){for(var D=-1;++D<p;){var L=h[D];if(Or(L[0],this,C))return Or(L[1],this,C)}})},I.conforms=function PT(h){return function Ph(h){var p=er(h);return function(w){return Ll(w,h,p)}}(Lr(h,1))},I.constant=id,I.countBy=lL,I.create=function cT(h,p){var w=Hi(h);return null==p?w:Hf(w,p)},I.curry=function Nb(h,p,w){var C=zs(h,8,B,B,B,B,B,p=w?B:p);return C.placeholder=Nb.placeholder,C},I.curryRight=function iy(h,p,w){var C=zs(h,16,B,B,B,B,B,p=w?B:p);return C.placeholder=iy.placeholder,C},I.debounce=Fb,I.defaults=uT,I.defaultsDeep=hT,I.defer=kb,I.delay=eT,I.difference=$O,I.differenceBy=qO,I.differenceWith=XO,I.drop=function YO(h,p,w){var C=null==h?0:h.length;return C?ys(h,(p=w||p===B?1:Xt(p))<0?0:p,C):[]},I.dropRight=function ZO(h,p,w){var C=null==h?0:h.length;return C?ys(h,0,(p=C-(p=w||p===B?1:Xt(p)))<0?0:p):[]},I.dropRightWhile=function lu(h,p){return h&&h.length?ht(h,xt(p,3),!0,!0):[]},I.dropWhile=function SM(h,p){return h&&h.length?ht(h,xt(p,3),!0):[]},I.fill=function EM(h,p,w,C){var D=null==h?0:h.length;return D?(w&&"number"!=typeof w&&Qi(h,p,w)&&(w=0,C=D),function HO(h,p,w,C){var D=h.length;for((w=Xt(w))<0&&(w=-w>D?0:D+w),(C=C===B||C>D?D:Xt(C))<0&&(C+=D),C=w>C?0:Jb(C);w<C;)h[w++]=p;return h}(h,p,w,C)):[]},I.filter=function wp(h,p){return(Bt(h)?mn:v_)(h,xt(p,3))},I.flatMap=function Rb(h,p){return Gi(Sp(h,p),1)},I.flatMapDeep=function Pb(h,p){return Gi(Sp(h,p),Pn)},I.flatMapDepth=function fu(h,p,w){return w=w===B?1:Xt(w),Gi(Sp(h,p),w)},I.flatten=cu,I.flattenDeep=function MM(h){return null!=h&&h.length?Gi(h,Pn):[]},I.flattenDepth=function Hs(h,p){return null!=h&&h.length?Gi(h,p=p===B?1:Xt(p)):[]},I.flip=function Ub(h){return zs(h,512)},I.flow=bs,I.flowRight=Hp,I.fromPairs=function uu(h){for(var p=-1,w=null==h?0:h.length,C={};++p<w;){var D=h[p];C[D[0]]=D[1]}return C},I.functions=function hL(h){return null==h?[]:qf(h,er(h))},I.functionsIn=function dL(h){return null==h?[]:qf(h,Er(h))},I.groupBy=xp,I.initial=function qh(h){return null!=h&&h.length?ys(h,0,-1):[]},I.intersection=TM,I.intersectionBy=KO,I.intersectionWith=AM,I.invert=mT,I.invertBy=gT,I.invokeMap=nl,I.iteratee=My,I.keyBy=qM,I.keys=er,I.keysIn=Er,I.map=Sp,I.mapKeys=function va(h,p){var w={};return p=xt(p,3),fa(h,function(C,D,L){ko(w,p(C,D,L),C)}),w},I.mapValues=function ed(h,p){var w={};return p=xt(p,3),fa(h,function(C,D,L){ko(w,D,p(C,D,L))}),w},I.matches=function OT(h){return Fr(Lr(h,1))},I.matchesProperty=function gx(h,p){return Zw(h,Lr(p,1))},I.memoize=Mp,I.merge=ix,I.mergeWith=gy,I.method=bu,I.methodOf=LT,I.mixin=Ty,I.negate=Tp,I.nthArg=function Gp(h){return h=Xt(h),Kt(function(p){return Yr(p,h)})},I.omit=rx,I.omitBy=function pL(h,p){return yT(h,Tp(xt(p)))},I.once=function ry(h){return pu(2,h)},I.orderBy=function XM(h,p,w,C){return null==h?[]:(Bt(p)||(p=null==p?[]:[p]),Bt(w=C?B:w)||(w=null==w?[]:[w]),Kw(h,p,w))},I.over=FT,I.overArgs=sy,I.overEvery=_x,I.overSome=wa,I.partial=oy,I.partialRight=mu,I.partition=Ob,I.pick=mL,I.pickBy=yT,I.property=kT,I.propertyOf=function yx(h){return function(p){return null==h?B:Za(h,p)}},I.pull=QO,I.pullAll=j_,I.pullAllBy=function DM(h,p,w){return h&&h.length&&p&&p.length?Jf(h,p,xt(w,2)):h},I.pullAllWith=function IM(h,p,w){return h&&h.length&&p&&p.length?Jf(h,p,B,w):h},I.pullAt=RM,I.range=vx,I.rangeRight=UT,I.rearg=tT,I.reject=function ZM(h,p){return(Bt(h)?mn:v_)(h,Tp(xt(p,3)))},I.remove=function PM(h,p){var w=[];if(!h||!h.length)return w;var C=-1,D=[],L=h.length;for(p=xt(p,3);++C<L;){var U=h[C];p(U,C,h)&&(w.push(U),D.push(C))}return Qw(h,D),w},I.rest=function nT(h,p){if("function"!=typeof h)throw new ps(cs);return Kt(h,p=p===B?p:Xt(p))},I.reverse=$_,I.sampleSize=function Lb(h,p,w){return p=(w?Qi(h,p,w):p===B)?1:Xt(p),(Bt(h)?zw:tb)(h,p)},I.set=function yy(h,p,w){return null==h?h:tp(h,p,w)},I.setWith=function gL(h,p,w,C){return C="function"==typeof C?C:B,null==h?h:tp(h,p,w,C)},I.shuffle=function JM(h){return(Bt(h)?Hw:fM)(h)},I.slice=function OM(h,p,w){var C=null==h?0:h.length;return C?(w&&"number"!=typeof w&&Qi(h,p,w)?(p=0,w=C):(p=null==p?0:Xt(p),w=w===B?C:Xt(w)),ys(h,p,w)):[]},I.sortBy=ey,I.sortedUniq=function FM(h){return h&&h.length?ib(h):[]},I.sortedUniqBy=function xb(h,p){return h&&h.length?ib(h,xt(p,2)):[]},I.split=function hx(h,p,w){return w&&"number"!=typeof w&&Qi(h,p,w)&&(p=w=B),(w=w===B?Ao:w>>>0)?(h=gn(h))&&("string"==typeof p||null!=p&&!ql(p))&&!(p=vs(p))&&oa(h)?Fl(Us(h),0,w):h.split(p,w):[]},I.spread=function Bb(h,p){if("function"!=typeof h)throw new ps(cs);return p=null==p?0:li(Xt(p),0),Kt(function(w){var C=w[p],D=Fl(w,0,p);return C&&Po(D,C),Or(h,this,D)})},I.tail=function X_(h){var p=null==h?0:h.length;return p?ys(h,1,p):[]},I.take=function _p(h,p,w){return h&&h.length?ys(h,0,(p=w||p===B?1:Xt(p))<0?0:p):[]},I.takeRight=function Cb(h,p,w){var C=null==h?0:h.length;return C?ys(h,(p=C-(p=w||p===B?1:Xt(p)))<0?0:p,C):[]},I.takeRightWhile=function kM(h,p){return h&&h.length?ht(h,xt(p,3),!1,!0):[]},I.takeWhile=function UM(h,p){return h&&h.length?ht(h,xt(p,3)):[]},I.tap=function jM(h,p){return p(h),h},I.throttle=function Vb(h,p,w){var C=!0,D=!0;if("function"!=typeof h)throw new ps(cs);return ei(w)&&(C="leading"in w?!!w.leading:C,D="trailing"in w?!!w.trailing:D),Fb(h,p,{leading:C,maxWait:p,trailing:D})},I.thru=vp,I.toArray=Kb,I.toPairs=vT,I.toPairsIn=vy,I.toPath=function xu(h){return Bt(h)?Nn(h,Ur):ws(h)?[h]:xr(Hl(gn(h)))},I.toPlainObject=Qb,I.transform=function wT(h,p,w){var C=Bt(h),D=C||il(h)||_u(h);if(p=xt(p,4),null==w){var L=h&&h.constructor;w=D?C?new L:[]:ei(h)&&Gs(L)?Hi(wr(h)):{}}return(D?jn:fa)(h,function(U,j,J){return p(w,U,j,J)}),w},I.unary=function zb(h){return hr(h,1)},I.union=du,I.unionBy=Xh,I.unionWith=BM,I.uniq=function eL(h){return h&&h.length?ge(h):[]},I.uniqBy=function Sb(h,p){return h&&h.length?ge(h,xt(p,2)):[]},I.uniqWith=function VM(h,p){return p="function"==typeof p?p:B,h&&h.length?ge(h,B,p):[]},I.unset=function bT(h,p){return null==h||an(h,p)},I.unzip=Eb,I.unzipWith=Mb,I.update=function xT(h,p,w){return null==h?h:mt(h,p,kh(w))},I.updateWith=function CT(h,p,w,C){return C="function"==typeof C?C:B,null==h?h:mt(h,p,kh(w),C)},I.values=Xl,I.valuesIn=function kp(h){return null==h?[]:Rf(h,Er(h))},I.without=zM,I.words=sl,I.wrap=function gu(h,p){return oy(kh(p),h)},I.xor=HM,I.xorBy=yp,I.xorWith=Tb,I.zip=GM,I.zipObject=function Ab(h,p){return nu(h||[],p||[],Jc)},I.zipObjectDeep=function tL(h,p){return nu(h||[],p||[],tp)},I.zipWith=Db,I.entries=vT,I.entriesIn=vy,I.extend=my,I.extendWith=Jh,Ty(I,I),I.add=Ry,I.attempt=mx,I.camelCase=wu,I.capitalize=sx,I.ceil=sd,I.clamp=function ST(h,p,w){return w===B&&(w=p,p=B),w!==B&&(w=(w=Kr(w))==w?w:0),p!==B&&(p=(p=Kr(p))==p?p:0),Ya(Kr(h),p,w)},I.clone=function Hb(h){return Lr(h,4)},I.cloneDeep=function Dp(h){return Lr(h,5)},I.cloneDeepWith=function iT(h,p){return Lr(h,5,p="function"==typeof p?p:B)},I.cloneWith=function ay(h,p){return Lr(h,4,p="function"==typeof p?p:B)},I.conformsTo=function rT(h,p){return null==p||Ll(h,p,er(p))},I.deburr=ox,I.defaultTo=function zp(h,p){return null==h||h!=h?p:h},I.divide=jp,I.endsWith=function ax(h,p,w){h=gn(h),p=vs(p);var C=h.length,D=w=w===B?C:Ya(Xt(w),0,C);return(w-=p.length)>=0&&h.slice(w,D)==p},I.eq=ao,I.escape=function lx(h){return(h=gn(h))&&lw.test(h)?h.replace(aw,ZE):h},I.escapeRegExp=function MT(h){return(h=gn(h))&&fw.test(h)?h.replace(bf,"\\$&"):h},I.every=function $M(h,p,w){var C=Bt(h)?qE:sM;return w&&Qi(h,p,w)&&(p=B),C(h,xt(p,3))},I.find=bp,I.findIndex=Ri,I.findKey=function dT(h,p){return XE(h,xt(p,3),fa)},I.findLast=Ib,I.findLastIndex=bb,I.findLastKey=function fT(h,p){return XE(h,xt(p,3),Ww)},I.floor=Cu,I.forEach=K_,I.forEachRight=J_,I.forIn=function rl(h,p){return null==h?h:w_(h,xt(p,3),Er)},I.forInRight=function Qh(h,p){return null==h?h:$f(h,xt(p,3),Er)},I.forOwn=function pT(h,p){return h&&fa(h,xt(p,3))},I.forOwnRight=function uL(h,p){return h&&Ww(h,xt(p,3))},I.get=nx,I.gt=sT,I.gte=oT,I.has=function fL(h,p){return null!=h&&k_(h,p,oM)},I.hasIn=Fp,I.head=G_,I.identity=Mr,I.includes=function Cp(h,p,w,C){h=Sr(h)?h:Xl(h),w=w&&!C?Xt(w):0;var D=h.length;return w<0&&(w=li(D+w,0)),Lp(h)?w<=D&&h.indexOf(p,w)>-1:!!D&&xh(h,p,w)>-1},I.indexOf=function fp(h,p,w){var C=null==h?0:h.length;if(!C)return-1;var D=null==w?0:Xt(w);return D<0&&(D=li(C+D,0)),xh(h,p,D)},I.inRange=function wy(h,p,w){return p=ya(p),w===B?(w=p,p=0):w=ya(w),function aM(h,p,w){return h>=cr(p,w)&&h<li(p,w)}(h=Kr(h),p,w)},I.invoke=_T,I.isArguments=Wl,I.isArray=Bt,I.isArrayBuffer=Ip,I.isArrayLike=Sr,I.isArrayLikeObject=ui,I.isBoolean=function aT(h){return!0===h||!1===h||hi(h)&&Nr(h)==ln},I.isBuffer=il,I.isDate=ly,I.isElement=function Gb(h){return hi(h)&&1===h.nodeType&&!$l(h)},I.isEmpty=function jl(h){if(null==h)return!0;if(Sr(h)&&(Bt(h)||"string"==typeof h||"function"==typeof h.splice||il(h)||_u(h)||Wl(h)))return!h.length;var p=Wi(h);if(p==Qs||p==eo)return!h.size;if(ou(h))return!Kf(h).length;for(var w in h)if(En.call(h,w))return!1;return!0},I.isEqual=function Wb(h,p){return Oh(h,p)},I.isEqualWith=function jb(h,p,w){var C=(w="function"==typeof w?w:B)?w(h,p):B;return C===B?Oh(h,p,B,w):!!C},I.isError=cy,I.isFinite=function cL(h){return"number"==typeof h&&la(h)},I.isFunction=Gs,I.isInteger=$b,I.isLength=Zh,I.isMap=Rp,I.isMatch=function qb(h,p){return h===p||Zf(h,p,Gh(p))},I.isMatchWith=function Pp(h,p,w){return w="function"==typeof w?w:B,Zf(h,p,Gh(p),w)},I.isNaN=function Kh(h){return hy(h)&&h!=+h},I.isNative=function Xb(h){if(gb(h))throw new Ut("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Yw(h)},I.isNil=function Op(h){return null==h},I.isNull=function uy(h){return null===h},I.isNumber=hy,I.isObject=ei,I.isObjectLike=hi,I.isPlainObject=$l,I.isRegExp=ql,I.isSafeInteger=function lT(h){return $b(h)&&h>=-ra&&h<=ra},I.isSet=dy,I.isString=Lp,I.isSymbol=ws,I.isTypedArray=_u,I.isUndefined=function Yb(h){return h===B},I.isWeakMap=function Zb(h){return hi(h)&&Wi(h)==zc},I.isWeakSet=function Np(h){return hi(h)&&"[object WeakSet]"==Nr(h)},I.join=function JO(h,p){return null==h?"":Xc.call(h,p)},I.kebabCase=TT,I.last=Qn,I.lastIndexOf=function W_(h,p,w){var C=null==h?0:h.length;if(!C)return-1;var D=C;return w!==B&&(D=(D=Xt(w))<0?li(C+D,0):cr(D,C-1)),p==p?function Ah(Y,ue,oe){for(var Ge=oe+1;Ge--;)if(Y[Ge]===ue)return Ge;return Ge}(h,p,D):l_(h,If,D,!0)},I.lowerCase=AT,I.lowerFirst=DT,I.lt=fy,I.lte=yu,I.max=function Py(h){return h&&h.length?jf(h,Mr,x_):B},I.maxBy=function Oy(h,p){return h&&h.length?jf(h,xt(p,2),x_):B},I.mean=function $p(h){return Sh(h,Mr)},I.meanBy=function wL(h,p){return Sh(h,xt(p,2))},I.min=function Ly(h){return h&&h.length?jf(h,Mr,Lh):B},I.minBy=function od(h,p){return h&&h.length?jf(h,xt(p,2),Lh):B},I.stubArray=wx,I.stubFalse=bx,I.stubObject=function Wp(){return{}},I.stubString=function BT(){return""},I.stubTrue=function Ay(){return!0},I.multiply=VT,I.nth=function hu(h,p){return h&&h.length?Yr(h,Xt(p)):B},I.noConflict=function NT(){return vr._===this&&(vr._=wt),this},I.noop=rd,I.now=Yh,I.pad=function cx(h,p,w){h=gn(h);var C=(p=Xt(p))?Dl(h):0;if(!p||C>=p)return h;var D=(p-C)/2;return op(zi(D),w)+h+op(Ha(D),w)},I.padEnd=function _L(h,p,w){h=gn(h);var C=(p=Xt(p))?Dl(h):0;return p&&C<p?h+op(p-C,w):h},I.padStart=function yL(h,p,w){h=gn(h);var C=(p=Xt(p))?Dl(h):0;return p&&C<p?op(p-C,w)+h:h},I.parseInt=function td(h,p,w){return w||null==p?p=0:p&&(p=+p),Si(gn(h).replace(xf,""),p||0)},I.random=function ET(h,p,w){if(w&&"boolean"!=typeof w&&Qi(h,p,w)&&(p=w=B),w===B&&("boolean"==typeof p?(w=p,p=B):"boolean"==typeof h&&(w=h,h=B)),h===B&&p===B?(h=0,p=1):(h=ya(h),p===B?(p=h,h=0):p=ya(p)),h>p){var C=h;h=p,p=C}if(w||h%1||p%1){var D=Zc();return cr(h+D*(p-h+xO("1e-"+((D+"").length-1))),p)}return Qf(h,p)},I.reduce=function Q_(h,p,w){var C=Bt(h)?Df:Dw,D=arguments.length<3;return C(h,xt(p,4),w,D,Nl)},I.reduceRight=function YM(h,p,w){var C=Bt(h)?s_:Dw,D=arguments.length<3;return C(h,xt(p,4),w,D,rM)},I.repeat=function tt(h,p,w){return p=(w?Qi(h,p,w):p===B)?1:Xt(p),ep(gn(h),p)},I.replace=function nd(){var h=arguments,p=gn(h[0]);return h.length<3?p:p.replace(h[1],h[2])},I.result=function _y(h,p,w){var C=-1,D=(p=Bo(p,h)).length;for(D||(D=1,h=B);++C<D;){var L=null==h?B:h[Ur(p[C])];L===B&&(C=D,L=w),h=Gs(L)?L.call(h):L}return h},I.round=xx,I.runInContext=Y,I.sample=function KM(h){return(Bt(h)?_s:At)(h)},I.size=function QM(h){if(null==h)return 0;if(Sr(h))return Lp(h)?Dl(h):h.length;var p=Wi(h);return p==Qs||p==eo?h.size:Kf(h).length},I.snakeCase=ux,I.some=function Zr(h,p,w){var C=Bt(h)?o_:tu;return w&&Qi(h,p,w)&&(p=B),C(h,xt(p,3))},I.sortedIndex=function q_(h,p){return np(h,p)},I.sortedIndexBy=function pp(h,p,w){return E_(h,p,xt(w,2))},I.sortedIndexOf=function LM(h,p){var w=null==h?0:h.length;if(w){var C=np(h,p);if(C<w&&ao(h[C],p))return C}return-1},I.sortedLastIndex=function mp(h,p){return np(h,p,!0)},I.sortedLastIndexBy=function NM(h,p,w){return E_(h,p,xt(w,2),!0)},I.sortedLastIndexOf=function gp(h,p){if(null!=h&&h.length){var C=np(h,p,!0)-1;if(ao(h[C],p))return C}return-1},I.startCase=by,I.startsWith=function xy(h,p,w){return h=gn(h),w=null==w?0:Ya(Xt(w),0,h.length),p=vs(p),h.slice(w,w+p.length)==p},I.subtract=zT,I.sum=function HT(h){return h&&h.length?Va(h,Mr):0},I.sumBy=function Ny(h,p){return h&&h.length?Va(h,xt(p,2)):0},I.template=function IT(h,p,w){var C=I.templateSettings;w&&Qi(h,p,w)&&(p=B),h=gn(h),p=Jh({},p,C,lp);var j,J,D=Jh({},p.imports,C.imports,lp),L=er(D),U=Rf(D,L),pe=0,me=p.interpolate||Cf,xe="__p += '",$e=d_((p.escape||Cf).source+"|"+me.source+"|"+(me===Zg?NE:Cf).source+"|"+(p.evaluate||Cf).source+"|$","g"),lt="//# sourceURL="+(En.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wO+"]")+"\n";h.replace($e,function(Ct,Yt,cn,tr,vn,xs){return cn||(cn=tr),xe+=h.slice(pe,xs).replace(Kg,KE),Yt&&(j=!0,xe+="' +\n__e("+Yt+") +\n'"),vn&&(J=!0,xe+="';\n"+vn+";\n__p += '"),cn&&(xe+="' +\n((__t = ("+cn+")) == null ? '' : __t) +\n'"),pe=xs+Ct.length,Ct}),xe+="';\n";var bt=En.call(p,"variable")&&p.variable;if(bt){if(pw.test(bt))throw new Ut("Invalid `variable` option passed into `_.template`")}else xe="with (obj) {\n"+xe+"\n}\n";xe=(J?xe.replace(ME,""):xe).replace(TE,"$1").replace(AE,"$1;"),xe="function("+(bt||"obj")+") {\n"+(bt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(j?", __e = _.escape":"")+(J?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+xe+"return __p\n}";var Jt=mx(function(){return yn(L,lt+"return "+xe).apply(B,U)});if(Jt.source=xe,cy(Jt))throw Jt;return Jt},I.times=function Dy(h,p){if((h=Xt(h))<1||h>ra)return[];var w=Ao,C=cr(h,Ao);p=xt(p),h-=Ao;for(var D=h_(C,p);++w<h;)p(w);return D},I.toFinite=ya,I.toInteger=Xt,I.toLength=Jb,I.toLower=function dx(h){return gn(h).toLowerCase()},I.toNumber=Kr,I.toSafeInteger=function vu(h){return h?Ya(Xt(h),-ra,ra):0===h?h:0},I.toString=gn,I.toUpper=function fx(h){return gn(h).toUpperCase()},I.trim=function Up(h,p,w){if((h=gn(h))&&(w||p===B))return Rw(h);if(!h||!(p=vs(p)))return h;var C=Us(h),D=Us(p);return Fl(C,Eh(C,D),Pf(C,D)+1).join("")},I.trimEnd=function vL(h,p,w){if((h=gn(h))&&(w||p===B))return h.slice(0,Of(h)+1);if(!h||!(p=vs(p)))return h;var C=Us(h);return Fl(C,0,Pf(C,Us(p))+1).join("")},I.trimStart=function Cy(h,p,w){if((h=gn(h))&&(w||p===B))return h.replace(xf,"");if(!h||!(p=vs(p)))return h;var C=Us(h);return Fl(C,Eh(C,Us(p))).join("")},I.truncate=function RT(h,p){var w=30,C="...";if(ei(p)){var D="separator"in p?p.separator:D;w="length"in p?Xt(p.length):w,C="omission"in p?vs(p.omission):C}var L=(h=gn(h)).length;if(oa(h)){var U=Us(h);L=U.length}if(w>=L)return h;var j=w-Dl(C);if(j<1)return C;var J=U?Fl(U,0,j).join(""):h.slice(0,j);if(D===B)return J+C;if(U&&(j+=J.length-j),ql(D)){if(h.slice(j).search(D)){var pe,me=J;for(D.global||(D=d_(D.source,gn(Io.exec(D))+"g")),D.lastIndex=0;pe=D.exec(me);)var xe=pe.index;J=J.slice(0,xe===B?j:xe)}}else if(h.indexOf(vs(D),j)!=j){var $e=J.lastIndexOf(D);$e>-1&&(J=J.slice(0,$e))}return J+C},I.unescape=function Sy(h){return(h=gn(h))&&dO.test(h)?h.replace(ow,Ow):h},I.uniqueId=function Iy(h){var p=++eM;return gn(h)+p},I.upperCase=px,I.upperFirst=Bp,I.each=K_,I.eachRight=J_,I.first=G_,Ty(I,function(){var h={};return fa(I,function(p,w){En.call(I.prototype,w)||(h[w]=p)}),h}(),{chain:!1}),I.VERSION="4.17.21",jn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){I[h].placeholder=I}),jn(["drop","take"],function(h,p){$t.prototype[h]=function(w){w=w===B?1:li(Xt(w),0);var C=this.__filtered__&&!p?new $t(this):this.clone();return C.__filtered__?C.__takeCount__=cr(w,C.__takeCount__):C.__views__.push({size:cr(w,Ao),type:h+(C.__dir__<0?"Right":"")}),C},$t.prototype[h+"Right"]=function(w){return this.reverse()[h](w).reverse()}}),jn(["filter","map","takeWhile"],function(h,p){var w=p+1,C=1==w||3==w;$t.prototype[h]=function(D){var L=this.clone();return L.__iteratees__.push({iteratee:xt(D,3),type:w}),L.__filtered__=L.__filtered__||C,L}}),jn(["head","last"],function(h,p){var w="take"+(p?"Right":"");$t.prototype[h]=function(){return this[w](1).value()[0]}}),jn(["initial","tail"],function(h,p){var w="drop"+(p?"":"Right");$t.prototype[h]=function(){return this.__filtered__?new $t(this):this[w](1)}}),$t.prototype.compact=function(){return this.filter(Mr)},$t.prototype.find=function(h){return this.filter(h).head()},$t.prototype.findLast=function(h){return this.reverse().find(h)},$t.prototype.invokeMap=Kt(function(h,p){return"function"==typeof h?new $t(this):this.map(function(w){return Yf(w,h,p)})}),$t.prototype.reject=function(h){return this.filter(Tp(xt(h)))},$t.prototype.slice=function(h,p){h=Xt(h);var w=this;return w.__filtered__&&(h>0||p<0)?new $t(w):(h<0?w=w.takeRight(-h):h&&(w=w.drop(h)),p!==B&&(w=(p=Xt(p))<0?w.dropRight(-p):w.take(p-h)),w)},$t.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},$t.prototype.toArray=function(){return this.take(Ao)},fa($t.prototype,function(h,p){var w=/^(?:filter|find|map|reject)|While$/.test(p),C=/^(?:head|last)$/.test(p),D=I[C?"take"+("last"==p?"Right":""):p],L=C||/^find/.test(p);D&&(I.prototype[p]=function(){var U=this.__wrapped__,j=C?[1]:arguments,J=U instanceof $t,pe=j[0],me=J||Bt(U),xe=function(Yt){var cn=D.apply(I,Po([Yt],j));return C&&$e?cn[0]:cn};me&&w&&"function"==typeof pe&&1!=pe.length&&(J=me=!1);var $e=this.__chain__,bt=L&&!$e,Jt=J&&!this.__actions__.length;if(!L&&me){U=Jt?U:new $t(this);var Ct=h.apply(U,j);return Ct.__actions__.push({func:vp,args:[xe],thisArg:B}),new Xr(Ct,$e)}return bt&&Jt?h.apply(this,j):(Ct=this.thru(xe),bt?C?Ct.value()[0]:Ct.value():Ct)})}),jn(["pop","push","shift","sort","splice","unshift"],function(h){var p=Nf[h],w=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",C=/^(?:pop|shift)$/.test(h);I.prototype[h]=function(){var D=arguments;if(C&&!this.__chain__){var L=this.value();return p.apply(Bt(L)?L:[],D)}return this[w](function(U){return p.apply(Bt(U)?U:[],D)})}}),fa($t.prototype,function(h,p){var w=I[p];if(w){var C=w.name+"";En.call(jt,C)||(jt[C]=[]),jt[C].push({name:p,func:w})}}),jt[kn(B,2).name]=[{name:"wrapper",func:B}],$t.prototype.clone=function Vf(){var h=new $t(this.__wrapped__);return h.__actions__=xr(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=xr(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=xr(this.__views__),h},$t.prototype.reverse=function no(){if(this.__filtered__){var h=new $t(this);h.__dir__=-1,h.__filtered__=!0}else(h=this.clone()).__dir__*=-1;return h},$t.prototype.value=function g_(){var h=this.__wrapped__.value(),p=this.__dir__,w=Bt(h),C=p<0,D=w?h.length:0,L=function GO(h,p,w){for(var C=-1,D=w.length;++C<D;){var L=w[C],U=L.size;switch(L.type){case"drop":h+=U;break;case"dropRight":p-=U;break;case"take":p=cr(p,h+U);break;case"takeRight":h=li(h,p-U)}}return{start:h,end:p}}(0,D,this.__views__),U=L.start,j=L.end,J=j-U,pe=C?j:U-1,me=this.__iteratees__,xe=me.length,$e=0,lt=cr(J,this.__takeCount__);if(!w||!C&&D==J&&lt==J)return Ji(h,this.__actions__);var bt=[];e:for(;J--&&$e<lt;){for(var Jt=-1,Ct=h[pe+=p];++Jt<xe;){var Yt=me[Jt],tr=Yt.type,vn=(0,Yt.iteratee)(Ct);if(2==tr)Ct=vn;else if(!vn){if(1==tr)continue e;break e}}bt[$e++]=Ct}return bt},I.prototype.at=Y_,I.prototype.chain=function nL(){return WM(this)},I.prototype.commit=function iL(){return new Xr(this.value(),this.__chain__)},I.prototype.next=function Z_(){this.__values__===B&&(this.__values__=Kb(this.value()));var h=this.__index__>=this.__values__.length;return{done:h,value:h?B:this.__values__[this.__index__++]}},I.prototype.plant=function sL(h){for(var p,w=this;w instanceof Ki;){var C=Gl(w);C.__index__=0,C.__values__=B,p?D.__wrapped__=C:p=C;var D=C;w=w.__wrapped__}return D.__wrapped__=h,p},I.prototype.reverse=function oL(){var h=this.__wrapped__;if(h instanceof $t){var p=h;return this.__actions__.length&&(p=new $t(this)),(p=p.reverse()).__actions__.push({func:vp,args:[$_],thisArg:B}),new Xr(p,this.__chain__)}return this.thru($_)},I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=function aL(){return Ji(this.__wrapped__,this.__actions__)},I.prototype.first=I.prototype.head,Ih&&(I.prototype[Ih]=function rL(){return this}),I}();vr._=Lf,(Sn=function(){return Lf}.call(Nc,hf,Nc,Js))!==B&&(Js.exports=Sn)}.call(this)},147:Js=>{"use strict";Js.exports={i8:"0.0.38"}}},Js=>{Js(Js.s=930)}]);